<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>mMeddle Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cosmo.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">mMeddle</a>
	</div>
	<div class="navbar-collapse">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-util_Logger-PRIORITY.html">util/Logger~PRIORITY</a></li><li><a href="module-util_log-mm.loggers.html">util/log~mm.loggers</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-mMeddle.html">mMeddle</a></li><li><a href="module-sal_storage.html">sal/storage</a></li><li><a href="module-sal_users.html">sal/users</a></li><li><a href="module-util_log.html">util/log</a></li><li><a href="module-util_Logger.html">util/Logger</a></li><li><a href="module-util_SequencedObject.html">util/SequencedObject</a></li><li><a href="module-util_Settings.html">util/Settings</a></li><li><a href="module-util_uIntArray.html">util/uIntArray</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-sal_users-PersistentUser.html">sal/users~PersistentUser</a></li><li><a href="module-sal_users-User.html">sal/users~User</a></li><li><a href="module-util_Logger-Logger.html">util/Logger~Logger</a></li><li><a href="module-util_SequencedObject-SequencedObject.html">util/SequencedObject~SequencedObject</a></li><li><a href="module-util_Settings-Settings.html">util/Settings~Settings</a></li>
				</ul>
			</li>
			
		</ul>
	</div>
</div>
</div>


<div class="container">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
    		<h1 class="page-title">Index</h1>
			

	
	<span class="page-title">Index</span>
	
	











	
	





    <section class="readme-section">
        <article><h1>mMeddle Developer's Guide</h1><p><a href="https://travis-ci.org/jfogarty/mmeddle"><img src="https://img.shields.io/travis/jfogarty/mmeddle.svg?branch=master" alt="Build Status"></a> 
<a href="https://coveralls.io/r/jfogarty/mmeddle"><img src="https://img.shields.io/coveralls/jfogarty/mmeddle.svg" alt="Coveralls Status"></a>
<a href="https://www.npmjs.com/package/mmeddle"><img src="https://badge.fury.io/js/mmeddle.svg" alt="NPM version"></a>
<a href="https://david-dm.org/jfogarty/mmeddle"><img src="https://david-dm.org/jfogarty/mmeddle.svg" alt="Dependency Status"></a></p>
<p><a href="https://github.com/jfogarty/mmeddle">https://github.com/jfogarty/mmeddle</a></p>
<p><img src="../images/art/mathart2.png" alt="backgound math art"></p>
<p><code>mmeddle.js</code> is a symbolic math workspace for browsers and Node.js. It features pluggable types, operators, units, and functions.</p>
<h1>mMeddle IS NOT YET OPEN FOR DEVELOPMENT</h1><h3>move along please, these aren't the droids you're looking for...</h3><p><a href="https://nodei.co/npm/mmeddle/"><img src="https://nodei.co/npm/mmeddle.png?compact=true" alt="NPM NODE ICON"></a></p>
<p>This library is the headless workhorse for maintaining <em>mMeddle</em> documents, 
and performing symbolic math operations. It runs in backend servers as
an <strong>Express</strong> application using a <strong>MongoDB</strong> database for primary storage. 
The same engine runs in browsers as a minified script as part of the <em>mMeddler</em>
SPA (single page application).</p>
<p>This document provides a developer's overview for building and testing mmeddle bits.
For code structure documents, you can read the README.md files in each source directory
and build the <code>docs/src/index.html</code> for the generated API as described here.</p>
<h2>That Vision Thing</h2><p>The grand plan (or pipe dream) is for <em>mMeddle</em> to become a community service
which loads the <em>mMeddler</em> SPA user interface to client pads and computers.
<em>mMeddler</em> users will write their own math-based documents using standard
mathematical notations, manipulate equations using drag and drop based symbolic
algebra, and produce numerical results in the form of values, graphs and tables.</p>
<p>The backend service will maintain a cloud of private and public symbolic math
documents organized by scientific, engineering, mathematical, and pedegogical topics.
Math inclined programmers will extend the nature of the maths that we can handle,
while subject matter experts will publish and edit live documents containing equations, expanations, problems, and solutions. Student, teachers, geeks and the strangely
curious will have access to a level of math that has mostly been out of reach
through layers of technical barriers. A golden age will flourish and all world problems
will be solved as a direct result of your hard work on this bucket of code. </p>
<h2>Structure</h2><p><em>mMeddle</em> is structured as a single main module <code>mmeddle</code> which contains 
bindings between the other modules. Modules within sub-directories usually contain no <em>requires</em> statements unless they are to anode_module (preferably
one which is in some way unique to a single module) or to a sub-directory
from the one containing the module. <code>require(&quot;..\[a modulename]&quot;)</code> 
is <strong>not</strong> permitted in this code.</p>
<p>Isolating the bindings between modules to a single outer level module 
greatly eases restructuring and module substitution for the various 
environments in which mmeddle must run.</p>
<h2>Building</h2><p>Gulp and a <code>gulpfile.js</code> provide the build and test environment:</p>
<pre class="prettyprint source"><code>gulp</code></pre><p>This runs the gulpfile.js <code>default</code> task which performs verification tests,
then builds and packages the various forms of the library.</p>
<p>The build steps are currently:</p>
<table>
<thead>
<tr>
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>test</strong></td>
<td>do the node.js Mocha BDD BVTs tests using a mock SAL (service abstraction layer)</td>
</tr>
<tr>
<td><strong>lint</strong></td>
<td>jshint the source using <code>.jshintrc</code> rules</td>
</tr>
<tr>
<td><strong>clean</strong></td>
<td>delete the <code>./dist</code> directory contents</td>
</tr>
<tr>
<td><strong>bundle</strong></td>
<td><strong>WebPack</strong> the client for use in a browser</td>
</tr>
<tr>
<td><strong>minify</strong></td>
<td>make a .min version for reasonable load times</td>
</tr>
<tr>
<td><strong>testb</strong></td>
<td>run the browser BVTs using a <strong>PhantomJS</strong> headless browser</td>
</tr>
</tbody>
</table>
<h2>Testing</h2><p>Testing is primariy done with a set of <strong>Mocha</strong> tests using the <strong>BDD</strong> (behavior
driven development) style. Developers are strongly encouraged to use this style
for their own tests. All integrations require passing tests. Note the boilerplate
code in the top of <code>test.*js</code> files to allow the same tests to run in your browser,
the <strong>PhantomJS</strong> headless browser, and <strong>node.js</strong>.</p>
<p>To run the <strong>BVT</strong>s (base verification tests) use:</p>
<pre class="prettyprint source"><code>gulp test</code></pre><p>During development continuous tests on every source change is enabled with:</p>
<pre class="prettyprint source"><code>gulp watch</code></pre><p>Note that <code>gulp watchb</code> does continuous PhantomJS browser based testing but is
more annoying since the bundled mmeddle.js must be rebuilt on every source change.</p>
<p>Every test <strong>.js</strong> source file starts with a <code>test.</code> prefix.  </p>
<h2>Browser Testing</h2><p>Browser BVT tests are started from <code>test\testMocha.html</code>.</p>
<h3>Code Coverage</h3><p>If you are using test driven development rather than writing all your tests
after your code has lumbered into life, its easy to keep your coverage numbers
up. Check the current coverage using:</p>
<pre class="prettyprint source"><code>gulp coverage</code></pre><p>This runs the <strong>istanbul</strong> code coverage tool against the Mocha test suite.  You can
examine the annotated source by browsing to <code>./coverage/lcov-report/index.html</code> or run</p>
<pre class="prettyprint source"><code>gulp showcoverage</code></pre><p>We want our code coverage numbers over <strong>90%</strong>, so don't be shy about addng test cases.</p>
<h3>Testing With Persistent Data</h3><p>You'll probably quickly get tired of testing without any persistent data. The next step
is to enable the local filesystem Storage SAL plugin: <code>storageFs</code>. When that gets old, install
a <a href="https://www.mongodb.org/downloads">MongoDB server</a> and enable the <code>storageMongoDB</code> Storage
SAL plugin.</p>
<h2>Local Execution</h2><p>The mMeddle server (server.js) is started in the traditional way with:</p>
<pre class="prettyprint source"><code>npm start</code></pre><p>By default the is an <code>Express</code> web server which exposes the entire development
tree as static content on <strong>localhost:8080</strong>. The <code>index.html</code> page has links
to various things of interest.</p>
<h2>Cloud Build Automation</h2><p>The <a href="https://github.com/jfogarty/mmeddle">github/mmeddle</a> repository is linked
to the <a href="https://travis-ci.org/jfogarty/mmeddle">Travis-CI/mmeddle</a> service. Every commit
pushed to the <strong>master</strong> branch triggers an npm install and cloud build of the 
default <strong>npm test</strong> (gulp test task). When this succeeds <strong>gulp coverage</strong> is run,
and the new code coverage statistics are pushed to
<a href="https://coveralls.io/r/jfogarty/mmeddle">coveralls/mmeddle</a>. The build and code
coverage push update the little badges in the upper left corner of the README.md in
the project root. These should of course stay green.</p>
<p>mMeddle is currently hosted at RedHat's OpenShift node.js service at
<a href="http://mmeddle-jfogarty.rhcloud.com/">openShift/mmeddle</a>. 
This hosts a MongoDB database for the test service. This database is firewalled
and can't be accessed from outside, although you can ssh to the server and
run the mongo cli from the shell.</p>
<p>We are currently not automatically pushing <em>mMeddle</em> to the test service, so I
do that when I'm happy with the current state of the build. At some point we can
turn on automatic pushing directly from <a href="https://travis-ci.org">Travis-CI</a> since
it has built-in OpenShift support.</p>
<p>For most testing we use a globally accessible MongoDB
test database at <a href="https://mongolab.com/">MongoLab</a> 
named <a href="https://mongolab.com/databases/mmspace"><code>mmSpace</code></a>.<br>This is accessed using a connection URL or mongo CLI that looks a lot like:</p>
<pre class="prettyprint source"><code>mongodb://&lt;dbuser>:(&lt;dbpassword>)@ds061621.mongolab.com:61621/mmspace
mongo ds061621.mongolab.com:61621/mmspace -u &lt;dbuser> -p &lt;dbpassword></code></pre><p>Contact me at <a href="mailto:johnhenryfogarty@gmail.com">johnhenryfogarty@gmail.com</a>
once you have a commit under your belt if you need access to the test database.
The database is small (limited to 500MB) and I can't  guarantee any
kind of stabiliy to its structure or contents for some time to come.</p>
<h2>Documentation</h2><p>Documentation is mostly generated from the source using jsdoc tags throughout
the code. The task to build the docs is:</p>
<pre class="prettyprint source"><code>gulp docs</code></pre><p>Each <code>./src</code> directory contains its own <strong>README.md</strong> markdown document which
provides a <strong>short</strong> overview on the structure and use of the source in broad 
terms. This should not restate the jsdoc and should try not be more than a
page long. </p>
<p>The generated docs can be accessed via <a href="../api/index.html">../api/index.html</a>.</p>
<h2>Debugging</h2><p>Sometimes you've got no choice.</p>
<h3>Debugging Unit Tests</h3><p>I debug unit tests for node using node-inspector on Chrome on a Windows system, so your experience may differ.  Start <code>node-inspector</code> in its own shell and leave it running, then:</p>
<pre class="prettyprint source"><code>node-debug --debug-brk node_modules\mocha\bin\_mocha -u bdd -r should</code></pre><p>The <code>_mocha</code> selects the <em>real</em> .js file for the mocha engine, instead of the stub that launches a separate test process. Note that there are a lot of checked exceptions thrown and there is a timer used by mocha that may annoy you. Often it is easier to just debug an scratch function without having the Mocha infrastructure getting in the way.</p>
<p><strong>Note:</strong> My console log always starts with the message:</p>
<blockquote>
<p>Error: Injection failed: no require in current frame</p>
</blockquote>
<p>I ignore this but, nothing bad seems to happen. This may be related to 
<a href="https://github.com/node-inspector/node-inspector">node-inspector broken</a> : 
(<em>Node Inspector is currently broken on Node &gt;= v0.11.14</em>)
since I am currently debugging under node 0.12.0. It is flakey, but usually
gets the job done. Good luck.</p>
<p><img src="../images/dev/BrowserMocha-NodeInspectorDebug.jpg" alt="Node Inspector Screen Capture"></p>
<h3>Debugging Browser Unit Tests</h3><p>Debugging for the browser consists of opening <code>test\testMocha.html</code> under your favorite browser and using its script debugging tools. I prefer <strong>Mozilla Firefox</strong> with the <strong>Firebug console</strong> add-in. Don't forget to run the <strong>gulp bundle</strong> task first or you will be debugging an old version (I've never done that).</p>
<p>The Mocha page is nice in that you can select and drill down into test suites anmd rerun the tests individually. Clicking a test's <strong>it()</strong> text shows the source of the test.</p>
<h2>Windows Development (sigh)</h2><p>I write code on Windows and need to keep the development environment Windows friendly (or
at least no more unfriendly than necessary). </p>
<p>In <strong>git config</strong> if you use Windows, you should set</p>
<pre class="prettyprint source"><code>git config core.autocrlf input</code></pre><p>The files in the repository should not contain CRLF endings, and you should use an
editor on Windows that doesn't put them on by default (I use Notepad++).</p>
<p>I use <strong>gulp</strong> and put some effort into making sure that any scripts are equivalent
on Windows and *nix versions. The Travis-CI integration service helps with this.</p>
<h2>.</h2></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3"></div>
		</div>
	

</div>
</div>


<footer>


	<span class="copyright">
	All rights reserved - Copyright 2015
	</span>
	<br />

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a>
	on Sun Apr 26th 2015 using the <a
	href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
</span>
</footer>

<!--<script src="scripts/sunlight.js"></script>-->
<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/bootstrap-dropdown.js"></script>
<script src="scripts/toc.js"></script>

<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "h1,h2,h3,h4",
		showAndHide : false,
		scrollTo    : "100px"
	} );

	$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();
	//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			lang = "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );
} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->


</body>
</html>