/**
 * mmeddle.js 
 * https://github.com/jfogarty/mmeddle
 *
 * mmeddle.js is a symbolic math workspace for JavaScript and Node.js.
 *
 * @version 0.1.3
 * @date    2015-06-21
 *
 * @license
 * Copyright (C) 2015 John Fogarty <johnhenryfogarty@gmail.com> (https://github.com/jfogarty)
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define(factory);else if(typeof exports==="object")exports["mmeddle"]=factory();else root["mmeddle"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){(function(process,__dirname,global){"use strict";module.exports=function mMeddleCreate(){var mm={};if(typeof Object.create!=="function"){throw new Error("ES5 not supported by this JavaScript engine. "+"Please load the es5-shim and es5-sham library for compatibility.")}var inNode=!!(typeof window==="undefined"&&typeof process!=="undefined"&&process.nextTick);var inBrowser=!inNode;var inPhantom=false;mm.check=function(v){if(typeof v==="undefined"||!v){console.log("*** Uninitialized mMeddle linkage. Abandon all hope.");throw new Error("Uninitialized mMeddle linkage. Abandon all hope.")}return v};mm._=__webpack_require__(10);mm.Q=__webpack_require__(14);mm.Q.longStackSupport=true;mm.socketClient={};mm.socketClient.io=__webpack_require__(15);mm.socketServer={};mm.config={};mm.config.appName="(none)";mm.config.inBrowser=inBrowser;mm.config.inNode=inNode;mm.config.socketIoLogLevel=2;mm.envText=inNode?"Node.js":"Browser";mm.path=__webpack_require__(8);mm.config.baseDir=__dirname;mm.config.openShiftHost="mmeddle-jfogarty.rhcloud.com";mm.config.localHost="127.0.0.1";mm.config.localUrl="http://"+mm.config.localHost+":8080";mm.config.remoteUrl="ws://mmeddle-jfogarty.rhcloud.com:8000/";if(inNode){mm.config.baseDir=mm.path.join(__dirname,"..");mm.fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());mm.del=__webpack_require__(11);mm.mkdirp=__webpack_require__(12);mm.socketServer.io=__webpack_require__(13)}else{mm.window=window;mm.document=document}if(inBrowser){var userAgent=navigator.userAgent;inPhantom=userAgent.indexOf("PhantomJS")>=0;mm.config.inPhantom=inPhantom;if(inPhantom){mm.envText+="-PhantomJS"}mm.envText+="("+userAgent+")"}else{mm.config.mainFilename=process.mainModule.filename;mm.config.appName=mm.path.basename(mm.config.mainFilename,".js");mm.envText+="("+global.process.version+")"}mm.format=mm.check(__webpack_require__(2));__webpack_require__(3)(mm);mm.config.openShift=mm.util.ifEnvOption("OPENSHIFT_NODEJS_IP");mm.config=(new mm.obj.Config).init(mm.config);__webpack_require__(4)(mm);__webpack_require__(5)(mm);if(inNode){__webpack_require__(6)(mm);mm.log.setupAppDebugLog(mm.config.appName);mm.config=mm.config.appLoad(mm.config.appName)}__webpack_require__(7)(mm);mm.log("- mMeddle "+mm.config.appName+" "+mm.envText+" initialized.");return mm}()}).call(exports,__webpack_require__(9),"/",function(){return this}())},function(module,exports,__webpack_require__){(function(Buffer){"use strict";module.exports=function(){var shortDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var months=["January","February","March","April","May","June","July","August","September","October","November","December"];function padLeft(str,char,totalWidth){while(str.length<totalWidth){str=char+str}return str}function padRight(str,char,totalWidth){while(str.length<totalWidth){str=str+char}return str}function formatNumber(num,format){format=format||"0";if(format==="0"){return num.toString()}var hex=format.match(/^([xX])([0-9]*)$/);if(hex){var str=num.toString(16);if(hex[1]=="x"){str=str.toLowerCase()}else{str=str.toUpperCase()}var width=parseInt(hex[2]);str=padLeft(str,"0",width);return str}var negative=false;if(num<0){num=-num;negative=true}var addPositiveSign=false;if(format.match(/^\+/)){format=format.substr(1);addPositiveSign=true}var formatParts=format.split(".");var formatBeforeDecimal=formatParts[0];var wholeNumber=Math.floor(num);var decimalVal=num-wholeNumber;var result="";var wholeNumberStr=wholeNumber.toString();var formatIdx,numberIdx;for(formatIdx=formatBeforeDecimal.length-1,numberIdx=wholeNumberStr.length-1;numberIdx>=0||formatIdx>=0;formatIdx--){if(formatIdx<0&&numberIdx>=0){result=wholeNumberStr[numberIdx--]+result;continue}if(formatBeforeDecimal[formatIdx]=="0"||formatBeforeDecimal[formatIdx]=="#"){if(numberIdx>=0){result=wholeNumberStr[numberIdx--]+result}else{if(formatBeforeDecimal[formatIdx]=="#"){break}result="0"+result}continue}result=formatBeforeDecimal[formatIdx]+result}result=result.replace(/^[^0-9]+/,"");if(formatParts.length>1){var formatAfterDecimal=formatParts[1];var decimalValStr=decimalVal.toString().substr(2);result+=".";for(formatIdx=0,numberIdx=0;formatIdx<formatAfterDecimal.length;formatIdx++){if(formatAfterDecimal[formatIdx]=="0"||formatAfterDecimal[formatIdx]=="#"){if(numberIdx<decimalValStr.length){result+=decimalValStr[numberIdx++]}else{if(formatAfterDecimal[formatIdx]=="#"){break}result+="0"}}else{result+=formatAfterDecimal[formatIdx]}}}if(result[result.length-1]=="."){result=result.substr(0,result.length-1)}if(negative){result="-"+result}if(!negative&&addPositiveSign){result="+"+result}return result}function formatTimeSpanPart(timeSpan,format,width){var formatStr="{0:";for(var i=0;i<width;i++){formatStr+="0"}formatStr+="}";switch(format){case"y":return sf(formatStr,timeSpan.years);case"M":return sf(formatStr,timeSpan.months);case"d":return sf(formatStr,timeSpan.days);case"h":return sf(formatStr,timeSpan.hours);case"m":return sf(formatStr,timeSpan.minutes);case"s":return sf(formatStr,timeSpan.seconds);case"f":return sf(formatStr,timeSpan.milliseconds);case"^y":return sf(formatStr,timeSpan.totalYears);case"^M":return sf(formatStr,timeSpan.totalMonths);case"^d":return sf(formatStr,timeSpan.totalDays);case"^h":return sf(formatStr,timeSpan.totalHours);case"^m":return sf(formatStr,timeSpan.totalMinutes);case"^s":return sf(formatStr,timeSpan.totalSeconds);case"^f":return sf(formatStr,timeSpan.totalMilliseconds);default:throw new Error("unhandled time span format '"+format+"'")}}function formatTimeSpan(timespan,format){if(!format||format===""){return timespan.toString()}var formats=["y","M","d","h","m","s","f"];var result="";var i;var totalCount;while(format.length>0){if(format[0]==="'"){var nextTick=format.indexOf("'",1);result+=format.substring(1,nextTick);format=format.substring(nextTick+1);continue}if(format.length>1&&format[0]==="^"){totalCount=true;format=format.substring(1)}else{totalCount=false}for(i=0;i<formats.length;i++){if(format.indexOf(formats[i])===0){var width=0;while(format.indexOf(formats[i])===0){width++;format=format.substring(formats[i].length)}result+=formatTimeSpanPart(timespan,(totalCount?"^":"")+formats[i],width);break}}if(i<formats.length){continue}result+=format[0];format=format.substring(1)}return result}function formatDatePart(date,format){switch(format){case"sd":return sf("{0:M}/{0:d}/{0:yyyy}",date);case"D":return sf("{0:MMMM} {0:dd}, {0:yyyy}",date);case"t":return sf("{0:hh}:{0:mm} {0:tt}",date);case"T":return sf("{0:hh}:{0:mm}:{0:ss} {0:tt}",date);case"fdt":return sf("{0:D} {0:t}",date);case"F":return sf("{0:D} {0:T}",date);case"g":return sf("{0:sd} {0:t}",date);case"G":return sf("{0:sd} {0:T}",date);case"md":return sf("{0:MMMM} {0:dd}",date);case"r":return sf("{0:ddd}, {0:dd} {0:MMM} {0:yyyy} {0:HH}:{0:mm}:{0:ss} {0:+zzzz}",date);case"s":return sf("{0:yyyy}-{0:MM}-{0:dd}:{0:HH}:{0:mm}:{0:ss}",date);case"d":return sf("{0:#0}",date.getDate());case"dd":return sf("{0:00}",date.getDate());case"ddd":return shortDays[date.getDay()];case"dddd":return days[date.getDay()];case"f":return sf("{0:0}",date.getMilliseconds()/100);case"ff":return sf("{0:00}",date.getMilliseconds()/10);case"fff":return sf("{0:000}",date.getMilliseconds()/1);case"h":var hours_h=date.getHours()%12;return sf("{0:#0}",hours_h==0?12:hours_h);case"hh":var hours_hh=date.getHours()%12;return sf("{0:00}",hours_hh==0?12:hours_hh);case"H":return sf("{0:#0}",date.getHours());case"HH":return sf("{0:00}",date.getHours());case"mm":return sf("{0:00}",date.getMinutes());case"M":return sf("{0:#0}",date.getMonth()+1);case"MM":return sf("{0:00}",date.getMonth()+1);case"MMM":return shortMonths[date.getMonth()];case"MMMM":return months[date.getMonth()];case"ss":return sf("{0:00}",date.getSeconds());case"tt":return date.getHours()>=12?"PM":"AM";case"yy":return getYear(date).toString().substr(2);case"yyyy":return getYear(date);case"zz":return sf("{0:00}",Math.floor(date.getTimezoneOffset()/60));case"+zz":return sf("{0:+00}",Math.floor(date.getTimezoneOffset()/60));case"zzz":var wholeTimezoneOffset=Math.floor(date.getTimezoneOffset()/60);return sf("{0:00}:{1:00}",wholeTimezoneOffset,date.getTimezoneOffset()-wholeTimezoneOffset*60);case"zzzz":var wholeTimezoneOffset=Math.floor(date.getTimezoneOffset()/60);return sf("{0:00}{1:00}",wholeTimezoneOffset,date.getTimezoneOffset()-wholeTimezoneOffset*60);case"+zzzz":var wholeTimezoneOffset=Math.floor(date.getTimezoneOffset()/60);return sf("{0:+00}{1:00}",wholeTimezoneOffset,date.getTimezoneOffset()-wholeTimezoneOffset*60);default:throw new Error("unhandled date format '"+format+"'")}}function getYear(date){return date.getYear()+1900}function formatDate(date,format){if(!format||format===""){return date}var formats=["sd","fdt","md","dddd","ddd","dd","d","D","fff","ff","f","F","g","G","hh","h","HH","H","mm","MMMM","MMM","MM","M","r","ss","s","tt","t","T","yyyy","yy","+zzzz","+zz","zzzz","zzz","zz"];var result="";var i;while(format.length>0){if(format[0]==="'"){var nextTick=format.indexOf("'",1);result+=format.substring(1,nextTick);format=format.substring(nextTick+1);continue}for(i=0;i<formats.length;i++){if(format.indexOf(formats[i])===0){result+=formatDatePart(date,formats[i]);format=format.substring(formats[i].length);break}}if(i<formats.length){continue}result+=format[0];format=format.substring(1)}return result}function formatObjectIndent(obj){if(!obj){return"null"}if(typeof obj!="object"){return obj.toString()}var results="";var keys=Object.keys(obj).sort();for(var i=0;i<keys.length;i++){results+=keys[i]+":";var val=obj[keys[i]];if(!val){results+="\n"}else if(val instanceof Buffer){var bufferContent="";for(var bufferIdx=0;bufferIdx<val.length;bufferIdx++){if(bufferIdx!==0){bufferContent+=", "}if(bufferIdx>=10){bufferContent+="...";break}bufferContent+=val[bufferIdx]}results+=" Buffer["+bufferContent+"] (length: "+val.length+")\n"}else if(val instanceof Date||isTimezoneJsDate(val)){results+=" "+formatDate(val,"r")+"\n"}else if(typeof val==="string"||typeof val==="number"||typeof val==="boolean"){results+=" "+val+"\n"}else{var str=formatObjectIndent(val);results+="\n"+sf.indent(str,{})+"\n"}}results=results.replace(/\s+$/,"");return results}function formatObject(obj,format){if(!format||format===""){return obj}if(format=="inspect"){return __webpack_require__(52).inspect(obj)}if(format=="json"){return JSON.stringify(obj)}if(format=="indent"){return formatObjectIndent(obj)}throw new Error("unhandled format: "+format)}function formatError(err,format){if(!format||format===""){return err.stack}if(format=="message"){return err.message}return formatObject(err,format)}function align(str,val){str=str||"";if(val<0){return padRight(str," ",Math.abs(val))}else if(val>0){return padLeft(str," ",val)}return str}function splitFieldName(fieldName){var results=[];var part="";for(var i=0;i<fieldName.length;){if(fieldName[i]=="."){results.push(part);part="";i++;continue}if(fieldName[i]=="["){results.push(part);part="[";i++;continue}part+=fieldName[i++]}results.push(part);return results}function getValue(args,fieldName){var fieldIndex=parseInt(fieldName);if(fieldIndex.toString()===fieldName){return args[fieldIndex+1]}else{var parts=splitFieldName(fieldName);var root=args[1];for(var i=0;i<parts.length;i++){var part=parts[i];if(part.length>=1&&part[0]=="?"){if(typeof root=="undefined"){return undefined}else{part=part.substr(1)}}if(part.length>=1&&part[0]=="["){part=part.substr(1,part.length-2);var strMatch=part.match(/^['"](.*)['"]$/);if(strMatch){root=root[strMatch[1]]}else if(part<0){part=-part;root=root[root.length-part]}else{root=root[part]}continue}root=root[part]}return root}}function sf(formatString){var result="";for(var i=0;i<formatString.length;){if(formatString[i]=="}"){i++;if(formatString[i]=="}"){result+="}";i++;continue}throw new Error("Unescaped substitution")}if(formatString[i]=="{"){var spec="";i++;if(formatString[i]=="{"){result+="{";i++;continue}for(;i<formatString.length;){if(formatString[i]=="}"){break}spec+=formatString[i++]}if(i==formatString.length){throw new Error("Unterminated substitution")}i++;var alignTokenLoc=spec.indexOf(",");var specTokenLoc;var alignVal=0;if(alignTokenLoc>0){specTokenLoc=spec.indexOf(":");if(specTokenLoc>0){if(alignTokenLoc<specTokenLoc){alignVal=spec.substr(alignTokenLoc+1,specTokenLoc-alignTokenLoc-1);spec=spec.substr(0,alignTokenLoc)+spec.substr(specTokenLoc)}}else{alignVal=spec.substr(alignTokenLoc+1);spec=spec.substr(0,alignTokenLoc)}}specTokenLoc=spec.indexOf(":");var fieldName,formatSpec;if(specTokenLoc>0){fieldName=spec.substr(0,specTokenLoc);formatSpec=spec.substr(specTokenLoc+1)}else{fieldName=spec;formatSpec=null}var val=getValue(arguments,fieldName);if(val instanceof sf.TimeSpan){result+=align(formatTimeSpan(val,formatSpec),alignVal)}else if(typeof val==="number"){result+=align(formatNumber(val,formatSpec),alignVal)}else if(val instanceof Date||isTimezoneJsDate(val)){result+=align(formatDate(val,formatSpec),alignVal)}else if(val instanceof Error){result+=align(formatError(val,formatSpec),alignVal)}else{result+=align(formatObject(val,formatSpec),alignVal)}}else{result+=formatString[i++]}}return result}function isTimezoneJsDate(date){return date&&date.hasOwnProperty("timezone")}function getStringLength(str,options){options.tabWidth=options.tabWidth||4;var tabStr=padLeft(""," ",options.tabWidth);str=str.replace(/\t/g,tabStr);return str.length}function isSpace(char){if(char.match(/\s/)){return true}return false}function isSplitable(char){if(isSpace(char)){return true}if(char=="("||char==")"||char=="."||char==","||char=="?"||char=="!"){return false}if(char>="a"&&char<="z"){return false}if(char>="A"&&char<="Z"){return false}if(char>="0"&&char<="9"){return false}return true}function findLastSplit(line,i){if(i>=line.length){i=line.length-1}while(i>0&&!isSplitable(line[i])){i--}return i}function findNextSplit(line,i){while(i<line.length&&!isSplitable(line[i])){i++}return i}function wordWrapLine(line,options){if(line.length===0){return""}options._prefixLength=options._prefixLength||getStringLength(options.prefix,options);if(line.length+options._prefixLength<options.wordwrap){return options.prefix+line}var i=options._prefixLength+options.wordwrap;var lastSplit=findLastSplit(line,i);var nextSplit=findNextSplit(line,i);var rest;if(lastSplit===0&&nextSplit+options._prefixLength>options.wordwrap){rest=wordWrapLine(line.substr(options.wordwrap-options._prefixLength),options);if(rest.length>0){rest="\n"+rest}return options.prefix+line.substr(0,options.wordwrap-options._prefixLength)+rest}rest=wordWrapLine(line.substr(lastSplit+1),options);if(rest.length>0){rest="\n"+rest}if(!isSpace(line[lastSplit])){lastSplit++}return options.prefix+line.substr(0,lastSplit)+rest}sf.indent=function(str,options){options=options||{};options.prefix="prefix"in options?options.prefix:"  ";options.tabWidth=options.tabWidth||4;options._prefixLength=getStringLength(options.prefix,options);if(options.wordwrap){var results="";var lines=str.split("\n");for(var i=0;i<lines.length;i++){var line=lines[i];if(line===""){results+=options.prefix+line+"\n"}else{line=wordWrapLine(line,options)+"\n"}results+=line}if(results.length>0){results=results.substr(0,results.length-1)}return results}str=str.replace(/\n/g,"\n"+options.prefix);str=options.prefix+str;return str};sf.TimeSpan=function(milliseconds,seconds,minutes,hours,days){var MILLISECONDS=1;var SECOND=MILLISECONDS*1e3;var MINUTE=SECOND*60;var HOUR=MINUTE*60;var DAY=HOUR*24;var MONTH=DAY*30;var YEAR=DAY*365.25;seconds=seconds||0;minutes=minutes||0;hours=hours||0;days=days||0;var _ms=milliseconds+SECOND*seconds+MINUTE*minutes+HOUR*hours+DAY*days;var remaining=_ms;var _years=Math.floor(remaining/YEAR);remaining%=YEAR;var _months=Math.floor(remaining/MONTH);remaining%=MONTH;var _days=Math.floor(remaining/DAY);remaining%=DAY;var _hours=Math.floor(remaining/HOUR);remaining%=HOUR;var _minutes=Math.floor(remaining/MINUTE);remaining%=MINUTE;var _seconds=Math.floor(remaining/SECOND);remaining%=SECOND;var _milliseconds=Math.floor(remaining/MILLISECONDS);remaining%=MILLISECONDS;this.__defineGetter__("years",function(){return _years});this.__defineGetter__("months",function(){return _months});this.__defineGetter__("days",function(){return _days});this.__defineGetter__("hours",function(){return _hours});this.__defineGetter__("minutes",function(){return _minutes});this.__defineGetter__("seconds",function(){return _seconds});this.__defineGetter__("milliseconds",function(){return _milliseconds});this.__defineGetter__("totalYears",function(){return _ms/YEAR});this.__defineGetter__("totalMonths",function(){return _ms/MONTH});this.__defineGetter__("totalDays",function(){return _ms/DAY});this.__defineGetter__("totalHours",function(){return _ms/HOUR});this.__defineGetter__("totalMinutes",function(){return _ms/MINUTE});this.__defineGetter__("totalSeconds",function(){return _ms/SECOND});this.__defineGetter__("totalMilliseconds",function(){return _ms});this.toString=function(){return _ms};return this};return sf}()}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){mm.util=__webpack_require__(52);__webpack_require__(16)(mm.util,mm);__webpack_require__(17)(mm.util);__webpack_require__(18)(mm.util,mm);__webpack_require__(19)(mm.util,mm);__webpack_require__(20)(mm.util,mm);mm.obj={};mm.obj.Config=__webpack_require__(21)(mm);mm.obj.EggTimer=__webpack_require__(22)(mm);mm.obj.Enum=__webpack_require__(23)();mm.Logger=__webpack_require__(24)(mm);mm.log=__webpack_require__(25)(mm);mm.format=mm.Logger.format;mm.obj.CoreObject=function CoreObject(){}}},function(module,exports,__webpack_require__){module.exports=function(mm){mm.storage={};mm.storage.providers={};mm.storage.LocalStorage=__webpack_require__(26)(mm);mm.storage.StoragePath=__webpack_require__(27)(mm);mm.storage.StorageInfo=__webpack_require__(28)(mm);mm.storage.StorageEngine=__webpack_require__(29)(mm);mm.storage.StorageClient=__webpack_require__(30)(mm);mm.storage.providers.MongoDBProvider=__webpack_require__(31)(mm);mm.storage.providers.FileProvider=__webpack_require__(32)(mm);mm.users={};mm.users.ClientUser=__webpack_require__(33)(mm)}},function(module,exports,__webpack_require__){module.exports=function(mm){mm.core={};mm.core.CliConsole=__webpack_require__(34)(mm);mm.core.Cmd=__webpack_require__(35)(mm);mm.core.CmdSet=__webpack_require__(36)(mm);mm.core.MMath=__webpack_require__(37)(mm);mm.core.Workspace=__webpack_require__(38)(mm);mm.core.Parser=__webpack_require__(39)(mm);mm.core.ClientSession=__webpack_require__(40)(mm);__webpack_require__(41)(mm);__webpack_require__(42)(mm);mm.core.MMeddleClient=__webpack_require__(43)(mm);mm.core.CliCommands=__webpack_require__(44)(mm)}},function(module,exports,__webpack_require__){module.exports=function(mm){mm.server={};mm.server.WsSession=__webpack_require__(45)(mm);__webpack_require__(46)(mm);__webpack_require__(47)(mm);mm.server.SocketService=__webpack_require__(48)(mm);mm.server.MMeddleServer=__webpack_require__(49)(mm)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){mm.test={};mm.test.client={};mm.test.server={};mm.mockSock=__webpack_require__(50)(mm);__webpack_require__(51)(mm)}},function(module,exports,__webpack_require__){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var process=module.exports={};var queue=[];var draining=false;function drainQueue(){if(draining){return}draining=true;var currentQueue;var len=queue.length;while(len){currentQueue=queue;queue=[];var i=-1;while(++i<len){currentQueue[i]()}len=queue.length}draining=false}process.nextTick=function(fun){queue.push(fun);if(!draining){setTimeout(drainQueue,0)}};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){(function(){var undefined;var VERSION="3.6.0";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LAZY_DROP_WHILE_FLAG=0,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT="Expected a function";var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reComboMarks=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHexPrefix=/^0[xX]/;var reHostCtor=/^\[object .+?Constructor\]$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}();var whitespace=" 	\f \ufeff"+"\n\r\u2028\u2029"+" ᠎             　";var contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var debounceOptions={leading:false,maxWait:0,trailing:false};var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={"function":true,object:true};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsReflexive=value===value,othIsReflexive=other===other;if(value>other||!valIsReflexive||typeof value=="undefined"&&othIsReflexive){return 1}if(value<other||!othIsReflexive||typeof other=="undefined"&&valIsReflexive){return-1}}return 0}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsFunction(value){return typeof value=="function"||false}function baseToString(value){if(typeof value=="string"){return value}return value==null?"":value+""}function charAtCallback(string){return string.charCodeAt(0)}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}return result*(orders[index]?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}function isObjectLike(value){return!!value&&typeof value=="object"}function isSpace(charCode){return charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279);

}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var document=(document=context.window)&&document.document;var fnToString=Function.prototype.toString;var getLength=baseProperty("length");var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=context._;var reNative=RegExp("^"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ArrayBuffer=isNative(ArrayBuffer=context.ArrayBuffer)&&ArrayBuffer,bufferSlice=isNative(bufferSlice=ArrayBuffer&&new ArrayBuffer(0).slice)&&bufferSlice,ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,push=arrayProto.push,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=isNative(Set=context.Set)&&Set,setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=isNative(Uint8Array=context.Uint8Array)&&Uint8Array,WeakMap=isNative(WeakMap=context.WeakMap)&&WeakMap;var Float64Array=function(){try{var func=isNative(func=context.Float64Array)&&func,result=new func(new ArrayBuffer(10),0,1)&&func}catch(e){}return result}();var nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsFinite=context.isFinite,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeNow=isNative(nativeNow=Date.now)&&nativeNow,nativeNumIsFinite=isNative(nativeNumIsFinite=Number.isFinite)&&nativeNumIsFinite,nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var FLOAT64_BYTES_PER_ELEMENT=Float64Array?Float64Array.BYTES_PER_ELEMENT:0;var MAX_SAFE_INTEGER=Math.pow(2,53)-1;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}var support=lodash.support={};(function(x){support.funcDecomp=/\bthis\b/.test(function(){return this});support.funcNames=typeof Function.name=="string";try{support.dom=document.createDocumentFragment().nodeType===11}catch(e){support.dom=false}try{support.nonEnumArgs=!propertyIsEnumerable.call(arguments,1)}catch(e){support.nonEnumArgs=true}})(0,0);lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=false;this.__iteratees__=null;this.__takeCount__=POSITIVE_INFINITY;this.__views__=null}function lazyClone(){var actions=this.__actions__,iteratees=this.__iteratees__,views=this.__views__,result=new LazyWrapper(this.__wrapped__);result.__actions__=actions?arrayCopy(actions):null;result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=iteratees?arrayCopy(iteratees):null;result.__takeCount__=this.__takeCount__;result.__views__=views?arrayCopy(views):null;return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value();if(!isArray(array)){return baseWrapperValue(array,this.__actions__)}var dir=this.__dir__,isRight=dir<0,view=getView(0,array.length,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,takeCount=nativeMin(length,this.__takeCount__),iteratees=this.__iteratees__,iterLength=iteratees?iteratees.length:0,resIndex=0,result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type;if(type==LAZY_DROP_WHILE_FLAG){if(data.done&&(isRight?index>data.index:index<data.index)){data.count=0;data.done=false}data.index=index;if(!data.done){var limit=data.limit;if(!(data.done=limit>-1?data.count++>=limit:!iteratee(value))){continue outer}}}else{var computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return key=="__proto__"?undefined:this.__data__[key]}function mapHas(key){return key!="__proto__"&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){if(key!="__proto__"){this.__data__[key]=value}return this}function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayMax(array){var index=-1,length=array.length,result=NEGATIVE_INFINITY;while(++index<length){var value=array[index];if(value>result){result=value}}return result}function arrayMin(array){var index=-1,length=array.length,result=POSITIVE_INFINITY;while(++index<length){var value=array[index];if(value<result){result=value}}return result}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function arraySum(array){var length=array.length,result=0;while(length--){result+=+array[length]||0}return result}function assignDefaults(objectValue,sourceValue){return typeof objectValue=="undefined"?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return typeof objectValue=="undefined"||!hasOwnProperty.call(object,key)?sourceValue:objectValue}function baseAssign(object,source,customizer){var props=keys(source);if(!customizer){return baseCopy(source,object,props)}var index=-1,length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||typeof value=="undefined"&&!(key in object)){object[key]=result}}return object}function baseAt(collection,props){var index=-1,length=collection.length,isArr=isLength(length),propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){key=parseFloat(key);result[index]=isIndex(key,length)?collection[key]:undefined}else{result[index]=collection[key]}}return result}function baseCopy(source,object,props){if(!props){props=object;object={}}var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=="function"){return typeof thisArg=="undefined"?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return typeof thisArg=="undefined"?baseProperty(func+""):baseMatchesProperty(func+"",thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value)}if(typeof result!="undefined"){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result)}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseCopy(value,result,keys(value))}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{}}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)});return result}var baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}();function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=200?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=typeof end=="undefined"||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}function baseFlatten(array,isDeep,isStrict){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(isObjectLike(value)&&isLength(value.length)&&(isArray(value)||isArguments(value))){if(isDeep){value=baseFlatten(value,isDeep,isStrict)}var valIndex=-1,valLength=value.length;result.length+=valLength;while(++valIndex<valLength){result[++resIndex]=value[valIndex]}}else if(!isStrict){result[++resIndex]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return value!==0||1/value==1/other}var valType=typeof value,othType=typeof other;if(valType!="function"&&valType!="object"&&othType!="function"&&othType!="object"||value==null||other==null){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag||isLoose&&objTag==funcTag,othIsObj=othTag==objectTag||isLoose&&othTag==funcTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(isLoose){if(!isSameTag&&!(objIsObj&&othIsObj)){return false}}else{var valWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(valWrapped||othWrapped){return equalFunc(valWrapped?object.value():object,othWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag){return false}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function baseIsMatch(object,props,values,strictCompareFlags,customizer){var index=-1,length=props.length,noCustomizer=!customizer;while(++index<length){if(noCustomizer&&strictCompareFlags[index]?values[index]!==object[props[index]]:!(props[index]in object)){return false}}index=-1;while(++index<length){var key=props[index],objValue=object[key],srcValue=values[index];if(noCustomizer&&strictCompareFlags[index]){var result=typeof objValue!="undefined"||key in object}else{result=customizer?customizer(objValue,srcValue,key):undefined;if(typeof result=="undefined"){result=baseIsEqual(srcValue,objValue,customizer,true)}}if(!result){return false}}return true}function baseMap(collection,iteratee){var result=[];baseEach(collection,function(value,key,collection){result.push(iteratee(value,key,collection))});return result}function baseMatches(source){var props=keys(source),length=props.length;if(!length){return constant(true)}if(length==1){var key=props[0],value=source[key];if(isStrictComparable(value)){return function(object){return object!=null&&object[key]===value&&(typeof value!="undefined"||key in toObject(object))}}}var values=Array(length),strictCompareFlags=Array(length);while(length--){value=source[props[length]];values[length]=value;strictCompareFlags[length]=isStrictComparable(value)}return function(object){return object!=null&&baseIsMatch(toObject(object),props,values,strictCompareFlags)}}function baseMatchesProperty(key,value){if(isStrictComparable(value)){return function(object){return object!=null&&object[key]===value&&(typeof value!="undefined"||key in toObject(object))}}return function(object){return object!=null&&baseIsEqual(value,object[key],null,true)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object}var isSrcArr=isLength(source.length)&&(isArray(source)||isTypedArray(source));(isSrcArr?arrayEach:baseForOwn)(source,function(srcValue,key,source){if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);return baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB)}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=typeof result=="undefined";if(isCommon){result=srcValue}if((isSrcArr||typeof result!="undefined")&&(isCommon||(result===result?result!==value:value===value))){object[key]=result}});return object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=typeof result=="undefined";if(isCommon){result=srcValue;if(isLength(srcValue.length)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:value&&value.length?arrayCopy(value):[]}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}}else{isCommon=false}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB)}else if(result===result?result!==value:value===value){object[key]=result}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection)});return accumulator}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=typeof end=="undefined"||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSortByOrder(collection,props,orders){var index=-1,length=collection.length,result=isLength(length)?Array(length):[];baseEach(collection,function(value){var length=props.length,criteria=Array(length);while(length--){criteria[length]=value==null?undefined:value[props[length]]}result[++index]={criteria:criteria,index:index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0});return result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=200,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}var index=-1,length=actions.length;while(++index<length){var args=[result],action=actions[index];push.apply(args,action.args);result=action.func.apply(action.thisArg,args)}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(retHighest?computed<=value:computed<value){low=mid+1}else{high=mid}}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsUndef=typeof value=="undefined";while(low<high){var mid=floor((low+high)/2),computed=iteratee(array[mid]),isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest}else if(valIsUndef){setLow=isReflexive&&(retHighest||typeof computed!="undefined")}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(typeof thisArg=="undefined"){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){return bufferSlice.call(buffer,0)}if(!bufferSlice){bufferClone=!(ArrayBuffer&&Uint8Array)?constant(null):function(buffer){var byteLength=buffer.byteLength,floatLength=Float64Array?floor(byteLength/FLOAT64_BYTES_PER_ELEMENT):0,offset=floatLength*FLOAT64_BYTES_PER_ELEMENT,result=new ArrayBuffer(byteLength);if(floatLength){var view=new Float64Array(result,0,floatLength);view.set(new Float64Array(buffer,0,floatLength))}if(byteLength!=offset){view=new Uint8Array(result,offset);view.set(new Uint8Array(buffer,offset))}return result}}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(argsLength+leftLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var pad=argsIndex;while(++rightIndex<rightLength){result[pad+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[pad+holders[holdersIndex]]=args[argsIndex++]}return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)})}return result}}function createAssigner(assigner){return function(){var args=arguments,length=args.length,object=args[0];if(length<2||object==null){return object}var customizer=args[length-2],thisArg=args[length-1],guard=args[3];if(length>3&&typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=length>2&&typeof thisArg=="function"?thisArg:null;length-=customizer?1:0}if(guard&&isIterateeCall(args[1],args[2],guard)){customizer=length==3?null:customizer;length=2}var index=0;while(++index<length){var source=args[index];if(source){assigner(object,source,customizer)}}return object}}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?collection.length:0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}var createCache=!(nativeCreate&&Set)?constant(null):function(values){return new SetCache(values)};function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result="";while(++index<length){result=callback(result,array[index],index)}return result}}function createCtorWrapper(Ctor){return function(){var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,arguments);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=null}var result=createWrapper(func,flag,null,null,null,null,null,arity);result.placeholder=curryFunc.placeholder;return result}return curryFunc}function createExtremum(arrayFunc,isMin){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var func=getCallback(),noIteratee=iteratee==null;if(!(func===baseCallback&&noIteratee)){noIteratee=false;iteratee=func(iteratee,thisArg,3)}if(noIteratee){var isArr=isArray(collection);if(!isArr&&isString(collection)){iteratee=charAtCallback}else{return arrayFunc(isArr?collection:toIterable(collection))}}return extremumBy(collection,iteratee,isMin)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}function createFlow(fromRight){return function(){var length=arguments.length;if(!length){return function(){return arguments[0]}}var wrapper,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var funcName=wrapper?"":getFuncName(func);wrapper=funcName=="wrapper"?new LodashWrapper([]):wrapper}index=wrapper?-1:length;while(++index<length){func=funcs[index];funcName=getFuncName(func);var data=funcName=="wrapper"?getData(func):null;if(data&&isLaziable(data[0])){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments;if(wrapper&&args.length==1&&isArray(args[0])){return wrapper.plant(args[0]).value()}var index=0,result=funcs[index].apply(this,args);while(++index<length){result=funcs[index].call(this,result)}return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=="function"&&typeof thisArg=="undefined"&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||typeof thisArg!="undefined"){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||typeof thisArg!="undefined"){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return string&&(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,null,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=="function"&&typeof thisArg=="undefined"&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG;

var Ctor=!isBindKey&&createCtorWrapper(func),key=func;function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):null,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:null,newHoldersRight=isCurry?null:argsHolders,newPartials=isCurry?args:null,newPartialsRight=isCurry?null:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this;if(isBindKey){func=thisBinding[key]}if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}var fn=this&&this!==root&&this instanceof wrapper?Ctor||createCtorWrapper(func):func;return fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return""}var padLength=length-strLength;chars=chars==null?" ":chars+"";return repeat(chars,ceil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(argsLength+leftLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var func=getCallback(iteratee);return func===baseCallback&&iteratee==null?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,func(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=null}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=null}var data=isBindKey?null:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length,result=true;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(result&&++index<arrLength){var arrValue=array[index],othValue=other[index];result=undefined;if(customizer){result=isLoose?customizer(othValue,arrValue,index):customizer(arrValue,othValue,index)}if(typeof result=="undefined"){if(isLoose){var othIndex=othLength;while(othIndex--){othValue=other[othIndex];result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB);if(result){break}}}else{result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}}}return!!result}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==0?1/object==1/other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var skipCtor=isLoose,index=-1;while(++index<objLength){var key=objProps[index],result=isLoose?key in other:hasOwnProperty.call(other,key);if(result){var objValue=object[key],othValue=other[key];result=undefined;if(customizer){result=isLoose?customizer(othValue,objValue,key):customizer(objValue,othValue,key)}if(typeof result=="undefined"){result=objValue&&objValue===othValue||equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB)}}if(!result){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function extremumBy(collection,iteratee,isMin){var exValue=isMin?POSITIVE_INFINITY:NEGATIVE_INFINITY,computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=iteratee(value,index,collection);if((isMin?current<computed:current>computed)||current===exValue&&current===result){computed=current;result=value}});return result}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result}var getData=!metaMap?noop:function(func){return metaMap.get(func)};var getFuncName=function(){if(!support.funcNames){return constant("")}if(constant.name=="constant"){return baseProperty("name")}return function(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}}();function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result}function getView(start,end,transforms){var index=-1,length=transforms?transforms.length:0;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=="function"&&Ctor instanceof Ctor)){Ctor=Object}return new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function isIndex(value,length){value=+value;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"){var length=object.length,prereq=isLength(length)&&isIndex(index,length)}else{prereq=type=="string"&&index in object}if(prereq){var other=object[index];return value===value?value===other:other!==other}return false}function isLaziable(func){var funcName=getFuncName(func);return!!funcName&&func===lodash[funcName]&&funcName in LazyWrapper.prototype}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&(value===0?1/value>0:!isObject(value))}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value}});return result}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();function shimIsPlainObject(value){var Ctor,support=lodash.support;if(!(isObjectLike(value)&&objToString.call(value)==objectTag)||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,typeof Ctor=="function"&&!(Ctor instanceof Ctor))){return false}var result;baseForIn(value,function(subValue,key){result=key});return typeof result=="undefined"||hasOwnProperty.call(value,result)}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,support=lodash.support;var allowIndexes=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function toIterable(value){if(value==null){return[]}if(!isLength(value.length)){return values(value)}return isObject(value)?value:Object(value)}function toObject(value){return isObject(value)?value:Object(value)}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1}else{size=nativeMax(+size||1,1)}var index=0,length=array?array.length:0,resIndex=-1,result=Array(ceil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value}}return result}var difference=restParam(function(array,values){return isArray(array)||isArguments(array)?baseDifference(array,baseFlatten(values,false,true)):[]});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,n<0?0:n)}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[]}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false}return length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}if(typeof fromIndex=="number"){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex}else if(fromIndex){var index=binaryIndex(array,value),other=array[index];if(value===value?value===other:other!==other){return index}return-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=[],indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf;while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArray(value)||isArguments(value)){args.push(value);caches.push(isCommon&&value.length>=120?createCache(argsIndex&&value):null)}}argsLength=args.length;var array=args[0],index=-1,length=array?array.length:0,result=[],seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){argsIndex=argsLength;while(--argsIndex){var cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value,0))<0){continue outer}}if(seen){seen.push(value)}result.push(value)}}return result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=length;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index}return-1}if(value!==value){return indexOfNaN(array,index,true)}while(index--){if(array[index]===value){return index}}return-1}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1)}}return array}var pullAt=restParam(function(array,indexes){array||(array=[]);indexes=baseFlatten(indexes);var length=indexes.length,result=baseAt(array,indexes);indexes.sort(baseCompareAscending);while(length--){var index=parseFloat(indexes[length]);if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return result});function remove(array,predicate,thisArg){var index=-1,length=array?array.length:0,result=[];predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);splice.call(array,index--,1);length--}}return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}return baseSlice(array,start,end)}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,n<0?0:n)}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?null:isSorted;isSorted=false}var func=getCallback();if(!(func===baseCallback&&iteratee==null)){iteratee=func(iteratee,thisArg,3)}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){var index=-1,length=(array&&array.length&&arrayMax(arrayMap(array,getLength)))>>>0,result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index))}return result}var without=restParam(function(array,values){return isArray(array)||isArguments(array)?baseDifference(array,values):[]});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArray(array)||isArguments(array)){var result=result?baseDifference(result,array).concat(baseDifference(array,result)):array}}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[]}while(++index<length){var key=props[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){if(this.__actions__.length){value=new LazyWrapper(this)}return new LodashWrapper(value.reverse(),this.__chain__)}return this.thru(function(value){return value.reverse()})}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam(function(collection,props){var length=collection?collection.length:0;if(isLength(length)){collection=toIterable(collection)}return baseAt(collection,baseFlatten(props))});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=null}if(typeof predicate!="function"||typeof thisArg!="undefined"){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate)}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{result[key]=[value]}});function includes(collection,target,fromIndex,guard){var length=collection?collection.length:0;if(!isLength(length)){collection=values(collection);length=collection.length}if(!length){return false}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<length&&collection.indexOf(target,fromIndex)>-1:getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator(function(result,value,key){result[key]=value});var invoke=restParam(function(collection,methodName,args){var index=-1,isFunc=typeof methodName=="function",length=collection?collection.length:0,result=isLength(length)?Array(length):[];baseEach(collection,function(value){var func=isFunc?methodName:value!=null&&value[methodName];result[++index]=func?func.apply(value,args):undefined});return result});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function pluck(collection,key){return map(collection,baseProperty(key))}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var result=shuffle(collection);result.length=nativeMin(n<0?0:+n||0,result.length);return result}function shuffle(collection){collection=toIterable(collection);var index=-1,length=collection.length,result=Array(length);while(++index<length){var rand=baseRandom(0,index);if(index!=rand){result[index]=result[rand]}result[rand]=collection[index]}return result}function size(collection){var length=collection?collection.length:0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=null}if(typeof predicate!="function"||typeof thisArg!="undefined"){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(collection==null){return[]}var index=-1,length=collection.length,result=isLength(length)?Array(length):[];if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}iteratee=getCallback(iteratee,thisArg,3);baseEach(collection,function(value,key,collection){result[++index]={criteria:iteratee(value,key,collection),index:index,value:value}});return baseSortBy(result,compareAscending)}function sortByAll(){var args=arguments,collection=args[0],guard=args[3],index=0,length=args.length-1;if(collection==null){return[]}var props=Array(length);while(index<length){props[index]=args[++index]}if(guard&&isIterateeCall(args[1],args[2],guard)){props=args[1]}return baseSortByOrder(collection,baseFlatten(props),[])}function sortByOrder(collection,props,orders,guard){if(collection==null){return[]}if(guard&&isIterateeCall(props,orders,guard)){orders=null}if(!isArray(props)){props=props==null?[]:[props]}if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseSortByOrder(collection,props,orders)}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=null}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,null,null,null,null,n)}function before(n,func){var result;if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}return function(){if(--n>0){result=func.apply(this,arguments)}else{func=null}return result}}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}debounced.cancel=cancel;return debounced}var defer=restParam(function(func,args){return baseDelay(func,1,args)});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,cache=memoized.cache,key=resolver?resolver.apply(this,args):args[0];if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){return!predicate.apply(this,arguments)}}function once(func){return before(func,2)}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,null,null,null,baseFlatten(indexes))});function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(typeof start=="undefined"?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}function spread(func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=+wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,null,[value],[])}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!="boolean"&&isIterateeCall(value,isDeep,customizer)){isDeep=false}else if(typeof isDeep=="function"){thisArg=customizer;customizer=isDeep;isDeep=false}customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,1);return baseClone(value,isDeep,customizer)}function cloneDeep(value,customizer,thisArg){customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,1);return baseClone(value,true,customizer)}function isArguments(value){var length=isObjectLike(value)?value.length:undefined;return isLength(length)&&objToString.call(value)==argsTag}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&objToString.call(value).indexOf("Element")>-1}if(!support.dom){isElement=function(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value)}}function isEmpty(value){
if(value==null){return true}var length=value.length;if(isLength(length)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!length}return!keys(value).length}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,3);if(!customizer&&isStrictComparable(value)&&isStrictComparable(other)){return value===other}var result=customizer?customizer(value,other):undefined;return typeof result=="undefined"?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&typeof value.message=="string"&&objToString.call(value)==errorTag}var isFinite=nativeNumIsFinite||function(value){return typeof value=="number"&&nativeIsFinite(value)};var isFunction=!(baseIsFunction(/x/)||Uint8Array&&!baseIsFunction(Uint8Array))?baseIsFunction:function(value){return objToString.call(value)==funcTag};function isObject(value){var type=typeof value;return type=="function"||!!value&&type=="object"}function isMatch(object,source,customizer,thisArg){var props=keys(source),length=props.length;if(!length){return true}if(object==null){return false}customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,3);if(!customizer&&length==1){var key=props[0],value=source[key];if(isStrictComparable(value)){return value===object[key]&&(typeof value!="undefined"||key in toObject(object))}}var values=Array(length),strictCompareFlags=Array(length);while(length--){value=values[length]=source[props[length]];strictCompareFlags[length]=isStrictComparable(value)}return baseIsMatch(toObject(object),props,values,strictCompareFlags,customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(value==null){return false}if(objToString.call(value)==funcTag){return reNative.test(fnToString.call(value))}return isObjectLike(value)&&reHostCtor.test(value)}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&objToString.call(value)==objectTag)){return false}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return isObjectLike(value)&&objToString.call(value)==regexpTag||false}function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return typeof value=="undefined"}function toArray(value){var length=value?value.length:0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var assign=createAssigner(baseAssign);function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=null}return properties?baseCopy(properties,result,keys(properties)):result}var defaults=restParam(function(args){var object=args[0];if(object==null){return object}args.push(assignDefaults);return assign.apply(undefined,args)});var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function has(object,key){return object?hasOwnProperty.call(object,key):false}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=null}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}}else{result[value]=key}}return result}var keys=!nativeKeys?shimKeys:function(object){if(object){var Ctor=object.constructor,length=object.length}if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&(length&&isLength(length))){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function mapValues(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){result[key]=iteratee(value,key,object)});return result}var merge=createAssigner(baseMerge);var omit=restParam(function(object,props){if(object==null){return{}}if(typeof props[0]!="function"){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam(function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});function result(object,key,defaultValue){var value=object==null?undefined:object[key];if(typeof value=="undefined"){value=defaultValue}return isFunction(value)?value.call(object):value}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[]}else{accumulator=baseCreate(isFunction(Ctor)&&Ctor.prototype)}}else{accumulator={}}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){start=+start||0;if(typeof end==="undefined"){end=start;start=0}else{end=+end||0}return value>=start&&value<end}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=null}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=="boolean"){floating=min;min=1}else if(typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1;noMax=false}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)});function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMarks,"")}function endsWith(string,target,position){string=baseToString(string);target=target+"";var length=string.length;position=typeof position=="undefined"?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string}var mid=(length-strLength)/2,leftLength=floor(mid),rightLength=ceil(mid);chars=createPadding("",rightLength,chars);return chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard&&isIterateeCall(string,radix,guard)){radix=0}return nativeParseInt(string,radix)}if(nativeParseInt(whitespace+"08")!=8){parseInt=function(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0}else if(radix){radix=+radix}string=trim(string);return nativeParseInt(string,radix||(reHexPrefix.test(string)?16:10))}}function repeat(string,n){var result="";string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result}do{if(n%2){result+=string}n=floor(n/2);string+=string}while(n);return result}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=null}string=baseToString(string);options=baseAssign(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=baseAssign(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1)}chars=chars+"";return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string))}return string.slice(charsLeftIndex(string,chars+""))}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1)}return string.slice(0,charsRightIndex(string,chars+"")+1)}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=null}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length;omission="omission"in options?baseToString(options.omission):omission}else{length=+options||0}}string=baseToString(string);if(length>=string.length){return string}var end=length-omission.length;if(end<1){return omission}var result=string.slice(0,end);if(separator==null){return result+omission}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index}result=result.slice(0,newEnd==null?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=null}string=baseToString(string);return string.match(pattern||reWords)||[]}var attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=null}return isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,true))}function matchesProperty(key,value){return baseMatchesProperty(key+"",baseClone(value,true))}function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj&&keys(source),methodNames=props&&props.length&&baseFunctions(source,props);if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this}}if(!methodNames){methodNames=baseFunctions(source,keys(source))}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}var args=[this.value()];push.apply(args,arguments);return func.apply(object,args)}}(func)}}return object}function noConflict(){context._=oldDash;return this}function noop(){}function property(key){return baseProperty(key+"")}function propertyOf(object){return function(key){return object==null?undefined:object[key]}}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=null}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0}else{end=+end||0}var index=-1,length=nativeMax(ceil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function times(n,iteratee,thisArg){n=+n;if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return augend+addend}var max=createExtremum(arrayMax);var min=createExtremum(arrayMin,true);function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var func=getCallback(),noIteratee=iteratee==null;if(!(func===baseCallback&&noIteratee)){noIteratee=false;iteratee=func(iteratee,thisArg,3)}return noIteratee?arraySum(isArray(collection)?collection:toIterable(collection)):baseSum(collection,iteratee)}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mixin=mixin;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value())}return this.thru(function(value){return sample(value,n)})};lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["dropWhile","filter","map","takeWhile"],function(methodName,type){var isFilter=type!=LAZY_MAP_FLAG,isDropWhile=type==LAZY_DROP_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var filtered=this.__filtered__,result=filtered&&isDropWhile?new LazyWrapper(this):this.clone(),iteratees=result.__iteratees__||(result.__iteratees__=[]);iteratees.push({done:false,count:0,index:0,iteratee:getCallback(iteratee,thisArg,1),limit:-1,type:type});result.__filtered__=filtered||isFilter;return result}});arrayEach(["drop","take"],function(methodName,index){var whileName=methodName+"While";LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__,result=filtered&&!index?this.dropWhile():this.clone();n=n==null?1:nativeMax(floor(n)||0,0);if(filtered){if(index){result.__takeCount__=nativeMin(result.__takeCount__,n)}else{last(result.__iteratees__).limit=n}}else{var views=result.__views__||(result.__views__=[]);views.push({size:n,type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()};LazyWrapper.prototype[methodName+"RightWhile"]=function(predicate,thisArg){return this.reverse()[whileName](predicate,thisArg).reverse()}});arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this[dropName](1)}});arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:baseProperty;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value)})};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=start<0?this.takeRight(-start):this.drop(start);if(typeof end!="undefined"){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.toArray=function(){return this.drop(0)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(!lodashFunc){return}var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments,length=args.length,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){return onlyLazy?func.call(value):lodashFunc.call(lodash,this.value())}var interceptor=function(value){var otherArgs=[value];push.apply(otherArgs,args);return lodashFunc.apply(lodash,otherArgs)};if(useLazy){var wrapper=onlyLazy?value:new LazyWrapper(this),result=func.apply(wrapper,args);if(!retUnwrapped&&(isHybrid||result.__actions__)){var actions=result.__actions__||(result.__actions__=[]);actions.push({func:thru,args:[interceptor],thisArg:lodash})}return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}});arrayEach(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args)}return this[chainName](function(value){return func.apply(value,args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybridWrapper(null,BIND_KEY_FLAG).name]=[{name:"wrapper",func:null}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash}var _=runInContext();if(true){root._=_;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(exports,__webpack_require__(55)(module),function(){return this}())},function(module,exports,__webpack_require__){"use strict";var path=__webpack_require__(8);var globby=__webpack_require__(56);var eachAsync=__webpack_require__(57);var isPathCwd=__webpack_require__(58);var isPathInCwd=__webpack_require__(59);var rimraf=__webpack_require__(62);var objectAssign=__webpack_require__(60);function safeCheck(file){if(isPathCwd(file)){throw new Error("Cannot delete the current working directory. Can be overriden with the `force` option.")}if(!isPathInCwd(file)){throw new Error("Cannot delete files/folders outside the current working directory. Can be overriden with the `force` option.")}}module.exports=function(patterns,opts,cb){if(typeof opts!=="object"){cb=opts;opts={}}opts=objectAssign({},opts);cb=cb||function(){};var force=opts.force;delete opts.force;var deletedFiles=[];globby(patterns,opts,function(err,files){if(err){cb(err);return}eachAsync(files,function(el,i,next){if(!force){safeCheck(el)}el=path.resolve(opts.cwd||"",el);deletedFiles.push(el);rimraf(el,next)},function(err){if(err){cb(err);return}cb(null,deletedFiles)})})};module.exports.sync=function(patterns,opts){opts=objectAssign({},opts);var force=opts.force;delete opts.force;var deletedFiles=[];globby.sync(patterns,opts).forEach(function(el){if(!force){safeCheck(el)}el=path.resolve(opts.cwd||"",el);deletedFiles.push(el);rimraf.sync(el)});return deletedFiles}},function(module,exports,__webpack_require__){(function(process){var path=__webpack_require__(8);var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());module.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(p,opts,f,made){if(typeof opts==="function"){f=opts;opts={}}else if(!opts||typeof opts!=="object"){opts={mode:opts}}var mode=opts.mode;var xfs=opts.fs||fs;if(mode===undefined){mode=511&~process.umask()}if(!made)made=null;var cb=f||function(){};p=path.resolve(p);xfs.mkdir(p,mode,function(er){if(!er){made=made||p;return cb(null,made)}switch(er.code){case"ENOENT":mkdirP(path.dirname(p),opts,function(er,made){if(er)cb(er,made);else mkdirP(p,opts,cb,made)});break;default:xfs.stat(p,function(er2,stat){if(er2||!stat.isDirectory())cb(er,made);else cb(null,made)});break}})}mkdirP.sync=function sync(p,opts,made){if(!opts||typeof opts!=="object"){opts={mode:opts}}var mode=opts.mode;var xfs=opts.fs||fs;if(mode===undefined){mode=511&~process.umask()}if(!made)made=null;p=path.resolve(p);try{xfs.mkdirSync(p,mode);made=made||p}catch(err0){switch(err0.code){case"ENOENT":made=sync(path.dirname(p),opts,made);sync(p,opts,made);break;default:var stat;try{stat=xfs.statSync(p)}catch(err1){throw err0}if(!stat.isDirectory())throw err0;break}}return made}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(54)},function(module,exports,__webpack_require__){(function(process,setImmediate){(function(definition){"use strict";if(typeof bootstrap==="function"){bootstrap("promise",definition)}else if(true){module.exports=definition()}else if(typeof define==="function"&&define.amd){define(definition)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=definition}}else if(typeof self!=="undefined"){self.Q=definition()}else{throw new Error("This environment was not anticipated by Q. Please file a bug.")}})(function(){"use strict";var hasStacks=false;try{throw new Error}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine();var qFileName;var noop=function(){};var nextTick=function(){var head={task:void 0,next:null};var tail=head;var flushing=false;var requestTick=void 0;

var isNodeJS=false;function flush(){while(head.next){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain){head.domain=void 0;domain.enter()}try{task()}catch(e){if(isNodeJS){if(domain){domain.exit()}setTimeout(flush,0);if(domain){domain.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(domain){domain.exit()}}flushing=false}nextTick=function(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null};if(!flushing){flushing=true;requestTick()}};if(typeof process!=="undefined"&&process.nextTick){isNodeJS=true;requestTick=function(){process.nextTick(flush)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){requestTick=setImmediate.bind(window,flush)}else{requestTick=function(){setImmediate(flush)}}}else if(typeof MessageChannel!=="undefined"){var channel=new MessageChannel;channel.port1.onmessage=function(){requestTick=requestPortTick;channel.port1.onmessage=flush;flush()};var requestPortTick=function(){channel.port2.postMessage(0)};requestTick=function(){setTimeout(flush,0);requestPortTick()}}else{requestTick=function(){setTimeout(flush,0)}}return nextTick}();var call=Function.call;function uncurryThis(f){return function(){return call.apply(f,arguments)}}var array_slice=uncurryThis(Array.prototype.slice);var array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(arguments.length===1){do{if(index in this){basis=this[index++];break}if(++index>=length){throw new TypeError}}while(1)}for(;index<length;index++){if(index in this){basis=callback(basis,this[index],index)}}return basis});var array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++){if(this[i]===value){return i}}return-1});var array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this;var collect=[];array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0);return collect});var object_create=Object.create||function(prototype){function Type(){}Type.prototype=prototype;return new Type};var object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty);var object_keys=Object.keys||function(object){var keys=[];for(var key in object){if(object_hasOwnProperty(object,key)){keys.push(key)}}return keys};var object_toString=uncurryThis(Object.prototype.toString);function isObject(value){return value===Object(value)}function isStopIteration(exception){return object_toString(exception)==="[object StopIteration]"||exception instanceof QReturnValue}var QReturnValue;if(typeof ReturnValue!=="undefined"){QReturnValue=ReturnValue}else{QReturnValue=function(value){this.value=value}}var STACK_JUMP_SEPARATOR="From previous event:";function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&typeof error==="object"&&error!==null&&error.stack&&error.stack.indexOf(STACK_JUMP_SEPARATOR)===-1){var stacks=[];for(var p=promise;!!p;p=p.source){if(p.stack){stacks.unshift(p.stack)}}stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){var lines=stackString.split("\n");var desiredLines=[];for(var i=0;i<lines.length;++i){var line=lines[i];if(!isInternalFrame(line)&&!isNodeFrame(line)&&line){desiredLines.push(line)}}return desiredLines.join("\n")}function isNodeFrame(stackLine){return stackLine.indexOf("(module.js:")!==-1||stackLine.indexOf("(node.js:")!==-1}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1){return[attempt1[1],Number(attempt1[2])]}var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2){return[attempt2[1],Number(attempt2[2])]}var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);if(attempt3){return[attempt3[1],Number(attempt3[2])]}}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber){return false}var fileName=fileNameAndLineNumber[0];var lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&lineNumber<=qEndingLine}function captureLine(){if(!hasStacks){return}try{throw new Error}catch(e){var lines=e.stack.split("\n");var firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2];var fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber){return}qFileName=fileNameAndLineNumber[0];return fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack)}return callback.apply(callback,arguments)}}function Q(value){if(value instanceof Promise){return value}if(isPromiseAlike(value)){return coerce(value)}else{return fulfill(value)}}Q.resolve=Q;Q.nextTick=nextTick;Q.longStackSupport=false;if(typeof process==="object"&&process&&process.env&&process.env.Q_DEBUG){Q.longStackSupport=true}Q.defer=defer;function defer(){var messages=[],progressListeners=[],resolvedPromise;var deferred=object_create(defer.prototype);var promise=object_create(Promise.prototype);promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);if(messages){messages.push(args);if(op==="when"&&operands[1]){progressListeners.push(operands[1])}}else{Q.nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})}};promise.valueOf=function(){if(messages){return promise}var nearerValue=nearer(resolvedPromise);if(isPromise(nearerValue)){resolvedPromise=nearerValue}return nearerValue};promise.inspect=function(){if(!resolvedPromise){return{state:"pending"}}return resolvedPromise.inspect()};if(Q.longStackSupport&&hasStacks){try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}}function become(newPromise){resolvedPromise=newPromise;promise.source=newPromise;array_reduce(messages,function(undefined,message){Q.nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0);messages=void 0;progressListeners=void 0}deferred.promise=promise;deferred.resolve=function(value){if(resolvedPromise){return}become(Q(value))};deferred.fulfill=function(value){if(resolvedPromise){return}become(fulfill(value))};deferred.reject=function(reason){if(resolvedPromise){return}become(reject(reason))};deferred.notify=function(progress){if(resolvedPromise){return}array_reduce(progressListeners,function(undefined,progressListener){Q.nextTick(function(){progressListener(progress)})},void 0)};return deferred}defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){if(error){self.reject(error)}else if(arguments.length>2){self.resolve(array_slice(arguments,1))}else{self.resolve(value)}}};Q.Promise=promise;Q.promise=promise;function promise(resolver){if(typeof resolver!=="function"){throw new TypeError("resolver must be a function.")}var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}promise.race=race;promise.all=all;promise.reject=reject;promise.resolve=Q;Q.passByCopy=function(object){return object};Promise.prototype.passByCopy=function(){return this};Q.join=function(x,y){return Q(x).join(y)};Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y){return x}else{throw new Error("Can't join: not the same: "+x+" "+y)}})};Q.race=race;function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;i<len;i++){Q(answerPs[i]).then(resolve,reject)}})}Promise.prototype.race=function(){return this.then(Q.race)};Q.makePromise=Promise;function Promise(descriptor,fallback,inspect){if(fallback===void 0){fallback=function(op){return reject(new Error("Promise does not support operation: "+op))}}if(inspect===void 0){inspect=function(){return{state:"unknown"}}}var promise=object_create(Promise.prototype);promise.promiseDispatch=function(resolve,op,args){var result;try{if(descriptor[op]){result=descriptor[op].apply(promise,args)}else{result=fallback.call(promise,op,args)}}catch(exception){result=reject(exception)}if(resolve){resolve(result)}};promise.inspect=inspect;if(inspect){var inspected=inspect();if(inspected.state==="rejected"){promise.exception=inspected.reason}promise.valueOf=function(){var inspected=inspect();if(inspected.state==="pending"||inspected.state==="rejected"){return promise}return inspected.value}}return promise}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.then=function(fulfilled,rejected,progressed){var self=this;var deferred=defer();var done=false;function _fulfilled(value){try{return typeof fulfilled==="function"?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if(typeof rejected==="function"){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return typeof progressed==="function"?progressed(value):value}Q.nextTick(function(){self.promiseDispatch(function(value){if(done){return}done=true;deferred.resolve(_fulfilled(value))},"when",[function(exception){if(done){return}done=true;deferred.resolve(_rejected(exception))}])});self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue;var threw=false;try{newValue=_progressed(value)}catch(e){threw=true;if(Q.onerror){Q.onerror(e)}else{throw e}}if(!threw){deferred.notify(newValue)}}]);return deferred.promise};Q.tap=function(promise,callback){return Q(promise).tap(callback)};Promise.prototype.tap=function(callback){callback=Q(callback);return this.then(function(value){return callback.fcall(value).thenResolve(value)})};Q.when=when;function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}Promise.prototype.thenResolve=function(value){return this.then(function(){return value})};Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)};Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})};Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)};Q.nearer=nearer;function nearer(value){if(isPromise(value)){var inspected=value.inspect();if(inspected.state==="fulfilled"){return inspected.value}}return value}Q.isPromise=isPromise;function isPromise(object){return object instanceof Promise}Q.isPromiseAlike=isPromiseAlike;function isPromiseAlike(object){return isObject(object)&&typeof object.then==="function"}Q.isPending=isPending;function isPending(object){return isPromise(object)&&object.inspect().state==="pending"}Promise.prototype.isPending=function(){return this.inspect().state==="pending"};Q.isFulfilled=isFulfilled;function isFulfilled(object){return!isPromise(object)||object.inspect().state==="fulfilled"}Promise.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};Q.isRejected=isRejected;function isRejected(object){return isPromise(object)&&object.inspect().state==="rejected"}Promise.prototype.isRejected=function(){return this.inspect().state==="rejected"};var unhandledReasons=[];var unhandledRejections=[];var trackUnhandledRejections=true;function resetUnhandledRejections(){unhandledReasons.length=0;unhandledRejections.length=0;if(!trackUnhandledRejections){trackUnhandledRejections=true}}function trackRejection(promise,reason){if(!trackUnhandledRejections){return}unhandledRejections.push(promise);if(reason&&typeof reason.stack!=="undefined"){unhandledReasons.push(reason.stack)}else{unhandledReasons.push("(no stack) "+reason)}}function untrackRejection(promise){if(!trackUnhandledRejections){return}var at=array_indexOf(unhandledRejections,promise);if(at!==-1){unhandledRejections.splice(at,1);unhandledReasons.splice(at,1)}}Q.resetUnhandledRejections=resetUnhandledRejections;Q.getUnhandledReasons=function(){return unhandledReasons.slice()};Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections();trackUnhandledRejections=false};resetUnhandledRejections();Q.reject=reject;function reject(reason){var rejection=Promise({when:function(rejected){if(rejected){untrackRejection(this)}return rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});trackRejection(rejection,reason);return rejection}Q.fulfill=fulfill;function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){if(name===null||name===void 0){return value.apply(void 0,args)}else{return value[name].apply(value,args)}},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();Q.nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}});return deferred.promise}Q.master=master;function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}Q.spread=spread;function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)};Q.async=async;function async(makeGenerator){return function(){function continuer(verb,arg){var result;if(typeof StopIteration==="undefined"){try{result=generator[verb](arg)}catch(exception){return reject(exception)}if(result.done){return Q(result.value)}else{return when(result.value,callback,errback)}}else{try{result=generator[verb](arg)}catch(exception){if(isStopIteration(exception)){return Q(exception.value)}else{return reject(exception)}}return when(result,callback,errback)}}var generator=makeGenerator.apply(this,arguments);var callback=continuer.bind(continuer,"next");var errback=continuer.bind(continuer,"throw");return callback()}}Q.spawn=spawn;function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}Q["return"]=_return;function _return(value){throw new QReturnValue(value)}Q.promised=promised;function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}Q.dispatch=dispatch;function dispatch(object,op,args){return Q(object).dispatch(op,args)}Promise.prototype.dispatch=function(op,args){var self=this;var deferred=defer();Q.nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)});return deferred.promise};Q.get=function(object,key){return Q(object).dispatch("get",[key])};Promise.prototype.get=function(key){return this.dispatch("get",[key])};Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])};Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])};Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])};Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])};Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])};Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])};Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])};Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])};Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])};Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])};Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])};Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])};Q.fbind=function(object){var promise=Q(object);var args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}};Promise.prototype.fbind=function(){var promise=this;var args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}};Q.keys=function(object){return Q(object).dispatch("keys",[])};Promise.prototype.keys=function(){return this.dispatch("keys",[])};Q.all=all;function all(promises){return when(promises,function(promises){var pendingCount=0;var deferred=defer();array_reduce(promises,function(undefined,promise,index){var snapshot;if(isPromise(promise)&&(snapshot=promise.inspect()).state==="fulfilled"){promises[index]=snapshot.value}else{++pendingCount;when(promise,function(value){promises[index]=value;if(--pendingCount===0){deferred.resolve(promises)}},deferred.reject,function(progress){deferred.notify({index:index,value:progress})})}},void 0);if(pendingCount===0){deferred.resolve(promises)}return deferred.promise})}Promise.prototype.all=function(){return all(this)};Q.any=any;function any(promises){if(promises.length===0){return Q.resolve()}var deferred=Q.defer();var pendingCount=0;array_reduce(promises,function(prev,current,index){var promise=promises[index];pendingCount++;when(promise,onFulfilled,onRejected,onProgress);function onFulfilled(result){deferred.resolve(result)}function onRejected(){pendingCount--;if(pendingCount===0){deferred.reject(new Error("Can't get fulfillment value from any promise, all "+"promises were rejected."))}}function onProgress(progress){deferred.notify({index:index,value:progress})}},undefined);return deferred.promise}Promise.prototype.any=function(){return any(this)};Q.allResolved=deprecate(allResolved,"allResolved","allSettled");function allResolved(promises){return when(promises,function(promises){promises=array_map(promises,Q);return when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}Promise.prototype.allResolved=function(){return allResolved(this)};Q.allSettled=allSettled;function allSettled(promises){return Q(promises).allSettled()}Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){promise=Q(promise);function regardless(){return promise.inspect()}return promise.then(regardless,regardless)}))})};Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)};Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)};Q.progress=progress;function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)};Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)};Promise.prototype.fin=Promise.prototype["finally"]=function(callback){callback=Q(callback);return this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})};Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)};Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){Q.nextTick(function(){makeStackTraceLong(error,promise);if(Q.onerror){Q.onerror(error)}else{throw error}})};var promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;if(typeof process==="object"&&process&&process.domain){onUnhandledError=process.domain.bind(onUnhandledError)}promise.then(void 0,onUnhandledError)};Q.timeout=function(object,ms,error){return Q(object).timeout(ms,error)};Promise.prototype.timeout=function(ms,error){var deferred=defer();var timeoutId=setTimeout(function(){if(!error||"string"===typeof error){error=new Error(error||"Timed out after "+ms+" ms");error.code="ETIMEDOUT"}deferred.reject(error)},ms);this.then(function(value){clearTimeout(timeoutId);deferred.resolve(value)},function(exception){clearTimeout(timeoutId);deferred.reject(exception)},deferred.notify);return deferred.promise};Q.delay=function(object,timeout){if(timeout===void 0){timeout=object;object=void 0}return Q(object).delay(timeout)};Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();setTimeout(function(){deferred.resolve(value)},timeout);return deferred.promise})};Q.nfapply=function(callback,args){return Q(callback).nfapply(args)};Promise.prototype.nfapply=function(args){var deferred=defer();var nodeArgs=array_slice(args);nodeArgs.push(deferred.makeNodeResolver());this.fapply(nodeArgs).fail(deferred.reject);return deferred.promise};Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)};Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.fapply(nodeArgs).fail(deferred.reject);return deferred.promise};Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments));var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());Q(callback).fapply(nodeArgs).fail(deferred.reject);return deferred.promise}};Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);args.unshift(this);return Q.denodeify.apply(void 0,args)};Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments));var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());function bound(){return callback.apply(thisp,arguments)}Q(bound).fapply(nodeArgs).fail(deferred.reject);return deferred.promise}};Promise.prototype.nbind=function(){var args=array_slice(arguments,0);args.unshift(this);return Q.nbind.apply(void 0,args)};Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)};Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Q.nodeify=nodeify;function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}Promise.prototype.nodeify=function(nodeback){if(nodeback){this.then(function(value){Q.nextTick(function(){nodeback(null,value)})},function(error){Q.nextTick(function(){nodeback(error)})})}else{return this}};var qEndingLine=captureLine();return Q})}).call(exports,__webpack_require__(9),__webpack_require__(61).setImmediate)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(module){var io=false?{}:module.exports;(function(){(function(exports,global){var io=exports;io.version="0.9.16";io.protocol=1;io.transports=[];io.j=[];io.sockets={};io.connect=function(host,details){var uri=io.util.parseUri(host),uuri,socket;if(global&&global.location){uri.protocol=uri.protocol||global.location.protocol.slice(0,-1);uri.host=uri.host||(global.document?global.document.domain:global.location.hostname);uri.port=uri.port||global.location.port}uuri=io.util.uniqueUri(uri);var options={host:uri.host,secure:"https"==uri.protocol,port:uri.port||("https"==uri.protocol?443:80),query:uri.query||""};io.util.merge(options,details);if(options["force new connection"]||!io.sockets[uuri]){socket=new io.Socket(options)}if(!options["force new connection"]&&socket){io.sockets[uuri]=socket}socket=socket||io.sockets[uuri];return socket.of(uri.path.length>1?uri.path:"")}})(true?module.exports:this.io={},this);(function(exports,global){var util=exports.util={};var re=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];util.parseUri=function(str){var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}return uri};util.uniqueUri=function(uri){var protocol=uri.protocol,host=uri.host,port=uri.port;if("document"in global){host=host||document.domain;port=port||(protocol=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{host=host||"localhost";if(!port&&protocol=="https"){port=443}}return(protocol||"http")+"://"+host+":"+(port||80)};util.query=function(base,addition){var query=util.chunkQuery(base||""),components=[];util.merge(query,util.chunkQuery(addition||""));for(var part in query){if(query.hasOwnProperty(part)){components.push(part+"="+query[part])}}return components.length?"?"+components.join("&"):""};util.chunkQuery=function(qs){var query={},params=qs.split("&"),i=0,l=params.length,kv;for(;i<l;++i){kv=params[i].split("=");if(kv[0]){query[kv[0]]=kv[1]}}return query};var pageLoaded=false;util.load=function(fn){if("document"in global&&document.readyState==="complete"||pageLoaded){return fn()}util.on(global,"load",fn,false)};util.on=function(element,event,fn,capture){if(element.attachEvent){element.attachEvent("on"+event,fn)}else if(element.addEventListener){element.addEventListener(event,fn,capture)}};util.request=function(xdomain){if(xdomain&&"undefined"!=typeof XDomainRequest&&!util.ua.hasCORS){return new XDomainRequest}if("undefined"!=typeof XMLHttpRequest&&(!xdomain||util.ua.hasCORS)){return new XMLHttpRequest}if(!xdomain){try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}return null};if("undefined"!=typeof window){util.load(function(){pageLoaded=true})}util.defer=function(fn){if(!util.ua.webkit||"undefined"!=typeof importScripts){return fn()}util.load(function(){setTimeout(fn,100)})};util.merge=function merge(target,additional,deep,lastseen){var seen=lastseen||[],depth=typeof deep=="undefined"?2:deep,prop;for(prop in additional){if(additional.hasOwnProperty(prop)&&util.indexOf(seen,prop)<0){if(typeof target[prop]!=="object"||!depth){target[prop]=additional[prop];seen.push(additional[prop])}else{util.merge(target[prop],additional[prop],depth-1,seen)}}}return target};util.mixin=function(ctor,ctor2){util.merge(ctor.prototype,ctor2.prototype)};util.inherit=function(ctor,ctor2){function f(){}f.prototype=ctor2.prototype;ctor.prototype=new f};util.isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};util.intersect=function(arr,arr2){var ret=[],longest=arr.length>arr2.length?arr:arr2,shortest=arr.length>arr2.length?arr2:arr;for(var i=0,l=shortest.length;i<l;i++){if(~util.indexOf(longest,shortest[i]))ret.push(shortest[i])}return ret};util.indexOf=function(arr,o,i){for(var j=arr.length,i=i<0?i+j<0?0:i+j:i||0;i<j&&arr[i]!==o;i++){}return j<=i?-1:i};util.toArray=function(enu){var arr=[];for(var i=0,l=enu.length;i<l;i++)arr.push(enu[i]);return arr};util.ua={};util.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(e){return false}return a.withCredentials!=undefined}();util.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);util.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(exports,io){exports.EventEmitter=EventEmitter;function EventEmitter(){}EventEmitter.prototype.on=function(name,fn){if(!this.$events){this.$events={}}if(!this.$events[name]){this.$events[name]=fn}else if(io.util.isArray(this.$events[name])){this.$events[name].push(fn)}else{this.$events[name]=[this.$events[name],fn]}return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.once=function(name,fn){var self=this;function on(){self.removeListener(name,on);fn.apply(this,arguments)}on.listener=fn;this.on(name,on);return this};EventEmitter.prototype.removeListener=function(name,fn){if(this.$events&&this.$events[name]){var list=this.$events[name];if(io.util.isArray(list)){var pos=-1;for(var i=0,l=list.length;i<l;i++){if(list[i]===fn||list[i].listener&&list[i].listener===fn){pos=i;break}}if(pos<0){return this}list.splice(pos,1);if(!list.length){delete this.$events[name]}}else if(list===fn||list.listener&&list.listener===fn){delete this.$events[name]}}return this};EventEmitter.prototype.removeAllListeners=function(name){if(name===undefined){this.$events={};return this}if(this.$events&&this.$events[name]){this.$events[name]=null}return this};EventEmitter.prototype.listeners=function(name){if(!this.$events){this.$events={}}if(!this.$events[name]){this.$events[name]=[]}if(!io.util.isArray(this.$events[name])){this.$events[name]=[this.$events[name]]}return this.$events[name]};EventEmitter.prototype.emit=function(name){if(!this.$events){return false}var handler=this.$events[name];if(!handler){return false}var args=Array.prototype.slice.call(arguments,1);if("function"==typeof handler){handler.apply(this,args)}else if(io.util.isArray(handler)){var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}}else{return false}return true}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,nativeJSON){"use strict";if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={};function f(n){return n<10?"0"+n:n}function date(d,key){return isFinite(d.valueOf())?d.getUTCFullYear()+"-"+f(d.getUTCMonth()+1)+"-"+f(d.getUTCDate())+"T"+f(d.getUTCHours())+":"+f(d.getUTCMinutes())+":"+f(d.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value instanceof Date){value=date(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);

}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);(function(exports,io){var parser=exports.parser={};var packets=parser.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var reasons=parser.reasons=["transport not supported","client not handshaken","unauthorized"];var advice=parser.advice=["reconnect"];var JSON=io.JSON,indexOf=io.util.indexOf;parser.encodePacket=function(packet){var type=indexOf(packets,packet.type),id=packet.id||"",endpoint=packet.endpoint||"",ack=packet.ack,data=null;switch(packet.type){case"error":var reason=packet.reason?indexOf(reasons,packet.reason):"",adv=packet.advice?indexOf(advice,packet.advice):"";if(reason!==""||adv!=="")data=reason+(adv!==""?"+"+adv:"");break;case"message":if(packet.data!=="")data=packet.data;break;case"event":var ev={name:packet.name};if(packet.args&&packet.args.length){ev.args=packet.args}data=JSON.stringify(ev);break;case"json":data=JSON.stringify(packet.data);break;case"connect":if(packet.qs)data=packet.qs;break;case"ack":data=packet.ackId+(packet.args&&packet.args.length?"+"+JSON.stringify(packet.args):"");break}var encoded=[type,id+(ack=="data"?"+":""),endpoint];if(data!==null&&data!==undefined)encoded.push(data);return encoded.join(":")};parser.encodePayload=function(packets){var decoded="";if(packets.length==1)return packets[0];for(var i=0,l=packets.length;i<l;i++){var packet=packets[i];decoded+="�"+packet.length+"�"+packets[i]}return decoded};var regexp=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;parser.decodePacket=function(data){var pieces=data.match(regexp);if(!pieces)return{};var id=pieces[2]||"",data=pieces[5]||"",packet={type:packets[pieces[1]],endpoint:pieces[4]||""};if(id){packet.id=id;if(pieces[3])packet.ack="data";else packet.ack=true}switch(packet.type){case"error":var pieces=data.split("+");packet.reason=reasons[pieces[0]]||"";packet.advice=advice[pieces[1]]||"";break;case"message":packet.data=data||"";break;case"event":try{var opts=JSON.parse(data);packet.name=opts.name;packet.args=opts.args}catch(e){}packet.args=packet.args||[];break;case"json":try{packet.data=JSON.parse(data)}catch(e){}break;case"connect":packet.qs=data||"";break;case"ack":var pieces=data.match(/^([0-9]+)(\+)?(.*)/);if(pieces){packet.ackId=pieces[1];packet.args=[];if(pieces[3]){try{packet.args=pieces[3]?JSON.parse(pieces[3]):[]}catch(e){}}}break;case"disconnect":case"heartbeat":break}return packet};parser.decodePayload=function(data){if(data.charAt(0)=="�"){var ret=[];for(var i=1,length="";i<data.length;i++){if(data.charAt(i)=="�"){ret.push(parser.decodePacket(data.substr(i+1).substr(0,length)));i+=Number(length)+1;length=""}else{length+=data.charAt(i)}}return ret}else{return[parser.decodePacket(data)]}}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io){exports.Transport=Transport;function Transport(socket,sessid){this.socket=socket;this.sessid=sessid}io.util.mixin(Transport,io.EventEmitter);Transport.prototype.heartbeats=function(){return true};Transport.prototype.onData=function(data){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting){this.setCloseTimeout()}if(data!==""){var msgs=io.parser.decodePayload(data);if(msgs&&msgs.length){for(var i=0,l=msgs.length;i<l;i++){this.onPacket(msgs[i])}}}return this};Transport.prototype.onPacket=function(packet){this.socket.setHeartbeatTimeout();if(packet.type=="heartbeat"){return this.onHeartbeat()}if(packet.type=="connect"&&packet.endpoint==""){this.onConnect()}if(packet.type=="error"&&packet.advice=="reconnect"){this.isOpen=false}this.socket.onPacket(packet);return this};Transport.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var self=this;this.closeTimeout=setTimeout(function(){self.onDisconnect()},this.socket.closeTimeout)}};Transport.prototype.onDisconnect=function(){if(this.isOpen)this.close();this.clearTimeouts();this.socket.onDisconnect();return this};Transport.prototype.onConnect=function(){this.socket.onConnect();return this};Transport.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};Transport.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout){clearTimeout(this.reopenTimeout)}};Transport.prototype.packet=function(packet){this.send(io.parser.encodePacket(packet))};Transport.prototype.onHeartbeat=function(heartbeat){this.packet({type:"heartbeat"})};Transport.prototype.onOpen=function(){this.isOpen=true;this.clearCloseTimeout();this.socket.onOpen()};Transport.prototype.onClose=function(){var self=this;this.isOpen=false;this.socket.onClose();this.onDisconnect()};Transport.prototype.prepareUrl=function(){var options=this.socket.options;return this.scheme()+"://"+options.host+":"+options.port+"/"+options.resource+"/"+io.protocol+"/"+this.name+"/"+this.sessid};Transport.prototype.ready=function(socket,fn){fn.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports.Socket=Socket;function Socket(options){this.options={port:80,secure:false,document:"document"in global?document:false,resource:"socket.io",transports:io.transports,"connect timeout":1e4,"try multiple transports":true,reconnect:true,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":false,"auto connect":true,"flash policy port":10843,manualFlush:false};io.util.merge(this.options,options);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||io.util.ua.hasCORS)){var self=this;io.util.on(global,"beforeunload",function(){self.disconnectSync()},false)}if(this.options["auto connect"]){this.connect()}}io.util.mixin(Socket,io.EventEmitter);Socket.prototype.of=function(name){if(!this.namespaces[name]){this.namespaces[name]=new io.SocketNamespace(this,name);if(name!==""){this.namespaces[name].packet({type:"connect"})}}return this.namespaces[name]};Socket.prototype.publish=function(){this.emit.apply(this,arguments);var nsp;for(var i in this.namespaces){if(this.namespaces.hasOwnProperty(i)){nsp=this.of(i);nsp.$emit.apply(nsp,arguments)}}};function empty(){}Socket.prototype.handshake=function(fn){var self=this,options=this.options;function complete(data){if(data instanceof Error){self.connecting=false;self.onError(data.message)}else{fn.apply(null,data.split(":"))}}var url=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,io.protocol,io.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!io.util.ua.hasCORS){var insertAt=document.getElementsByTagName("script")[0],script=document.createElement("script");script.src=url+"&jsonp="+io.j.length;insertAt.parentNode.insertBefore(script,insertAt);io.j.push(function(data){complete(data);script.parentNode.removeChild(script)})}else{var xhr=io.util.request();xhr.open("GET",url,true);if(this.isXDomain()){xhr.withCredentials=true}xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;if(xhr.status==200){complete(xhr.responseText)}else if(xhr.status==403){self.onError(xhr.responseText)}else{self.connecting=false;!self.reconnecting&&self.onError(xhr.responseText)}}};xhr.send(null)}};Socket.prototype.getTransport=function(override){var transports=override||this.transports,match;for(var i=0,transport;transport=transports[i];i++){if(io.Transport[transport]&&io.Transport[transport].check(this)&&(!this.isXDomain()||io.Transport[transport].xdomainCheck(this))){return new io.Transport[transport](this,this.sessionid)}}return null};Socket.prototype.connect=function(fn){if(this.connecting){return this}var self=this;self.connecting=true;this.handshake(function(sid,heartbeat,close,transports){self.sessionid=sid;self.closeTimeout=close*1e3;self.heartbeatTimeout=heartbeat*1e3;if(!self.transports)self.transports=self.origTransports=transports?io.util.intersect(transports.split(","),self.options.transports):self.options.transports;self.setHeartbeatTimeout();function connect(transports){if(self.transport)self.transport.clearTimeouts();self.transport=self.getTransport(transports);if(!self.transport)return self.publish("connect_failed");self.transport.ready(self,function(){self.connecting=true;self.publish("connecting",self.transport.name);self.transport.open();if(self.options["connect timeout"]){self.connectTimeoutTimer=setTimeout(function(){if(!self.connected){self.connecting=false;if(self.options["try multiple transports"]){var remaining=self.transports;while(remaining.length>0&&remaining.splice(0,1)[0]!=self.transport.name){}if(remaining.length){connect(remaining)}else{self.publish("connect_failed")}}}},self.options["connect timeout"])}})}connect(self.transports);self.once("connect",function(){clearTimeout(self.connectTimeoutTimer);fn&&typeof fn=="function"&&fn()})});return this};Socket.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var self=this;this.heartbeatTimeoutTimer=setTimeout(function(){self.transport.onClose()},this.heartbeatTimeout)};Socket.prototype.packet=function(data){if(this.connected&&!this.doBuffer){this.transport.packet(data)}else{this.buffer.push(data)}return this};Socket.prototype.setBuffer=function(v){this.doBuffer=v;if(!v&&this.connected&&this.buffer.length){if(!this.options["manualFlush"]){this.flushBuffer()}}};Socket.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};Socket.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open){this.of("").packet({type:"disconnect"})}this.onDisconnect("booted")}return this};Socket.prototype.disconnectSync=function(){var xhr=io.util.request();var uri=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,io.protocol,"",this.sessionid].join("/")+"/?disconnect=1";xhr.open("GET",uri,false);xhr.send(null);this.onDisconnect("booted")};Socket.prototype.isXDomain=function(){var port=global.location.port||("https:"==global.location.protocol?443:80);return this.options.host!==global.location.hostname||this.options.port!=port};Socket.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer){this.setBuffer(false)}this.emit("connect")}};Socket.prototype.onOpen=function(){this.open=true};Socket.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};Socket.prototype.onPacket=function(packet){this.of(packet.endpoint).onPacket(packet)};Socket.prototype.onError=function(err){if(err&&err.advice){if(err.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect){this.reconnect()}}}this.publish("error",err&&err.reason?err.reason:err)};Socket.prototype.onDisconnect=function(reason){var wasConnected=this.connected,wasConnecting=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(wasConnected||wasConnecting){this.transport.close();this.transport.clearTimeouts();if(wasConnected){this.publish("disconnect",reason);if("booted"!=reason&&this.options.reconnect&&!this.reconnecting){this.reconnect()}}}};Socket.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var self=this,maxAttempts=this.options["max reconnection attempts"],tryMultiple=this.options["try multiple transports"],limit=this.options["reconnection limit"];function reset(){if(self.connected){for(var i in self.namespaces){if(self.namespaces.hasOwnProperty(i)&&""!==i){self.namespaces[i].packet({type:"connect"})}}self.publish("reconnect",self.transport.name,self.reconnectionAttempts)}clearTimeout(self.reconnectionTimer);self.removeListener("connect_failed",maybeReconnect);self.removeListener("connect",maybeReconnect);self.reconnecting=false;delete self.reconnectionAttempts;delete self.reconnectionDelay;delete self.reconnectionTimer;delete self.redoTransports;self.options["try multiple transports"]=tryMultiple}function maybeReconnect(){if(!self.reconnecting){return}if(self.connected){return reset()}if(self.connecting&&self.reconnecting){return self.reconnectionTimer=setTimeout(maybeReconnect,1e3)}if(self.reconnectionAttempts++>=maxAttempts){if(!self.redoTransports){self.on("connect_failed",maybeReconnect);self.options["try multiple transports"]=true;self.transports=self.origTransports;self.transport=self.getTransport();self.redoTransports=true;self.connect()}else{self.publish("reconnect_failed");reset()}}else{if(self.reconnectionDelay<limit){self.reconnectionDelay*=2}self.connect();self.publish("reconnecting",self.reconnectionDelay,self.reconnectionAttempts);self.reconnectionTimer=setTimeout(maybeReconnect,self.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(maybeReconnect,this.reconnectionDelay);this.on("connect",maybeReconnect)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.SocketNamespace=SocketNamespace;function SocketNamespace(socket,name){this.socket=socket;this.name=name||"";this.flags={};this.json=new Flag(this,"json");this.ackPackets=0;this.acks={}}io.util.mixin(SocketNamespace,io.EventEmitter);SocketNamespace.prototype.$emit=io.EventEmitter.prototype.emit;SocketNamespace.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};SocketNamespace.prototype.packet=function(packet){packet.endpoint=this.name;this.socket.packet(packet);this.flags={};return this};SocketNamespace.prototype.send=function(data,fn){var packet={type:this.flags.json?"json":"message",data:data};if("function"==typeof fn){packet.id=++this.ackPackets;packet.ack=true;this.acks[packet.id]=fn}return this.packet(packet)};SocketNamespace.prototype.emit=function(name){var args=Array.prototype.slice.call(arguments,1),lastArg=args[args.length-1],packet={type:"event",name:name};if("function"==typeof lastArg){packet.id=++this.ackPackets;packet.ack="data";this.acks[packet.id]=lastArg;args=args.slice(0,args.length-1)}packet.args=args;return this.packet(packet)};SocketNamespace.prototype.disconnect=function(){if(this.name===""){this.socket.disconnect()}else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};SocketNamespace.prototype.onPacket=function(packet){var self=this;function ack(){self.packet({type:"ack",args:io.util.toArray(arguments),ackId:packet.id})}switch(packet.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name===""){this.socket.onDisconnect(packet.reason||"booted")}else{this.$emit("disconnect",packet.reason)}break;case"message":case"json":var params=["message",packet.data];if(packet.ack=="data"){params.push(ack)}else if(packet.ack){this.packet({type:"ack",ackId:packet.id})}this.$emit.apply(this,params);break;case"event":var params=[packet.name].concat(packet.args);if(packet.ack=="data")params.push(ack);this.$emit.apply(this,params);break;case"ack":if(this.acks[packet.ackId]){this.acks[packet.ackId].apply(this,packet.args);delete this.acks[packet.ackId]}break;case"error":if(packet.advice){this.socket.onError(packet)}else{if(packet.reason=="unauthorized"){this.$emit("connect_failed",packet.reason)}else{this.$emit("error",packet.reason)}}break}};function Flag(nsp,name){this.namespace=nsp;this.name=name}Flag.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};Flag.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports.websocket=WS;function WS(socket){io.Transport.apply(this,arguments)}io.util.inherit(WS,io.Transport);WS.prototype.name="websocket";WS.prototype.open=function(){var query=io.util.query(this.socket.options.query),self=this,Socket;if(!Socket){Socket=global.MozWebSocket||global.WebSocket}this.websocket=new Socket(this.prepareUrl()+query);this.websocket.onopen=function(){self.onOpen();self.socket.setBuffer(false)};this.websocket.onmessage=function(ev){self.onData(ev.data)};this.websocket.onclose=function(){self.onClose();self.socket.setBuffer(true)};this.websocket.onerror=function(e){self.onError(e)};return this};if(io.util.ua.iDevice){WS.prototype.send=function(data){var self=this;setTimeout(function(){self.websocket.send(data)},0);return this}}else{WS.prototype.send=function(data){this.websocket.send(data);return this}}WS.prototype.payload=function(arr){for(var i=0,l=arr.length;i<l;i++){this.packet(arr[i])}return this};WS.prototype.close=function(){this.websocket.close();return this};WS.prototype.onError=function(e){this.socket.onError(e)};WS.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};WS.check=function(){return"WebSocket"in global&&!("__addTask"in WebSocket)||"MozWebSocket"in global};WS.xdomainCheck=function(){return true};io.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.flashsocket=Flashsocket;function Flashsocket(){io.Transport.websocket.apply(this,arguments)}io.util.inherit(Flashsocket,io.Transport.websocket);Flashsocket.prototype.name="flashsocket";Flashsocket.prototype.open=function(){var self=this,args=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.open.apply(self,args)});return this};Flashsocket.prototype.send=function(){var self=this,args=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.send.apply(self,args)});return this};Flashsocket.prototype.close=function(){WebSocket.__tasks.length=0;io.Transport.websocket.prototype.close.call(this);return this};Flashsocket.prototype.ready=function(socket,fn){function init(){var options=socket.options,port=options["flash policy port"],path=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,"static/flashsocket","WebSocketMain"+(socket.isXDomain()?"Insecure":"")+".swf"];if(!Flashsocket.loaded){if(typeof WEB_SOCKET_SWF_LOCATION==="undefined"){WEB_SOCKET_SWF_LOCATION=path.join("/")}if(port!==843){WebSocket.loadFlashPolicyFile("xmlsocket://"+options.host+":"+port)}WebSocket.__initialize();Flashsocket.loaded=true}fn.call(self)}var self=this;if(document.body)return init();io.util.load(init)};Flashsocket.check=function(){if(typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!swfobject)return false;return swfobject.getFlashPlayerVersion().major>=10};Flashsocket.xdomainCheck=function(){return true};if(typeof window!="undefined"){WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true}io.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window){var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O[["Active"].concat("Object").join("X")]!=D){try{var ad=new(window[["Active"].concat("Object").join("X")])(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if(typeof j.readyState!=D&&j.readyState=="complete"||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body)){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310){aa.width="310"}if(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?["Active"].concat("").join("X"):"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=ad&&typeof ad=="string"?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring(Y[X].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}()}(function(){if("undefined"==typeof window||window.WebSocket)return;var console=window.console;if(!console||!console.log||!console.error){console={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("10.0.0")){console.error("Flash Player >= 10.0.0 is required.");return}if(location.protocol=="file:"){console.error("WARNING: web-socket-js doesn't work in file:///... URL "+"unless you set Flash Security Settings properly. "+"Open the page via Web server i.e. http://...")}WebSocket=function(url,protocols,proxyHost,proxyPort,headers){var self=this;self.__id=WebSocket.__nextId++;WebSocket.__instances[self.__id]=self;self.readyState=WebSocket.CONNECTING;self.bufferedAmount=0;self.__events={};if(!protocols){protocols=[]}else if(typeof protocols=="string"){protocols=[protocols]}setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(self.__id,url,protocols,proxyHost||null,proxyPort||0,headers||null)})},0)};WebSocket.prototype.send=function(data){if(this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var result=WebSocket.__flash.send(this.__id,encodeURIComponent(data));if(result<0){return true}else{this.bufferedAmount+=result;return false}};WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING){return}this.readyState=WebSocket.CLOSING;WebSocket.__flash.close(this.__id)};WebSocket.prototype.addEventListener=function(type,listener,useCapture){
if(!(type in this.__events)){this.__events[type]=[]}this.__events[type].push(listener)};WebSocket.prototype.removeEventListener=function(type,listener,useCapture){if(!(type in this.__events))return;var events=this.__events[type];for(var i=events.length-1;i>=0;--i){if(events[i]===listener){events.splice(i,1);break}}};WebSocket.prototype.dispatchEvent=function(event){var events=this.__events[event.type]||[];for(var i=0;i<events.length;++i){events[i](event)}var handler=this["on"+event.type];if(handler)handler(event)};WebSocket.prototype.__handleEvent=function(flashEvent){if("readyState"in flashEvent){this.readyState=flashEvent.readyState}if("protocol"in flashEvent){this.protocol=flashEvent.protocol}var jsEvent;if(flashEvent.type=="open"||flashEvent.type=="error"){jsEvent=this.__createSimpleEvent(flashEvent.type)}else if(flashEvent.type=="close"){jsEvent=this.__createSimpleEvent("close")}else if(flashEvent.type=="message"){var data=decodeURIComponent(flashEvent.message);jsEvent=this.__createMessageEvent("message",data)}else{throw"unknown event type: "+flashEvent.type}this.dispatchEvent(jsEvent)};WebSocket.prototype.__createSimpleEvent=function(type){if(document.createEvent&&window.Event){var event=document.createEvent("Event");event.initEvent(type,false,false);return event}else{return{type:type,bubbles:false,cancelable:false}}};WebSocket.prototype.__createMessageEvent=function(type,data){if(document.createEvent&&window.MessageEvent&&!window.opera){var event=document.createEvent("MessageEvent");event.initMessageEvent("message",false,false,data,null,null,window,null);return event}else{return{type:type,data:data,bubbles:false,cancelable:false}}};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.loadFlashPolicyFile=function(url){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(url)})};WebSocket.__initialize=function(){if(WebSocket.__flash)return;if(WebSocket.__swfLocation){window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation}if(!window.WEB_SOCKET_SWF_LOCATION){console.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var container=document.createElement("div");container.id="webSocketContainer";container.style.position="absolute";if(WebSocket.__isFlashLite()){container.style.left="0px";container.style.top="0px"}else{container.style.left="-100px";container.style.top="-100px"}var holder=document.createElement("div");holder.id="webSocketFlash";container.appendChild(holder);document.body.appendChild(container);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:true,swliveconnect:true,allowScriptAccess:"always"},null,function(e){if(!e.success){console.error("[WebSocket] swfobject.embedSWF failed")}})};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var i=0;i<WebSocket.__tasks.length;++i){WebSocket.__tasks[i]()}WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){setTimeout(function(){try{var events=WebSocket.__flash.receiveEvents();for(var i=0;i<events.length;++i){WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i])}}catch(e){console.error(e)}},0);return true};WebSocket.__log=function(message){console.log(decodeURIComponent(message))};WebSocket.__error=function(message){console.error(decodeURIComponent(message))};WebSocket.__addTask=function(task){if(WebSocket.__flash){task()}else{WebSocket.__tasks.push(task)}};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return false}var mimeType=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!mimeType||!mimeType.enabledPlugin||!mimeType.enabledPlugin.filename){return false}return mimeType.enabledPlugin.filename.match(/flashlite/i)?true:false};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION){if(window.addEventListener){window.addEventListener("load",function(){WebSocket.__initialize()},false)}else{window.attachEvent("onload",function(){WebSocket.__initialize()})}}})();(function(exports,io,global){exports.XHR=XHR;function XHR(socket){if(!socket)return;io.Transport.apply(this,arguments);this.sendBuffer=[]}io.util.inherit(XHR,io.Transport);XHR.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};XHR.prototype.payload=function(payload){var msgs=[];for(var i=0,l=payload.length;i<l;i++){msgs.push(io.parser.encodePacket(payload[i]))}this.send(io.parser.encodePayload(msgs))};XHR.prototype.send=function(data){this.post(data);return this};function empty(){}XHR.prototype.post=function(data){var self=this;this.socket.setBuffer(true);function stateChange(){if(this.readyState==4){this.onreadystatechange=empty;self.posting=false;if(this.status==200){self.socket.setBuffer(false)}else{self.onClose()}}}function onload(){this.onload=empty;self.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(global.XDomainRequest&&this.sendXHR instanceof XDomainRequest){this.sendXHR.onload=this.sendXHR.onerror=onload}else{this.sendXHR.onreadystatechange=stateChange}this.sendXHR.send(data)};XHR.prototype.close=function(){this.onClose();return this};XHR.prototype.request=function(method){var req=io.util.request(this.socket.isXDomain()),query=io.util.query(this.socket.options.query,"t="+ +new Date);req.open(method||"GET",this.prepareUrl()+query,true);if(method=="POST"){try{if(req.setRequestHeader){req.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{req.contentType="text/plain"}}catch(e){}}return req};XHR.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};XHR.check=function(socket,xdomain){try{var request=io.util.request(xdomain),usesXDomReq=global.XDomainRequest&&request instanceof XDomainRequest,socketProtocol=socket&&socket.options&&socket.options.secure?"https:":"http:",isXProtocol=global.location&&socketProtocol!=global.location.protocol;if(request&&!(usesXDomReq&&isXProtocol)){return true}}catch(e){}return false};XHR.xdomainCheck=function(socket){return XHR.check(socket,true)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.htmlfile=HTMLFile;function HTMLFile(socket){io.Transport.XHR.apply(this,arguments)}io.util.inherit(HTMLFile,io.Transport.XHR);HTMLFile.prototype.name="htmlfile";HTMLFile.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var iframeC=this.doc.createElement("div");iframeC.className="socketio";this.doc.body.appendChild(iframeC);this.iframe=this.doc.createElement("iframe");iframeC.appendChild(this.iframe);var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+query;io.util.on(window,"unload",function(){self.destroy()})};HTMLFile.prototype._=function(data,doc){data=data.replace(/\\\//g,"/");this.onData(data);try{var script=doc.getElementsByTagName("script")[0];script.parentNode.removeChild(script)}catch(e){}};HTMLFile.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};HTMLFile.prototype.close=function(){this.destroy();return io.Transport.XHR.prototype.close.call(this)};HTMLFile.check=function(socket){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window){try{var a=new(window[["Active"].concat("Object").join("X")])("htmlfile");return a&&io.Transport.XHR.check(socket)}catch(e){}}return false};HTMLFile.xdomainCheck=function(){return false};io.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports["xhr-polling"]=XHRPolling;function XHRPolling(){io.Transport.XHR.apply(this,arguments)}io.util.inherit(XHRPolling,io.Transport.XHR);io.util.merge(XHRPolling,io.Transport.XHR);XHRPolling.prototype.name="xhr-polling";XHRPolling.prototype.heartbeats=function(){return false};XHRPolling.prototype.open=function(){var self=this;io.Transport.XHR.prototype.open.call(self);return false};function empty(){}XHRPolling.prototype.get=function(){if(!this.isOpen)return;var self=this;function stateChange(){if(this.readyState==4){this.onreadystatechange=empty;if(this.status==200){self.onData(this.responseText);self.get()}else{self.onClose()}}}function onload(){this.onload=empty;this.onerror=empty;self.retryCounter=1;self.onData(this.responseText);self.get()}function onerror(){self.retryCounter++;if(!self.retryCounter||self.retryCounter>3){self.onClose()}else{self.get()}}this.xhr=this.request();if(global.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=onload;this.xhr.onerror=onerror}else{this.xhr.onreadystatechange=stateChange}this.xhr.send(null)};XHRPolling.prototype.onClose=function(){io.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=empty;try{this.xhr.abort()}catch(e){}this.xhr=null}};XHRPolling.prototype.ready=function(socket,fn){var self=this;io.util.defer(function(){fn.call(self)})};io.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io,global){var indicator=global.document&&"MozAppearance"in global.document.documentElement.style;exports["jsonp-polling"]=JSONPPolling;function JSONPPolling(socket){io.Transport["xhr-polling"].apply(this,arguments);this.index=io.j.length;var self=this;io.j.push(function(msg){self._(msg)})}io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]);JSONPPolling.prototype.name="jsonp-polling";JSONPPolling.prototype.post=function(data){var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="socketio_iframe_"+this.index,iframe;form.className="socketio";form.style.position="absolute";form.style.top="0px";form.style.left="0px";form.style.display="none";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.prepareUrl()+query;function complete(){initIframe();self.socket.setBuffer(false)}function initIframe(){if(self.iframe){self.form.removeChild(self.iframe)}try{iframe=document.createElement('<iframe name="'+self.iframeId+'">')}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();this.area.value=io.JSON.stringify(data);try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}this.socket.setBuffer(true)};JSONPPolling.prototype.get=function(){var self=this,script=document.createElement("script"),query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.prepareUrl()+query;script.onerror=function(){self.onClose()};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt);this.script=script;if(indicator){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype._=function(msg){this.onData(msg);if(this.isOpen){this.get()}return this};JSONPPolling.prototype.ready=function(socket,fn){var self=this;if(!indicator)return fn.call(this);io.util.load(function(){fn.call(self)})};JSONPPolling.check=function(){return"document"in global};JSONPPolling.xdomainCheck=function(){return true};io.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return io}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})()}).call(exports,__webpack_require__(55)(module))},function(module,exports,__webpack_require__){"use strict";module.exports=function registerStringUtilities(util,mm){mm.util.trimPrefix=function trimPrefix(str,prefix){var n=prefix.length;return mm._.startsWith(str,prefix)?str.substr(n):str};mm.util.removeWhitespace=function removeWhitespace(str){var r=str.replace(/\s+/g," ");return r};mm.util.zeroFilled=function(v,n){var sign="";if(v<0){v=-v;sign="-"}var val=v.toString();var i=val.indexOf(".");if(i>=0)val=val.substring(0,i);var res=mm._.repeat("0",n)+val;res=res.substr(res.length-n);if(res[0]==="0"&&sign)res=sign+res.substring(1);return res};mm.util.wildMatch=function wildMatch(str,pattern){var wr=pattern.replace(/\./g,".");wr=wr.replace(/\$/g,"$");wr=wr.replace(/\^/g,"^");wr=wr.replace(/\[/g,"[");wr=wr.replace(/\]/g,"]");wr=wr.replace(/\*/g,".*");wr=wr.replace(/\?/g,".");wr="^"+wr+"$";var re=new RegExp(wr,"i");return re.test(str)};mm.util.ENOENT=function ENOENT(e){var errString="";if(e instanceof Error){if(e.code==="ENOENT")return true;errString=e.toString()}else if(mm._.isString(e)){errString=e}return errString.indexOf("ENOENT, ")>=0}}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerUIntArrayUtils(util,mm){util.ua2hex=function ua2hex(ua){var h="";for(var i=0;i<ua.length;i++){var d=ua[i].toString(16);h+=d.length<2?"0"+d:d}return h};util.text2ua=function text2ua(s){var ua=new Uint8Array(s.length);for(var i=0;i<s.length;i++){ua[i]=s.charCodeAt(i)}return ua}}},function(module,exports,__webpack_require__){(function(process){"use strict";module.exports=function registerEnvUtilities(util,mm){mm.util.envOption=function envOption(envName,defaultValue){var envValue=defaultValue;if(mm.config.inNode){var v=process.env[envName];envValue=v?v:envValue}return envValue};mm.util.ifEnvOption=function ifEnvOption(envName){return mm.util.envOption(envName,false)?true:false};mm.util.mmEnvOption=function mmEnvOption(envName,defaultValue){return mm.util.envOption("MMEDDLE_"+envName,defaultValue)}}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";module.exports=function registerDateTimeUtilities(util,mm){mm.util.yyyymmdd=function(date){if(arguments.length===0||typeof date==="undefined"){date=new Date}if(mm._.isNumber(date)||mm._.isString(date))date=new Date(date);var month=date.getMonth()+1;var day=date.getDate();var year=date.getFullYear();return year+mm.util.zeroFilled(month,2)+mm.util.zeroFilled(day,2)};mm.util.yymmdd=function(date){if(arguments.length===0||typeof date==="undefined"){date=new Date}if(mm._.isNumber(date)||mm._.isString(date))date=new Date(date);var month=date.getMonth()+1;var day=date.getDate();var year=date.getFullYear();return mm.util.zeroFilled(year,2)+mm.util.zeroFilled(month,2)+mm.util.zeroFilled(day,2)};mm.util.hhmmss=function(date){if(arguments.length===0||typeof date==="undefined"){date=new Date}if(mm._.isNumber(date)||mm._.isString(date))date=new Date(date);var hours=date.getHours();var minutes=date.getMinutes();var seconds=date.getSeconds();return mm.util.zeroFilled(hours,2)+":"+mm.util.zeroFilled(minutes,2)+":"+mm.util.zeroFilled(seconds,2)};mm.util.timestamp=function(date){return mm.util.yymmdd(date)+"|"+mm.util.hhmmss(date)};mm.util.monthName=function monthName(date,monthList){var monthNames=monthList?monthList:["January","February","March","April","May","June","July","August","September","October","November","December"];var thisDate=new Date(date);return monthNames[thisDate.getMonth()]};mm.util.monthName3=function monthName3(date,monthList){var monthNames=monthList?monthList:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return mm.util.monthName(date,monthNames)};mm.util.weekday=function weekday(date,dayOfMonth,dayList){var dayNames=dayList?dayList:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var thisDate=new Date(date);if(dayOfMonth)thisDate.setDate(dayOfMonth);return dayNames[thisDate.getDay()]};mm.util.weekday3=function weekday3(date,dayOfMonth){var weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return mm.util.weekday(date,dayOfMonth,weekDays)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerJSONUtilities(util,mm){mm.util.JSONify=function JSONify(obj,offset){function fixup(key,val){if(mm._.isFunction(val)){return val.toString()}else{return val}}return JSON.stringify(obj,fixup,offset)};mm.util.JSONitize=function(jsString){var chars=[];var i=0;var latchedPrevIsBraceOrComma=false;var match=jsString.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);if(match){jsString=match[3]}function curr(){return jsString.charAt(i)}function next(){return jsString.charAt(i+1)}function prev(){return jsString.charAt(i-1)}function prevIsBraceOrComma(){if(latchedPrevIsBraceOrComma){latchedPrevIsBraceOrComma=false;return true}var ii=i-1;while(ii>=0){var cc=jsString.charAt(ii);if(cc==="{"||cc===","){return true}else if(cc===" "||cc==="\n"||cc==="\r"){ii--}else{return false}}return false}function skipComment(){i+=2;while(i<jsString.length&&(curr()!=="*"||next()!=="/")){i++}i+=2}function skipEolComment(){latchedPrevIsBraceOrComma=prevIsBraceOrComma();i+=2;while(i<jsString.length&&curr()!=="\n"){i++}i++}function parseString(quote){chars.push('"');i++;var c=curr();while(i<jsString.length&&c!==quote){if(c==='"'&&prev()!=="\\"){chars.push("\\")}if(c==="\\"){i++;c=curr();if(c!=="'"){chars.push("\\")}}chars.push(c);i++;c=curr()}if(c===quote){chars.push('"');i++}}function parseKey(){var specialValues=["null","true","false"];var key="";var c=curr();var regexp=/[a-zA-Z_$\d]/;while(regexp.test(c)){key+=c;i++;c=curr()}if(specialValues.indexOf(key)===-1){chars.push('"'+key+'"')}else{chars.push(key)}}while(i<jsString.length){var c=curr();if(c==="/"&&next()==="*"){skipComment()}else if(c==="/"&&next()==="/"){skipEolComment()}else if(c==="'"||c==='"'){parseString(c)}else if(/[a-zA-Z_$]/.test(c)&&prevIsBraceOrComma()){parseKey()}else{chars.push(c);i++}}return chars.join("")};mm.util.JSONparse=function JSONparse(str,sanitize){var s=str;if(sanitize)s=mm.util.JSONitize(s);return JSON.parse(s)}}},function(module,exports,__webpack_require__){"use srict";module.exports=function registerConfig(mm){var path=mm.check(mm.path);var _=mm.check(mm._);var SANITIZE=true;var Config=function configCtorCreator(){return function Config(){var self=this;self.debug=mm.util.envOption("DEBUG",false);self.debug=mm.util.mmEnvOption("DEBUG",self.debug);self.configFilesLoaded=0}}();Config.prototype.init=function init(config){var self=this;_.assign(self,config);return self};Config.prototype.load=function load(prefix,context){var self=this;if(mm.config.inBrowser)return self;var dir1=mm.config.baseDir;var dir2=path.join(dir1,"config");var fileName=prefix+".config.json";var dirs=[dir1,dir2];var ctx=_.isString(context)?context:"";function loadInternal(){for(var i in dirs){try{var cfgPath=path.join(dirs[i],fileName);var cfg=String(mm.fs.readFileSync(cfgPath));var config=mm.util.JSONparse(cfg,SANITIZE);self.init(config);mm.log.debug(ctx+"- Config:",cfgPath);self.configFilesLoaded++}catch(e){if(!mm.util.ENOENT(e)){mm.log.error(ctx+"Config read failed ["+cfgPath+"]",e.stack)}}}}loadInternal();if(self.debug){fileName=prefix+".debug.config.json";loadInternal()}return self};Config.prototype.appLoad=function load(appName,context){var self=this;var appId=path.basename(appName,".js");self.load("mmeddle").load(appId);self.appName=appId;return self};Config.prototype.userLoad=function load(userName,context){var self=this;self.load("user-"+userName);self.userName=userName;return self.configFilesLoaded>0};return Config}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var qq=mm.check(mm.Q);var EggTimer=function EggTimerCtor(timeMs,name){var self=this;var ms=2*60*1e3;if(_.isString(timeMs)){self.name=timeMs}else if(_.isNumber(timeMs)){ms=timeMs}else{self.name="Timer"}if(_.isString(name)){self.name=name}self.duration=ms;self.remaining=ms;self.running=false;self.dinged=false};EggTimer.prototype.onDing=function onDing(dingHandler){var self=this;self.dingHandler=dingHandler;return self};EggTimer.prototype.forceDing=function forceDing(dingHandler){var self=this;if(self.timedDefer){self.timedDefer.reject("forced Ding!")}return self};EggTimer.prototype.reset=function reset(timeMs){var self=this;if(self.timedDefer){self.timedDefer.resolve(self.getRemainingTime())}if(timeMs){self.duration=timeMs}self.remaining=self.duration;return self.start()};EggTimer.prototype.start=function start(){var self=this;self.timedDefer=qq.defer();self.timedDefer.promise.timeout(self.remaining,"Ding!").fail(self.dingWrapper.bind(self));self.startTime=_.now();self.running=true;self.dinged=false;return self};EggTimer.prototype.dingWrapper=function dingWrapper(){var self=this;self.running=false;self.stopTime=_.now();self.dinged=true;if(self.dingHandler){try{self.dingHandler()}catch(e){mm.log.error(self.name+"handler failed",e.stack)}}};EggTimer.prototype.stop=function stop(){var self=this;self.running=false;self.stopTime=_.now();self.remaining=self.getRemainingTime();if(self.timedDefer){self.timedDefer.resolve(self.remaining)}return self};EggTimer.prototype.getElapsedTime=function getElapsedTime(){var self=this;var stopTime=self.running?_.now():self.stopTime;return self.dinged?self.duration:stopTime-self.startTime};EggTimer.prototype.getRemainingTime=function getRemainingTime(){var self=this;var remaining=self.duration-self.getElapsedTime();return self.dinged?0:remaining};return EggTimer}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerSimpleEnum(){function Enum(values){var self=this;values.split("|").forEach(function(arg){self[arg]=arg})}return Enum}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerLoggers(mm){var _=mm.check(mm._);var format=mm.check(mm.format);function Priority(level,name){var self=this;self.level=level;self.name=name}Priority.LOW=new Priority(0,"LOW");Priority.NORMAL=new Priority(1,"NORMAL");Priority.HIGH=new Priority(2,"HIGH");var Logger=function loggerCtorCreator(){return function Logger(name,parent){var self=this;self.name=name;self.enabled=true;self.parent=parent?parent:null;self.minimumPriority=Priority.NORMAL;self.destinations=[]}}();Logger.Priority=Priority;Logger.bindLog=function bindLog(rootLogger){var log=_.bind(rootLogger.log,rootLogger);_bindFuncAsProp(log,"enable",rootLogger.enable,rootLogger);_bindFuncAsProp(log,"disable",rootLogger.disable,rootLogger);return log};function _bindFuncAsProp(obj,name,f,root){Object.defineProperty(obj,name,{get:function(){return f.call(root)}})}Logger.failureHandler=function failureHandler(e){console.log("***** Logger Failure *****:",e.stack)};Logger.formatObject=function formatObject(obj){if(typeof obj==="undefined")return"(undefined)";if(obj===null)return"(null)";if(typeof obj==="object"){if(obj instanceof String||obj instanceof Number||obj instanceof Date){return obj.toString()}else{return mm.util.inspect(obj)}}else{return obj.toString()}};Logger.format=function format(){return Logger.formatArray(Array.prototype.slice.call(arguments))};Logger.formatArray=function formatArray(args){if(args&&args.length>1&&_.isString(args[0])&&args[0].indexOf("{")>-1){try{return format.apply(null,args)}catch(e){Logger.failureHandler(e);return args.join()}}else{var outText="";var separator="";args.forEach(function(arg){outText+=separator+Logger.formatObject(arg);separator=" "});return outText}};Logger.prototype.origin=function origin(){var self=this;return"["+self.name+"]"};Logger.prototype.addDestination=function addDestination(handler){var self=this;if(_.indexOf(self.destinations,handler)<0){self.destinations.push(handler)}return self};Logger.prototype.removeDestination=function removeDestination(handler){var self=this;if(handler==="*"){self.destinations=[]}else if(_.indexOf(self.destinations,handler)>=0){self.destinations=_.without(self.destinations,handler)}return self};Logger.prototype.log=function log(){var self=this;if(self.enabled){var args=Array.prototype.slice.call(arguments);var n=args.length;if(n>0){if(args[n-1]instanceof Priority){var priority=args.pop();return self.logArray(args,priority)}}return self.logArray(args)}return self};Logger.prototype.allowPriority=function allowPriority(v){var self=this;self.minimumPriority=v;return self};Logger.prototype.enable=function enable(value){var self=this;self.enabled=arguments.length===0||value;return self};Logger.prototype.disable=function disable(){return this.enable(false)};Logger.prototype.logArray=function logArray(args,priority){var self=this;var outText="";if(self.enabled){outText=Logger.formatArray(args)}return self.logString(outText,priority)};Logger.prototype.logString=function logString(text,priority){var self=this;if(self.enabled){var messagePriority=priority?priority:Priority.NORMAL;var logger=self;var originLogger=self;while(logger){if(logger.enabled){_logString(text,originLogger,logger,messagePriority);logger=logger.parent}else{logger=null}}}return self};function _logString(text,originLogger,logger,messagePriority){if(messagePriority.level>=logger.minimumPriority.level){logger.destinations.forEach(function(handler){_logStringToDestination(handler,text,originLogger,messagePriority)})}}function _logStringToDestination(handler,text,logger,messagePriority){try{handler(text,logger,messagePriority)}catch(e){Logger.failureHandler(e)}}return Logger}},function(module,exports,__webpack_require__){"use srict";module.exports=function registerLoggers(mm){var path=mm.check(mm.path);var Logger=mm.check(mm.Logger);var rootLogger=new Logger("log");var debugLogger=new Logger("debug",rootLogger);var infoLogger=new Logger("info",rootLogger);var statusLogger=new Logger("status",rootLogger);var warningLogger=new Logger("warning",rootLogger);var errorLogger=new Logger("error",rootLogger);mm.loggers={rootLogger:rootLogger,debugLogger:debugLogger,infoLogger:infoLogger,statusLogger:statusLogger,warningLogger:warningLogger,errorLogger:errorLogger};var log=Logger.bindLog(infoLogger);log.info=Logger.bindLog(infoLogger);log.debug=Logger.bindLog(debugLogger);log.status=Logger.bindLog(statusLogger);log.warn=Logger.bindLog(warningLogger);log.error=Logger.bindLog(errorLogger);function rawConsoleLogHandler(message,logger,priority){var text=(priority.level>1?"(!)":"")+message;if(log.writeLine){log.writeLine(text)}else{console.log(text)}}function consoleLogHandler(message,logger,priority){defaultLogHandler(console.log,message,logger,priority)}function debugLogHandler(message,logger,priority){if(!console.debug)return consoleLogHandler(message,logger,priority);defaultLogHandler(console.debug,message,logger,priority)}function errorLogHandler(message,logger,priority){if(mm.config.inBrowser)return warningLogHandler(message,logger,priority);if(!console.error)return consoleLogHandler(message,logger,priority);defaultLogHandler(console.error,message,logger,priority)}function warningLogHandler(message,logger,priority){if(!console.warn)return consoleLogHandler(message,logger,priority);defaultLogHandler(console.warn,message,logger,priority)}function defaultLogHandler(func,message,logger,priority){var ptext="";ptext=priority.level>1?"(!)":ptext;var prefix=logger.origin()+ptext+":";var text=prefix+message;if(mm.config.inPhantom){console.log(text)}else{if(log.writeLine){log.writeLine(text)}else{func(text)}}}infoLogger.addDestination(rawConsoleLogHandler);statusLogger.addDestination(consoleLogHandler);debugLogger.addDestination(debugLogHandler);warningLogger.addDestination(warningLogHandler);errorLogger.addDestination(errorLogHandler);log.setWriteLine=function setWriteLine(writeLine){log.writeLine=writeLine};log.setCliConsole=function setCliConsole(cliConsole){log.cliConsole=cliConsole;log.setWriteLine(cliConsole.writeLine)};log.getFileLogHandler=function getFileLogHandler(filePath){var msgQueue=[];var running=0;var logFailed=false;var recursionLimit=50;var fileDir=mm.path.dirname(filePath);function fileLogHandler(message,logger,priority){if(logFailed)return;var entry={timestamp:mm._.now(),origin:logger.origin(),priority:priority,message:message};msgQueue.push(entry);if(running===0){mm.Q.fcall(startRunning)}}function startRunning(){if(logFailed)return;if(running>recursionLimit){logFailed=true;mm.log.error("Writing to log ["+filePath+"] was getting too far too far behind. Sorry, I give up.");return}running++;try{var text=formatTextLines();mm.mkdirp(fileDir,function(err,made){if(err){logFailed=true;mm.log.error("Creating log dir ["+fileDir+"] has failed",err);return}mm.fs.appendFile(filePath,text,function(err){if(err){logFailed=true;mm.log.error("Writing to log ["+filePath+"] has failed",err)}else{if(msgQueue.length>0)startRunning()}running--})})}catch(err){logFailed=true;mm.log.error("Formatting log ["+filePath+"] has failed",err.stack)}}function formatTextLines(){var text="";msgQueue.forEach(function(entry){text+=formatTextLine(entry)});msgQueue=[];return text}function formatTextLine(entry){var ts=mm.util.timestamp(entry.timestamp);var text=ts+" "+mm._.pad(entry.origin,8)+(entry.priority.level>1?"!!!":"")+entry.message+"\n";return text}return fileLogHandler};log.setupAppDebugLog=function setupAppDebugLog(appName,debugToConsole){if(mm.config.inBrowser)return;var logDir=path.join(mm.config.baseDir,"logs");var appId=path.basename(appName,".js");var logFile=appId+"-"+mm.util.yymmdd()+".log";var logPath=path.join(logDir,logFile);mm.log("- Debug logging to ",logPath);mm.loggers.rootLogger.addDestination(log.getFileLogHandler(logPath));if(debugToConsole){mm.log("- Debug logging to console enabled.")}else{mm.loggers.debugLogger.removeDestination("*");mm.log.debug("============================= "+"mMeddle "+appId+" STARTED "+"=============================")}};return log}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var LocalStorage=function localStorageCtorCreator(){var ctor=function LocalStorage(){var self=this;if(mm.config.inNode){var domain=mm.util.mmEnvOption("LOCALSTORAGE",mm.config.appName);var dir=mm.path.join(mm.config.baseDir,"storage","localStorage",domain);self.baseDir=dir;self.filePath=function filePath(name){var fileName=name+".localStorage.json";return mm.path.join(self.baseDir,fileName)}}else{if(typeof mm.window.localStorage==="undefined"){mm.log.warn("No browser support for local Storage")}}};return ctor}();LocalStorage.prototype.clear=function localClear(){var self=this;if(mm.config.inNode){mm.del.sync(self.baseDir)}else{mm.window.localStorage.clear()}};LocalStorage.prototype.store=function localStore(name,obj){var self=this;var text=mm.util.JSONify(obj,2);if(mm.config.inNode){mm.mkdirp.sync(self.baseDir);mm.fs.writeFileSync(self.filePath(name),text)}else{mm.window.localStorage.setItem(name,text)}};LocalStorage.prototype.load=function localLoad(name){var self=this;var text;if(mm.config.inNode){try{text=String(mm.fs.readFileSync(self.filePath(name)))}catch(e){return text}}else{text=mm.window.localStorage.getItem(name)}if(!text)return text;return JSON.parse(text)};LocalStorage.prototype.remove=function localRemove(name){var self=this;if(mm.config.inNode){var fp=self.filePath(name);if(mm.fs.existsSync(fp)){mm.fs.unlinkSync(fp)}}else{mm.window.localStorage.removeItem(name);

}};return LocalStorage}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var StoragePath=function storagePathCtorCreator(){var ctor=function StoragePath(context,text){var self=this;var parts=text.split("/");if(parts.length<2){self.userName=context.user;self.collectionName=parts[0]}else{self.userName=parts[0];self.collectionName=parts[1]}if(context.prefer)self.prefer=context.prefer};return ctor}();return StoragePath}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var StorageInfo=function storageInfoCtorCreator(){var ctor=function StorageInfo(stat){var self=this;if(stat)mm._.defaults(self,stat)};return ctor}();return StorageInfo}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var qq=mm.check(mm.Q);var StorageEngine=function storageEngineCtorCreator(){var ctor=function StorageEngine(){var self=this;self.todo=[];self.idle=true;self.engineTimeout=1e4;self.initialized=false};return ctor}();StorageEngine.prototype.close=function engineClose(){var self=this;if(self.dbProvider&&self.dbProvider.close){self.dbProvider.close()}if(self.fileProvider&&self.fileProvider.close){self.fileProvider.close()}self.initialized=false};StorageEngine.prototype.store=function engineStore(path,content){var self=this;path.itemName=content.name;content.owner=path.userName;return self.queue({op:"store",path:path,content:content})};StorageEngine.prototype.load=function engineLoad(path,name){var self=this;path.itemName=name?name:path.itemName;return self.queue({op:"load",path:path})};StorageEngine.prototype.loadMultiple=function engineLoad(path,name){var self=this;path.itemName=name?name:path.itemName;return self.queue({op:"loadMultiple",path:path})};StorageEngine.prototype.remove=function engineRemove(path,name){var self=this;path.itemName=name?name:path.itemName;return self.queue({op:"remove",path:path})};StorageEngine.prototype.queue=function engineQueue(op){var self=this;op.deferred=qq.defer();var ms=self.engineTimeout;var tp=op.deferred.promise.timeout(ms,"Storage engine timed out after "+ms+" ms");self.todo.push(op);if(self.idle){self.initializeProviders().then(function(){self.run()})}return tp};StorageEngine.prototype.run=function engineRun(){try{var self=this;self.idle=false;while(self.todo.length>0){var op=self.todo.shift();op.started=_.now();self.startOp(op)}self.idle=true}catch(e){mm.log.error("* Storage Engine Failure:",e.stack)}};StorageEngine.prototype.initializeProviders=function engineInitializeProviders(){var self=this;var initializedProviders=[];if(!self.initialized){self.initializer=qq.defer();var p;if(self.dbProvider){p=self.dbProvider.initialize();initializedProviders.push(p);p.catch(function(){mm.log.warn("Database provider is not available");delete self.dbProvider})}if(self.fileProvider){p=self.fileProvider.initialize();initializedProviders.push(p);p.catch(function(){mm.log.error("File provider is not available");delete self.fileProviderfileProvider})}self.initialized=qq.allSettled(initializedProviders)}return self.initialized};StorageEngine.prototype.startOp=function startOp(op){var self=this;var p=op.path;if(p.prefer==="fs"&&self.fileProvider){self.fileProvider.perform(op);return}if(self.dbProvider){self.dbProvider.perform(op);return}if(self.fileProvider){self.fileProvider.perform(op);return}var s="Unavailable storage operation: "+op.op;op.deferred.reject(new Error(s))};return StorageEngine}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var storage=mm.check(mm.storage);var StoragePath=mm.check(storage.StoragePath);var StorageClient=function storageClientCtorCreator(){var ctor=function StorageClient(options){var self=this;_.defaults(self,options);if(typeof self.engine==="undefined"){self.engine=mm.check(storage.storageEngine)}};return ctor}();StorageClient.prototype.notFound=function notFound(err){return mm.util.ENOENT(err)};StorageClient.prototype.store=function clientStore(path,obj){var self=this;if(!(path instanceof StoragePath)){path=new StoragePath(self,path)}return self.engine.store(path,obj)};StorageClient.prototype.load=function clientLoad(path,name){var self=this;if(!(path instanceof StoragePath)){path=new StoragePath(self,path)}return self.engine.load(path,name).then(function(info){return info.content})};StorageClient.prototype.loadMultiple=function clientLoadMultiple(path,namePattern){var self=this;if(!(path instanceof StoragePath)){path=new StoragePath(self,path)}return self.engine.loadMultiple(path,namePattern).then(function(info){return info.content})};StorageClient.prototype.remove=function clientRemove(path,name){var self=this;if(!(path instanceof StoragePath)){path=new StoragePath(self,path)}return self.engine.remove(path,name)};StorageClient.prototype.close=function clientClose(){};return StorageClient}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var qq=mm.check(mm.Q);var storage=mm.check(mm.storage);var StorageInfo=mm.check(storage.StorageInfo);var EggTimer=mm.check(mm.obj.EggTimer);function MongoDBProvider(engine,url){var self=this;self.engine=engine;self.dbOpen=false;self.operationTimeout=6e4;self.url=url;self.opTimer=new EggTimer(self.operationTimeout);self.connectDB=function connectDB(){self.opTimer.onDing(self.close.bind(self));self.opTimer.reset();if(self.dbOpen||self.dbOpenP){return self.dbOpenP}mm.log.debug("- Connecting to MongoDB database: ",url);var mongodb=mm.check(__webpack_require__(71));var MongoClient=mongodb.MongoClient;var dbOpenDeferred=qq.defer();self.dbOpenP=dbOpenDeferred.promise;MongoClient.connect(url,function(err,db){if(err){if(err.message==="connect ECONNREFUSED"){mm.log.warn("MongoDB: Not available")}else{mm.log.error("MongoDB: Connection failure:",err)}dbOpenDeferred.reject(err);return}mm.log.debug("- Connection established to:",url);self.dbOpen=true;self.db=db;self.opTimer.reset();dbOpenDeferred.resolve(db)});return dbOpenDeferred.promise}}MongoDBProvider.register=function registerMongoDbProvider(engine){var url="mongodb://localhost/mydb";url=mm.util.envOption("OPENSHIFT_MONGODB_DB_URL",url);url=mm.util.mmEnvOption("MONGODB_DB_URL",url);if(!url){mm.log.warn("No DB specified. Provider not registered.");return}engine.dbProvider=new MongoDBProvider(engine,url)};MongoDBProvider.prototype.initialize=function initialize(op){var self=this;if(!self.initialized){self.initialized=self.connectDB()}return self.initialized};MongoDBProvider.prototype.perform=function perform(op){var self=this;var opFunction=self[op.op];if(!opFunction){var s="Unrecognized MONGO DB operation: "+op.op;op.deferred.reject(new Error(s));return}self.connectDB().then(function(db){try{opFunction(db,op)}catch(e){op.deferred.reject(e)}},function(err){op.deferred.reject(err)})};MongoDBProvider.prototype.close=function close(){var self=this;if(self.dbOpen){self.db.close();self.dbOpen=false;self.dbOpenP=false;self.opTimer.stop();mm.log.status("- Database closed: ",self.url)}};MongoDBProvider.prototype.load=function load(db,op){var collectionName=op.path.collectionName;var userName=op.path.userName;var itemName=op.path.itemName;var collection=db.collection(collectionName);var callbacks=0;var objectQuery={name:itemName,owner:userName};collection.find(objectQuery).toArray(function(err,items){callbacks++;if(callbacks>1)return;if(err){mm.log.error("DB find failure",err);op.deferred.reject(err);return}if(items.length===0){mm.log.debug("MongoDBProvider: * No items found on DB load",objectQuery);op.deferred.reject(new Error('ENOENT, Item "'+itemName+'" not found.'));return}if(items.length>1){mm.log.warn('%d items of name "%s" found.',items.length,itemName)}mm.log.debug(items,mm.Logger.Priority.LOW);var content=items[0];var info=new StorageInfo({});info.userName=userName;info.itemName=itemName;info.collectionName=collectionName;info.content=content;op.deferred.resolve(info)})};MongoDBProvider.prototype.loadMultiple=function loadMultiple(db,op){var collectionName=op.path.collectionName;var itemName=op.path.itemName;var collection=db.collection(collectionName);var info=new StorageInfo;info.collectionName=op.path.collectionName;info.itemName=op.path.itemName;info.count=0;info.text=[];info.content=[];var wildcardRegex=itemName.replace(/\./g,".");wildcardRegex=wildcardRegex.replace(/\*/g,".*");wildcardRegex="^"+wildcardRegex.replace(/\?/g,".");var objectQuery={name:{$regex:wildcardRegex,$options:"i"}};mm.log.debug("- loadMultiple Collection:",collectionName,", Pattern:",objectQuery);var cursor=collection.find(objectQuery);cursor.each(function(err,item){if(err){mm.log.error("DB loadMultiple each failure",err);op.deferred.reject(err);return}if(item){info.content.push(item);info.count++}else{if(info.count===0){mm.log.debug("MongoDBProvider: * No items found on DB loadMultiple",objectQuery)}else{mm.log.debug("loadMultiple ---> :",info)}op.deferred.resolve(info)}})};MongoDBProvider.prototype.store=function store(db,op){var collectionName=op.path.collectionName;var userName=op.path.userName;var itemName=op.path.itemName;var collection=db.collection(collectionName);var objectQuery={name:itemName,owner:userName};collection.findOneAndUpdate(objectQuery,op.content,{upsert:true,returnOriginal:false},function(err,r){if(err){mm.log.error("DB upsert failure",err);op.deferred.reject(err);return}var info=new StorageInfo(r);info.itemName=itemName;info.collectionName=collectionName;info.userName=userName;info.ok=true;op.deferred.resolve(info)})};MongoDBProvider.prototype.remove=function remove(db,op){var collectionName=op.path.collectionName;var userName=op.path.userName;var itemName=op.path.itemName;var objectQuery={name:itemName,owner:userName};var collection=db.collection(collectionName);collection.remove(objectQuery,function(err,r){if(err){mm.log.error("DB remove failure",err);op.deferred.reject(err);return}var result=r.result;var nRemoved=result.n;if(nRemoved===0){op.deferred.resolve(false)}else{op.deferred.resolve(true)}})};return MongoDBProvider}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var qq=mm.check(mm.Q);var path=mm.check(mm.path);var storage=mm.check(mm.storage);var StorageInfo=mm.check(storage.StorageInfo);var wildMatch=mm.check(mm.util.wildMatch);function FileProvider(engine){var self=this;self.engine=engine;self.fs=mm.check(mm.fs)}FileProvider.register=function registerFileProvider(engine){engine.basePath=mm.path.join(mm.config.baseDir,"storage");engine.fileExtension=".mm.json";engine.fileProvider=new FileProvider(engine)};FileProvider.prototype.initialize=function initialize(op){var self=this;if(!self.initialized){self.initialized=qq(true)}return self.initialized};FileProvider.prototype.perform=function perform(op){var self=this;var opFunction=self[op.op];if(!opFunction){var s="Unrecognized storage operation: "+op.op;op.deferred.reject(new Error(s));return}try{var p=op.path;var localDir=path.join(p.userName,p.collectionName);var fileDir=path.join(self.engine.basePath,localDir);var fileName=p.itemName+self.engine.fileExtension;var filePath=path.join(fileDir,fileName);opFunction(self.fs,op,fileName,filePath,fileDir)}catch(e){mm.log.error("-FILEOP FAILED",e.stack);op.deferred.reject(e)}};FileProvider.prototype.load=function load(fs,op,fileName,filePath,fileDir){fs.stat(filePath,function(err,stat){if(err){op.deferred.reject(err);return}var info=new StorageInfo(stat);info.collectionName=op.path.collectionName;info.itemName=op.path.itemName;info.fileName=fileName;info.fileDir=fileDir;fs.readFile(filePath,"utf8",function(err,text){if(err){op.deferred.reject(err);return}info.text=String(text);info.content=JSON.parse(text);info.owner=info.content.owner;op.deferred.resolve(info)})})};FileProvider.prototype.loadMultiple=function loadMultiple(fs,op,fileName,filePath,fileDir){mm.log.debug('- loadMultiple Dir:{0}  Pattern;"{1}"',fileDir,fileName);fs.readdir(fileDir,function(err,files){if(err){op.deferred.reject(err);return}mm.log.debug("- loadMultiple:",files);var info=new StorageInfo;info.collectionName=op.path.collectionName;info.itemName=op.path.itemName;info.fileName=fileName;info.fileDir=fileDir;info.count=0;info.text=[];info.content=[];var fileSet=[];files.forEach(function(candidateFileName){if(wildMatch(candidateFileName,fileName)){fileSet.push(path.join(fileDir,candidateFileName))}});var n=fileSet.length;var erred=false;if(n===0){op.deferred.resolve(info);return}fileSet.forEach(function(aFilePath){fs.readFile(aFilePath,"utf8",function(err,text){if(err||erred){op.deferred.reject(err);erred=true;return}info.text.push(String(text));info.content.push(JSON.parse(text));info.count++;n--;if(n===0){mm.log.debug("- loadMultiple ---> :",info);op.deferred.resolve(info)}})})})};FileProvider.prototype.store=function store(fs,op,fileName,filePath,fileDir){var mkdirp=mm.check(mm.mkdirp);var options={encoding:"utf8",mode:438,flag:"w"};mkdirp(fileDir,function(err,made){if(err){op.deferred.reject(err);return}if(made){}op.content.owner=op.path.userName;var text=mm.util.JSONify(op.content,2);fs.writeFile(filePath,text,options,function(err){if(err){op.deferred.reject(err);return}fs.stat(filePath,function(err,stat){if(err){op.deferred.reject(err);return}var info=new StorageInfo(stat);info.owner=op.content.owner;info.collectionName=op.path.collectionName;info.itemName=op.content.name;info.fileName=fileName;info.fileDir=fileDir;info.text=text;info.ok=true;op.deferred.resolve(info)})})})};FileProvider.prototype.remove=function remove(fs,op,fileName,filePath,fileDir){fs.unlink(filePath,function(err){if(err){op.deferred.resolve(false);return}op.deferred.resolve(true)})};return FileProvider}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerClientUser(mm){var _=mm.check(mm._);var text2ua=mm.check(mm.util.text2ua);var ua2hex=mm.check(mm.util.ua2hex);var CoreObject=mm.check(mm.obj.CoreObject);var sha256=mm.check(__webpack_require__(76));var ANONYMOUS="anonymous";var ClientUser=function clientUserCtorCreator(){var ctor=function ClientUser(userName){var self=this;self.name=userName?userName:ANONYMOUS;self.firstName=null;self.lastName=null;self.email=null;self.creationDate=new Date;self.loggedIn=false;self.pbkdf2Salt=ua2hex(text2ua(self.creationDate.toISOString()))};return ctor}();ClientUser.prototype=Object.create(CoreObject.prototype);ClientUser.prototype.PBKDF2_ROUNDS=1e3;ClientUser.prototype.PBKDF2_DKLEN=16;ClientUser.prototype.init=function init(userObj,sanitize){var self=this;if(userObj)_.assign(self,userObj);if(sanitize){delete self.pbkdf2Salt;delete self.pdk;delete self.hpdk;delete self.owner}return self};ClientUser.prototype.isAnonymous=function isAnonymous(){var self=this;return!self.name||!self.lastName||_.startsWith(self.name,ANONYMOUS)};ClientUser.prototype.hashP=function hashP(ptpwd,ispdk){var self=this;if(ispdk){self.pdk=ptpwd}else{var uIntArrayPDK=sha256.pbkdf2(text2ua(ptpwd),self.pbkdf2Salt,self.PBKDF2_ROUNDS,self.PBKDF2_DKLEN);self.pdk=ua2hex(uIntArrayPDK)}return self};ClientUser.prototype.hashPdk=function hashPdk(seed){var self=this;var seedypdk="HASHPDK:"+seed+"_"+self.pdk;var uIntArrayPDK=sha256(text2ua(seedypdk));self.hpdk=ua2hex(uIntArrayPDK);return self};return ClientUser}},function(module,exports,__webpack_require__){(function(process){"use strict";module.exports=function registerCliConsole(mm){var check=mm.check;var _=check(mm._);var qq=check(mm.Q);var EggTimer=check(mm.obj.EggTimer);var BS=String.fromCharCode(8);var CR=String.fromCharCode(13);var LF=String.fromCharCode(10);var NL=String.fromCharCode(10);var CRLF=String.fromCharCode(13,10);var HOME=String.fromCharCode(27,91,49,126);var UP=String.fromCharCode(27,91,65);var DOWN=String.fromCharCode(27,91,66);var KeyCodes={"null":[0],ctrlA:[1],ctrlB:[2],ctrlC:[3],ctrlD:[3],ctrlE:[3],ctrlF:[3],bell:[7],bs:[8],tab:[9],lf:[10],ff:[11],ctrlL:[12],cr:[13],ctrlN:[14],ctrlO:[15],ctrlP:[16],ctrlQ:[17],ctrlR:[18],ctrlS:[19],ctrlT:[20],ctrlU:[21],ctrlV:[22],ctrlW:[23],ctrlX:[24],ctrlY:[25],ctrlZ:[26],esc:[27],up:[27,91,65],down:[27,91,66],right:[27,91,67],left:[27,91,68],ins:[27,91,50,126],del:[27,91,51,126],home:[27,91,49,126],end:[27,91,52,126],pgup:[27,91,53,126],pgdn:[27,91,54,126],F1:[27,91,91,65],F2:[27,91,91,66],F3:[27,91,91,67],F4:[27,91,91,68],F5:[27,91,91,69],F6:[27,91,49,55,126],F7:[27,91,49,56,126],F8:[27,91,49,57,126],F9:[27,91,50,48,126],F10:[27,91,50,49,126],F11:[27,91,50,51,126],F12:[27,91,50,52,126]};var CliConsole=function cliConsoleCtor(cliInText,cliPrompt,outDiv){var self=this;var inNode=mm.config.inNode;var inBrowser=inNode?false:true;var activity=false;var outStream;var inStream;var cursor;var consoleOutput;var consolePrompt;var consoleInput;self.idleTimer=null;self.eventHandlers=[];if(inNode){outStream=process.stdout;cursor=__webpack_require__(77)(outStream);inStream=process.stdin;inStream.setEncoding("utf8");inStream.setRawMode(true);self.displayRows=outStream.rows;self.displayCols=outStream.columns;var h=[];h.push({obj:outStream,name:"resize",func:resizeHandler});h.push({obj:inStream,name:"end",func:inCloseHandler});h.push({obj:inStream,name:"close",func:inCloseHandler});h.push({obj:inStream,name:"readable",func:inReadableHandler});h.push({obj:inStream,name:"error",func:inErrorHandler});self.eventHandlers=h}else{consoleOutput=mm.document.getElementById(outDiv);consolePrompt=mm.document.getElementById(cliPrompt);consoleInput=mm.document.getElementById(cliInText)}self.mute=mm.config.mochaConsoleMute;self.lastLine="";self.error=null;self.saveOnlyUnique=false;self.closeHandler=null;self.maxPasswordLength=15;self.savedInputLines=[];function makeLine(text){return{textLine:text,multiLine:false}}var handlers=[];self.handler={func:null,prompt:inNode?"-->":"Cmd:",pwdMode:false};if(inBrowser){consolePrompt.innerHTML=self.handler.prompt}var pendingInputs=[];var keyQueue=[];var currentInput=makeLine("");var inputOffset=0;var insertMode=true;var promptVisible=false;var partialOutputLine=true;var currentSavedInputIndex=0;var savedInitialLine="";var scrollingPrevious=true;var timer=new EggTimer(100).start();var running=true;installEventHandlers();function getKeyCode(unicodes){var c=[];var keyEvent=null;var n=unicodes.length;var ch2=n>1?unicodes[1]:"";var c1=unicodes.charCodeAt(0);for(var i=0;i<n;i++){c.push(unicodes.charCodeAt(i))}function keyMatch(){for(var key in KeyCodes){if(_.isEqual(KeyCodes[key],c)){keyEvent=key;return true}}return false}if(keyMatch())return keyEvent;if(c1===27&&c.length>1){c.shift();if(keyMatch()){return"alt"+keyEvent}else{return"alt"+ch2}}return null}function isPrintableAscii(cc){if(cc.length===1){var c=cc.charCodeAt(0);return c>=32&&c<128}return false}function hexString(unicode){var h="";var sep="";for(var i=0;i<unicode.length;i++){var cc=unicode.charCodeAt(i);h+=sep+hexOfUnicode(cc);sep="|"}return h}function hexOfUnicode(cc){var d=cc.toString(16);while(d.length<4)d="0"+d;return d}function hexOfAscii(cc){var d=cc.toString(16);return d.length<2?"0"+d:d}function setChar(str,offset,ch,insert){var n=str.length;while(n<offset){str+=" ";n++}if(offset===n){return str+=ch}var left=str.substring(0,offset);var right=str.substring(offset+(insert?0:1));return left+ch+right}function delChar(str,offset){var n=str.length;while(n<offset){str+=" ";n++}if(offset===n){return str.substring(0,offset-1)}var left=str.substring(0,offset);var right=str.substring(offset+1);return left+right}function saveInput(currentInput){if(self.handler.pwdMode){return false}currentSavedInputIndex=0;var textLine=currentInput.textLine;if(currentInput.multiLine){return false}if(textLine.length===0){return false}if(self.saveOnlyUnique){if(_.includes(self.savedInputLines,textLine)){return false}}if(self.savedInputLines.length>0&&self.savedInputLines[0]===textLine){return false}self.savedInputLines.unshift(textLine);return true}function fetchPendingInput(){self.lastInput=pendingInputs.shift();self.lastLine=self.lastInput.textLine;saveInput(self.lastInput)}function out(chars){if(self.idleTimer)self.idleTimer.reset();if(self.pauseTimer)self.pauseTimer.reset();if(self.mute)return self;if(inBrowser){consoleOutput.appendChild(mm.document.createTextNode(chars))}else{cursor.write(chars)}return self}function setLineOffset(n){if(self.mute)return;if(inNode){cursor.horizontalAbsolute(n+1)}}function showPrompt(reprompt){if(inNode){if(!promptVisible||reprompt){promptVisible=true;if(partialOutputLine){out(NL);partialOutputLine=false}setLineOffset(0);if(!self.mute){cursor.eraseLine();out(self.handler.prompt);cursor.show()}}}return self}function showCurrentLine(reprompt){showPrompt(reprompt);if(inNode){setLineOffset(self.handler.prompt.length);var text=currentInput.textLine;if(self.handler.pwdMode){text=_.repeat("*",text.length)}out(text);if(!self.mute)cursor.eraseLine();var lineOffset=self.handler.prompt.length+inputOffset;setLineOffset(lineOffset)}return self}function updateCurrentLine(){if(inNode){if(!promptVisible)showCurrentLine()}}function rightArrow(){if(inputOffset<currentInput.textLine.length){inputOffset++}return showCurrentLine()}function leftArrow(){if(inputOffset>0){inputOffset--}return showCurrentLine()}function backSpace(){if(inputOffset>0){inputOffset--;currentInput.textLine=delChar(currentInput.textLine,inputOffset)}return showCurrentLine()}function deleteChar(){if(inputOffset<currentInput.textLine.length){inputOffset++;return backSpace()}return showCurrentLine()}function endOfLine(){inputOffset=currentInput.textLine.length;return showCurrentLine()}function startOfLine(){inputOffset=0;return showCurrentLine()}function toggleInsertMode(){insertMode=!insertMode;return self}function clearLine(){inputOffset=0;currentInput.textLine="";return showCurrentLine()}function previousSavedLine(){if(currentInput.multiLine){}else{promptVisible=false;if(currentSavedInputIndex===0){savedInitialLine=currentInput.textLine}if(self.savedInputLines.length>currentSavedInputIndex){if(!scrollingPrevious&&self.savedInputLines.length>currentSavedInputIndex+1){currentSavedInputIndex++}currentInput=makeLine(self.savedInputLines[currentSavedInputIndex]);currentSavedInputIndex++;scrollingPrevious=true}else{currentInput=makeLine(savedInitialLine)}return endOfLine()}}function nextSavedLine(){if(currentInput.multiLine){}else{promptVisible=false;if(currentSavedInputIndex>0){currentSavedInputIndex--;if(scrollingPrevious&&currentSavedInputIndex>0){currentSavedInputIndex--}scrollingPrevious=false;currentInput=makeLine(self.savedInputLines[currentSavedInputIndex])}else{currentInput=makeLine(savedInitialLine)}return endOfLine()}}function autoComplete(){if(self.completer){currentInput.textLine+="-TAB FIXME-";return endOfLine()}}function handlePendingInput(){if(pendingInputs.length>0){if(self.handler.func){fetchPendingInput()}while(self.handler.func){var response=self.handler.func(self.lastLine);if(response===false){self.handler=handlers.pop();if(inBrowser){consolePrompt.innerHTML=self.handler.prompt;consoleInput.type=self.handler.pwdMode?"password":"text"}return self}else if(response===true){return self}else if(_.isString(response)){self.handler=handlers.pop();self.lastLine=response}else{throw new Error("Invalid line handler response")}}}return self}function enter(){activity=true;if(inNode){if(self.handler.pwdMode){showPrompt(true);out(_.repeat("*",self.maxPasswordLength))}else{showCurrentLine()}out(NL)}else{currentInput=makeLine(consoleInput.value);consoleInput.value="";var textLine=currentInput.textLine;if(self.handler.pwdMode){textLine=_.repeat("*",self.maxPasswordLength)}out("--> "+self.handler.prompt+textLine+"\n")}pendingInputs.push(currentInput);currentInput=makeLine("");inputOffset=0;promptVisible=false;return handlePendingInput()}function handleKeyEvent(kc){switch(kc){case"cr":return enter();case"tab":return autoComplete();case"bs":return backSpace();case"del":return deleteChar();case"esc":return clearLine();case"ins":return toggleInsertMode();case"right":return rightArrow();case"left":return leftArrow();case"home":return startOfLine();case"end":return endOfLine();case"up":return previousSavedLine();case"down":return nextSavedLine()}return self}function handleVisibleInputChar(ch){currentInput.textLine=setChar(currentInput.textLine,inputOffset,ch,insertMode);inputOffset++;return showCurrentLine()}CliConsole.prototype.onClose=function onClose(func){self.closeHandler=func};CliConsole.prototype.close=function close(){if(running){running=false;removeEventHandlers();timer.stop();if(self.closeHandler)self.closeHandler()}};CliConsole.prototype.clearScreen=inNode?function clearScreen(){if(self.mute)return;activity=true;var windowSize=process.stdout.getWindowSize();var linesPerScreen=windowSize[1];var lineFeeds=_.repeat("\n",linesPerScreen);cursor.write(lineFeeds);cursor.eraseData(2);cursor.goto(1,1)}:function clearScreen(){if(self.mute)return;activity=true;consoleOutput.innerHTML=""};CliConsole.prototype.write=inNode?function write(text){if(promptVisible){setLineOffset(0);if(!self.mute){cursor.eraseLine();cursor.hide()}}out(text);partialOutputLine=false;if(text.length>0){var ch=text[text.length-1];partialOutputLine=ch!=="\r"&&ch!=="\n"}promptVisible=false;return self}:function write(text){out(text)};CliConsole.prototype.writeLine=inNode?function writeLine(textLine){activity=true;self.write(textLine);out(NL);partialOutputLine=false;return self}:function writeLine(textLine){activity=true;self.write(textLine+"\n");return self};CliConsole.prototype.setLineHandler=function setLineHandler(handler,prompt,passwordMode){activity=true;if(!prompt)prompt=self.handler.prompt;handlers.push(self.handler);self.handler={func:handler,prompt:prompt,pwdMode:passwordMode};if(inNode){showCurrentLine(true)}else{consolePrompt.innerHTML=self.handler.prompt;consoleInput.type=self.handler.pwdMode?"password":"text"}};CliConsole.prototype.setCompleter=function setCompleter(completer){self.completer=completer};CliConsole.prototype.ask=function ask(query,obj,field,isPwd){if(obj&&obj.field){return qq(obj)}var qD=qq.defer();self.setLineHandler(function(answer){if(answer){if(obj){obj[field]=answer;qD.resolve(obj)}else{qD.resolve(answer)}}else{qD.reject(new Error("Blank line not allowed. Entry abandoned"))}return false},query,isPwd===true?true:false);return qD.promise};CliConsole.prototype.spoofInput=function spoofInput(text){var line=makeLine(text);pendingInputs.push(line);out("--- Spoofed>"+text+NL)};CliConsole.prototype.spoofInputChars=function spoofInputChars(text){var chars=[];if(_.isString(text)){var inputLine=text+CR;for(var i=0;i<inputLine.length;i++){var cc=inputLine.charCodeAt(i);pushRawKey(String.fromCharCode(cc))}return}else if(_.isArray(text)){chars=text}else{chars.push(text)}var rc="";chars.forEach(function(cc){rc+=String.fromCharCode(cc)});pushRawKey(rc)};CliConsole.prototype.onPause=function onPause(ms,func){var t=100;var f=func;if(_.isNumber(ms)){t=ms;f=func}else{f=ms}self.pauseTimer=new EggTimer(t).onDing(function(){self.pauseTimer=null;f()})};CliConsole.prototype.setIdleTimer=function setIdleTimer(idleTimer){self.idleTimer=idleTimer};timer.onDing(function processPendingInputs(){try{var n=keyQueue.length;var keys=keyQueue;keyQueue=[];if(n>0){keys.forEach(function handleKey(key){if(key.keyCode){handleKeyEvent(key.keyCode)}else if(key.visibleChar){handleVisibleInputChar(key.visibleChar)}else if(key.ctrlCode){console.log("********** Unhandled key code",key);var e="Unhandled key code:"+hexString(key.ctrlCode);self.error=new Error(e);keyQueue=[]}else{console.log("********** Unrecognized key event",key);var ee="Unrecognized key event"+JSON.stringify(key);self.error=new Error(ee);keyQueue=[]}})}else{handlePendingInput();updateCurrentLine()}timer.reset();if(inBrowser&activity){var alignToTop=false;consoleInput.scrollIntoView(alignToTop);activity=false}}catch(e){console.log("********** timer.onDing",e.stack)}});function pushRawKey(cch){if(cch!==null){var k=getKeyCode(cch);if(k){if(k==="ctrlC"){if(self.closeHandler){self.closeHandler()}self.writeLine("["+k+"] - Exit");process.exit()}keyQueue.push({keyCode:k})}else{if(cch.length>1){keyQueue.push({ctrlCode:cch})}else{if(isPrintableAscii(cch)){keyQueue.push({visibleChar:cch})}else{keyQueue.push({ctrlCode:cch})}}}}timer.forceDing()}function inReadableHandler(){var cch=inStream.read();pushRawKey(cch)}function inCloseHandler(){self.close();console.log("---- END ----");self.error=new Error("The console is now endeed")}function inErrorHandler(e){self.close();console.log("---- ERROR:",e.stack);self.error=e}function resizeHandler(){console.log("- screen size has changed to ",outStream.columns+" columns by "+outStream.rows+" rows.");self.displayRows=outStream.rows;self.displayCols=outStream.columns}function installEventHandlers(remove){self.eventHandlers.forEach(function(handler){if(remove){handler.obj.removeListener(handler.name,handler.func)}else{handler.obj.on(handler.name,handler.func)}})}function removeEventHandlers(){installEventHandlers(true);self.eventHandlers=[]}if(inBrowser){consoleInput.onchange=function(){enter();timer.forceDing()};consoleInput.onkeydown=function(event){var handled=false;var keynum=event.which;if(keynum===13){enter();timer.forceDing();handled=true}else if(keynum===27){consoleInput.value="";handled=true}else if(keynum===38){previousSavedLine();consoleInput.value=currentInput.textLine;handled=true}else if(keynum===40){nextSavedLine();consoleInput.value=currentInput.textLine;handled=true}if(handled){event.preventDefault();event.stopPropagation()}}}};CliConsole.KeyCodes=KeyCodes;return CliConsole}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";module.exports=function registerCliCommands(mm){var Cmd=function cmdCtor(keywordFormat,desc,help){var cmd=this;var format=keywordFormat.split(" ");var keyword=format.shift();cmd.keyword=keyword;cmd.format=format;cmd.handler=null;cmd.desc=desc;cmd.help=Array.prototype.slice.call(arguments,2).join(" ");cmd.aliases=[];cmd.variants=[];cmd.argEnums={};cmd.argEnum=function argEnum(argName,values){cmd.argEnums[argName]=values;return cmd};cmd.alias=function alias(keyword){cmd.aliases.push(keyword);return cmd};cmd.setAdmin=function setAdmin(){cmd.adminRequired=true;return cmd};cmd.setTimeout=function setTimeout(timeoutSeconds){cmd.timeoutSec=timeoutSeconds;return cmd};cmd.variant=function variant(keywordFormat,desc,help){var fullhelp=Array.prototype.slice.call(arguments,2).join(" ");var newcmd=new Cmd(keywordFormat,desc,fullhelp);cmd.variants.push(newcmd);return cmd};cmd.setHandler=function setHandler(handler){cmd.handler=handler;return cmd}};return Cmd}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerCliCommands(mm){var check=mm.check;var _=check(mm._);var qq=check(mm.Q);var Cmd=check(mm.core.Cmd);var CmdSet=function cmdSetCtor(){var self=this;self.initialized=false;self.basecmds=[];self.subsets={};self.keywords=[];self.cmds={};self.timeoutSec=30;self.helpPrefix="";return self};CmdSet.prototype.setTitle=function setTitle(title){var self=this;self.title=title;return self};CmdSet.prototype.helpFooter=function helpFooter(footer){var self=this;self.footer=footer;return self};CmdSet.prototype.adminHelpFooter=function adminHelpFooter(footer){var self=this;self.adminFooter=footer;return self};CmdSet.prototype.done=function initialize(){var self=this;function setCmd(keyword,base){var word=keyword.toLowerCase();self.keywords.push(word);self.cmds[word]=base}function registerCmd(cmd,base){setCmd(cmd.keyword,base);cmd.aliases.forEach(function(alias){setCmd(alias,base)});cmd.variants.forEach(function(variant){registerCmd(variant,base)})}if(!self.initialized){self.basecmds.forEach(function(basecmd){registerCmd(basecmd,basecmd)})}self.initialized=true;if(!self.cmds.help){self.registerHelpCmd()}return self};CmdSet.prototype.registerHelpCmd=function registerHelpCmd(){var self=this;function helpCmdHandler(context,args){try{if(args.commandName)return self.helpCmdDetail(context,args);return self.helpCmdSummary(context,args)}catch(e){mm.log.error("helpCmdHandler",e.stack);

}}var helpCmd=new Cmd("help [commandName]","Display available commands").setHandler(helpCmdHandler);self.cmds.help=helpCmd;return self};CmdSet.prototype.helpCmdSummary=function helpCmdSummary(context,args){var self=context.set;var isAdmin=context.cs.userConfig.administrator;var prefix=self.helpPrefix;if(_.isString(self.title)){mm.log("-----",self.title,"-----");mm.log()}var sortedCmds=[];self.basecmds.forEach(function(basecmd){if(!basecmd.adminRequired||isAdmin){sortedCmds.push(basecmd);basecmd.variants.forEach(function(variant){sortedCmds.push(variant)})}});sortedCmds=_.sortBy(sortedCmds,"keyword");sortedCmds.forEach(function(cmd){var cmdName=prefix+cmd.keyword;var helpLine=_.padRight(cmdName,9)+": "+cmd.desc;mm.log(helpLine)});if(_.size(self.subsets)>0){mm.log();_.forEach(self.subsets,function(subset,key){var sp=key.length>1?" ":"";mm.log(key+sp+"[command] : "+subset.title)})}if(self.adminFooter&&isAdmin){mm.log(self.adminFooter)}if(self.footer){mm.log(self.footer)}return true};CmdSet.prototype.helpCmdDetail=function helpCmdDetail(context,args){var self=context.set;var prefix=self.helpPrefix;var cmdName=args.commandName.toLowerCase();var cmd=self.cmds[cmdName];if(!cmd&&prefix&&_.startsWith(cmdName,prefix)){cmdName=cmdName.substr(prefix.length);cmd=self.cmds[cmdName]}if(cmd){cmdName=prefix+cmd.keyword;var format=cmd.format.join(" ");mm.log("Command:",cmdName,format,":",cmd.desc);if(_.size(cmd.argEnums)>0){_.forEach(cmd.argEnums,function(values,key){mm.log('   Argument "'+key+'" are in ['+values+"]")})}if(cmd.aliases.length>0){var aliasText="   Alias"+(cmd.aliases.length>1?"es":"");aliasText=aliasText+": "+cmd.aliases.join(", ");mm.log(aliasText)}if(cmd.help){mm.log("  ",cmd.help)}return true}else{var e=new Error('No such command: "'+args.commandName+'"');mm.log.error(e);return true}};CmdSet.prototype.addSubset=function addSubset(prefix,cmdSet){var self=this;self.subsets[prefix]=cmdSet;cmdSet.helpPrefix=prefix+(prefix.length>1?" ":"");return self};CmdSet.prototype.defaultHandler=function defaultHandler(handler){var self=this;self.defaultHandler=handler;return self};CmdSet.prototype.add=function addCommand(cmd){var self=this;self.basecmds.push(cmd);return cmd};CmdSet.prototype.cmd=function newCommand(keywordFormat,desc,help){var self=this;var helpArg=Array.prototype.slice.call(arguments,2).join(" ");var cmd=new Cmd(keywordFormat,desc,helpArg);self.add(cmd);return cmd};CmdSet.prototype.doCmd=function doCmd(cmdText,cs){var self=this;if(!self.initialized)self.done();var args=mm.util.removeWhitespace(cmdText).split(" ");var keyword=args[0].toLowerCase();var cmd=self.cmds[keyword];var arg1=args.length>1?args[1]:"";var arg2=args.length>2?args[2]:"";var arg3=args.length>3?args[3]:"";if(!cmd&&_.size(self.subsets)>0){for(var prefix in self.subsets){if(_.startsWith(keyword,prefix)){var subset=self.subsets[prefix];var subCmdText=cmdText.substr(prefix.length);if(_.startsWith(subCmdText,"?")){subCmdText="help "+subCmdText.substring(1)}return subset.doCmd(subCmdText,cs)}}}if(arg1==="-h"||arg1==="-?"){cmdText="help "+keyword;args=cmdText.split(" ");arg1=keyword;keyword="help";cmd=self.cmds[keyword]}var handler=self.defaultHandler;var timeout=self.timeoutSec*1e3;if(!cmd&&!handler){return qq(false)}var context={keyword:keyword,args:args,arg1:arg1,arg2:arg2,arg3:arg3,text:cmdText,set:self,cs:cs};if(cmd){if(cmd.adminRequired){if(!cs.userConfig.administrator){var ea="You must be an administrator to do this.";return qq.reject(new Error(ea))}}timeout=cmd.timeoutSec?cmd.timeoutSec*1e3:timeout;var oargs={};var remainderIsArray=false;if(cmd.format.length>0){var i=0;var fargs=cmd.format;for(var fargi in fargs){i++;var farg=fargs[fargi];if(remainderIsArray)return;var arg=args[i];var optional=_.startsWith(farg,"[");if(optional)farg=farg.substring(1,farg.length-1);var array=_.endsWith(farg,"()");if(array){remainderIsArray=true;farg=farg.substring(0,farg.length-2);var arrayArg=_.slice(args,i);oargs[farg]=arrayArg;if(!optional&&arrayArg.length===0){var e1=cmd.keyword+' requires at least one "'+farg+'" argument';return qq.reject(new Error(e1))}}else{oargs[farg]="";if(!optional&&!arg){var e2=cmd.keyword+' requires a "'+farg+'" argument';return qq.reject(new Error(e2))}if(arg){var argEnum=cmd.argEnums[farg];if(argEnum){var allowedVals=argEnum.split("|");if(!_.contains(allowedVals,arg)){var e3='Argument "'+farg+'" must be in '+allowedVals;return qq.reject(new Error(e3))}}oargs[farg]=arg}}}}handler=cmd.handler.bind(cmd,context,oargs)}else{handler=self.defaultHandler.bind(self,context)}var result=qq.fcall(handler);return result.timeout(timeout,"The command timed out")};CmdSet.Cmd=Cmd;return CmdSet}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerMmath(mm){var math=__webpack_require__(72);var BigNumber=math.bignumber;var log=mm.check(mm.log);var dbg=mm.check(log.debug);var LOW=mm.check(mm.Logger.Priority.LOW);math.config({number:"bignumber",precision:64});var MMath=function mMathCtorCtor(){var MMath=function mMathCtor(){var mmath=this;mmath.E={constant:Math.E,desc:"The mathematical constant e. This is Euler's number,"+"the base of natural logarithms."};mmath.LN2={constant:Math.LN2,desc:"The natural logarithm of 2"};mmath.LN10={constant:Math.LN10,desc:"The natural logarithm of 10"};mmath.LOG2E={constant:Math.LOG2E,desc:"The base-2 logarithm of e"};mmath.LOG10E={constant:Math.LOG10E,desc:"The base-10 logarithm of e"};mmath.PI={constant:Math.PI,desc:"Pi. This is the ratio of the circumference of a circle "+"to its diameter"};mmath.SQRT1_2={constant:Math.SQRT1_2,desc:"The square root of 0.5, or, equivalently, one divided by "+"the square root of 2"};mmath.SQRT2={constant:Math.SQRT2,desc:"The square root of 2"};mmath.abs={func:Math.abs,desc:"Returns the absolute value of a number."};mmath.acos={func:Math.acos,desc:"Returns the arccosine of a number."};mmath.asin={func:Math.asin,desc:"Returns the arcsine of a number."};mmath.atan={func:Math.atan,desc:"Returns the arctangent of a number."};mmath.atan2={func:Math.atan2,desc:"Returns the angle (in radians) from the X axis to a point "+"represented by the supplied y and x coordinates."};mmath.ceil={func:Math.ceil,desc:"Returns the smallest integer that "+"is greater than or equal to the supplied numeric expression."};mmath.cos={func:Math.cos,desc:"Returns the cosine of a number."};mmath.exp={func:Math.exp,desc:"Returns e (the base of natural logarithms) raised to a power."};mmath.floor={func:Math.floor,desc:"Returns the greatest integer that is less than or equal to "+"the supplied numeric expression."};mmath.log={func:Math.log,desc:"Returns the natural logarithm of a number."};mmath.max={func:Math.max,desc:"Returns the greater of two supplied numeric expressions."};mmath.min={func:Math.min,desc:"Returns the lesser of two supplied numbers."};mmath.pow={func:Math.pow,desc:"Returns the value of a base expression raised to a "+"specified power."};mmath.random={func:Math.random,desc:"Returns a pseudorandom number between 0 and 1."};mmath.round={func:Math.round,desc:"Returns a specified numeric expression rounded to "+"the nearest integer."};mmath.sin={func:Math.sin,desc:"Returns the sine of a number."};mmath.sqrt={func:Math.sqrt,desc:"Returns the square root of a number."};mmath.tan={func:Math.tan,desc:"Returns the tangent of a number."};var factorial=function factorialCtor(){var f=[1,1];var i=2;return function _factorial(n){if(f[n]>0)return f[n];var result=f[i-1];for(;i<=n;i++)f[i]=result=result*i;return result}}();var bnFactorial=function bnFactorialCtor(){var f=[new BigNumber("1"),new BigNumber("1")];var i=2;return function bn_factorial(n){if(typeof f[n]!=="undefined")return f[n];var result=f[i-1];for(;i<=n;i++)f[i]=result=math.multiply(result,i);return result}}();mmath.sin.real=function sin(x){dbg("- Taylor series version of sine function for (",x,")",LOW);function nodd(n){return n%2===0?1:-1}function t(x,n){return Math.pow(x,n)/factorial(n)}function s(n){return nodd((n-1)/2)}var result=x;var lastResult=x;var n=1;var i=0;var unchanged=false;do{lastResult=result;n+=2;i++;var tn=t(x,n);result+=s(n)*tn;dbg("--- sin(",x,") i=",i,"tn=",tn,"lastr=",lastResult,"r=",result,LOW);unchanged=result===lastResult}while(!unchanged);var msin=Math.sin(x);dbg("- real.sin(",result,") Math.sin=",msin,"delta=",Math.abs(result-msin),LOW);return result};mmath.sin.big=function bn_sin(xin){var x=new BigNumber(xin.toString().substring(0,15));dbg("- Taylor series version of BigNumber sine function for ({0})",x,LOW);function nodd(n){return n%2===0?1:-1}function s(n){return nodd((n-1)/2)}function t(x,n){return math.divide(math.pow(x,n),bnFactorial(n))}var result=x;var lastResult;var n=1;var i=0;var unchanged=false;do{n+=2;i++;lastResult=result;var tn=t(x,n);dbg("--- sin({0}) i={1} tn={2} lastr={3} r={4}",x,i,tn,lastResult,result,LOW);if(s(n)<0)result=math.subtract(result,tn);else result=math.add(result,tn);unchanged=result.equals(lastResult)}while(!unchanged);var msin=Math.sin(xin);dbg("- big.sin({0}) Math.sin={1} delta={2}",result,msin,math.abs(math.subtract(result,msin)),LOW);return result};mmath.sin.f=mmath.sin.real};return MMath}();return MMath}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerWorkspace(mm){var check=mm.check;var _=mm.check(mm._);var Enum=check(mm.obj.Enum);var log=check(mm.log);var Logger=check(mm.Logger);var CmdSet=check(mm.core.CmdSet);var settings={};settings._props={numberMode:{values:new Enum("num|big|imp")}};var NUMBERMODE=settings._props.numberMode.values;settings.numberMode=NUMBERMODE.num;settings.debugMode=false;settings.glorm="fuzzle";var Workspace=function workspaceCtorCtor(){var Workspace=function workspaceCtor(cs){var ws=this;ws.name="";ws.vars={};ws.settings=settings;Workspace.prototype.init=function init(wsObj){var ws=this;_.assign(ws,wsObj)};Object.defineProperty(ws,"varsCount",{get:function(){return _.keys(this.vars).length},enumerable:true,configurable:true});Workspace.prototype.list=function list(prefixes,detailed){var ws=this;var n=0;Object.keys(ws.vars).forEach(function(key){var matched=true;if(prefixes&&prefixes.length>0){matched=false;prefixes.forEach(function(prefix){prefix=_.trimRight(prefix,"*");matched=matched||_.startsWith(key,prefix)})}if(matched){if(detailed){if(_.isFunction(ws.vars[key].f)){log("   "+key+" = "+ws.vars[key].f)}else{log("   "+key+" = '"+ws.vars[key].f+"'")}}else{log("   "+key+" = "+ws.vars[key].human)}n++}});log("Listed",n,"variables from workspace.");return true};Workspace.prototype.clear=function clear(variables){var ws=this;if(!variables||variables.length===0){log('Use "all" to clear all variables, otherwise name the variable.');return true}if(variables[0]==="all"){ws.vars={};log("All variables cleared.");return true}variables.forEach(function(v){if(ws.vars[v]){delete ws.vars[v];log('Removed variable: "'+v+'"')}else{log('Variable "{0}" not found.',v)}});return true};Workspace.prototype.dotCmdSet=function dotCmdSet(){var ws=this;var cset=(new CmdSet).setTitle("Workspace Control Commands");cset.cmd("big","Use 'big' numbers in computations").setHandler(function setBigNumberMode(){ws.settings.numberMode=NUMBERMODE.big;log(". Big Numbers mode.");return true});cset.cmd("num","Use 'normal' numbers in computations").setHandler(function setNormalNumberMode(){ws.settings.numberMode=NUMBERMODE.num;log(". Normal numbers mode.");return true});cset.cmd("imp","Use 'imp' for mMeddle implemented numbers in computations").setHandler(function setImpNumberMode(){ws.settings.numberMode=NUMBERMODE.imp;log(". mMeddle implemented numbers mode.");return true});cset.cmd("debug [state] [level]","Set debugging output modes","'Debug on low' selects low level debugging (verbose output)").argEnum("state","on|off|true|false").argEnum("level","high|low|normal").setHandler(function setDebugMode(context,args){if(args.state||args.level){if(args.state&&_.includes(["on","true"],args.state)){mm.loggers.debugLogger.enable();ws.settings.debugMode=true;mm.log(". Debug logging on.")}if(args.state&&_.includes(["off","false"],args.state)){mm.loggers.debugLogger.disable();ws.settings.debugMode=false;mm.log(". Debug logging off.")}if(args.level){var mode=args.level.toUpperCase();var priority=Logger.Priority[mode];mm.loggers.debugLogger.allowPriority(priority);mm.loggers.rootLogger.allowPriority(priority);mm.log(". Debug logging mode is {0}.",mode)}}else{mm.loggers.debugLogger.disable();ws.settings.debugMode=false;mm.log(". Debug logging off.")}return true});cset.cmd("list [obj] [spec]","List a server object type","'List user' shows information about the logged in user\n","'List users' lists the currently connected users\n","'List ws' lists the workspaces for this user\n","Use [spec] to select a prefix to subset the objects to list.").argEnum("obj","user|users|ws").setHandler(function listObj(context,args){if(args.obj==="users"){return cs.listUserSessions().then(function(sessionEntries){mm.log(sessionEntries);return true})}else if(args.obj==="user"){if(args.spec){var userName=args.spec;return cs.getUser(userName).then(function(users){if(users.length===0){mm.log('- User matching "{0}" not found',userName)}else{users.forEach(function(user){mm.log('- "{0}" is {1} {2}  email:{3}',user.name,user.firstName,user.lastName,user.email)})}return true})}else{mm.log("- This User: ",cs.user);if(cs.loggedIn){if(cs.loggedIn.name===cs.user.name){mm.log("- Logged in.")}else{mm.log.warn("- But logged in as :",cs.loggedIn.name)}}else{mm.log("- Not logged in.")}}}else{mm.log("- List {0} * NOT IMPLEMENTED *",args.obj)}return true});cset.cmd("deleteUser","Delete the current user").setHandler(function delUser(){return cs.userDelete().then(function(msg){mm.log(msg);return true},function(err){mm.log(err);return true})});cset.cmd("syncDbToFs [collection]","Synchronize the database to the file system").setAdmin().setHandler(function syncDbToFs(){mm.log(". syncDbToFs * NOT IMPLEMENTED *");return true});cset.cmd("syncFsToDb [collection]","Synchronize the file sysem storage area to the mongo database").setAdmin().setHandler(function syncFsToDb(){mm.log(". syncFsToDb * NOT IMPLEMENTED *");return true});cset.cmd("reconnect","Reconnect to the server").setHandler(function reconnect(){cs.mmc.socket_reconnect();return true});cset.done();return cset}};return Workspace}();return Workspace}},function(module,exports,__webpack_require__){"use strict";module.exports=function registerLexer(mm){var check=mm.check;var _=check(mm._);var log=check(mm.log);var dbg=check(log.debug);var LOW=mm.check(mm.Logger.Priority.LOW);var Parser=function parserCtorCtor(){var Parser=function parserCtor(cs,ws,mmath){var self=this;self.ws=check(ws);self.mmath=check(mmath);self.cs=check(cs);self.settings=check(ws.settings);Object.keys(ws.vars).forEach(function(key){ws.vars[key].f=evalFuncStr(ws.vars[key].f)});function evalFuncStr(func){if(!_.isFunction(func)){func="("+func+")";dbg("- Convert [{0}] to function",func,LOW);return eval(func)}else{return func}}Parser.prototype.evalBacktick=function evalBacktick(expr){var self=this;if(self.cs.userConfig.administrator){try{var r=eval(expr);mm.log("Result:",r)}catch(e){throw new Error("Eval failed:"+e.stack)}}else{throw new Error("You must be an administrator to do this.")}};Parser.prototype.evaluate=function evaluate(expr){var self=this;if(_.startsWith(expr,"`"))return self.evalBacktick(expr.substr(1));var NUMBERMODE=self.settings._props.numberMode.values;var val=null;self.evalFailed=false;var assigned="";var re=/^\s*([A-Za-z_]+[0-9A-Za-z_$]*)\s*=/;var matches=expr.match(re);var hasAssignment=matches;if(hasAssignment){assigned=matches[1];var i=expr.indexOf("=");expr=expr.substring(i+1);dbg("--- Assignment: ",assigned,LOW);dbg("--- Expression: ",expr,LOW)}var textExpression=_.trim(expr);var idTest=/[A-Za-z_]+[0-9A-Za-z_]*/g;var hasVariables=false;var hasUndefined=false;var undefineds=[];expr=expr.replace(idTest,function(v){var rv='ws.vars["'+v+'"].f()';hasVariables=true;dbg("id:[{0}]",v,LOW);if(!ws.vars[v]){if(self.mmath[v]){if(self.mmath[v].f&&self.settings.numberMode!==NUMBERMODE.num){rv="mmath."+v+".f";if(self.mmath[v].big&&self.settings.numberMode===NUMBERMODE.big){rv="mmath."+v+".big"}}else{rv="Math."+v}}else{hasUndefined=true;if(_.indexOf(undefineds,v)<0)undefineds.push(v);var undefinedFunc='(function(){ return self.notDefined("'+v+'") })';ws.vars[v]={human:"*undefined*",f:eval(undefinedFunc)}}}return rv});expr="(function(){ return "+expr+" })";dbg("Eval: ",expr,LOW);try{var f=eval(expr);if(hasAssignment){ws.vars[assigned]={human:textExpression,f:f}}if(hasUndefined){log("- Cannot yet evaluate function: {0} {1} still undefined.",undefineds.join(),undefineds.length===1?"is":"are")}else{val=f();if(self.evalFailed){log("*** Evaluation failed. Some values are still undefined.")}else{log("Value = {0}",val)}}return val}catch(e){if(self.settings.debugMode){log(e.stack)}else{log(e)}return""}};Parser.prototype.notDefined=function notDefined(v){var self=this;self.evalFailed=true;log('- Variable "{0}" is undefined',v);return null}};return Parser}();return Parser}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var qq=mm.check(mm.Q);var Config=mm.check(mm.obj.Config);var ClientUser=mm.check(mm.users.ClientUser);var ClientSession=function clientSessionCtorCreator(){var ctor=function clientSession(clientApp){var self=this;self.ws=mm.check(new mm.core.Workspace(self));self.user=new ClientUser;self.userConfig=new Config;self.loggedIn=null;self.mmc=false;self.clientApp=clientApp?clientApp:"client";self.newSessionId=function newSessionId(){return"MMSID_"+_.now().toString()+"_"+_.random(1e4).toString()}};return ctor}();ClientSession.prototype.bindClient=function bindClient(mmc){var self=this;self.mmc=mmc};ClientSession.prototype.rq=function rq(op,content,rsRequired,timeout){var self=this;if(self.mmc&&self.mmc.connected){return self.mmc.rq(op,content,rsRequired,timeout)}if(self.mmc){if(rsRequired)return qq.reject(new Error("Not connected to server"))}else{if(rsRequired)return qq.reject(new Error("No mMeddle Client exists"))}return false};ClientSession.prototype.emitLogMessage=function emitLogMessage(text){var self=this;return self.rq("log",text)};return ClientSession}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var qq=mm.check(mm.Q);var Config=mm.check(mm.obj.Config);var ClientSession=mm.check(mm.core.ClientSession);var ClientUser=mm.check(mm.users.ClientUser);var localStorage=new mm.storage.LocalStorage;var MAX_SAVED_INPUT_LINES=50;ClientSession.prototype.clearLocalUser=function clearLocalUser(){var self=this;self.user=new ClientUser;self.userConfig=new Config;return self};ClientSession.prototype.loadLocalUser=function loadLocalUser(mConsole){var self=this;var userObj=localStorage.load("user");if(userObj){if(mConsole&&mConsole.savedInputLines&&userObj.savedInputLines&&userObj.savedInputLines.length>0){var inLine=null;var i=0;do{i++;inLine=userObj.savedInputLines.pop();if(inLine)mConsole.savedInputLines.unshift(inLine);if(i>MAX_SAVED_INPUT_LINES)inLine=null}while(inLine);delete userObj.savedInputLines}self.user.init(userObj)}return self};ClientSession.prototype.saveLocalUser=function saveLocalWorkspace(mConsole){var self=this;if(mConsole&&mConsole.savedInputLines&&mConsole.savedInputLines.length>0){self.user.savedInputLines=mConsole.savedInputLines}localStorage.store("user",self.user);return self};ClientSession.prototype.isLoggedIn=function isLoggedIn(){var self=this;return self.loggedIn&&self.loggedIn.name===self.user.name};ClientSession.prototype.getUser=function getUser(userName){var self=this;var user=new ClientUser(userName);return self.rq("loadUsers",user,true).then(function(rs){return rs.content})};ClientSession.prototype.userLogin=function userLogin(userName,ptpwd,ispdk){var self=this;var user=new ClientUser(userName);return self.rq("loadUser",user,true).then(function(rs){try{user.init(rs.content).hashP(ptpwd,ispdk);user.hashPdk(self.mmc.socketid);var rquser=new ClientUser(userName).init(user);if(rquser.pdk)delete rquser.pdk;return self.rq("loginUser",rquser,true).then(function(rs){user.init(rs.content);self.user=user;self.ws.owner=user.name;if(rs.userConfig){self.userConfig.init(rs.userConfig);mm.log("- User ["+user.name+"] has a personal configuration")}user.elapsed=rs.elapsed;user.ok=true;self.loggedIn=user;return user})}catch(e){mm.log.error("userLogin failure internal",e.stack)}})};ClientSession.prototype.userCreate=function userCreate(newUser,ispdk){var self=this;var user;if(ispdk){user=newUser}else{var ptpwd=newUser.ptpwd;delete newUser.ptpwd;user=(new ClientUser).init(newUser).hashP(ptpwd)}var pdk=user.pdk;return self.rq("createUser",user,true).then(function(rs){user.init(rs.content);self.user=user;self.ws.owner=user.name;if(rs.userConfig){self.userConfig.init(rs.userConfig);mm.log("- User ["+user.name+"] has a personal configuration")}user.elapsed=rs.elapsed;user.pdk=pdk;user.ok=true;self.loggedIn=user;return user})};ClientSession.prototype.userDelete=function userDelete(){var self=this;if(!self.isLoggedIn()){var em="- User ["+self.user.name+"] is not logged in";return qq.reject(new Error(em))}return self.rq("deleteUser",self.user,true).then(function(rs){return rs.content})};ClientSession.prototype.listUserSessions=function listUserSessions(){var self=this;return self.rq("listUserSessions",self.user,true).then(function(rs){return rs.content})}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var Workspace=mm.check(mm.core.Workspace);var ClientSession=mm.check(mm.core.ClientSession);var localStorage=new mm.storage.LocalStorage;ClientSession.prototype.clearLocalWorkspace=function clearLocalWorkspace(){var self=this;var savedSessionId=self.ws.sessionId;self.ws=mm.check(new mm.core.Workspace(self));self.ws.sessionId=savedSessionId;if(!self.ws.sessionId){self.ws.sessionId=self.newSessionId()}return self};ClientSession.prototype.loadLocalWorkspace=function loadLocalWorkspace(){var self=this;var wsObj=localStorage.load("ws");if(wsObj){self.ws.init(wsObj)}if(!self.ws.sessionId){self.ws.sessionId=self.newSessionId()}return self};ClientSession.prototype.saveLocalWorkspace=function saveLocalWorkspace(){var self=this;localStorage.store("ws",self.ws);return self};ClientSession.prototype.saveWorkspace=function saveWorkspace(){var self=this;return self.rq("saveWorkspace",mm.util.JSONify(self.ws,2),true)};ClientSession.prototype.loadWorkspace=function loadWorkspace(name){var self=this;return self.rq("loadWorkspace",name,true).then(function(rs){var ws=new Workspace(self).init(rs.content);ws.elapsed=rs.elapsed;ws.ok=true;return ws})}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var qq=mm.check(mm.Q);var MMeddleClient=function mmClientCtorCreator(){var ctor=function MMeddleClient(host,clientSession){var self=this;self.host=host;self.connectedOnce=false;self.connected=false;self.socket=null;self.rqId=0;self.rsPending={};self.defaultRqTimeout=10;self.socketid="???";self.clientSession=clientSession};return ctor}();MMeddleClient.prototype.connectWorkspace=function connectWorkspace(){var self=this;if(self.connectedD){return self.connectedD.promise}try{var io=mm.check(mm.socketClient.io);self.connectedD=qq.defer();self.socket=io.connect(self.host);self.socket.on("mmConnectRq",function(data){mm.log.debug("--- received mmConnectRq:",data,mm.Logger.Priority.LOW);self.socketid=data.id;if(self.connected){mm.log("- Reconnected SocketId:[{0}] Session:[{1}]",self.socketid,self.clientSession.ws.sessionId)}else{mm.log.debug("- new Connection:",self.clientSession.ws.sessionId)}self.emit("mmConnectRs",{id:data.id,sessionId:self.clientSession.ws.sessionId,userName:self.clientSession.user.name,from:mm.envText,config:mm.config,at:_.now()});self.connectedOnce=true;self.connected=true;self.connectedD.resolve(true)});self.socket.on("mmWsRs",function(rs){mm.log.debug("--- received mmWsRs:",rs,mm.Logger.Priority.LOW);var rqId=rs.rqId;var pending=self.rsPending[rqId];if(!pending){mm.log.warn("Received late response to ",rqId);mm.log.debug("mmWs Late Response: ",rs)}else{if(rs.ok!==true){var emsg=mm.util.trimPrefix(rs.error,"Error: ");pending.rsD.reject(new Error(emsg))}else{rs.elapsed=_.now()-pending.at;pending.rsD.resolve(rs)}}})}catch(e){self.connectedD.reject(e);mm.log.error("Socket IO failure:",e.stack)}return self.connectedD.promise};MMeddleClient.prototype.rq=function rq(op,content,rsRequired,timeout){var self=this;var rqId=op+"_"+self.rqId++;var rsD;var rsP;var rqObj={op:op,sessionId:self.clientSession.ws.sessionId,userName:self.clientSession.user.name,rqId:rqId,at:_.now(),content:content,rsRequired:rsRequired?true:false};var tmttext="Rq timeout. Removing pending operation to:"+rqId;if(rsRequired){rsD=qq.defer();if(!timeout)timeout=self.defaultRqTimeout;rsP=rsD.promise.timeout(timeout*1e3,tmttext);var pending={id:rqId,at:rqObj.at,rq:rqObj,rsD:rsD};self.rsPending[rqId]=pending;rsP.fin(function(r){delete self.rsPending[rqId]})}self.emit("mmWsRq",rqObj);if(rsRequired){return rsP}else{return true}};MMeddleClient.prototype.socket_reconnect=function socket_reconnect(){var self=this;if(!self.socket){mm.log.error("No socket established. Socket.io failed.")}else{if(self.connectedOnce){mm.log("- Socket reconnect: ["+self.host+"]");self.socket.socket.reconnect()}else{mm.log("- Socket connect: ["+self.host+"]");self.connectWorkspace()}}};MMeddleClient.prototype.socket_disconnect=function socket_disconnect(){var self=this;if(self.socket){mm.log("- Socket disconnect: ["+self.host+"]");if(self.socket)self.socket.disconnect()}self.connected=false};MMeddleClient.prototype.emit=function emit(rqEvent,rqObj){mm.log.debug(rqEvent,rqObj,mm.Logger.Priority.LOW);var self=this;self.socket.emit(rqEvent,rqObj)};return MMeddleClient}},function(module,exports,__webpack_require__){(function(process){"use strict";module.exports=function registerCliCommands(mm){var check=mm.check;var _=check(mm._);var qq=check(mm.Q);var CmdSet=check(mm.core.CmdSet);var MMath=check(mm.core.MMath);var mmath=check(new MMath);var CliCommands=function cliCommandsCtor(mConsole,cs){var self=this;self.doUserCreate=function doUserCreate(newUser,ispdk){var start=_.now();return cs.userCreate(newUser,ispdk).then(function(user){mm.log("- Created new User id [{0}] at {1} in {2} mx",user.name,user.creationDate,_.now()-start);mm.log("- Welcome to mMeddle, {0} {1}.",user.firstName,user.lastName);return user},function(e){mm.log("User creation failed: ",e);return e})};self.fillNewUser=function fillNewUser(userName,ptpwd){var u={name:userName};var funcs=[function(u){return mConsole.ask("Reenter the password: ",u,"ptpwd",true)},function(u){if(u.ptpwd===ptpwd)return u;ptpwd="";throw new Error("Passwords do not match. Sorry, start over.")},function(u){return mConsole.ask("Enter your first name: ",u,"firstName")},function(u){return mConsole.ask("Enter your last name: ",u,"lastName")},function(u){return mConsole.ask("Enter your contact email address: ",u,"email")}];return funcs.reduce(qq.when,qq(u))};self.loginUser=function loginUser(userName,ptpwd,isPdk){var start=_.now();cs.userLogin(userName,ptpwd,isPdk).then(function(user){mm.log("- Welcome back to mMeddle, {0} {1}.",user.firstName,user.lastName);mm.log("- Logged in ({0} ms)",_.now()-start)},function(e){var errString=e.toString();if(errString.indexOf("ENOENT, ")>=0){if(isPdk){mm.log("- User [{0}] not found. Rebuilding deleted user.",userName);return self.doUserCreate(cs.user,isPdk)}else{mm.log("- User [{0}] not found. Creating a new user.",userName);self.fillNewUser(userName,ptpwd).then(function(newUser){mm.log("- Creating new user on server [{0}]...",userName);return self.doUserCreate(newUser)},function(e){mm.log(e)})}}else{ptpwd="";mm.log.error("*** Login failed. [{0}]",errString)}})};self.exitCmdHandler=function exitCmdHandler(context,args){var wsName=cs.ws.name;var displayName=wsName?" ["+wsName+"]":"";if(context.keyword!=="abort"){cs.saveLocalUser(mConsole);mm.log("- Saved User [{0}] (local)",cs.user.name);cs.saveLocalWorkspace();mm.log("- Saved Workspace{0} (local): {1} variables",displayName,cs.ws.varsCount);if(cs.mmc.connected&&cs.loggedIn){mm.log("- Saving Workspace{0} for {1} to {2}",displayName,cs.user.name,cs.mmc.host);cs.saveWorkspace().then(function(rs){mm.log("- Saved{0} in {1} ms.",displayName,rs.elapsed)})}}if(context.keyword!=="save"){if(mm.config.inNode){mConsole.close();process.exit()}}return true};self.saveCmdHandler=function saveCmdHandler(context,args){if(!cs.loggedIn&&!cs.user.isAnonymous()){var e=new Error("Sorry, Please login before saving.");return e}var oldName=cs.ws.name;var wsName=args.name?args.name:oldName;var displayName=wsName?" ["+wsName+"]":"";cs.saveLocalUser(mConsole);mm.log("- Saved User [{0}] (local)",cs.user.name);if(oldName&&oldName!==wsName){mm.log("- Renamed workspace from [{0}] to{1}",oldName,displayName)}cs.ws.name=wsName;cs.saveLocalWorkspace();mm.log("- Saved Workspace{0} (local): {1} variables",displayName,cs.ws.varsCount);if(cs.mmc.connected){mm.log("- Saving Workspace{0} for {1} to {2}",displayName,cs.user.name,cs.mmc.host);cs.saveWorkspace().then(function(rs){mm.log("- Saved{0} in {1} ms.",displayName,rs.elapsed)})}return true};self.loginCmdHandler=function loginCmdHandler(context,args){var user=cs.user;var userName=user.name;if(args.userName){var ptpwd;userName=args.userName;if(args.password){ptpwd=args.password;return self.loginUser(userName,ptpwd)}else{if(userName===user.name&&user.pdk){return self.loginUser(userName,user.pdk,true)}else{mConsole.ask("Please enter your password: ",null,null,true).then(function(ptpwd){return self.loginUser(userName,ptpwd)},function(e){mm.log.error(e);return e})}}}else{if(!user.isAnonymous()){return self.loginUser(user.name,user.pdk,true)}var e=new Error("Please login with a user name");mm.log.error(e);return e}};self.clearCmdHandler=function clearCmdHandler(context,args){return cs.ws.clear(args.variables)};self.listCmdHandler=function listCmdHandler(context,args){return cs.ws.list(args.variables,context.keyword==="??")};self.completer=function completer(text){var keyword;var matches=[];var m=/[a-zA-Z_0-9]+$/.exec(text);if(m){keyword=m[0];rcs.keywords.forEach(function(cmd){if(cmd.indexOf(keyword)===0){matches.push(cmd)}});var ignore=["expr","type"];for(var func in mmath){if(mmath.hasOwnProperty(func)){if(func.indexOf(keyword)===0&&ignore.indexOf(func)===-1){matches.push(func)}}}matches=matches.filter(function(elem,pos,arr){return arr.indexOf(elem)===pos})}return[matches,keyword]};var rcs=(new CmdSet).setTitle("Main CLI Commands").adminHelpFooter("` [js] (backtick) will directly execute a javascript expression\n").helpFooter("\n"+"You can enter expressions such as B=sin(PI/4) on the command line,\n"+"or just enter the variable name to show its evaluation.\n");rcs.cmd("exit","Save the user and workspace then exit the program").alias("quit").variant("abort","Exit the program without saving the user or workspace").setHandler(self.exitCmdHandler);rcs.cmd("save [name]","Save the user and workspace then continue","Supply a [name] to save this workspace under a specific name","for later recall. You can have many workspaces under different","names, although you have only one current workspace session.").setHandler(self.saveCmdHandler);rcs.cmd("login [userName] [password]","Log in to the server with a user name and password","The user name and password can be omitted if you have already","logged in from this client in a previous session.").setHandler(self.loginCmdHandler);rcs.cmd("clear variables()","Clear one or more variables from the workspace",'Use "clear all" to clear the full set of variables.').setHandler(self.clearCmdHandler);rcs.cmd("list [variables()]","List some or all of the variables in the workspace","The default is to list all variables. You can list only","selected entries with variable names or prefixes.","Use ?? to list the detailed functions.").alias("?").alias("??").setHandler(self.listCmdHandler);

rcs.addSubset(".",cs.ws.dotCmdSet());rcs.done();mConsole.setCompleter(self.completer);self.rootCommandSet=rcs};return CliCommands}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var Config=mm.check(mm.obj.Config);var ClientUser=mm.check(mm.users.ClientUser);var WsSession=function wsSessionCtorCreator(){var ctor=function WsSession(sessionId,socket,socketService){var self=this;self.config=new Config;self.user=new ClientUser;self.userConfig=new Config;self.sessionId=sessionId;self.socketService=socketService;self.storageEngine=socketService.storageEngine;self.socket=socket;self.rqCount=0;self.rsCount=0;self.lastResponseAt=0;self.serverCreatonTime=_.now();self.firstConnectionTime=0;self.systemStorage=new mm.storage.StorageClient({user:"systemAdmin",engine:self.storageEngine});self.usersStorage=new mm.storage.StorageClient({user:"userAdmin",engine:self.storageEngine})};return ctor}();WsSession.prototype.handleRq=function wsHandleRq(rq,socket){var self=this;self.socket=socket;self.rqCount++;var op=rq.op;if(self[op]){self[op](rq)}else{mm.log.error("- Invalid workspace session operation:",rq);if(rq.rsRequired){self.respond(rq,"",new Error("Invalid request:"+op))}}};WsSession.prototype.log=function wsLog(rq){var self=this;mm.log.debug("["+self.sessionId+"]",rq.content)};WsSession.prototype.respond=function wsRespond(rq,content,err,extra){var self=this;try{self.rsCount++;self.lastResponseAt=_.now();var errString=err?err.toString():"";var rs={op:rq.op,ok:err?false:true,rqId:rq.rqId,sessionId:self.sessionId,userName:self.user.name,at:self.lastResponseAt,content:content?content:"",error:errString};if(extra){_.assign(rs,extra)}if(err&&self.systemStorage.notFound(err)){rs.notFound=true}self.socket.emit("mmWsRs",rs);mm.log.debug("----------> wsRespond:",rs)}catch(e){mm.log.error("***> wsRespond failure: ",e.stack)}};return WsSession}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var _=mm.check(mm._);var WsSession=mm.check(mm.server.WsSession);var ClientUser=mm.check(mm.users.ClientUser);WsSession.prototype.loadUser=function wsLoadUser(rq){var self=this;var userObj=rq.content;var userName=userObj.name;mm.log("- Loading public user ["+userName+"]");self.usersStorage.load("publicUsers",userName).then(function(publicUser){mm.log.debug("- Loaded user",publicUser);self.respond(rq,publicUser)},function(e){if(mm.util.ENOENT(e)){mm.log.warn("loadUser: No such user exists: ["+userName+"]")}else{mm.log.debug("loadUser: Access error: ["+userName+"]",e.stack)}self.respond(rq,"",e)})};WsSession.prototype.loadUsers=function wsLoadUsers(rq){var self=this;var userObj=rq.content;var userNamePattern=userObj.name;mm.log("- Loading public users ["+userNamePattern+"]");self.usersStorage.loadMultiple("publicUsers",userNamePattern).then(function(publicUsers){mm.log.debug("- Loaded users",publicUsers);self.respond(rq,publicUsers)},function(e){mm.log.debug("Storage error: ",e.stack);self.respond(rq,"",e)})};WsSession.prototype.loginUser=function wsLoginUser(rq){var self=this;var publicUserObj=rq.content;mm.log.debug("- Login with public user",publicUserObj);var userName=publicUserObj.name;var user=new ClientUser(userName);user.init(publicUserObj);mm.log("- Loading private user ["+userName+"]");self.usersStorage.load("privateUsers",userName).then(function(privateUser){var remotehpdk=user.hpdk;user.init(privateUser).hashPdk(self.socket.id);if(user.hpdk===remotehpdk){user.lastLogin=_.now();user.loginCount++;self.user=user;self.loggedIn=true;var rsuser=new ClientUser(userName);rsuser.init(user);delete rsuser.pdk;var userConfig=self.loadUserConfig(userName);if(userConfig){mm.log("- Logged in user ["+userName+"] with private configuration");self.respond(rq,rsuser,false,{userConfig:userConfig})}else{mm.log("- Logged in user ["+userName+"]");self.respond(rq,rsuser)}}else{user.failedLoginCount++;mm.log.error("Password mismatch on user [{0}]. {1} failed attempts",userName,user.failedLoginCount);var e=new Error("Password mismatch. Sorry, try again");self.respond(rq,"",e)}self.usersStorage.store("privateUsers",user)},function(e){if(mm.util.ENOENT(e)){mm.log.warn("loginUser: No such user exists: ["+userName+"]")}else{mm.log.debug("loginUser: Access error: ["+userName+"]",e.stack)}self.respond(rq,"",e)})};WsSession.prototype.createUser=function wsCreateUser(rq){var self=this;var userObj=rq.content;var userName=userObj.name;var user=new ClientUser(userName).init(userObj);user.firstLogin=_.now();user.lastLogin=user.firstLogin;user.loginCount=1;user.failedLoginCount=0;mm.log("- Created new user ["+userName+"]");mm.log.debug("createUser: storing private user",user);self.usersStorage.store("privateUsers",user).then(function(info){mm.log("- Saved private user info");var publicUser=new ClientUser(userName);publicUser.firstName=user.firstName;publicUser.lastName=user.lastName;publicUser.pbkdf2Salt=user.pbkdf2Salt;if(user.privateEmail!==true){publicUser.email=user.email}mm.log.debug("createUser: storing",publicUser);self.usersStorage.store("publicUsers",publicUser).then(function(info){self.user=user;self.loggedIn=true;var userConfig=self.loadUserConfig(userName);if(userConfig){mm.log("- Created and Logged in user ["+userName+"] with private configuration");self.respond(rq,user,false,{userConfig:userConfig})}else{mm.log("- Created and Logged in user ["+userName+"]");self.respond(rq,user)}},function(e){mm.log.error("Cannot save public user: ",e.stack);self.respond(rq,"",e)})},function(e){mm.log.error("Cannot save private user:",e.stack);self.respond(rq,"",e)})};WsSession.prototype.deleteUser=function wsDeleteUser(rq){var self=this;var deleteUserObj=rq.content;mm.log.debug("- Delete user",deleteUserObj);var userName=self.user.name;mm.log.debug("++++++++++++++ deleteUser",deleteUserObj);if(userName!==deleteUserObj.name){var em1=mm.format('"{0}" is not the current user: "{1}"',deleteUserObj.name,userName);mm.log.error(em1);self.respond(rq,"",new Error(em1));return}mm.log("- Deleting private user ["+userName+"]");self.usersStorage.remove("privateUsers",userName).then(function(ok){mm.log("- Deleting public user ["+userName+"]");self.usersStorage.remove("publicUsers",userName).then(function(ok){var rmd=mm.format('User "{0}" has been removed',userName);self.respond(rq,rmd)},function(e){mm.log.error("Cannot remove public user: ",e.stack);self.respond(rq,"",e)})},function(e){mm.log.error("Cannot remove private user:",e.stack);self.respond(rq,"",e)})};WsSession.prototype.listUserSessions=function wsListUserSessions(rq){var self=this;var sessions=self.socketService.sessions;var sessionInfos=[];for(var key in sessions){var session=sessions[key];var sessionInfo={userName:session.user.name,sessionId:session.sessionId,rqCount:session.rqCount,rsCount:session.rsCount,lastResponseAt:session.lastResponseAt,serverCreatonTime:session.serverCreatonTime,firstConnectionTime:session.firstConnectionTime};sessionInfos.push(sessionInfo)}mm.log("- Sending into on {0} sessions",sessionInfos.length);self.respond(rq,sessionInfos)};WsSession.prototype.loadUserConfig=function wsLoadUserConfig(userName){var self=this;var config=new mm.obj.Config;if(config.userLoad(userName)){self.userConfig.init(config);mm.log("- User ["+userName+"] has a personal config.json");return self.userConfig}else{return false}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var WsSession=mm.check(mm.server.WsSession);WsSession.prototype.saveWorkspace=function wsSaveWorkspace(rq){var self=this;mm.log.debug("["+self.sessionId+"] Saving Workspace:",rq.content);var sc=new mm.storage.StorageClient({user:self.user.name,engine:self.storageEngine});var ws=JSON.parse(rq.content);var wsSession={name:self.sessionId,ws:ws};sc.store("wsSessions",wsSession).then(function(r){mm.log("- Workspace session saved",self.sessionId);if(ws.name){sc.store("ws",ws).then(function(r){mm.log("- Workspace saved:",ws.name);self.respond(rq)},function(e){mm.log.error("Workspace save failed: ",e);self.respond(rq,"",e)})}else{self.respond(rq)}},function(e){mm.log.error("Workspace session save failed: ",e);self.respond(rq,"",e)})};return WsSession}},function(module,exports,__webpack_require__){(function(process){"use strict";module.exports=function(mm){var _=mm.check(mm._);var SocketService=function socketServiceCtorCreator(){var ctor=function SocketService(){var self=this;self.sessions={}};return ctor}();SocketService.prototype.initializeService=function initialize(mMeddleServer,storageEngine){var self=this;self.mmServer=mMeddleServer;self.storageEngine=storageEngine;self.server=self.mmServer.server;var socketio=mm.socketServer.io;var socketio9=socketio.version.indexOf("0.9.")===0;self.socketio9=socketio9;mm.log.debug("- socket.io: version = "+socketio.version);if(socketio9){var io=socketio.listen(self.server);self.io=io;io.configure(function(){mm.log.debug("- socket.io: set default config");mm.log.debug('- socket.io: origins = "*.*"');io.set("log level",mm.config.socketIoLogLevel);mm.log.debug("- socket.io: log level:",mm.config.socketIoLogLevel);io.set("origins","*:*");mm.log.debug('- socket.io: transports = ["websocket"]');io.set("transports",["websocket"]);mm.log.debug("- socket.io: configured for development")});mm.log("- Socket.io initialized.")}else{mm.log.error("Sorry, this version of Socket.io is not supported yet.")}};SocketService.prototype.acceptConnections=function acceptConnections(){var self=this;if(self.io){self.io.on("connection",self.newConnection.bind(self))}};SocketService.prototype.newConnection=function newConnection(socket){var self=this;var id=socket.id;function slog(){var args=Array.prototype.slice.call(arguments);args.unshift("["+id+"]");mm.loggers.infoLogger.logArray(args)}slog("- Client connected as socket.io id:",id);socket.on("mmConnectRs",function(rs){var sessionId=rs.sessionId;slog("- Connecting Workspace Session as",sessionId);mm.log.debug("----- mmConnectRs:",rs);var session;if(self.sessions[sessionId]){session=self.sessions[sessionId]}else{session=new mm.server.WsSession(sessionId,socket,self);session.firstConnectionTime=rs.at;self.sessions[sessionId]=session}session.from=rs.from;session.config.init(rs.config);session.lastConnectionTime=rs.at;session.socketId=id;session.socket=socket});socket.on("mmWsRq",function(rs){var sessionId=rs.sessionId;mm.log.debug("- Workspace Session Request",id,rs);if(self.sessions[sessionId]){var session=self.sessions[sessionId];session.handleRq(rs,socket)}else{mm.log.error("Unexpected Workspace session request",rs)}});socket.on("my other event",function(data){slog(mm.util.inspect(data));slog("-----Whoa baby!")});socket.on("request-env",function(data){var reply=process.env;if(mm.config.openShift){reply={id:id,text:"* Environment variables are not available from this server *"}}socket.emit("env",reply);slog("-----Posted environment")});socket.on("disconnect",function(){slog("***** Recieved disconnect *****")});socket.emit("news",{id:id,hello:"world - mMeddle with this!",from:mm.envText,at:_.now()});socket.emit("mmConnectRq",{id:id,please:"tell me who you are",from:mm.envText,at:_.now()})};return SocketService}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";module.exports=function(mm){var MMeddleServer=function serverCtorCreator(){var express=__webpack_require__(73);var serveStatic=__webpack_require__(74);var ctor=function MMeddleServer(dirName){var self=this;self.dirName=dirName;mm.log.debug("- mMeddleServer dirName: [{0}]",dirName);var defaultPort=mm.util.mmEnvOption("PORT",8080);var defaultIpAddr=mm.util.mmEnvOption("IPADDR","127.0.0.1");self.ipaddress=mm.util.envOption("OPENSHIFT_NODEJS_IP",defaultIpAddr);self.port=mm.util.envOption("OPENSHIFT_NODEJS_PORT",defaultPort);if(mm.config.openShift){mm.log("- Running on OPENSHIFT_NODEJS")}mm.log("- Starting server on {0}:{1}",self.ipaddress,self.port);self.terminator=function(sig){if(typeof sig==="string"){mm.log.debug("{0}: Received {1} - terminating mMeddle server ...",Date(Date.now()),sig);process.exit(1)}mm.log("{0}: mMeddle server stopped.",Date(Date.now()))};self.setupTerminationHandlers=function(){process.on("exit",function(){mm.log.debug("- server process exit");self.terminator()});["SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGUSR1","SIGSEGV","SIGUSR2","SIGTERM"].forEach(function(element,index,array){process.on(element,function(){self.terminator(element)})})};self.createRoutes=function(){self.routes={};self.routes["/"]=function(req,res){res.setHeader("Content-Type","text/html");res.send(mm.fs.readFileSync("./index.html"))}};self.initializeServer=function(){self.createRoutes();self.app=express();for(var r in self.routes){self.app.get(r,self.routes[r])}var cacheControl={maxAge:"1d",setHeaders:setCustomCacheControl};var publicDirs=["lib","dist","test","api","css","images"];publicDirs.forEach(function serveStaticDir(dir){self.app.use("/"+dir,serveStatic(self.dirName+"/"+dir,cacheControl))});function setCustomCacheControl(res,path){mm.log.debug("- static fetch: ["+path+"]");if(serveStatic.mime.lookup(path)==="text/html"){res.setHeader("Cache-Control","public, max-age=0")}}};self.start=function(){self.server=self.app.listen(self.port,self.ipaddress,function(e){mm.log("{0}: mMeddle server started on {1}:{2} ...",mm.util.timestamp(new Date(Date.now())),self.ipaddress,self.port)})}};return ctor}();return MMeddleServer}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";module.exports=function(mm){var qq=mm.check(mm.Q);var _=mm.check(mm._);var MockSockServer=function mockSockServerCtorCreator(){var ctor=function mockSockServer(){var self=this;self.version="0.9.16_MockSockServer";self.connectedD=qq.defer();self.connected=self.connectedD.promise;self.log=function(){var args=Array.prototype.slice.call(arguments);args[0]="[MockServer]:"+args[0];mm.log.debug.apply(null,args)}};return ctor}();MockSockServer.prototype.listen=function mockListen(server){var self=this;self.log("Listening...");return self};MockSockServer.prototype.configure=function mockIoConfigure(func){func()};MockSockServer.prototype.set=function mockIoSet(){};MockSockServer.prototype.on=function mockIoConnect(event,handler){var self=this;self.log("on ["+event+"]");if(event==="connection"){self.connected.then(function(clientSocket){self.log("Connected to",clientSocket);handler(clientSocket);self.connectedD=qq.defer();self.connected=self.connectedD.promise;self.on("connected",handler)})}};var MockSockClient=function mockSockClientCtorCreator(){var ctor=function mockSockClient(server){var self=this;self.version="0.9.16_MockSockClient";self.server=server;self.log=function(){var args=Array.prototype.slice.call(arguments);args[0]="[MockClient]:"+args[0];mm.log.debug.apply(null,args)}};return ctor}();MockSockClient.prototype.connect=function connect(url){var self=this;self.url=url;self.log("Connecting to server:",url);return self.reconnect(true)};MockSockClient.prototype.reconnect=function reconnect(firstConnect){var self=this;if(!firstConnect){self.log("Reconnecting to server:",self.url)}var id="MockId_"+_.random(1e8).toString();var mySocket=new MockSocket(id,"client",self);var remoteSocket=new MockSocket(id,"server",self.server);mySocket.remote=remoteSocket;remoteSocket.remote=mySocket;self.server.connectedD.resolve(remoteSocket);return mySocket};var MockSocket=function mockClientSocketCtorCreator(){var ctor=function mockSocket(id,alias,owner){var self=this;self.id=id;self.alias=alias;self.owner=owner;self.socket=owner;self.remote=null;self.events={};self.log=function(){var args=Array.prototype.slice.call(arguments);args[0]="[MockSock_"+self.alias+"]:"+args[0];mm.log.debug.apply(null,args)}};return ctor}();MockSocket.prototype.on=function on(event,handler){var self=this;self.events[event]=function(data){self.log("Recieved event["+event+"]");handler(data)}};MockSocket.prototype.emit=function on(event,obj){var self=this;self.log("Emit Event["+event+"]");if(self.remote.events[event]){self.remote.events[event](obj)}else{self.log("--- Warning! No handler on remote for event["+event+"]")}};MockSocket.prototype.disconnect=function disconnect(){var self=this;self.log("***disconnect***");self.emit("disconnect",{})};return{Server:MockSockServer,Client:MockSockClient}}},function(module,exports,__webpack_require__){"use strict";module.exports=function setupClientTestSupport(mm){var check=mm.check;var _=check(mm._);var qq=check(mm.Q);var EggTimer=check(mm.obj.EggTimer);var CliConsole=check(mm.core.CliConsole);var ClientSession=check(mm.core.ClientSession);var MMeddleClient=check(mm.core.MMeddleClient);var CliCommands=check(mm.core.CliCommands);var connectedP=false;var connectedTimer;var MAX_TEST_TIMEOUT_SEC=10;function mockMeddleServer(){try{var appName="mockServer";mm.log.setupAppDebugLog(appName);mm.config=mm.config.appLoad(appName);mm.log.debug("----- Server Configuration -----\n",mm.config);var mmServer=new mm.server.MMeddleServer(mm.config.baseDir);mmServer.setupTerminationHandlers();mmServer.initializeServer();mmServer.start();var storageEngine=new mm.storage.StorageEngine;if(!mm.util.mmEnvOption("NOFS",false)){mm.storage.providers.FileProvider.register(storageEngine)}if(!mm.util.mmEnvOption("NODB",false)){mm.storage.providers.MongoDBProvider.register(storageEngine)}var socketService=new mm.server.SocketService;socketService.initializeService(mmServer,storageEngine);socketService.acceptConnections();mm.test.server.mmServer=mmServer;mm.test.server.socketService=socketService}catch(e){mm.log.error("- Mock mMeddle Server failure:",e.stack)}}function mochaTestWorkspace(){try{if(mm.test.client.mmc){return}var mConsole;if(mm.config.inNode){mConsole=new CliConsole}else{mConsole=new CliConsole("cliInText","inTextPrompt","consolediv")}mm.mConsole=mConsole;mm.test.client.mConsole=mConsole;mm.log.setCliConsole(mConsole);mm.log.debug("----- MochaTests Configuration -----\n",mm.config);var clientName="MochaTests";var cs=new ClientSession(clientName);var host=mm.config.localUrl;var mmc=new MMeddleClient(host,cs);mm.test.client.cs=cs;mm.test.client.mmc=mmc;var cliCmds=new CliCommands(mConsole,cs);mm.test.client.cmds=cliCmds;cs.bindClient(mmc);cs.loadLocalWorkspace();cs.loadLocalUser()}catch(e){mm.log.error("Test Client Setup failed.",e.stack)}}function mochaTestConnect(){try{mochaTestWorkspace();if(connectedP){connectedTimer.reset();return connectedP}connectedTimer=new EggTimer(MAX_TEST_TIMEOUT_SEC*1e3);connectedTimer.onDing(function(){if(mm.config.inNode){mm.log("----- Shutdown server connection for tests.");mm.test.client.mConsole.close()}});mm.log("- Connect to the test Server");mm.test.debugon=true;var mockSock=mm.util.ifEnvOption("MOCKSOCK")||mm.config.mocksock;if(mockSock){mm.socketServer.io=new mm.mockSock.Server;mm.socketClient.io=new mm.mockSock.Client(mm.socketServer.io);mockMeddleServer()}connectedP=mm.test.client.mmc.connectWorkspace("local").then(function(){mm.log("- Connected to server {0}",mm.test.client.mmc.host);mm.test.client.cs.emitLogMessage(mm.test.client.cs.appName+" connected!")});return connectedP}catch(e){mm.log.error("Test Client Setup failed.",e.stack)}}mm.test.mochaTestWorkspace=mochaTestWorkspace;mm.test.mochaTestConnect=mochaTestConnect}},function(module,exports,__webpack_require__){(function(global,process){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=__webpack_require__(75);function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=__webpack_require__(82);exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(exports,function(){return this}(),__webpack_require__(9))},function(module,exports,__webpack_require__){(function(Buffer){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var base64=__webpack_require__(83);var ieee754=__webpack_require__(80);var isArray=__webpack_require__(81);exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var kMaxLength=1073741823;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);arr.foo=function(){return 42};return arr.foo()===42&&typeof arr.subarray==="function"&&new Uint8Array(1).subarray(1,1).byteLength===0}catch(e){return false}}();function Buffer(subject,encoding){var self=this;if(!(self instanceof Buffer))return new Buffer(subject,encoding);var type=typeof subject;var length;if(type==="number"){length=+subject}else if(type==="string"){length=Buffer.byteLength(subject,encoding)}else if(type==="object"&&subject!==null){if(subject.type==="Buffer"&&isArray(subject.data))subject=subject.data;length=+subject.length}else{throw new TypeError("must start with number, buffer, array or string")}if(length>kMaxLength){throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength.toString(16)+" bytes")}if(length<0)length=0;else length>>>=0;if(Buffer.TYPED_ARRAY_SUPPORT){self=Buffer._augment(new Uint8Array(length))}else{self.length=length;self._isBuffer=true}var i;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof subject.byteLength==="number"){self._set(subject)}else if(isArrayish(subject)){if(Buffer.isBuffer(subject)){for(i=0;i<length;i++){self[i]=subject.readUInt8(i)}}else{for(i=0;i<length;i++){self[i]=(subject[i]%256+256)%256}}}else if(type==="string"){self.write(subject,0,encoding)}else if(type==="number"&&!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<length;i++){self[i]=0}}if(length>0&&length<=Buffer.poolSize)self.parent=rootParent;return self}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);delete buf.parent;return buf}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len&&a[i]===b[i];i++){}if(i!==len){x=a[i];y=b[i]}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,totalLength){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(list.length===0){return new Buffer(0)}else if(list.length===1){return list[0]}var i;if(totalLength===undefined){totalLength=0;for(i=0;i<list.length;i++){totalLength+=list[i].length}}var buf=new Buffer(totalLength);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};Buffer.byteLength=function byteLength(str,encoding){var ret;str=str+"";switch(encoding||"utf8"){case"ascii":case"binary":case"raw":ret=str.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=str.length*2;break;case"hex":ret=str.length>>>1;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"base64":ret=base64ToBytes(str).length;break;default:ret=str.length}return ret};Buffer.prototype.length=undefined;Buffer.prototype.parent=undefined;Buffer.prototype.toString=function toString(encoding,start,end){var loweredCase=false;start=start>>>0;end=end===undefined||end===Infinity?this.length:end>>>0;if(!encoding)encoding="utf8";if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return"";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return 0;return Buffer.compare(this,b)};Buffer.prototype.indexOf=function indexOf(val,byteOffset){if(byteOffset>2147483647)byteOffset=2147483647;else if(byteOffset<-2147483648)byteOffset=-2147483648;byteOffset>>=0;if(this.length===0)return-1;if(byteOffset>=this.length)return-1;if(byteOffset<0)byteOffset=Math.max(this.length+byteOffset,0);if(typeof val==="string"){if(val.length===0)return-1;return String.prototype.indexOf.call(this,val,byteOffset)}if(Buffer.isBuffer(val)){return arrayIndexOf(this,val,byteOffset)}if(typeof val==="number"){if(Buffer.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,val,byteOffset)}return arrayIndexOf(this,[val],byteOffset)}function arrayIndexOf(arr,val,byteOffset){var foundIndex=-1;for(var i=0;byteOffset+i<arr.length;i++){if(arr[byteOffset+i]===val[foundIndex===-1?0:i-foundIndex]){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===val.length)return byteOffset+foundIndex}else{foundIndex=-1}}return-1}throw new TypeError("val must be string, number or Buffer")};Buffer.prototype.get=function get(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function set(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){var charsWritten=blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length);return charsWritten}function asciiWrite(buf,string,offset,length){var charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){var charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function utf16leWrite(buf,string,offset,length){var charsWritten=blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length);return charsWritten}Buffer.prototype.write=function write(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=Number(offset)||0;if(length<0||offset<0||offset>this.length){throw new RangeError("attempt to write outside buffer bounds")}var remaining=this.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=hexWrite(this,string,offset,length);break;case"utf8":case"utf-8":ret=utf8Write(this,string,offset,length);break;case"ascii":ret=asciiWrite(this,string,offset,length);break;case"binary":ret=binaryWrite(this,string,offset,length);break;case"base64":ret=base64Write(this,string,offset,length);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=utf16leWrite(this,string,offset,length);break;default:throw new TypeError("Unknown encoding: "+encoding)}return ret};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){var res="";var tmp="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){if(buf[i]<=127){res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]);tmp=""}else{tmp+="%"+buf[i].toString(16)}}return res+decodeUtf8Char(tmp)}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&127)}return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul>>>0&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul>>>0&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength-1)-1,-Math.pow(2,8*byteLength-1))}var i=0;var mul=1;var sub=value<0?1:0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength-1)-1,-Math.pow(2,8*byteLength-1))}var i=byteLength-1;var mul=1;var sub=value<0?1:0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(offset<0)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,target_start,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(target_start>=target.length)target_start=target.length;if(!target_start)target_start=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(target_start<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-target_start<end-start){end=target.length-target_start+start}var len=end-start;if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<len;i++){target[i+target_start]=this[i+start]}}else{target._set(this.subarray(start,start+len),target_start)}return len};Buffer.prototype.fill=function fill(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new RangeError("end < start");if(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new RangeError("start out of bounds");if(end<0||end>this.length)throw new RangeError("end out of bounds");var i;if(typeof value==="number"){for(i=start;i<end;i++){this[i]=value}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len]}}return this};Buffer.prototype.toArrayBuffer=function toArrayBuffer(){if(typeof Uint8Array!=="undefined"){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i]}return buf.buffer}}else{throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}};var BP=Buffer.prototype;Buffer._augment=function _augment(arr){arr.constructor=Buffer;arr._isBuffer=true;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.indexOf=BP.indexOf;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-z\-]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==="object"&&typeof subject.length==="number"}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];var i=0;for(;i<length;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(leadSurrogate){if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}else{codePoint=leadSurrogate-55296<<10|codePoint-56320|65536;leadSurrogate=null}}else{if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}else{leadSurrogate=codePoint;continue}}}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=null}if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<2097152){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var client=__webpack_require__(84);exports.version="0.9.16";exports.protocol=1;exports.clientVersion=client.version;exports.listen=function(server,options,fn){if("function"==typeof server){console.warn("Socket.IO's `listen()` method expects an `http.Server` instance\n"+"as its first parameter. Are you migrating from Express 2.x to 3.x?\n"+'If so, check out the "Socket.IO compatibility" section at:\n'+"https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x")}if("function"==typeof options){fn=options;options={}}if("undefined"==typeof server){server=80}if("number"==typeof server){var port=server;if(options&&options.key)server=__webpack_require__(78).createServer(options);else server=__webpack_require__(79).createServer();server.on("request",function(req,res){res.writeHead(200);res.end("Welcome to socket.io.")});server.listen(port,fn)}return new exports.Manager(server,options)};exports.Manager=__webpack_require__(63);exports.Transport=__webpack_require__(64);exports.Socket=__webpack_require__(65);exports.Static=__webpack_require__(66);exports.Store=__webpack_require__(67);exports.MemoryStore=__webpack_require__(68);exports.RedisStore=__webpack_require__(69);exports.parser=__webpack_require__(70)},function(module,exports,__webpack_require__){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];module.children=[];module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){"use strict";var union=__webpack_require__(101);var assign=__webpack_require__(60);var async=__webpack_require__(106);var glob=__webpack_require__(113);function arrayify(arr){return Array.isArray(arr)?arr:[arr]}function sortPatterns(patterns){patterns=arrayify(patterns);var positives=[];var negatives=[];patterns.forEach(function(pattern,index){var isNegative=pattern[0]==="!";(isNegative?negatives:positives).push({index:index,pattern:isNegative?pattern.slice(1):pattern})});return{positives:positives,negatives:negatives}}function setIgnore(opts,negatives,positiveIndex){opts=assign({},opts);var negativePatterns=negatives.filter(function(negative){return negative.index>positiveIndex}).map(function(negative){return negative.pattern});opts.ignore=(opts.ignore||[]).concat(negativePatterns);return opts}module.exports=function(patterns,opts,cb){var sortedPatterns=sortPatterns(patterns);if(typeof opts==="function"){cb=opts;opts={}}if(sortedPatterns.positives.length===0){cb(null,[]);return}async.parallel(sortedPatterns.positives.map(function(positive){return function(cb2){glob(positive.pattern,setIgnore(opts,sortedPatterns.negatives,positive.index),function(err,paths){if(err){cb2(err);return}cb2(null,paths)})}}),function(err,paths){if(err){cb(err);return}cb(null,union.apply(null,paths))})};module.exports.sync=function(patterns,opts){var sortedPatterns=sortPatterns(patterns);if(sortedPatterns.positives.length===0){return[]}return sortedPatterns.positives.reduce(function(ret,positive){return union(ret,glob.sync(positive.pattern,setIgnore(opts,sortedPatterns.negatives,positive.index)))},[])}},function(module,exports,__webpack_require__){"use strict";var onetime=__webpack_require__(102);var setImmediateShim=__webpack_require__(103);module.exports=function(arr,next,cb){var failed=false;var count=0;cb=cb||function(){};if(!Array.isArray(arr)){throw new TypeError("First argument must be an array")}if(typeof next!=="function"){throw new TypeError("Second argument must be a function")}var len=arr.length;if(!len){cb();return}function callback(err){if(failed){return}if(err!==undefined&&err!==null){failed=true;cb(err);return}if(++count===len){cb();return}}for(var i=0;i<len;i++){setImmediateShim(next,arr[i],i,onetime(callback,true))}}},function(module,exports,__webpack_require__){(function(process){"use strict";var path=__webpack_require__(8);module.exports=function(str){return path.resolve(str)===path.resolve(process.cwd())}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var isPathInside=__webpack_require__(104);module.exports=function(str){return isPathInside(str,process.cwd())}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function ToObject(val){if(val==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}module.exports=Object.assign||function(target,source){var from;var keys;var to=ToObject(target);for(var s=1;s<arguments.length;s++){from=arguments[s];keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++){to[keys[i]]=from[keys[i]]}}return to}},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){var nextTick=__webpack_require__(9).nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);

immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(61).setImmediate,__webpack_require__(61).clearImmediate)},function(module,exports,__webpack_require__){(function(process){module.exports=rimraf;rimraf.sync=rimrafSync;var assert=__webpack_require__(107);var path=__webpack_require__(8);var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());var glob=__webpack_require__(119);var globOpts={nosort:true,nocomment:true,nonegate:true,silent:true};var timeout=0;var isWindows=process.platform==="win32";function defaults(options){var methods=["unlink","chmod","stat","lstat","rmdir","readdir"];methods.forEach(function(m){options[m]=options[m]||fs[m];m=m+"Sync";options[m]=options[m]||fs[m]});options.maxBusyTries=options.maxBusyTries||3;options.emfileWait=options.emfileWait||1e3}function rimraf(p,options,cb){if(typeof options==="function"){cb=options;options={}}assert(p);assert(options);assert(typeof cb==="function");defaults(options);if(!cb)throw new Error("No callback passed to rimraf()");var busyTries=0;var errState=null;var n=0;if(!glob.hasMagic(p))return afterGlob(null,[p]);fs.lstat(p,function(er,stat){if(!er)return afterGlob(null,[p]);glob(p,globOpts,afterGlob)});function next(er){errState=errState||er;if(--n===0)cb(errState)}function afterGlob(er,results){if(er)return cb(er);n=results.length;if(n===0)return cb();results.forEach(function(p){rimraf_(p,options,function CB(er){if(er){if(isWindows&&(er.code==="EBUSY"||er.code==="ENOTEMPTY")&&busyTries<options.maxBusyTries){busyTries++;var time=busyTries*100;return setTimeout(function(){rimraf_(p,options,CB)},time)}if(er.code==="EMFILE"&&timeout<options.emfileWait){return setTimeout(function(){rimraf_(p,options,CB)},timeout++)}if(er.code==="ENOENT")er=null}timeout=0;next(er)})})}}function rimraf_(p,options,cb){assert(p);assert(options);assert(typeof cb==="function");options.lstat(p,function(er,st){if(er&&er.code==="ENOENT")return cb(null);if(st&&st.isDirectory())return rmdir(p,options,er,cb);options.unlink(p,function(er){if(er){if(er.code==="ENOENT")return cb(null);if(er.code==="EPERM")return isWindows?fixWinEPERM(p,options,er,cb):rmdir(p,options,er,cb);if(er.code==="EISDIR")return rmdir(p,options,er,cb)}return cb(er)})})}function fixWinEPERM(p,options,er,cb){assert(p);assert(options);assert(typeof cb==="function");if(er)assert(er instanceof Error);options.chmod(p,666,function(er2){if(er2)cb(er2.code==="ENOENT"?null:er);else options.stat(p,function(er3,stats){if(er3)cb(er3.code==="ENOENT"?null:er);else if(stats.isDirectory())rmdir(p,options,er,cb);else options.unlink(p,cb)})})}function fixWinEPERMSync(p,options,er){assert(p);assert(options);if(er)assert(er instanceof Error);try{options.chmodSync(p,666)}catch(er2){if(er2.code==="ENOENT")return;else throw er}try{var stats=options.statSync(p)}catch(er3){if(er3.code==="ENOENT")return;else throw er}if(stats.isDirectory())rmdirSync(p,options,er);else options.unlinkSync(p)}function rmdir(p,options,originalEr,cb){assert(p);assert(options);if(originalEr)assert(originalEr instanceof Error);assert(typeof cb==="function");options.rmdir(p,function(er){if(er&&(er.code==="ENOTEMPTY"||er.code==="EEXIST"||er.code==="EPERM"))rmkids(p,options,cb);else if(er&&er.code==="ENOTDIR")cb(originalEr);else cb(er)})}function rmkids(p,options,cb){assert(p);assert(options);assert(typeof cb==="function");options.readdir(p,function(er,files){if(er)return cb(er);var n=files.length;if(n===0)return options.rmdir(p,cb);var errState;files.forEach(function(f){rimraf(path.join(p,f),options,function(er){if(errState)return;if(er)return cb(errState=er);if(--n===0)options.rmdir(p,cb)})})})}function rimrafSync(p,options){options=options||{};defaults(options);assert(p);assert(options);var results;if(!glob.hasMagic(p)){results=[p]}else{try{fs.lstatSync(p);results=[p]}catch(er){results=glob.sync(p,globOpts)}}if(!results.length)return;for(var i=0;i<results.length;i++){var p=results[i];try{var st=options.lstatSync(p)}catch(er){if(er.code==="ENOENT")return}try{if(st&&st.isDirectory())rmdirSync(p,options,null);else options.unlinkSync(p)}catch(er){if(er.code==="ENOENT")return;if(er.code==="EPERM")return isWindows?fixWinEPERMSync(p,options,er):rmdirSync(p,options,er);if(er.code!=="EISDIR")throw er;rmdirSync(p,options,er)}}}function rmdirSync(p,options,originalEr){assert(p);assert(options);if(originalEr)assert(originalEr instanceof Error);try{options.rmdirSync(p)}catch(er){if(er.code==="ENOENT")return;if(er.code==="ENOTDIR")throw originalEr;if(er.code==="ENOTEMPTY"||er.code==="EEXIST"||er.code==="EPERM")rmkidsSync(p,options)}}function rmkidsSync(p,options){assert(p);assert(options);options.readdirSync(p).forEach(function(f){rimrafSync(path.join(p,f),options)});options.rmdirSync(p,options)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process,module,Buffer){var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()),url=__webpack_require__(109),tty=__webpack_require__(108),crypto=__webpack_require__(110),util=__webpack_require__(85),store=__webpack_require__(67),client=__webpack_require__(84),transports=__webpack_require__(100),Logger=__webpack_require__(86),Socket=__webpack_require__(65),MemoryStore=__webpack_require__(68),SocketNamespace=__webpack_require__(87),Static=__webpack_require__(66),EventEmitter=process.EventEmitter;exports=module.exports=Manager;var defaultTransports=exports.defaultTransports=["websocket","htmlfile","xhr-polling","jsonp-polling"];var parent=module.parent.exports,protocol=parent.protocol,jsonpolling_re=/^\d+$/;function Manager(server,options){this.server=server;this.namespaces={};this.sockets=this.of("");this.settings={origins:"*:*",log:true,store:new MemoryStore,logger:new Logger,"static":new Static(this),heartbeats:true,resource:"/socket.io",transports:defaultTransports,authorization:false,blacklist:["disconnect"],"log level":3,"log colors":tty.isatty(process.stdout.fd),"close timeout":60,"heartbeat interval":25,"heartbeat timeout":60,"polling duration":20,"flash policy server":true,"flash policy port":10843,"destroy upgrade":true,"destroy buffer size":1e8,"browser client":true,"browser client cache":true,"browser client minification":false,"browser client etag":false,"browser client expires":31536e4,"browser client gzip":false,"browser client handler":false,"client store expiration":15,"match origin protocol":false};for(var i in options){if(options.hasOwnProperty(i)){this.settings[i]=options[i]}}var self=this;server.on("error",function(err){self.log.warn("error raised: "+err)});this.initStore();this.on("set:store",function(){self.initStore()});this.oldListeners=server.listeners("request").splice(0);server.removeAllListeners("request");server.on("request",function(req,res){self.handleRequest(req,res)});server.on("upgrade",function(req,socket,head){self.handleUpgrade(req,socket,head)});server.on("close",function(){clearInterval(self.gc)});server.once("listening",function(){self.gc=setInterval(self.garbageCollection.bind(self),1e4)});for(var i in transports){if(transports.hasOwnProperty(i)){if(transports[i].init){transports[i].init(this)}}}var self=this;this.sockets.on("connection",function(conn){self.emit("connection",conn)});this.sequenceNumber=Date.now()|0;this.log.info("socket.io started")}Manager.prototype.__proto__=EventEmitter.prototype;Manager.prototype.__defineGetter__("store",function(){var store=this.get("store");store.manager=this;return store});Manager.prototype.__defineGetter__("log",function(){var logger=this.get("logger");logger.level=this.get("log level")||-1;logger.colors=this.get("log colors");logger.enabled=this.enabled("log");return logger});Manager.prototype.__defineGetter__("static",function(){return this.get("static")});Manager.prototype.get=function(key){return this.settings[key]};Manager.prototype.set=function(key,value){if(arguments.length==1)return this.get(key);this.settings[key]=value;this.emit("set:"+key,this.settings[key],key);return this};Manager.prototype.enable=function(key){this.settings[key]=true;this.emit("set:"+key,this.settings[key],key);return this};Manager.prototype.disable=function(key){this.settings[key]=false;this.emit("set:"+key,this.settings[key],key);return this};Manager.prototype.enabled=function(key){return!!this.settings[key]};Manager.prototype.disabled=function(key){return!this.settings[key]};Manager.prototype.configure=function(env,fn){if("function"==typeof env){env.call(this)}else if(env==(process.env.NODE_ENV||"development")){fn.call(this)}return this};Manager.prototype.initStore=function(){this.handshaken={};this.connected={};this.open={};this.closed={};this.rooms={};this.roomClients={};var self=this;this.store.subscribe("handshake",function(id,data){self.onHandshake(id,data)});this.store.subscribe("connect",function(id){self.onConnect(id)});this.store.subscribe("open",function(id){self.onOpen(id)});this.store.subscribe("join",function(id,room){self.onJoin(id,room)});this.store.subscribe("leave",function(id,room){self.onLeave(id,room)});this.store.subscribe("close",function(id){self.onClose(id)});this.store.subscribe("dispatch",function(room,packet,volatile,exceptions){self.onDispatch(room,packet,volatile,exceptions)});this.store.subscribe("disconnect",function(id){self.onDisconnect(id)});this.store.subscribe("message-remote",function(id,packet){self.onClientMessage(id,packet)});this.store.subscribe("disconnect-remote",function(id,reason){self.onClientDisconnect(id,reason)});this.store.subscribe("dispatch-remote",function(id,packet,volatile){var transport=self.transports[id];if(transport){transport.onDispatch(packet,volatile)}if(!volatile){self.onClientDispatch(id,packet)}});this.store.subscribe("heartbeat-clear",function(id){var transport=self.transports[id];if(transport){transport.onHeartbeatClear()}});this.store.subscribe("disconnect-force",function(id){var transport=self.transports[id];if(transport){transport.onForcedDisconnect()}})};Manager.prototype.onHandshake=function(id,data){this.handshaken[id]=data};Manager.prototype.onConnect=function(id){this.connected[id]=true};Manager.prototype.onOpen=function(id){this.open[id]=true;if(this.closed[id]){var self=this;var transport=self.transports[id];if(self.closed[id]&&self.closed[id].length&&transport){if(transport.open){transport.payload(self.closed[id]);self.closed[id]=[]}}}if(this.transports[id]){this.transports[id].discard();this.transports[id]=null}};Manager.prototype.onDispatch=function(room,packet,volatile,exceptions){if(this.rooms[room]){for(var i=0,l=this.rooms[room].length;i<l;i++){var id=this.rooms[room][i];if(!~exceptions.indexOf(id)){if(this.transports[id]&&this.transports[id].open){this.transports[id].onDispatch(packet,volatile)}else if(!volatile){this.onClientDispatch(id,packet)}}}}};Manager.prototype.onJoin=function(id,name){if(!this.roomClients[id]){this.roomClients[id]={}}if(!this.rooms[name]){this.rooms[name]=[]}if(!~this.rooms[name].indexOf(id)){this.rooms[name].push(id);this.roomClients[id][name]=true}};Manager.prototype.onLeave=function(id,room){if(this.rooms[room]){var index=this.rooms[room].indexOf(id);if(index>=0){this.rooms[room].splice(index,1)}if(!this.rooms[room].length){delete this.rooms[room]}if(this.roomClients[id]){delete this.roomClients[id][room]}}};Manager.prototype.onClose=function(id){if(this.open[id]){delete this.open[id]}this.closed[id]=[];var self=this};Manager.prototype.onClientDispatch=function(id,packet){if(this.closed[id]){this.closed[id].push(packet)}};Manager.prototype.onClientMessage=function(id,packet){if(this.namespaces[packet.endpoint]){this.namespaces[packet.endpoint].handlePacket(id,packet)}};Manager.prototype.onClientDisconnect=function(id,reason){for(var name in this.namespaces){if(this.namespaces.hasOwnProperty(name)){this.namespaces[name].handleDisconnect(id,reason,typeof this.roomClients[id]!=="undefined"&&typeof this.roomClients[id][name]!=="undefined")}}this.onDisconnect(id)};Manager.prototype.onDisconnect=function(id){delete this.handshaken[id];if(this.open[id]){delete this.open[id]}if(this.connected[id]){delete this.connected[id]}if(this.transports[id]){this.transports[id].discard();delete this.transports[id]}if(this.closed[id]){delete this.closed[id]}if(this.roomClients[id]){for(var room in this.roomClients[id]){if(this.roomClients[id].hasOwnProperty(room)){this.onLeave(id,room)}}delete this.roomClients[id]}this.store.destroyClient(id,this.get("client store expiration"))};Manager.prototype.handleRequest=function(req,res){var data=this.checkRequest(req);if(!data){for(var i=0,l=this.oldListeners.length;i<l;i++){this.oldListeners[i].call(this.server,req,res)}return}if(data.static||!data.transport&&!data.protocol){if(data.static&&this.enabled("browser client")){this.static.write(data.path,req,res)}else{res.writeHead(200);res.end("Welcome to socket.io.");this.log.info("unhandled socket.io url")}return}if(data.protocol!=protocol){res.writeHead(500);res.end("Protocol version not supported.");this.log.info("client protocol version unsupported")}else{if(data.id){this.handleHTTPRequest(data,req,res)}else{this.handleHandshake(data,req,res)}}};Manager.prototype.handleUpgrade=function(req,socket,head){var data=this.checkRequest(req),self=this;if(!data){if(this.enabled("destroy upgrade")){socket.end();this.log.debug("destroying non-socket.io upgrade")}return}req.head=head;this.handleClient(data,req);req.head=null};Manager.prototype.handleHTTPRequest=function(data,req,res){req.res=res;this.handleClient(data,req)};Manager.prototype.handleClient=function(data,req){var socket=req.socket,store=this.store,self=this;if(undefined!=data.query.disconnect){if(this.transports[data.id]&&this.transports[data.id].open){this.transports[data.id].onForcedDisconnect()}else{this.store.publish("disconnect-force",data.id)}req.res.writeHead(200);req.res.end();return}if(!~this.get("transports").indexOf(data.transport)){this.log.warn('unknown transport: "'+data.transport+'"');req.connection.end();return}var transport=new transports[data.transport](this,data,req),handshaken=this.handshaken[data.id];if(transport.disconnected){req.connection.end();return}if(handshaken){if(transport.open){if(this.closed[data.id]&&this.closed[data.id].length){transport.payload(this.closed[data.id]);this.closed[data.id]=[]}this.onOpen(data.id);this.store.publish("open",data.id);this.transports[data.id]=transport}if(!this.connected[data.id]){this.onConnect(data.id);this.store.publish("connect",data.id);delete handshaken.issued;this.onHandshake(data.id,handshaken);this.store.publish("handshake",data.id,handshaken);for(var i in this.namespaces){if(this.namespaces.hasOwnProperty(i)){var socket=this.namespaces[i].socket(data.id,true);if(i===""){this.namespaces[i].handlePacket(data.id,{type:"connect"})}}}}}else{if(transport.open){transport.error("client not handshaken","reconnect")}transport.discard()}};Manager.prototype.generateId=function(){var rand=new Buffer(15);if(!rand.writeInt32BE){return Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()}this.sequenceNumber=this.sequenceNumber+1|0;rand.writeInt32BE(this.sequenceNumber,11);if(crypto.randomBytes){crypto.randomBytes(12).copy(rand)}else{[0,4,8].forEach(function(i){rand.writeInt32BE(Math.random()*Math.pow(2,32)|0,i)})}return rand.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")};Manager.prototype.handleHandshake=function(data,req,res){var self=this,origin=req.headers.origin,headers={"Content-Type":"text/plain"};function writeErr(status,message){if(data.query.jsonp&&jsonpolling_re.test(data.query.jsonp)){res.writeHead(200,{"Content-Type":"application/javascript"});res.end("io.j["+data.query.jsonp+'](new Error("'+message+'"));')}else{res.writeHead(status,headers);res.end(message)}}function error(err){writeErr(500,"handshake error");self.log.warn("handshake error "+err)}if(!this.verifyOrigin(req)){writeErr(403,"handshake bad origin");return}var handshakeData=this.handshakeData(data);if(origin){headers["Access-Control-Allow-Origin"]=origin;headers["Access-Control-Allow-Credentials"]="true"}this.authorize(handshakeData,function(err,authorized,newData){if(err)return error(err);if(authorized){var id=self.generateId(),hs=[id,self.enabled("heartbeats")?self.get("heartbeat timeout")||"":"",self.get("close timeout")||"",self.transports(data).join(",")].join(":");if(data.query.jsonp&&jsonpolling_re.test(data.query.jsonp)){hs="io.j["+data.query.jsonp+"]("+JSON.stringify(hs)+");";res.writeHead(200,{"Content-Type":"application/javascript"})}else{res.writeHead(200,headers)}self.onHandshake(id,newData||handshakeData);self.store.publish("handshake",id,newData||handshakeData);res.end(hs);self.log.info("handshake authorized",id)}else{writeErr(403,"handshake unauthorized");self.log.info("handshake unauthorized")}})};Manager.prototype.handshakeData=function(data){var connection=data.request.connection,connectionAddress,date=new Date;if(connection.remoteAddress){connectionAddress={address:connection.remoteAddress,port:connection.remotePort}}else if(connection.socket&&connection.socket.remoteAddress){connectionAddress={address:connection.socket.remoteAddress,port:connection.socket.remotePort}}return{headers:data.headers,address:connectionAddress,time:date.toString(),query:data.query,url:data.request.url,xdomain:!!data.request.headers.origin,secure:data.request.connection.secure,issued:+date}};Manager.prototype.verifyOrigin=function(request){var origin=request.headers.origin||request.headers.referer,origins=this.get("origins");if(origin==="null")origin="*";if(origins.indexOf("*:*")!==-1){return true}if(origin){try{var parts=url.parse(origin);parts.port=parts.port||80;var ok=~origins.indexOf(parts.hostname+":"+parts.port)||~origins.indexOf(parts.hostname+":*")||~origins.indexOf("*:"+parts.port);if(!ok)this.log.warn("illegal origin: "+origin);return ok}catch(ex){this.log.warn("error parsing origin")}}else{this.log.warn("origin missing from handshake, yet required by config")}return false};Manager.prototype.handlePacket=function(sessid,packet){this.of(packet.endpoint||"").handlePacket(sessid,packet)};Manager.prototype.authorize=function(data,fn){if(this.get("authorization")){var self=this;this.get("authorization").call(this,data,function(err,authorized){self.log.debug(true?"authorized":"unauthorized");fn(err,authorized)})}else{this.log.debug("client authorized");fn(null,true)}return this};Manager.prototype.transports=function(data){var transp=this.get("transports"),ret=[];for(var i=0,l=transp.length;i<l;i++){var transport=transp[i];if(transport){if(!transport.checkClient||transport.checkClient(data)){ret.push(transport)}}}return ret};var regexp=/^\/([^\/]+)\/?([^\/]+)?\/?([^\/]+)?\/?$/;Manager.prototype.checkRequest=function(req){var resource=this.get("resource");var match;if(typeof resource==="string"){match=req.url.substr(0,resource.length);if(match!==resource)match=null}else{match=resource.exec(req.url);if(match)match=match[0]}if(match){var uri=url.parse(req.url.substr(match.length),true),path=uri.pathname||"",pieces=path.match(regexp);var data={query:uri.query||{},headers:req.headers,request:req,path:path};if(pieces){data.protocol=Number(pieces[1]);data.transport=pieces[2];data.id=pieces[3];data.static=!!this.static.has(path)}return data}return false};Manager.prototype.of=function(nsp){if(this.namespaces[nsp]){return this.namespaces[nsp]}return this.namespaces[nsp]=new SocketNamespace(this,nsp)};Manager.prototype.garbageCollection=function(){var ids=Object.keys(this.handshaken),i=ids.length,now=Date.now(),handshake;while(i--){handshake=this.handshaken[ids[i]];if("issued"in handshake&&now-handshake.issued>=3e4){this.onDisconnect(ids[i])}}}}).call(exports,__webpack_require__(9),__webpack_require__(55)(module),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var parser=__webpack_require__(70);exports=module.exports=Transport;function Transport(mng,data,req){this.manager=mng;this.id=data.id;this.disconnected=false;this.drained=true;this.handleRequest(req)}Transport.prototype.__defineGetter__("log",function(){return this.manager.log});Transport.prototype.__defineGetter__("store",function(){return this.manager.store});Transport.prototype.handleRequest=function(req){this.log.debug("setting request",req.method,req.url);this.req=req;if(req.method=="GET"){this.socket=req.socket;this.open=true;this.drained=true;this.setHeartbeatInterval();this.setHandlers();this.onSocketConnect()}};Transport.prototype.onSocketConnect=function(){};Transport.prototype.setHandlers=function(){var self=this;this.bound={end:this.onSocketEnd.bind(this),close:this.onSocketClose.bind(this),error:this.onSocketError.bind(this),drain:this.onSocketDrain.bind(this)};this.socket.on("end",this.bound.end);this.socket.on("close",this.bound.close);this.socket.on("error",this.bound.error);this.socket.on("drain",this.bound.drain);this.handlersSet=true};Transport.prototype.clearHandlers=function(){if(this.handlersSet){this.socket.removeListener("end",this.bound.end);this.socket.removeListener("close",this.bound.close);this.socket.removeListener("error",this.bound.error);this.socket.removeListener("drain",this.bound.drain)}};Transport.prototype.onSocketEnd=function(){this.end("socket end")};Transport.prototype.onSocketClose=function(error){this.end(error?"socket error":"socket close")};Transport.prototype.onSocketError=function(err){if(this.open){this.socket.destroy();this.onClose()}this.log.info("socket error "+err.stack)};Transport.prototype.onSocketDrain=function(){this.drained=true};Transport.prototype.onHeartbeatClear=function(){this.clearHeartbeatTimeout();this.setHeartbeatInterval()};Transport.prototype.onForcedDisconnect=function(){if(!this.disconnected){this.log.info("transport end by forced client disconnection");if(this.open){this.packet({type:"disconnect"})}this.end("booted")}};Transport.prototype.onDispatch=function(packet,volatile){if(volatile){this.writeVolatile(packet)}else{this.write(packet)}};Transport.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var self=this;this.closeTimeout=setTimeout(function(){self.log.debug("fired close timeout for client",self.id);self.closeTimeout=null;self.end("close timeout")},this.manager.get("close timeout")*1e3);this.log.debug("set close timeout for client",this.id)}};Transport.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null;this.log.debug("cleared close timeout for client",this.id)}};Transport.prototype.setHeartbeatTimeout=function(){if(!this.heartbeatTimeout&&this.manager.enabled("heartbeats")){var self=this;this.heartbeatTimeout=setTimeout(function(){self.log.debug("fired heartbeat timeout for client",self.id);self.heartbeatTimeout=null;self.end("heartbeat timeout")},this.manager.get("heartbeat timeout")*1e3);this.log.debug("set heartbeat timeout for client",this.id)}};Transport.prototype.clearHeartbeatTimeout=function(){if(this.heartbeatTimeout&&this.manager.enabled("heartbeats")){clearTimeout(this.heartbeatTimeout);this.heartbeatTimeout=null;this.log.debug("cleared heartbeat timeout for client",this.id)}};Transport.prototype.setHeartbeatInterval=function(){if(!this.heartbeatInterval&&this.manager.enabled("heartbeats")){var self=this;this.heartbeatInterval=setTimeout(function(){self.heartbeat();self.heartbeatInterval=null},this.manager.get("heartbeat interval")*1e3);this.log.debug("set heartbeat interval for client",this.id)}};Transport.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.clearHeartbeatTimeout();this.clearHeartbeatInterval()};Transport.prototype.heartbeat=function(){if(this.open){this.log.debug("emitting heartbeat for client",this.id);this.packet({type:"heartbeat"});this.setHeartbeatTimeout()}return this};Transport.prototype.onMessage=function(packet){var current=this.manager.transports[this.id];if("heartbeat"==packet.type){this.log.debug("got heartbeat packet");if(current&&current.open){current.onHeartbeatClear()}else{this.store.publish("heartbeat-clear",this.id)}}else{if("disconnect"==packet.type&&packet.endpoint==""){this.log.debug("got disconnection packet");if(current){current.onForcedDisconnect()}else{this.store.publish("disconnect-force",this.id)}return}if(packet.id&&packet.ack!="data"){this.log.debug("acknowledging packet automatically");var ack=parser.encodePacket({type:"ack",ackId:packet.id,endpoint:packet.endpoint||""});if(current&&current.open){current.onDispatch(ack)}else{this.manager.onClientDispatch(this.id,ack);this.store.publish("dispatch-remote",this.id,ack)}}if(current){this.manager.onClientMessage(this.id,packet)}else{this.store.publish("message-remote",this.id,packet)}}};Transport.prototype.clearHeartbeatInterval=function(){if(this.heartbeatInterval&&this.manager.enabled("heartbeats")){clearTimeout(this.heartbeatInterval);this.heartbeatInterval=null;this.log.debug("cleared heartbeat interval for client",this.id)}};Transport.prototype.disconnect=function(reason){this.packet({type:"disconnect"});this.end(reason);return this};Transport.prototype.close=function(){if(this.open){this.doClose();this.onClose()}};Transport.prototype.onClose=function(){if(this.open){this.setCloseTimeout();this.clearHandlers();this.open=false;this.manager.onClose(this.id);this.store.publish("close",this.id)}};Transport.prototype.end=function(reason){if(!this.disconnected){this.log.info("transport end ("+reason+")");var local=this.manager.transports[this.id];this.close();this.clearTimeouts();this.disconnected=true;if(local){this.manager.onClientDisconnect(this.id,reason)}this.store.publish("disconnect-remote",this.id,reason)}};Transport.prototype.discard=function(){this.log.debug("discarding transport");this.discarded=true;this.clearTimeouts();this.clearHandlers();return this};Transport.prototype.error=function(reason,advice){this.packet({type:"error",reason:reason,advice:advice});this.log.warn(reason,advice?"client should "+advice:"");this.end("error")};Transport.prototype.packet=function(obj){return this.write(parser.encodePacket(obj))};Transport.prototype.writeVolatile=function(msg){if(this.open){if(this.drained){this.write(msg)}else{this.log.debug("ignoring volatile packet, buffer not drained")}}else{this.log.debug("ignoring volatile packet, transport not open")}}},function(module,exports,__webpack_require__){(function(process){var parser=__webpack_require__(70),util=__webpack_require__(85),EventEmitter=process.EventEmitter;exports=module.exports=Socket;var defaultError=function(){};function Socket(manager,id,nsp,readable){this.id=id;this.namespace=nsp;this.manager=manager;this.disconnected=false;this.ackPackets=0;this.acks={};this.setFlags();this.readable=readable;this.store=this.manager.store.client(this.id);this.on("error",defaultError)}Socket.prototype.__proto__=EventEmitter.prototype;Socket.prototype.__defineGetter__("handshake",function(){return this.manager.handshaken[this.id]});Socket.prototype.__defineGetter__("transport",function(){return this.manager.transports[this.id].name});Socket.prototype.__defineGetter__("log",function(){return this.manager.log});Socket.prototype.__defineGetter__("json",function(){this.flags.json=true;return this});Socket.prototype.__defineGetter__("volatile",function(){this.flags.volatile=true;return this});Socket.prototype.__defineGetter__("broadcast",function(){this.flags.broadcast=true;return this});Socket.prototype.to=Socket.prototype.in=function(room){this.flags.room=room;return this};Socket.prototype.setFlags=function(){this.flags={endpoint:this.namespace.name,room:""};return this};Socket.prototype.onDisconnect=function(reason){if(!this.disconnected){this.$emit("disconnect",reason);this.disconnected=true}};Socket.prototype.join=function(name,fn){var nsp=this.namespace.name,name=nsp+"/"+name;this.manager.onJoin(this.id,name);this.manager.store.publish("join",this.id,name);if(fn){this.log.warn("Client#join callback is deprecated");fn()}return this};Socket.prototype.leave=function(name,fn){var nsp=this.namespace.name,name=nsp+"/"+name;this.manager.onLeave(this.id,name);this.manager.store.publish("leave",this.id,name);if(fn){this.log.warn("Client#leave callback is deprecated");fn()}return this};Socket.prototype.packet=function(packet){if(this.flags.broadcast){this.log.debug("broadcasting packet");this.namespace.in(this.flags.room).except(this.id).packet(packet)}else{packet.endpoint=this.flags.endpoint;packet=parser.encodePacket(packet);this.dispatch(packet,this.flags.volatile)}this.setFlags();return this};Socket.prototype.dispatch=function(packet,volatile){if(this.manager.transports[this.id]&&this.manager.transports[this.id].open){this.manager.transports[this.id].onDispatch(packet,volatile)}else{if(!volatile){this.manager.onClientDispatch(this.id,packet,volatile)}this.manager.store.publish("dispatch-remote",this.id,packet,volatile)}};Socket.prototype.set=function(key,value,fn){this.store.set(key,value,fn);return this};Socket.prototype.get=function(key,fn){this.store.get(key,fn);return this};Socket.prototype.has=function(key,fn){this.store.has(key,fn);return this};Socket.prototype.del=function(key,fn){this.store.del(key,fn);return this};Socket.prototype.disconnect=function(){if(!this.disconnected){this.log.info("booting client");if(""===this.namespace.name){if(this.manager.transports[this.id]&&this.manager.transports[this.id].open){this.manager.transports[this.id].onForcedDisconnect()}else{this.manager.onClientDisconnect(this.id);this.manager.store.publish("disconnect-remote",this.id)}}else{this.packet({type:"disconnect"});this.manager.onLeave(this.id,this.namespace.name);this.$emit("disconnect","booted")}}return this};Socket.prototype.send=function(data,fn){var packet={type:this.flags.json?"json":"message",data:data};if(fn){packet.id=++this.ackPackets;packet.ack=true;this.acks[packet.id]=fn}return this.packet(packet)};Socket.prototype.$emit=EventEmitter.prototype.emit;Socket.prototype.emit=function(ev){if(ev=="newListener"){return this.$emit.apply(this,arguments)}var args=util.toArray(arguments).slice(1),lastArg=args[args.length-1],packet={type:"event",name:ev};if("function"==typeof lastArg){packet.id=++this.ackPackets;packet.ack=lastArg.length?"data":true;this.acks[packet.id]=lastArg;args=args.slice(0,args.length-1)}packet.args=args;return this.packet(packet)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(Buffer){var client=__webpack_require__(84),cp=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "child_process"');e.code="MODULE_NOT_FOUND";throw e}()),fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()),util=__webpack_require__(85);var mime={js:{type:"application/javascript",encoding:"utf8",gzip:true},swf:{type:"application/x-shockwave-flash",encoding:"binary",gzip:false}};var bundle=/\+((?:\+)?[\w\-]+)*(?:\.v\d+\.\d+\.\d+)?(?:\.js)$/,versioning=/\.v\d+\.\d+\.\d+(?:\.js)$/;exports=module.exports=Static;function Static(manager){this.manager=manager;this.cache={};this.paths={};this.init()}Static.prototype.init=function(){function id(transports){var id=transports.join("").split("").map(function(char){return(""+char.charCodeAt(0)).split("").pop()}).reduce(function(char,id){return char+id});return client.version+":"+id}function build(transports,callback){client.builder(transports,{minify:self.manager.enabled("browser client minification")},function(err,content){callback(err,content?new Buffer(content):null,id(transports))})}var self=this;this.add("/static/flashsocket/WebSocketMain.swf",{file:client.dist+"/WebSocketMain.swf"
});this.add("/static/flashsocket/WebSocketMainInsecure.swf",{file:client.dist+"/WebSocketMainInsecure.swf"});this.add("/socket.io.js",function(path,callback){build(self.manager.get("transports"),callback)});this.add("/socket.io.v",{mime:mime.js},function(path,callback){build(self.manager.get("transports"),callback)});this.add("/socket.io+",{mime:mime.js},function(path,callback){var available=self.manager.get("transports"),matches=path.match(bundle),transports=[];if(!matches)return callback("No valid transports");matches[0].split(".")[0].split("+").slice(1).forEach(function(transport){if(!!~available.indexOf(transport)){transports.push(transport)}});if(!transports.length)return callback("No valid transports");build(transports,callback)});this.manager.on("set:transports",function(key,value){delete self.cache["/socket.io.js"];Object.keys(self.cache).forEach(function(key){if(bundle.test(key)){delete self.cache[key]}})})};Static.prototype.gzip=function(data,callback){var gzip=cp.spawn("gzip",["-9","-c","-f","-n"]),encoding=Buffer.isBuffer(data)?"binary":"utf8",buffer=[],err;gzip.stdout.on("data",function(data){buffer.push(data)});gzip.stderr.on("data",function(data){err=data+"";buffer.length=0});gzip.on("close",function(){if(err)return callback(err);var size=0,index=0,i=buffer.length,content;while(i--){size+=buffer[i].length}content=new Buffer(size);i=buffer.length;buffer.forEach(function(buffer){var length=buffer.length;buffer.copy(content,index,0,length);index+=length});buffer.length=0;callback(null,content)});gzip.stdin.end(data,encoding)};Static.prototype.has=function(path){if(this.paths[path])return this.paths[path];var keys=Object.keys(this.paths),i=keys.length;while(i--){if(-~path.indexOf(keys[i]))return this.paths[keys[i]]}return false};Static.prototype.add=function(path,options,callback){var extension=/(?:\.(\w{1,4}))$/.exec(path);if(!callback&&typeof options=="function"){callback=options;options={}}options.mime=options.mime||(extension?mime[extension[1]]:false);if(callback)options.callback=callback;if(!(options.file||options.callback)||!options.mime)return false;this.paths[path]=options;return true};Static.prototype.write=function(path,req,res){function write(status,headers,content,encoding){try{res.writeHead(status,headers||undefined);res.end(req.method!=="HEAD"&&content?content:"",encoding||undefined)}catch(e){}}function answer(reply){var cached=req.headers["if-none-match"]===reply.etag;if(cached&&self.manager.enabled("browser client etag")){return write(304)}var accept=req.headers["accept-encoding"]||"",gzip=!!~accept.toLowerCase().indexOf("gzip"),mime=reply.mime,versioned=reply.versioned,headers={"Content-Type":mime.type};if(self.manager.enabled("browser client etag")&&reply.etag&&!versioned){headers["Etag"]=reply.etag}if(versioned){var expires=self.manager.get("browser client expires");headers["Cache-Control"]='private, x-gzip-ok="", max-age='+expires;headers["Date"]=(new Date).toUTCString();headers["Expires"]=new Date(Date.now()+expires*1e3).toUTCString()}if(gzip&&reply.gzip){headers["Content-Length"]=reply.gzip.length;headers["Content-Encoding"]="gzip";headers["Vary"]="Accept-Encoding";write(200,headers,reply.gzip.content,mime.encoding)}else{headers["Content-Length"]=reply.length;write(200,headers,reply.content,mime.encoding)}self.manager.log.debug("served static content "+path)}var self=this,details;if(this.manager.enabled("browser client cache")&&this.cache[path]){return answer(this.cache[path])}else if(this.manager.get("browser client handler")){return this.manager.get("browser client handler").call(this,req,res)}else if(details=this.has(path)){function ready(err,content,etag){if(err){self.manager.log.warn("Unable to serve file. "+(err.message||err));return write(500,null,"Error serving static "+path)}var reply=self.cache[path]={content:content,length:content.length,mime:details.mime,etag:etag||client.version,versioned:versioning.test(path)};if(details.mime.gzip&&self.manager.enabled("browser client gzip")){self.gzip(content,function(err,content){if(!err){reply.gzip={content:content,length:content.length}}answer(reply)})}else{answer(reply)}}if(details.file){fs.readFile(details.file,ready)}else if(details.callback){details.callback.call(this,path,ready)}else{write(404,null,"File handle not found")}}else{write(404,null,"File not found")}}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process){exports=module.exports=Store;var EventEmitter=process.EventEmitter;function Store(options){this.options=options;this.clients={}}Store.prototype.__proto__=EventEmitter.prototype;Store.prototype.client=function(id){if(!this.clients[id]){this.clients[id]=new this.constructor.Client(this,id)}return this.clients[id]};Store.prototype.destroyClient=function(id,expiration){if(this.clients[id]){this.clients[id].destroy(expiration);delete this.clients[id]}return this};Store.prototype.destroy=function(clientExpiration){var keys=Object.keys(this.clients),count=keys.length;for(var i=0,l=count;i<l;i++){this.destroyClient(keys[i],clientExpiration)}this.clients={};return this};Store.Client=function(store,id){this.store=store;this.id=id}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var crypto=__webpack_require__(110),Store=__webpack_require__(67);exports=module.exports=Memory;Memory.Client=Client;function Memory(opts){Store.call(this,opts)}Memory.prototype.__proto__=Store.prototype;Memory.prototype.publish=function(){};Memory.prototype.subscribe=function(){};Memory.prototype.unsubscribe=function(){};function Client(){Store.Client.apply(this,arguments);this.data={}}Client.prototype.__proto__=Store.Client;Client.prototype.get=function(key,fn){fn(null,this.data[key]===undefined?null:this.data[key]);return this};Client.prototype.set=function(key,value,fn){this.data[key]=value;fn&&fn(null);return this};Client.prototype.has=function(key,fn){fn(null,key in this.data)};Client.prototype.del=function(key,fn){delete this.data[key];fn&&fn(null);return this};Client.prototype.destroy=function(expiration){if("number"!=typeof expiration){this.data={}}else{var self=this;setTimeout(function(){self.data={}},expiration*1e3)}return this}},function(module,exports,__webpack_require__){var crypto=__webpack_require__(110),Store=__webpack_require__(67),assert=__webpack_require__(107);exports=module.exports=Redis;Redis.Client=Client;function Redis(opts){opts=opts||{};var nodeId=opts.nodeId||function(){return Math.abs(Math.random()*Math.random()*Date.now()|0)};this.nodeId=nodeId();if(opts.pack){this.pack=opts.pack;this.unpack=opts.unpack}else{try{var msgpack=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "msgpack"');e.code="MODULE_NOT_FOUND";throw e}());this.pack=msgpack.pack;this.unpack=msgpack.unpack}catch(e){this.pack=JSON.stringify;this.unpack=JSON.parse}}var redis=opts.redis||__webpack_require__(112),RedisClient=redis.RedisClient;if(opts.redisPub instanceof RedisClient){this.pub=opts.redisPub}else{opts.redisPub||(opts.redisPub={});this.pub=redis.createClient(opts.redisPub.port,opts.redisPub.host,opts.redisPub)}if(opts.redisSub instanceof RedisClient){this.sub=opts.redisSub}else{opts.redisSub||(opts.redisSub={});this.sub=redis.createClient(opts.redisSub.port,opts.redisSub.host,opts.redisSub)}if(opts.redisClient instanceof RedisClient){this.cmd=opts.redisClient}else{opts.redisClient||(opts.redisClient={});this.cmd=redis.createClient(opts.redisClient.port,opts.redisClient.host,opts.redisClient)}Store.call(this,opts);this.sub.setMaxListeners(0);this.setMaxListeners(0)}Redis.prototype.__proto__=Store.prototype;Redis.prototype.publish=function(name){var args=Array.prototype.slice.call(arguments,1);this.pub.publish(name,this.pack({nodeId:this.nodeId,args:args}));this.emit.apply(this,["publish",name].concat(args))};Redis.prototype.subscribe=function(name,consumer,fn){this.sub.subscribe(name);if(consumer||fn){var self=this;self.sub.on("subscribe",function subscribe(ch){if(name==ch){function message(ch,msg){if(name==ch){msg=self.unpack(msg);if(self.nodeId!=msg.nodeId){consumer.apply(null,msg.args)}}}self.sub.on("message",message);self.on("unsubscribe",function unsubscribe(ch){if(name==ch){self.sub.removeListener("message",message);self.removeListener("unsubscribe",unsubscribe)}});self.sub.removeListener("subscribe",subscribe);fn&&fn()}})}this.emit("subscribe",name,consumer,fn)};Redis.prototype.unsubscribe=function(name,fn){this.sub.unsubscribe(name);if(fn){var client=this.sub;client.on("unsubscribe",function unsubscribe(ch){if(name==ch){fn();client.removeListener("unsubscribe",unsubscribe)}})}this.emit("unsubscribe",name,fn)};Redis.prototype.destroy=function(){Store.prototype.destroy.call(this);this.pub.end();this.sub.end();this.cmd.end()};function Client(store,id){Store.Client.call(this,store,id)}Client.prototype.__proto__=Store.Client;Client.prototype.get=function(key,fn){this.store.cmd.hget(this.id,key,fn);return this};Client.prototype.set=function(key,value,fn){this.store.cmd.hset(this.id,key,value,fn);return this};Client.prototype.del=function(key,fn){this.store.cmd.hdel(this.id,key,fn);return this};Client.prototype.has=function(key,fn){this.store.cmd.hexists(this.id,key,function(err,has){if(err)return fn(err);fn(null,!!has)});return this};Client.prototype.destroy=function(expiration){if("number"!=typeof expiration){this.store.cmd.del(this.id)}else{this.store.cmd.expire(this.id,expiration)}return this}},function(module,exports,__webpack_require__){var packets=exports.packets={disconnect:0,connect:1,heartbeat:2,message:3,json:4,event:5,ack:6,error:7,noop:8},packetslist=Object.keys(packets);var reasons=exports.reasons={"transport not supported":0,"client not handshaken":1,unauthorized:2},reasonslist=Object.keys(reasons);var advice=exports.advice={reconnect:0},advicelist=Object.keys(advice);exports.encodePacket=function(packet){var type=packets[packet.type],id=packet.id||"",endpoint=packet.endpoint||"",ack=packet.ack,data=null;switch(packet.type){case"message":if(packet.data!=="")data=packet.data;break;case"event":var ev={name:packet.name};if(packet.args&&packet.args.length){ev.args=packet.args}data=JSON.stringify(ev);break;case"json":data=JSON.stringify(packet.data);break;case"ack":data=packet.ackId+(packet.args&&packet.args.length?"+"+JSON.stringify(packet.args):"");break;case"connect":if(packet.qs)data=packet.qs;break;case"error":var reason=packet.reason?reasons[packet.reason]:"",adv=packet.advice?advice[packet.advice]:"";if(reason!==""||adv!=="")data=reason+(adv!==""?"+"+adv:"");break}var encoded=type+":"+id+(ack=="data"?"+":"")+":"+endpoint;if(data!==null&&data!==undefined)encoded+=":"+data;return encoded};exports.encodePayload=function(packets){var decoded="";if(packets.length==1)return packets[0];for(var i=0,l=packets.length;i<l;i++){var packet=packets[i];decoded+="�"+packet.length+"�"+packets[i]}return decoded};var regexp=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;function parse(data){try{return JSON.parse(data)}catch(e){return false}}exports.decodePacket=function(data){var pieces=data.match(regexp);if(!pieces)return{};var id=pieces[2]||"",data=pieces[5]||"",packet={type:packetslist[pieces[1]],endpoint:pieces[4]||""};if(id){packet.id=id;if(pieces[3])packet.ack="data";else packet.ack=true}switch(packet.type){case"message":packet.data=data||"";break;case"event":pieces=parse(data);if(pieces){packet.name=pieces.name;packet.args=pieces.args}packet.args=packet.args||[];break;case"json":packet.data=parse(data);break;case"connect":packet.qs=data||"";break;case"ack":pieces=data.match(/^([0-9]+)(\+)?(.*)/);if(pieces){packet.ackId=pieces[1];packet.args=[];if(pieces[3]){packet.args=parse(pieces[3])||[]}}break;case"error":pieces=data.split("+");packet.reason=reasonslist[pieces[0]]||"";packet.advice=advicelist[pieces[1]]||""}return packet};exports.decodePayload=function(data){if(undefined==data||null==data){return[]}if(data[0]=="�"){var ret=[];for(var i=1,length="";i<data.length;i++){if(data[i]=="�"){ret.push(exports.decodePacket(data.substr(i+1,length)));i+=Number(length)+1;length=""}else{length+=data[i]}}return ret}else{return[exports.decodePacket(data)]}}},function(module,exports,__webpack_require__){var core=__webpack_require__(114);var connect=__webpack_require__(88).connect;connect.MongoError=core.MongoError;connect.MongoClient=__webpack_require__(88);connect.Db=__webpack_require__(89);connect.Collection=__webpack_require__(90);connect.Server=__webpack_require__(91);connect.ReplSet=__webpack_require__(92);connect.Mongos=__webpack_require__(93);connect.ReadPreference=__webpack_require__(94);connect.GridStore=__webpack_require__(95);connect.Chunk=__webpack_require__(96);connect.Logger=core.Logger;connect.Cursor=__webpack_require__(97);connect.Binary=core.BSON.Binary;connect.Code=core.BSON.Code;connect.DBRef=core.BSON.DBRef;connect.Double=core.BSON.Double;connect.Long=core.BSON.Long;connect.MinKey=core.BSON.MinKey;connect.MaxKey=core.BSON.MaxKey;connect.ObjectID=core.BSON.ObjectID;connect.ObjectId=core.BSON.ObjectID;connect.Symbol=core.BSON.Symbol;connect.Timestamp=core.BSON.Timestamp;connect.connect=connect;module.exports=connect},function(module,exports,__webpack_require__){module.exports=__webpack_require__(98)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(99)},function(module,exports,__webpack_require__){var escapeHtml=__webpack_require__(115);var merge=__webpack_require__(116);var parseurl=__webpack_require__(117);var resolve=__webpack_require__(8).resolve;var send=__webpack_require__(118);var url=__webpack_require__(109);exports=module.exports=function serveStatic(root,options){if(!root){throw new TypeError("root path required")}if(typeof root!=="string"){throw new TypeError("root path must be a string")}options=merge({},options);root=resolve(root);var redirect=options.redirect!==false;var setHeaders=options.setHeaders;delete options.setHeaders;if(setHeaders&&typeof setHeaders!=="function"){throw new TypeError("option setHeaders must be function")}options.maxage=options.maxage||options.maxAge||0;options.root=root;return function serveStatic(req,res,next){if(req.method!=="GET"&&req.method!=="HEAD"){return next()}var opts=merge({},options);var originalUrl=parseurl.original(req);var path=parseurl(req).pathname;var hasTrailingSlash=originalUrl.pathname[originalUrl.pathname.length-1]==="/";if(path==="/"&&!hasTrailingSlash){path=""}var stream=send(req,path,opts);if(redirect){stream.on("directory",function redirect(){if(hasTrailingSlash){return next()}originalUrl.path=null;originalUrl.pathname=collapseLeadingSlashes(originalUrl.pathname+"/");var target=url.format(originalUrl);res.statusCode=303;res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Location",target);res.end('Redirecting to <a href="'+escapeHtml(target)+'">'+escapeHtml(target)+"</a>\n")})}else{stream.on("directory",next)}if(setHeaders){stream.on("headers",setHeaders)}stream.on("error",function error(err){next(err.status===404?null:err)});stream.pipe(res)}};exports.mime=send.mime;function collapseLeadingSlashes(str){for(var i=0;i<str.length;i++){if(str[i]!=="/"){break}}return i>1?"/"+str.substr(i):str}},function(module,exports,__webpack_require__){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},function(module,exports,__webpack_require__){(function(root,f){if(typeof module!=="undefined"&&module.exports)module.exports=f();else root.sha256=f()})(this,function(){"use strict";var K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function blocks(w,v,p,pos,len){var a,b,c,d,e,f,g,h,u,i,j,t1,t2;while(len>=64){a=v[0];b=v[1];c=v[2];d=v[3];e=v[4];f=v[5];g=v[6];h=v[7];for(i=0;i<16;i++){j=pos+i*4;w[i]=(p[j]&255)<<24|(p[j+1]&255)<<16|(p[j+2]&255)<<8|p[j+3]&255}for(i=16;i<64;i++){u=w[i-2];t1=(u>>>17|u<<32-17)^(u>>>19|u<<32-19)^u>>>10;u=w[i-15];t2=(u>>>7|u<<32-7)^(u>>>18|u<<32-18)^u>>>3;w[i]=(t1+w[i-7]|0)+(t2+w[i-16]|0)}for(i=0;i<64;i++){t1=(((e>>>6|e<<32-6)^(e>>>11|e<<32-11)^(e>>>25|e<<32-25))+(e&f^~e&g)|0)+(h+(K[i]+w[i]|0)|0)|0;t2=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&b^a&c^b&c)|0;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0}v[0]+=a;v[1]+=b;v[2]+=c;v[3]+=d;v[4]+=e;v[5]+=f;v[6]+=g;v[7]+=h;pos+=64;len-=64}return pos}function SHA256(){this.v=new Uint32Array(8);this.w=new Int32Array(64);this.buf=new Uint8Array(128);this.buflen=0;this.len=0;this.reset()}SHA256.prototype.reset=function(){this.v[0]=1779033703;this.v[1]=3144134277;this.v[2]=1013904242;this.v[3]=2773480762;this.v[4]=1359893119;this.v[5]=2600822924;this.v[6]=528734635;this.v[7]=1541459225;this.buflen=0;this.len=0};SHA256.prototype.clean=function(){var i;for(i=0;i<this.buf.length;i++)this.buf[i]=0;for(i=0;i<this.w.length;i++)this.w[i]=0;this.reset()};SHA256.prototype.update=function(m,len){var mpos=0,mlen=typeof len!=="undefined"?len:m.length;this.len+=mlen;if(this.buflen>0){while(this.buflen<64&&mlen>0){this.buf[this.buflen++]=m[mpos++];mlen--}if(this.buflen===64){blocks(this.w,this.v,this.buf,0,64);this.buflen=0}}if(mlen>=64){mpos=blocks(this.w,this.v,m,mpos,mlen);mlen%=64}while(mlen>0){this.buf[this.buflen++]=m[mpos++];mlen--}return this};SHA256.prototype.finish=function(h){var mlen=this.len,left=this.buflen,bhi=mlen/536870912|0,blo=mlen<<3,padlen=mlen%64<56?64:128,i;this.buf[left]=128;for(i=left+1;i<padlen-8;i++)this.buf[i]=0;this.buf[padlen-8]=bhi>>>24&255;this.buf[padlen-7]=bhi>>>16&255;this.buf[padlen-6]=bhi>>>8&255;this.buf[padlen-5]=bhi>>>0&255;this.buf[padlen-4]=blo>>>24&255;this.buf[padlen-3]=blo>>>16&255;this.buf[padlen-2]=blo>>>8&255;this.buf[padlen-1]=blo>>>0&255;blocks(this.w,this.v,this.buf,0,padlen);for(i=0;i<8;i++){h[i*4+0]=this.v[i]>>>24&255;h[i*4+1]=this.v[i]>>>16&255;h[i*4+2]=this.v[i]>>>8&255;h[i*4+3]=this.v[i]>>>0&255}return this};function HMAC(k){var i,pad=new Uint8Array(64);if(k.length>64)(new SHA256).update(k).finish(pad);else for(i=0;i<k.length;i++)pad[i]=k[i];this.inner=new SHA256;this.outer=new SHA256;for(i=0;i<64;i++)pad[i]^=54;this.inner.update(pad);for(i=0;i<64;i++)pad[i]^=54^92;this.outer.update(pad);this.istate=new Uint32Array(8);this.ostate=new Uint32Array(8);for(i=0;i<8;i++){this.istate[i]=this.inner.v[i];this.ostate[i]=this.outer.v[i]}for(i=0;i<pad.length;i++)pad[i]=0}HMAC.prototype.reset=function(){for(var i=0;i<8;i++){this.inner.v[i]=this.istate[i];this.outer.v[i]=this.ostate[i]}this.inner.len=this.outer.len=64;this.inner.buflen=this.outer.buflen=0};HMAC.prototype.clean=function(){for(var i=0;i<8;i++)this.ostate[i]=this.istate[i]=0;this.inner.clean();this.outer.clean()};HMAC.prototype.update=function(m){this.inner.update(m);return this};HMAC.prototype.finish=function(h){this.inner.finish(h);this.outer.update(h,32).finish(h);return this};var sha256=function(m){var h=new Uint8Array(32);(new SHA256).update(m).finish(h).clean();return h};sha256.hmac=function(k,m){var h=new Uint8Array(32);new HMAC(k).update(m).finish(h).clean();return h};sha256.pbkdf2=function(password,salt,rounds,dkLen){var i,j,k,ctr=new Uint8Array(4),t=new Uint8Array(32),u=new Uint8Array(32),dk=new Uint8Array(dkLen),prf=new HMAC(password);for(i=0;i*32<dkLen;i++){k=i+1;ctr[0]=k>>>24&255;ctr[1]=k>>>16&255;ctr[2]=k>>>8&255;ctr[3]=k>>>0&255;prf.reset();prf.update(salt);prf.update(ctr);prf.finish(u);for(j=0;j<32;j++)t[j]=u[j];for(j=2;j<=rounds;j++){prf.reset();prf.update(u).finish(u);for(k=0;k<32;k++)t[k]^=u[k]}for(j=0;j<32&&i*32+j<dkLen;j++)dk[i*32+j]=t[j]}for(i=0;i<32;i++)t[i]=u[i]=0;for(i=0;i<4;i++)ctr[i]=0;prf.clean();return dk};return sha256})},function(module,exports,__webpack_require__){var emitNewlineEvents=__webpack_require__(105),prefix="[",suffix="m";var codes={up:"A",down:"B",forward:"C",back:"D",nextLine:"E",previousLine:"F",horizontalAbsolute:"G",eraseData:"J",eraseLine:"K",scrollUp:"S",scrollDown:"T",savePosition:"s",restorePosition:"u",queryPosition:"6n",hide:"?25l",show:"?25h"};var styles={bold:1,italic:3,underline:4,inverse:7};var reset={bold:22,italic:23,underline:24,inverse:27};var colors={white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,grey:90,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97};function ansi(stream,options){if(stream._ansicursor){return stream._ansicursor}else{return stream._ansicursor=new Cursor(stream,options)}}module.exports=exports=ansi;function Cursor(stream,options){if(!(this instanceof Cursor)){return new Cursor(stream,options)}if(typeof stream!="object"||typeof stream.write!="function"){throw new Error("a valid Stream instance must be passed in")}this.stream=stream;this.enabled=options&&options.enabled;if(typeof this.enabled==="undefined"){this.enabled=stream.isTTY}this.enabled=!!this.enabled;this.buffering=!!(options&&options.buffering);this._buffer=[];this.fg=this.foreground=new Colorer(this,0);this.bg=this.background=new Colorer(this,10);this.Bold=false;this.Italic=false;this.Underline=false;this.Inverse=false;this.newlines=0;emitNewlineEvents(stream);stream.on("newline",function(){this.newlines++}.bind(this))}exports.Cursor=Cursor;Cursor.prototype.write=function(data){if(this.buffering){this._buffer.push(arguments)}else{this.stream.write.apply(this.stream,arguments)}return this};Cursor.prototype.buffer=function(){this.buffering=true;return this};Cursor.prototype.flush=function(){this.buffering=false;var str=this._buffer.map(function(args){if(args.length!=1)throw new Error("unexpected args length! "+args.length);return args[0]}).join("");this._buffer.splice(0);this.write(str);return this};function Colorer(cursor,base){this.current=null;this.cursor=cursor;this.base=base}exports.Colorer=Colorer;Colorer.prototype._setColorCode=function setColorCode(code){var c=String(code);if(this.current===c)return;this.cursor.enabled&&this.cursor.write(prefix+c+suffix);this.current=c;return this};Object.keys(codes).forEach(function(name){var code=String(codes[name]);Cursor.prototype[name]=function(){var c=code;if(arguments.length>0){c=toArray(arguments).map(Math.round).join(";")+code}this.enabled&&this.write(prefix+c);return this}});Object.keys(styles).forEach(function(style){var name=style[0].toUpperCase()+style.substring(1),c=styles[style],r=reset[style];Cursor.prototype[style]=function(){if(this[name])return;this.enabled&&this.write(prefix+c+suffix);this[name]=true;return this};Cursor.prototype["reset"+name]=function(){if(!this[name])return;this.enabled&&this.write(prefix+r+suffix);this[name]=false;return this}});Object.keys(colors).forEach(function(color){var code=colors[color];Colorer.prototype[color]=function(){this._setColorCode(this.base+code);return this.cursor};Cursor.prototype[color]=function(){return this.foreground[color]()}});Cursor.prototype.beep=function(){this.enabled&&this.write("");return this};Cursor.prototype.goto=function(x,y){x=x|0;y=y|0;this.enabled&&this.write(prefix+y+";"+x+"H");return this};Colorer.prototype.reset=function(){this._setColorCode(this.base+39);return this.cursor};Cursor.prototype.reset=function(){this.enabled&&this.write(prefix+"0"+suffix);this.Bold=false;this.Italic=false;this.Underline=false;this.Inverse=false;this.foreground.current=null;this.background.current=null;return this};Colorer.prototype.rgb=function(r,g,b){var base=this.base+38,code=rgb(r,g,b);this._setColorCode(base+";5;"+code);return this.cursor};Cursor.prototype.rgb=function(r,g,b){return this.foreground.rgb(r,g,b)};Colorer.prototype.hex=function(color){return this.rgb.apply(this,hex(color))};Cursor.prototype.hex=function(color){return this.foreground.hex(color)};function rgb(r,g,b){var red=r/255*5,green=g/255*5,blue=b/255*5;return rgb5(red,green,blue)}function rgb5(r,g,b){var red=Math.round(r),green=Math.round(g),blue=Math.round(b);return 16+red*36+green*6+blue}function hex(color){var c=color[0]==="#"?color.substring(1):color,r=c.substring(0,2),g=c.substring(2,4),b=c.substring(4,6);return[parseInt(r,16),parseInt(g,16),parseInt(b,16)]}function toArray(a){var i=0,l=a.length,rtn=[];for(;i<l;i++){rtn.push(a[i])}return rtn}},function(module,exports,__webpack_require__){var http=__webpack_require__(79);var https=module.exports;for(var key in http){if(http.hasOwnProperty(key))https[key]=http[key]}https.request=function(params,cb){if(!params)params={};params.scheme="https";return http.request.call(this,params,cb)}},function(module,exports,__webpack_require__){var http=module.exports;var EventEmitter=__webpack_require__(120).EventEmitter;var Request=__webpack_require__(111);var url=__webpack_require__(109);http.request=function(params,cb){if(typeof params==="string"){params=url.parse(params)}if(!params)params={};if(!params.host&&!params.port){params.port=parseInt(window.location.port,10)}if(!params.host&&params.hostname){params.host=params.hostname}if(!params.protocol){if(params.scheme){params.protocol=params.scheme+":"}else{params.protocol=window.location.protocol}}if(!params.host){params.host=window.location.hostname||window.location.host}if(/:/.test(params.host)){if(!params.port){params.port=params.host.split(":")[1]}params.host=params.host.split(":")[0]}if(!params.port)params.port=params.protocol=="https:"?443:80;var req=new Request(new xhrHttp,params);if(cb)req.on("response",cb);return req};http.get=function(params,cb){params.method="GET";var req=http.request(params,cb);req.end();return req};http.Agent=function(){};http.Agent.defaultMaxSockets=4;var xhrHttp=function(){if(typeof window==="undefined"){throw new Error("no window object present")}else if(window.XMLHttpRequest){return window.XMLHttpRequest}else if(window.ActiveXObject){var axs=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];for(var i=0;i<axs.length;i++){try{var ax=new window.ActiveXObject(axs[i]);return function(){if(ax){var ax_=ax;ax=null;return ax_}else{return new window.ActiveXObject(axs[i])}}}catch(e){}}throw new Error("ajax not supported in this browser")}else{throw new Error("ajax not supported in this browser")}}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(module,exports,__webpack_require__){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},function(module,exports,__webpack_require__){var isArray=Array.isArray;var str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;
case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(false?this.base64js={}:exports)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(module){var io=false?{}:module.exports;(function(){(function(exports,global){var io=exports;io.version="0.9.16";io.protocol=1;io.transports=[];io.j=[];io.sockets={};io.connect=function(host,details){var uri=io.util.parseUri(host),uuri,socket;if(global&&global.location){uri.protocol=uri.protocol||global.location.protocol.slice(0,-1);uri.host=uri.host||(global.document?global.document.domain:global.location.hostname);uri.port=uri.port||global.location.port}uuri=io.util.uniqueUri(uri);var options={host:uri.host,secure:"https"==uri.protocol,port:uri.port||("https"==uri.protocol?443:80),query:uri.query||""};io.util.merge(options,details);if(options["force new connection"]||!io.sockets[uuri]){socket=new io.Socket(options)}if(!options["force new connection"]&&socket){io.sockets[uuri]=socket}socket=socket||io.sockets[uuri];return socket.of(uri.path.length>1?uri.path:"")}})(true?module.exports:this.io={},this);(function(exports,global){var util=exports.util={};var re=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];util.parseUri=function(str){var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}return uri};util.uniqueUri=function(uri){var protocol=uri.protocol,host=uri.host,port=uri.port;if("document"in global){host=host||document.domain;port=port||(protocol=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{host=host||"localhost";if(!port&&protocol=="https"){port=443}}return(protocol||"http")+"://"+host+":"+(port||80)};util.query=function(base,addition){var query=util.chunkQuery(base||""),components=[];util.merge(query,util.chunkQuery(addition||""));for(var part in query){if(query.hasOwnProperty(part)){components.push(part+"="+query[part])}}return components.length?"?"+components.join("&"):""};util.chunkQuery=function(qs){var query={},params=qs.split("&"),i=0,l=params.length,kv;for(;i<l;++i){kv=params[i].split("=");if(kv[0]){query[kv[0]]=kv[1]}}return query};var pageLoaded=false;util.load=function(fn){if("document"in global&&document.readyState==="complete"||pageLoaded){return fn()}util.on(global,"load",fn,false)};util.on=function(element,event,fn,capture){if(element.attachEvent){element.attachEvent("on"+event,fn)}else if(element.addEventListener){element.addEventListener(event,fn,capture)}};util.request=function(xdomain){if(xdomain&&"undefined"!=typeof XDomainRequest&&!util.ua.hasCORS){return new XDomainRequest}if("undefined"!=typeof XMLHttpRequest&&(!xdomain||util.ua.hasCORS)){return new XMLHttpRequest}if(!xdomain){try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}return null};if("undefined"!=typeof window){util.load(function(){pageLoaded=true})}util.defer=function(fn){if(!util.ua.webkit||"undefined"!=typeof importScripts){return fn()}util.load(function(){setTimeout(fn,100)})};util.merge=function merge(target,additional,deep,lastseen){var seen=lastseen||[],depth=typeof deep=="undefined"?2:deep,prop;for(prop in additional){if(additional.hasOwnProperty(prop)&&util.indexOf(seen,prop)<0){if(typeof target[prop]!=="object"||!depth){target[prop]=additional[prop];seen.push(additional[prop])}else{util.merge(target[prop],additional[prop],depth-1,seen)}}}return target};util.mixin=function(ctor,ctor2){util.merge(ctor.prototype,ctor2.prototype)};util.inherit=function(ctor,ctor2){function f(){}f.prototype=ctor2.prototype;ctor.prototype=new f};util.isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};util.intersect=function(arr,arr2){var ret=[],longest=arr.length>arr2.length?arr:arr2,shortest=arr.length>arr2.length?arr2:arr;for(var i=0,l=shortest.length;i<l;i++){if(~util.indexOf(longest,shortest[i]))ret.push(shortest[i])}return ret};util.indexOf=function(arr,o,i){for(var j=arr.length,i=i<0?i+j<0?0:i+j:i||0;i<j&&arr[i]!==o;i++){}return j<=i?-1:i};util.toArray=function(enu){var arr=[];for(var i=0,l=enu.length;i<l;i++)arr.push(enu[i]);return arr};util.ua={};util.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(e){return false}return a.withCredentials!=undefined}();util.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);util.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(exports,io){exports.EventEmitter=EventEmitter;function EventEmitter(){}EventEmitter.prototype.on=function(name,fn){if(!this.$events){this.$events={}}if(!this.$events[name]){this.$events[name]=fn}else if(io.util.isArray(this.$events[name])){this.$events[name].push(fn)}else{this.$events[name]=[this.$events[name],fn]}return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.once=function(name,fn){var self=this;function on(){self.removeListener(name,on);fn.apply(this,arguments)}on.listener=fn;this.on(name,on);return this};EventEmitter.prototype.removeListener=function(name,fn){if(this.$events&&this.$events[name]){var list=this.$events[name];if(io.util.isArray(list)){var pos=-1;for(var i=0,l=list.length;i<l;i++){if(list[i]===fn||list[i].listener&&list[i].listener===fn){pos=i;break}}if(pos<0){return this}list.splice(pos,1);if(!list.length){delete this.$events[name]}}else if(list===fn||list.listener&&list.listener===fn){delete this.$events[name]}}return this};EventEmitter.prototype.removeAllListeners=function(name){if(name===undefined){this.$events={};return this}if(this.$events&&this.$events[name]){this.$events[name]=null}return this};EventEmitter.prototype.listeners=function(name){if(!this.$events){this.$events={}}if(!this.$events[name]){this.$events[name]=[]}if(!io.util.isArray(this.$events[name])){this.$events[name]=[this.$events[name]]}return this.$events[name]};EventEmitter.prototype.emit=function(name){if(!this.$events){return false}var handler=this.$events[name];if(!handler){return false}var args=Array.prototype.slice.call(arguments,1);if("function"==typeof handler){handler.apply(this,args)}else if(io.util.isArray(handler)){var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}}else{return false}return true}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,nativeJSON){"use strict";if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={};function f(n){return n<10?"0"+n:n}function date(d,key){return isFinite(d.valueOf())?d.getUTCFullYear()+"-"+f(d.getUTCMonth()+1)+"-"+f(d.getUTCDate())+"T"+f(d.getUTCHours())+":"+f(d.getUTCMinutes())+":"+f(d.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value instanceof Date){value=date(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);(function(exports,io){var parser=exports.parser={};var packets=parser.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var reasons=parser.reasons=["transport not supported","client not handshaken","unauthorized"];var advice=parser.advice=["reconnect"];var JSON=io.JSON,indexOf=io.util.indexOf;parser.encodePacket=function(packet){var type=indexOf(packets,packet.type),id=packet.id||"",endpoint=packet.endpoint||"",ack=packet.ack,data=null;switch(packet.type){case"error":var reason=packet.reason?indexOf(reasons,packet.reason):"",adv=packet.advice?indexOf(advice,packet.advice):"";if(reason!==""||adv!=="")data=reason+(adv!==""?"+"+adv:"");break;case"message":if(packet.data!=="")data=packet.data;break;case"event":var ev={name:packet.name};if(packet.args&&packet.args.length){ev.args=packet.args}data=JSON.stringify(ev);break;case"json":data=JSON.stringify(packet.data);break;case"connect":if(packet.qs)data=packet.qs;break;case"ack":data=packet.ackId+(packet.args&&packet.args.length?"+"+JSON.stringify(packet.args):"");break}var encoded=[type,id+(ack=="data"?"+":""),endpoint];if(data!==null&&data!==undefined)encoded.push(data);return encoded.join(":")};parser.encodePayload=function(packets){var decoded="";if(packets.length==1)return packets[0];for(var i=0,l=packets.length;i<l;i++){var packet=packets[i];decoded+="�"+packet.length+"�"+packets[i]}return decoded};var regexp=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;parser.decodePacket=function(data){var pieces=data.match(regexp);if(!pieces)return{};var id=pieces[2]||"",data=pieces[5]||"",packet={type:packets[pieces[1]],endpoint:pieces[4]||""};if(id){packet.id=id;if(pieces[3])packet.ack="data";else packet.ack=true}switch(packet.type){case"error":var pieces=data.split("+");packet.reason=reasons[pieces[0]]||"";packet.advice=advice[pieces[1]]||"";break;case"message":packet.data=data||"";break;case"event":try{var opts=JSON.parse(data);packet.name=opts.name;packet.args=opts.args}catch(e){}packet.args=packet.args||[];break;case"json":try{packet.data=JSON.parse(data)}catch(e){}break;case"connect":packet.qs=data||"";break;case"ack":var pieces=data.match(/^([0-9]+)(\+)?(.*)/);if(pieces){packet.ackId=pieces[1];packet.args=[];if(pieces[3]){try{packet.args=pieces[3]?JSON.parse(pieces[3]):[]}catch(e){}}}break;case"disconnect":case"heartbeat":break}return packet};parser.decodePayload=function(data){if(data.charAt(0)=="�"){var ret=[];for(var i=1,length="";i<data.length;i++){if(data.charAt(i)=="�"){ret.push(parser.decodePacket(data.substr(i+1).substr(0,length)));i+=Number(length)+1;length=""}else{length+=data.charAt(i)}}return ret}else{return[parser.decodePacket(data)]}}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io){exports.Transport=Transport;function Transport(socket,sessid){this.socket=socket;this.sessid=sessid}io.util.mixin(Transport,io.EventEmitter);Transport.prototype.heartbeats=function(){return true};Transport.prototype.onData=function(data){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting){this.setCloseTimeout()}if(data!==""){var msgs=io.parser.decodePayload(data);if(msgs&&msgs.length){for(var i=0,l=msgs.length;i<l;i++){this.onPacket(msgs[i])}}}return this};Transport.prototype.onPacket=function(packet){this.socket.setHeartbeatTimeout();if(packet.type=="heartbeat"){return this.onHeartbeat()}if(packet.type=="connect"&&packet.endpoint==""){this.onConnect()}if(packet.type=="error"&&packet.advice=="reconnect"){this.isOpen=false}this.socket.onPacket(packet);return this};Transport.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var self=this;this.closeTimeout=setTimeout(function(){self.onDisconnect()},this.socket.closeTimeout)}};Transport.prototype.onDisconnect=function(){if(this.isOpen)this.close();this.clearTimeouts();this.socket.onDisconnect();return this};Transport.prototype.onConnect=function(){this.socket.onConnect();return this};Transport.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};Transport.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout){clearTimeout(this.reopenTimeout)}};Transport.prototype.packet=function(packet){this.send(io.parser.encodePacket(packet))};Transport.prototype.onHeartbeat=function(heartbeat){this.packet({type:"heartbeat"})};Transport.prototype.onOpen=function(){this.isOpen=true;this.clearCloseTimeout();this.socket.onOpen()};Transport.prototype.onClose=function(){var self=this;this.isOpen=false;this.socket.onClose();this.onDisconnect()};Transport.prototype.prepareUrl=function(){var options=this.socket.options;return this.scheme()+"://"+options.host+":"+options.port+"/"+options.resource+"/"+io.protocol+"/"+this.name+"/"+this.sessid};Transport.prototype.ready=function(socket,fn){fn.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports.Socket=Socket;function Socket(options){this.options={port:80,secure:false,document:"document"in global?document:false,resource:"socket.io",transports:io.transports,"connect timeout":1e4,"try multiple transports":true,reconnect:true,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":false,"auto connect":true,"flash policy port":10843,manualFlush:false};io.util.merge(this.options,options);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||io.util.ua.hasCORS)){var self=this;io.util.on(global,"beforeunload",function(){self.disconnectSync()},false)}if(this.options["auto connect"]){this.connect()}}io.util.mixin(Socket,io.EventEmitter);Socket.prototype.of=function(name){if(!this.namespaces[name]){this.namespaces[name]=new io.SocketNamespace(this,name);if(name!==""){this.namespaces[name].packet({type:"connect"})}}return this.namespaces[name]};Socket.prototype.publish=function(){this.emit.apply(this,arguments);var nsp;for(var i in this.namespaces){if(this.namespaces.hasOwnProperty(i)){nsp=this.of(i);nsp.$emit.apply(nsp,arguments)}}};function empty(){}Socket.prototype.handshake=function(fn){var self=this,options=this.options;function complete(data){if(data instanceof Error){self.connecting=false;self.onError(data.message)}else{fn.apply(null,data.split(":"))}}var url=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,io.protocol,io.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!io.util.ua.hasCORS){var insertAt=document.getElementsByTagName("script")[0],script=document.createElement("script");script.src=url+"&jsonp="+io.j.length;insertAt.parentNode.insertBefore(script,insertAt);io.j.push(function(data){complete(data);script.parentNode.removeChild(script)})}else{var xhr=io.util.request();xhr.open("GET",url,true);if(this.isXDomain()){xhr.withCredentials=true}xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;if(xhr.status==200){complete(xhr.responseText)}else if(xhr.status==403){self.onError(xhr.responseText)}else{self.connecting=false;!self.reconnecting&&self.onError(xhr.responseText)}}};xhr.send(null)}};Socket.prototype.getTransport=function(override){var transports=override||this.transports,match;for(var i=0,transport;transport=transports[i];i++){if(io.Transport[transport]&&io.Transport[transport].check(this)&&(!this.isXDomain()||io.Transport[transport].xdomainCheck(this))){return new io.Transport[transport](this,this.sessionid)}}return null};Socket.prototype.connect=function(fn){if(this.connecting){return this}var self=this;self.connecting=true;this.handshake(function(sid,heartbeat,close,transports){self.sessionid=sid;self.closeTimeout=close*1e3;self.heartbeatTimeout=heartbeat*1e3;if(!self.transports)self.transports=self.origTransports=transports?io.util.intersect(transports.split(","),self.options.transports):self.options.transports;self.setHeartbeatTimeout();function connect(transports){if(self.transport)self.transport.clearTimeouts();self.transport=self.getTransport(transports);if(!self.transport)return self.publish("connect_failed");self.transport.ready(self,function(){self.connecting=true;self.publish("connecting",self.transport.name);self.transport.open();if(self.options["connect timeout"]){self.connectTimeoutTimer=setTimeout(function(){if(!self.connected){self.connecting=false;if(self.options["try multiple transports"]){var remaining=self.transports;while(remaining.length>0&&remaining.splice(0,1)[0]!=self.transport.name){}if(remaining.length){connect(remaining)}else{self.publish("connect_failed")}}}},self.options["connect timeout"])}})}connect(self.transports);self.once("connect",function(){clearTimeout(self.connectTimeoutTimer);fn&&typeof fn=="function"&&fn()})});return this};Socket.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var self=this;this.heartbeatTimeoutTimer=setTimeout(function(){self.transport.onClose()},this.heartbeatTimeout)};Socket.prototype.packet=function(data){if(this.connected&&!this.doBuffer){this.transport.packet(data)}else{this.buffer.push(data)}return this};Socket.prototype.setBuffer=function(v){this.doBuffer=v;if(!v&&this.connected&&this.buffer.length){if(!this.options["manualFlush"]){this.flushBuffer()}}};Socket.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};Socket.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open){this.of("").packet({type:"disconnect"})}this.onDisconnect("booted")}return this};Socket.prototype.disconnectSync=function(){var xhr=io.util.request();var uri=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,io.protocol,"",this.sessionid].join("/")+"/?disconnect=1";xhr.open("GET",uri,false);xhr.send(null);this.onDisconnect("booted")};Socket.prototype.isXDomain=function(){var port=global.location.port||("https:"==global.location.protocol?443:80);return this.options.host!==global.location.hostname||this.options.port!=port};Socket.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer){this.setBuffer(false)}this.emit("connect")}};Socket.prototype.onOpen=function(){this.open=true};Socket.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};Socket.prototype.onPacket=function(packet){this.of(packet.endpoint).onPacket(packet)};Socket.prototype.onError=function(err){if(err&&err.advice){if(err.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect){this.reconnect()}}}this.publish("error",err&&err.reason?err.reason:err)};Socket.prototype.onDisconnect=function(reason){var wasConnected=this.connected,wasConnecting=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(wasConnected||wasConnecting){this.transport.close();this.transport.clearTimeouts();if(wasConnected){this.publish("disconnect",reason);if("booted"!=reason&&this.options.reconnect&&!this.reconnecting){this.reconnect()}}}};Socket.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var self=this,maxAttempts=this.options["max reconnection attempts"],tryMultiple=this.options["try multiple transports"],limit=this.options["reconnection limit"];function reset(){if(self.connected){for(var i in self.namespaces){if(self.namespaces.hasOwnProperty(i)&&""!==i){self.namespaces[i].packet({type:"connect"})}}self.publish("reconnect",self.transport.name,self.reconnectionAttempts)}clearTimeout(self.reconnectionTimer);self.removeListener("connect_failed",maybeReconnect);self.removeListener("connect",maybeReconnect);self.reconnecting=false;delete self.reconnectionAttempts;delete self.reconnectionDelay;delete self.reconnectionTimer;delete self.redoTransports;self.options["try multiple transports"]=tryMultiple}function maybeReconnect(){if(!self.reconnecting){return}if(self.connected){return reset()}if(self.connecting&&self.reconnecting){return self.reconnectionTimer=setTimeout(maybeReconnect,1e3)}if(self.reconnectionAttempts++>=maxAttempts){if(!self.redoTransports){self.on("connect_failed",maybeReconnect);self.options["try multiple transports"]=true;self.transports=self.origTransports;self.transport=self.getTransport();self.redoTransports=true;self.connect()}else{self.publish("reconnect_failed");reset()}}else{if(self.reconnectionDelay<limit){self.reconnectionDelay*=2}self.connect();self.publish("reconnecting",self.reconnectionDelay,self.reconnectionAttempts);self.reconnectionTimer=setTimeout(maybeReconnect,self.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(maybeReconnect,this.reconnectionDelay);this.on("connect",maybeReconnect)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.SocketNamespace=SocketNamespace;function SocketNamespace(socket,name){this.socket=socket;this.name=name||"";this.flags={};this.json=new Flag(this,"json");this.ackPackets=0;this.acks={}}io.util.mixin(SocketNamespace,io.EventEmitter);SocketNamespace.prototype.$emit=io.EventEmitter.prototype.emit;SocketNamespace.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};SocketNamespace.prototype.packet=function(packet){packet.endpoint=this.name;this.socket.packet(packet);this.flags={};return this};SocketNamespace.prototype.send=function(data,fn){var packet={type:this.flags.json?"json":"message",data:data};if("function"==typeof fn){packet.id=++this.ackPackets;packet.ack=true;this.acks[packet.id]=fn}return this.packet(packet)};SocketNamespace.prototype.emit=function(name){var args=Array.prototype.slice.call(arguments,1),lastArg=args[args.length-1],packet={type:"event",name:name};if("function"==typeof lastArg){packet.id=++this.ackPackets;packet.ack="data";this.acks[packet.id]=lastArg;args=args.slice(0,args.length-1)}packet.args=args;return this.packet(packet)};SocketNamespace.prototype.disconnect=function(){if(this.name===""){this.socket.disconnect()}else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};SocketNamespace.prototype.onPacket=function(packet){var self=this;function ack(){self.packet({type:"ack",args:io.util.toArray(arguments),ackId:packet.id})}switch(packet.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name===""){this.socket.onDisconnect(packet.reason||"booted")}else{this.$emit("disconnect",packet.reason)}break;case"message":case"json":var params=["message",packet.data];if(packet.ack=="data"){params.push(ack)}else if(packet.ack){this.packet({type:"ack",ackId:packet.id})}this.$emit.apply(this,params);break;case"event":var params=[packet.name].concat(packet.args);if(packet.ack=="data")params.push(ack);this.$emit.apply(this,params);break;case"ack":if(this.acks[packet.ackId]){this.acks[packet.ackId].apply(this,packet.args);delete this.acks[packet.ackId]}break;case"error":if(packet.advice){this.socket.onError(packet)}else{if(packet.reason=="unauthorized"){this.$emit("connect_failed",packet.reason)}else{this.$emit("error",packet.reason)}}break}};function Flag(nsp,name){this.namespace=nsp;this.name=name}Flag.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};Flag.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports.websocket=WS;function WS(socket){io.Transport.apply(this,arguments)}io.util.inherit(WS,io.Transport);WS.prototype.name="websocket";WS.prototype.open=function(){var query=io.util.query(this.socket.options.query),self=this,Socket;if(!Socket){Socket=global.MozWebSocket||global.WebSocket}this.websocket=new Socket(this.prepareUrl()+query);this.websocket.onopen=function(){self.onOpen();self.socket.setBuffer(false)};this.websocket.onmessage=function(ev){self.onData(ev.data)};this.websocket.onclose=function(){self.onClose();self.socket.setBuffer(true)};this.websocket.onerror=function(e){self.onError(e)};return this};if(io.util.ua.iDevice){WS.prototype.send=function(data){var self=this;setTimeout(function(){self.websocket.send(data)},0);return this}}else{WS.prototype.send=function(data){this.websocket.send(data);return this}}WS.prototype.payload=function(arr){for(var i=0,l=arr.length;i<l;i++){this.packet(arr[i])}return this};WS.prototype.close=function(){this.websocket.close();return this};WS.prototype.onError=function(e){this.socket.onError(e)};WS.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};WS.check=function(){return"WebSocket"in global&&!("__addTask"in WebSocket)||"MozWebSocket"in global};WS.xdomainCheck=function(){return true};io.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.flashsocket=Flashsocket;function Flashsocket(){io.Transport.websocket.apply(this,arguments)}io.util.inherit(Flashsocket,io.Transport.websocket);Flashsocket.prototype.name="flashsocket";Flashsocket.prototype.open=function(){var self=this,args=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.open.apply(self,args)});return this};Flashsocket.prototype.send=function(){var self=this,args=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.send.apply(self,args)});return this};Flashsocket.prototype.close=function(){WebSocket.__tasks.length=0;io.Transport.websocket.prototype.close.call(this);return this};Flashsocket.prototype.ready=function(socket,fn){function init(){var options=socket.options,port=options["flash policy port"],path=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,"static/flashsocket","WebSocketMain"+(socket.isXDomain()?"Insecure":"")+".swf"];if(!Flashsocket.loaded){if(typeof WEB_SOCKET_SWF_LOCATION==="undefined"){WEB_SOCKET_SWF_LOCATION=path.join("/")}if(port!==843){WebSocket.loadFlashPolicyFile("xmlsocket://"+options.host+":"+port)}WebSocket.__initialize();Flashsocket.loaded=true}fn.call(self)}var self=this;if(document.body)return init();io.util.load(init)};Flashsocket.check=function(){if(typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!swfobject)return false;return swfobject.getFlashPlayerVersion().major>=10};Flashsocket.xdomainCheck=function(){return true};if(typeof window!="undefined"){WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true}io.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window){var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O[["Active"].concat("Object").join("X")]!=D){try{var ad=new(window[["Active"].concat("Object").join("X")])(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if(typeof j.readyState!=D&&j.readyState=="complete"||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body)){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");

if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310){aa.width="310"}if(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?["Active"].concat("").join("X"):"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=ad&&typeof ad=="string"?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring(Y[X].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}()}(function(){if("undefined"==typeof window||window.WebSocket)return;var console=window.console;if(!console||!console.log||!console.error){console={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("10.0.0")){console.error("Flash Player >= 10.0.0 is required.");return}if(location.protocol=="file:"){console.error("WARNING: web-socket-js doesn't work in file:///... URL "+"unless you set Flash Security Settings properly. "+"Open the page via Web server i.e. http://...")}WebSocket=function(url,protocols,proxyHost,proxyPort,headers){var self=this;self.__id=WebSocket.__nextId++;WebSocket.__instances[self.__id]=self;self.readyState=WebSocket.CONNECTING;self.bufferedAmount=0;self.__events={};if(!protocols){protocols=[]}else if(typeof protocols=="string"){protocols=[protocols]}setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(self.__id,url,protocols,proxyHost||null,proxyPort||0,headers||null)})},0)};WebSocket.prototype.send=function(data){if(this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var result=WebSocket.__flash.send(this.__id,encodeURIComponent(data));if(result<0){return true}else{this.bufferedAmount+=result;return false}};WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING){return}this.readyState=WebSocket.CLOSING;WebSocket.__flash.close(this.__id)};WebSocket.prototype.addEventListener=function(type,listener,useCapture){if(!(type in this.__events)){this.__events[type]=[]}this.__events[type].push(listener)};WebSocket.prototype.removeEventListener=function(type,listener,useCapture){if(!(type in this.__events))return;var events=this.__events[type];for(var i=events.length-1;i>=0;--i){if(events[i]===listener){events.splice(i,1);break}}};WebSocket.prototype.dispatchEvent=function(event){var events=this.__events[event.type]||[];for(var i=0;i<events.length;++i){events[i](event)}var handler=this["on"+event.type];if(handler)handler(event)};WebSocket.prototype.__handleEvent=function(flashEvent){if("readyState"in flashEvent){this.readyState=flashEvent.readyState}if("protocol"in flashEvent){this.protocol=flashEvent.protocol}var jsEvent;if(flashEvent.type=="open"||flashEvent.type=="error"){jsEvent=this.__createSimpleEvent(flashEvent.type)}else if(flashEvent.type=="close"){jsEvent=this.__createSimpleEvent("close")}else if(flashEvent.type=="message"){var data=decodeURIComponent(flashEvent.message);jsEvent=this.__createMessageEvent("message",data)}else{throw"unknown event type: "+flashEvent.type}this.dispatchEvent(jsEvent)};WebSocket.prototype.__createSimpleEvent=function(type){if(document.createEvent&&window.Event){var event=document.createEvent("Event");event.initEvent(type,false,false);return event}else{return{type:type,bubbles:false,cancelable:false}}};WebSocket.prototype.__createMessageEvent=function(type,data){if(document.createEvent&&window.MessageEvent&&!window.opera){var event=document.createEvent("MessageEvent");event.initMessageEvent("message",false,false,data,null,null,window,null);return event}else{return{type:type,data:data,bubbles:false,cancelable:false}}};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.loadFlashPolicyFile=function(url){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(url)})};WebSocket.__initialize=function(){if(WebSocket.__flash)return;if(WebSocket.__swfLocation){window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation}if(!window.WEB_SOCKET_SWF_LOCATION){console.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var container=document.createElement("div");container.id="webSocketContainer";container.style.position="absolute";if(WebSocket.__isFlashLite()){container.style.left="0px";container.style.top="0px"}else{container.style.left="-100px";container.style.top="-100px"}var holder=document.createElement("div");holder.id="webSocketFlash";container.appendChild(holder);document.body.appendChild(container);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:true,swliveconnect:true,allowScriptAccess:"always"},null,function(e){if(!e.success){console.error("[WebSocket] swfobject.embedSWF failed")}})};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var i=0;i<WebSocket.__tasks.length;++i){WebSocket.__tasks[i]()}WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){setTimeout(function(){try{var events=WebSocket.__flash.receiveEvents();for(var i=0;i<events.length;++i){WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i])}}catch(e){console.error(e)}},0);return true};WebSocket.__log=function(message){console.log(decodeURIComponent(message))};WebSocket.__error=function(message){console.error(decodeURIComponent(message))};WebSocket.__addTask=function(task){if(WebSocket.__flash){task()}else{WebSocket.__tasks.push(task)}};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return false}var mimeType=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!mimeType||!mimeType.enabledPlugin||!mimeType.enabledPlugin.filename){return false}return mimeType.enabledPlugin.filename.match(/flashlite/i)?true:false};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION){if(window.addEventListener){window.addEventListener("load",function(){WebSocket.__initialize()},false)}else{window.attachEvent("onload",function(){WebSocket.__initialize()})}}})();(function(exports,io,global){exports.XHR=XHR;function XHR(socket){if(!socket)return;io.Transport.apply(this,arguments);this.sendBuffer=[]}io.util.inherit(XHR,io.Transport);XHR.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};XHR.prototype.payload=function(payload){var msgs=[];for(var i=0,l=payload.length;i<l;i++){msgs.push(io.parser.encodePacket(payload[i]))}this.send(io.parser.encodePayload(msgs))};XHR.prototype.send=function(data){this.post(data);return this};function empty(){}XHR.prototype.post=function(data){var self=this;this.socket.setBuffer(true);function stateChange(){if(this.readyState==4){this.onreadystatechange=empty;self.posting=false;if(this.status==200){self.socket.setBuffer(false)}else{self.onClose()}}}function onload(){this.onload=empty;self.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(global.XDomainRequest&&this.sendXHR instanceof XDomainRequest){this.sendXHR.onload=this.sendXHR.onerror=onload}else{this.sendXHR.onreadystatechange=stateChange}this.sendXHR.send(data)};XHR.prototype.close=function(){this.onClose();return this};XHR.prototype.request=function(method){var req=io.util.request(this.socket.isXDomain()),query=io.util.query(this.socket.options.query,"t="+ +new Date);req.open(method||"GET",this.prepareUrl()+query,true);if(method=="POST"){try{if(req.setRequestHeader){req.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{req.contentType="text/plain"}}catch(e){}}return req};XHR.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};XHR.check=function(socket,xdomain){try{var request=io.util.request(xdomain),usesXDomReq=global.XDomainRequest&&request instanceof XDomainRequest,socketProtocol=socket&&socket.options&&socket.options.secure?"https:":"http:",isXProtocol=global.location&&socketProtocol!=global.location.protocol;if(request&&!(usesXDomReq&&isXProtocol)){return true}}catch(e){}return false};XHR.xdomainCheck=function(socket){return XHR.check(socket,true)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.htmlfile=HTMLFile;function HTMLFile(socket){io.Transport.XHR.apply(this,arguments)}io.util.inherit(HTMLFile,io.Transport.XHR);HTMLFile.prototype.name="htmlfile";HTMLFile.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var iframeC=this.doc.createElement("div");iframeC.className="socketio";this.doc.body.appendChild(iframeC);this.iframe=this.doc.createElement("iframe");iframeC.appendChild(this.iframe);var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+query;io.util.on(window,"unload",function(){self.destroy()})};HTMLFile.prototype._=function(data,doc){data=data.replace(/\\\//g,"/");this.onData(data);try{var script=doc.getElementsByTagName("script")[0];script.parentNode.removeChild(script)}catch(e){}};HTMLFile.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};HTMLFile.prototype.close=function(){this.destroy();return io.Transport.XHR.prototype.close.call(this)};HTMLFile.check=function(socket){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window){try{var a=new(window[["Active"].concat("Object").join("X")])("htmlfile");return a&&io.Transport.XHR.check(socket)}catch(e){}}return false};HTMLFile.xdomainCheck=function(){return false};io.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports["xhr-polling"]=XHRPolling;function XHRPolling(){io.Transport.XHR.apply(this,arguments)}io.util.inherit(XHRPolling,io.Transport.XHR);io.util.merge(XHRPolling,io.Transport.XHR);XHRPolling.prototype.name="xhr-polling";XHRPolling.prototype.heartbeats=function(){return false};XHRPolling.prototype.open=function(){var self=this;io.Transport.XHR.prototype.open.call(self);return false};function empty(){}XHRPolling.prototype.get=function(){if(!this.isOpen)return;var self=this;function stateChange(){if(this.readyState==4){this.onreadystatechange=empty;if(this.status==200){self.onData(this.responseText);self.get()}else{self.onClose()}}}function onload(){this.onload=empty;this.onerror=empty;self.retryCounter=1;self.onData(this.responseText);self.get()}function onerror(){self.retryCounter++;if(!self.retryCounter||self.retryCounter>3){self.onClose()}else{self.get()}}this.xhr=this.request();if(global.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=onload;this.xhr.onerror=onerror}else{this.xhr.onreadystatechange=stateChange}this.xhr.send(null)};XHRPolling.prototype.onClose=function(){io.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=empty;try{this.xhr.abort()}catch(e){}this.xhr=null}};XHRPolling.prototype.ready=function(socket,fn){var self=this;io.util.defer(function(){fn.call(self)})};io.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io,global){var indicator=global.document&&"MozAppearance"in global.document.documentElement.style;exports["jsonp-polling"]=JSONPPolling;function JSONPPolling(socket){io.Transport["xhr-polling"].apply(this,arguments);this.index=io.j.length;var self=this;io.j.push(function(msg){self._(msg)})}io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]);JSONPPolling.prototype.name="jsonp-polling";JSONPPolling.prototype.post=function(data){var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="socketio_iframe_"+this.index,iframe;form.className="socketio";form.style.position="absolute";form.style.top="0px";form.style.left="0px";form.style.display="none";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.prepareUrl()+query;function complete(){initIframe();self.socket.setBuffer(false)}function initIframe(){if(self.iframe){self.form.removeChild(self.iframe)}try{iframe=document.createElement('<iframe name="'+self.iframeId+'">')}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();this.area.value=io.JSON.stringify(data);try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}this.socket.setBuffer(true)};JSONPPolling.prototype.get=function(){var self=this,script=document.createElement("script"),query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.prepareUrl()+query;script.onerror=function(){self.onClose()};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt);this.script=script;if(indicator){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype._=function(msg){this.onData(msg);if(this.isOpen){this.get()}return this};JSONPPolling.prototype.ready=function(socket,fn){var self=this;if(!indicator)return fn.call(this);io.util.load(function(){fn.call(self)})};JSONPPolling.check=function(){return"document"in global};JSONPPolling.xdomainCheck=function(){return true};io.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return io}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})()}).call(exports,__webpack_require__(55)(module))},function(module,exports,__webpack_require__){exports.toArray=function(enu){var arr=[];for(var i=0,l=enu.length;i<l;i++)arr.push(enu[i]);return arr};exports.unpack=function(buffer){var n=0;for(var i=0;i<buffer.length;++i){n=i==0?buffer[i]:n*256+buffer[i]}return n};exports.padl=function(s,n,c){return new Array(1+n-s.length).join(c)+s}},function(module,exports,__webpack_require__){var util=__webpack_require__(85),toArray=util.toArray;var levels=["error","warn","info","debug"];var colors=[31,33,36,90];function pad(str){var max=0;for(var i=0,l=levels.length;i<l;i++)max=Math.max(max,levels[i].length);if(str.length<max)return str+new Array(max-str.length+1).join(" ");return str}var Logger=module.exports=function(opts){opts=opts||{};this.colors=false!==opts.colors;this.level=3;this.enabled=true};Logger.prototype.log=function(type){var index=levels.indexOf(type);if(index>this.level||!this.enabled)return this;console.log.apply(console,[this.colors?"   ["+colors[index]+"m"+pad(type)+" -[39m":type+":"].concat(toArray(arguments).slice(1)));return this};levels.forEach(function(name){Logger.prototype[name]=function(){this.log.apply(this,[name].concat(toArray(arguments)))}})},function(module,exports,__webpack_require__){(function(process){var Socket=__webpack_require__(65),EventEmitter=process.EventEmitter,parser=__webpack_require__(70),util=__webpack_require__(85);exports=module.exports=SocketNamespace;function SocketNamespace(mgr,name){this.manager=mgr;this.name=name||"";this.sockets={};this.auth=false;this.setFlags()}SocketNamespace.prototype.__proto__=EventEmitter.prototype;SocketNamespace.prototype.$emit=EventEmitter.prototype.emit;SocketNamespace.prototype.clients=function(room){var room=this.name+(room!==undefined?"/"+room:"");if(!this.manager.rooms[room]){return[]}return this.manager.rooms[room].map(function(id){return this.socket(id)},this)};SocketNamespace.prototype.__defineGetter__("log",function(){return this.manager.log});SocketNamespace.prototype.__defineGetter__("store",function(){return this.manager.store});SocketNamespace.prototype.__defineGetter__("json",function(){this.flags.json=true;return this});SocketNamespace.prototype.__defineGetter__("volatile",function(){this.flags.volatile=true;return this});SocketNamespace.prototype.in=SocketNamespace.prototype.to=function(room){this.flags.endpoint=this.name+(room?"/"+room:"");return this};SocketNamespace.prototype.except=function(id){this.flags.exceptions.push(id);return this};SocketNamespace.prototype.setFlags=function(){this.flags={endpoint:this.name,exceptions:[]};return this};SocketNamespace.prototype.packet=function(packet){packet.endpoint=this.name;var store=this.store,log=this.log,volatile=this.flags.volatile,exceptions=this.flags.exceptions,packet=parser.encodePacket(packet);this.manager.onDispatch(this.flags.endpoint,packet,volatile,exceptions);this.store.publish("dispatch",this.flags.endpoint,packet,volatile,exceptions);this.setFlags();return this};SocketNamespace.prototype.send=function(data){return this.packet({type:this.flags.json?"json":"message",data:data})};SocketNamespace.prototype.emit=function(name){if(name=="newListener"){return this.$emit.apply(this,arguments)}return this.packet({type:"event",name:name,args:util.toArray(arguments).slice(1)})};SocketNamespace.prototype.socket=function(sid,readable){if(!this.sockets[sid]){this.sockets[sid]=new Socket(this.manager,sid,this,readable)}return this.sockets[sid]};SocketNamespace.prototype.authorization=function(fn){this.auth=fn;return this};SocketNamespace.prototype.handleDisconnect=function(sid,reason,raiseOnDisconnect){if(this.sockets[sid]&&this.sockets[sid].readable){if(raiseOnDisconnect)this.sockets[sid].onDisconnect(reason);delete this.sockets[sid]}};SocketNamespace.prototype.authorize=function(data,fn){if(this.auth){var self=this;this.auth.call(this,data,function(err,authorized){self.log.debug("client "+(authorized?"":"un")+"authorized for "+self.name);fn(err,authorized)})}else{this.log.debug("client authorized for "+this.name);fn(null,true)}return this};SocketNamespace.prototype.handlePacket=function(sessid,packet){var socket=this.socket(sessid),dataAck=packet.ack=="data",manager=this.manager,self=this;function ack(){self.log.debug("sending data ack packet");socket.packet({type:"ack",args:util.toArray(arguments),ackId:packet.id})}function error(err){self.log.warn("handshake error "+err+" for "+self.name);socket.packet({type:"error",reason:err})}function connect(){self.manager.onJoin(sessid,self.name);self.store.publish("join",sessid,self.name);socket.packet({type:"connect"});self.$emit("connection",socket)}switch(packet.type){case"connect":if(packet.endpoint==""){connect()}else{var handshakeData=manager.handshaken[sessid];this.authorize(handshakeData,function(err,authorized,newData){if(err)return error(err);if(authorized){manager.onHandshake(sessid,newData||handshakeData);self.store.publish("handshake",sessid,newData||handshakeData);connect()}else{error("unauthorized")}})}break;case"ack":if(socket.acks[packet.ackId]){socket.acks[packet.ackId].apply(socket,packet.args)}else{this.log.info("unknown ack packet")}break;case"event":if(-~manager.get("blacklist").indexOf(packet.name)){this.log.debug("ignoring blacklisted event `"+packet.name+"`")}else{var params=[packet.name].concat(packet.args);if(dataAck){params.push(ack)}socket.$emit.apply(socket,params)}break;case"disconnect":this.manager.onLeave(sessid,this.name);this.store.publish("leave",sessid,this.name);socket.$emit("disconnect",packet.reason||"packet");break;case"json":case"message":var params=["message",packet.data];if(dataAck)params.push(ack);socket.$emit.apply(socket,params)}}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var parse=__webpack_require__(121),Server=__webpack_require__(91),Mongos=__webpack_require__(93),ReplSet=__webpack_require__(92),ReadPreference=__webpack_require__(94),Db=__webpack_require__(89);function MongoClient(){this.connect=MongoClient.connect}MongoClient.connect=function(url,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=typeof args[args.length-1]=="function"?args.pop():null;options=args.length?args.shift():null;options=options||{};var serverOptions=options.server||{};var mongosOptions=options.mongos||{};var replSetServersOptions=options.replSet||options.replSetServers||{};var dbOptions=options.db||{};if(callback==null)throw new Error("no callback function provided");var object=parse(url,options);if(dbOptions){for(var name in dbOptions)object.db_options[name]=dbOptions[name]}object.db_options.url=url;if(serverOptions){for(var name in serverOptions)object.server_options[name]=serverOptions[name]}if(replSetServersOptions){for(var name in replSetServersOptions)object.rs_options[name]=replSetServersOptions[name]}if(replSetServersOptions.ssl||replSetServersOptions.sslValidate||replSetServersOptions.sslCA||replSetServersOptions.sslCert||replSetServersOptions.sslKey||replSetServersOptions.sslPass){object.server_options.ssl=replSetServersOptions.ssl;object.server_options.sslValidate=replSetServersOptions.sslValidate;object.server_options.sslCA=replSetServersOptions.sslCA;object.server_options.sslCert=replSetServersOptions.sslCert;object.server_options.sslKey=replSetServersOptions.sslKey;object.server_options.sslPass=replSetServersOptions.sslPass}if(mongosOptions){for(var name in mongosOptions)object.mongos_options[name]=mongosOptions[name]}if(typeof object.server_options.poolSize=="number"){if(!object.mongos_options.poolSize)object.mongos_options.poolSize=object.server_options.poolSize;if(!object.rs_options.poolSize)object.rs_options.poolSize=object.server_options.poolSize}if(mongosOptions.ssl||mongosOptions.sslValidate||mongosOptions.sslCA||mongosOptions.sslCert||mongosOptions.sslKey||mongosOptions.sslPass){object.server_options.ssl=mongosOptions.ssl;object.server_options.sslValidate=mongosOptions.sslValidate;object.server_options.sslCA=mongosOptions.sslCA;object.server_options.sslCert=mongosOptions.sslCert;object.server_options.sslKey=mongosOptions.sslKey;object.server_options.sslPass=mongosOptions.sslPass}var totalNumberOfServers=object.servers.length;var totalNumberOfMongosServers=0;var totalNumberOfMongodServers=0;var serverConfig=null;var errorServers={};if(object.servers.length==0)throw new Error("connection string must contain at least one seed host");object.db_options.native_parser=_setNativeParser(object.db_options);if(typeof object.server_options.auto_reconnect!="boolean"){object.server_options.auto_reconnect=true}for(var i=0;i<object.servers.length;i++){var providedSocketOptions=object.server_options.socketOptions||{};var _server_options={poolSize:1,socketOptions:{connectTimeoutMS:providedSocketOptions.connectTimeoutMS||3e4,socketTimeoutMS:providedSocketOptions.socketTimeoutMS||3e4},auto_reconnect:false};if(object.server_options.ssl){_server_options.ssl=object.server_options.ssl;_server_options.sslValidate=object.server_options.sslValidate;_server_options.sslCA=object.server_options.sslCA;_server_options.sslCert=object.server_options.sslCert;_server_options.sslKey=object.server_options.sslKey;_server_options.sslPass=object.server_options.sslPass}else if(object.rs_options.ssl){_server_options.ssl=object.rs_options.ssl;_server_options.sslValidate=object.rs_options.sslValidate;_server_options.sslCA=object.rs_options.sslCA;_server_options.sslCert=object.rs_options.sslCert;_server_options.sslKey=object.rs_options.sslKey;_server_options.sslPass=object.rs_options.sslPass}var error=null;var _server=object.servers[i].domain_socket?new Server(object.servers[i].domain_socket,_server_options):new Server(object.servers[i].host,object.servers[i].port,_server_options);var setName;var connectFunction=function(__server){new Db(object.dbName,__server,{w:1,native_parser:false}).open(function(err,db){totalNumberOfServers=totalNumberOfServers-1;if(!err){db.close();var isMasterDoc=db.serverConfig.isMasterDoc;if(isMasterDoc.setName){totalNumberOfMongodServers++;setName=isMasterDoc.setName}if(isMasterDoc.msg&&isMasterDoc.msg=="isdbgrid")totalNumberOfMongosServers++}else{error=err;errorServers[__server.host+":"+__server.port]=__server}if(totalNumberOfServers==0){if(totalNumberOfMongodServers==0&&totalNumberOfMongosServers==0&&error){return callback(error,null)}if(totalNumberOfMongosServers>0&&totalNumberOfMongodServers>0){if(db)db.close();
return process.nextTick(function(){try{callback(new Error("cannot combine a list of replicaset seeds and mongos seeds"))}catch(err){throw err}})}if(totalNumberOfMongodServers==0&&totalNumberOfMongosServers==0&&object.servers.length==1){var obj=object.servers[0];serverConfig=obj.domain_socket?new Server(obj.domain_socket,object.server_options):new Server(obj.host,obj.port,object.server_options)}else if(totalNumberOfMongodServers>0||totalNumberOfMongosServers>0){var finalServers=object.servers.filter(function(serverObj){return errorServers[serverObj.host+":"+serverObj.port]==null}).map(function(serverObj){return new Server(serverObj.host,serverObj.port,object.server_options)});errorServers={};if(totalNumberOfMongodServers>0){try{if(totalNumberOfMongodServers==1){object.rs_options.replicaSet=object.rs_options.replicaSet||setName}serverConfig=new ReplSet(finalServers,object.rs_options)}catch(err){return callback(err,null)}}else{serverConfig=new Mongos(finalServers,object.mongos_options)}}if(serverConfig==null){return process.nextTick(function(){try{callback(new Error("Could not locate any valid servers in initial seed list"))}catch(err){if(db)db.close();throw err}})}serverConfig.emitOpen=false;_finishConnecting(serverConfig,object,options,callback)}})};connectFunction(_server)}};var _setNativeParser=function(db_options){if(typeof db_options.native_parser=="boolean")return db_options.native_parser;try{__webpack_require__(114).BSON.BSONNative.BSON;return true}catch(err){return false}};var _finishConnecting=function(serverConfig,object,options,callback){if(typeof object.db_options.readPreference=="string"){object.db_options.readPreference=new ReadPreference(object.db_options.readPreference)}else if(typeof object.db_options.read_preference=="string"){object.db_options.readPreference=new ReadPreference(object.db_options.read_preference)}if(object.db_options.readPreference&&object.db_options.readPreferenceTags){object.db_options.readPreference.tags=object.db_options.readPreferenceTags}else if(object.db_options.readPreference&&object.db_options.read_preference_tags){object.db_options.readPreference.tags=object.db_options.read_preference_tags}var socketTimeoutMS=object.server_options.socketOptions.socketTimeoutMS||0;if(serverConfig instanceof ReplSet){socketTimeoutMS=object.rs_options.socketOptions.socketTimeoutMS||socketTimeoutMS}serverConfig.connectTimeoutMS=serverConfig.connectTimeoutMS||3e4;serverConfig.socketTimeoutMS=serverConfig.connectTimeoutMS;var db=new Db(object.dbName,serverConfig,object.db_options);db.open(function(err,db){if(err){return process.nextTick(function(){try{callback(err,null)}catch(err){if(db)db.close();throw err}})}serverConfig.socketTimeoutMS=socketTimeoutMS||0;if(err==null&&object.auth){var authentication_db=db;if(object.db_options&&object.db_options.authSource){authentication_db=db.db(object.db_options.authSource)}var options={};if(object.db_options.authMechanism)options.authMechanism=object.db_options.authMechanism;if(object.db_options.gssapiServiceName)options.gssapiServiceName=object.db_options.gssapiServiceName;authentication_db.authenticate(object.auth.user,object.auth.password,options,function(err,success){if(success){process.nextTick(function(){try{callback(null,db)}catch(err){if(db)db.close();throw err}})}else{if(db)db.close();process.nextTick(function(){try{callback(err?err:new Error("Could not authenticate user "+object.auth[0]),null)}catch(err){if(db)db.close();throw err}})}})}else{process.nextTick(function(){try{callback(err,db)}catch(err){if(db)db.close();throw err}})}})};module.exports=MongoClient}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var EventEmitter=__webpack_require__(120).EventEmitter,inherits=__webpack_require__(52).inherits,getSingleProperty=__webpack_require__(122).getSingleProperty,shallowClone=__webpack_require__(122).shallowClone,parseIndexOptions=__webpack_require__(122).parseIndexOptions,debugOptions=__webpack_require__(122).debugOptions,CommandCursor=__webpack_require__(123),handleCallback=__webpack_require__(122).handleCallback,toError=__webpack_require__(122).toError,ReadPreference=__webpack_require__(94),f=__webpack_require__(52).format,Admin=__webpack_require__(124),Code=__webpack_require__(114).BSON.Code,CoreReadPreference=__webpack_require__(114).ReadPreference,MongoError=__webpack_require__(114).MongoError,ObjectID=__webpack_require__(114).ObjectID,Logger=__webpack_require__(114).Logger,Collection=__webpack_require__(90),crypto=__webpack_require__(110);var debugFields=["authSource","w","wtimeout","j","native_parser","forceServerObjectId","serializeFunctions","raw","promoteLongs","bufferMaxEntries","numberOfRetries","retryMiliSeconds","readPreference","pkFactory"];var Db=function(databaseName,topology,options){options=options||{};if(!(this instanceof Db))return new Db(databaseName,topology,options);EventEmitter.call(this);var self=this;this.s={databaseName:databaseName,topology:topology,options:options,logger:Logger("Db",options),bson:topology?topology.bson:null,authSource:options.authSource,readPreference:options.readPreference,bufferMaxEntries:typeof options.bufferMaxEntries=="number"?options.bufferMaxEntries:-1,parentDb:options.parentDb||null,pkFactory:options.pkFactory||ObjectID,nativeParser:options.nativeParser||options.native_parser};validateDatabaseName(self.s.databaseName);if(typeof self.s.nativeParser=="boolean"){if(self.s.nativeParser){topology.setBSONParserType("c++")}else{topology.setBSONParserType("js")}}getSingleProperty(this,"serverConfig",self.s.topology);getSingleProperty(this,"bufferMaxEntries",self.s.bufferMaxEntries);getSingleProperty(this,"databaseName",self.s.databaseName);Object.defineProperty(this,"options",{enumerable:true,get:function(){return self.s.options}});Object.defineProperty(this,"native_parser",{enumerable:true,get:function(){return self.s.topology.parserType()=="c++"}});Object.defineProperty(this,"slaveOk",{enumerable:true,get:function(){if(self.s.options.readPreference!=null&&(self.s.options.readPreference!="primary"||self.s.options.readPreference.mode!="primary")){return true}return false}});Object.defineProperty(this,"writeConcern",{enumerable:true,get:function(){var ops={};if(self.s.options.w!=null)ops.w=self.s.options.w;if(self.s.options.j!=null)ops.j=self.s.options.j;if(self.s.options.fsync!=null)ops.fsync=self.s.options.fsync;if(self.s.options.wtimeout!=null)ops.wtimeout=self.s.options.wtimeout;return ops}});topology.once("error",createListener(self,"error",self));topology.once("timeout",createListener(self,"timeout",self));topology.once("close",createListener(self,"close",self));topology.once("parseError",createListener(self,"parseError",self));topology.once("open",createListener(self,"open",self));topology.once("fullsetup",createListener(self,"fullsetup",self));topology.once("all",createListener(self,"all",self));topology.on("reconnect",createListener(self,"reconnect",self))};inherits(Db,EventEmitter);Db.prototype.open=function(callback){var self=this;self.s.topology.connect(self,self.s.options,function(err,topology){if(callback==null)return;var internalCallback=callback;callback==null;if(err){self.close();return internalCallback(err)}internalCallback(null,self)})};Db.prototype.command=function(command,options,callback){var self=this;if(typeof options=="function")callback=options,options={};var dbName=options.dbName||options.authdb||self.s.databaseName;options=shallowClone(options);if(options.readPreference==null&&self.s.readPreference){options.readPreference=self.s.readPreference}if(options.readPreference&&typeof options.readPreference=="string"){options.readPreference=new CoreReadPreference(options.readPreference)}else if(options.readPreference instanceof ReadPreference){options.readPreference=new CoreReadPreference(options.readPreference.mode,options.readPreference.tags)}if(self.s.logger.isDebug())self.s.logger.debug(f("executing command %s against %s with options [%s]",JSON.stringify(command),f("%s.$cmd",dbName),JSON.stringify(debugOptions(debugFields,options))));self.s.topology.command(f("%s.$cmd",dbName),command,options,function(err,result){if(err)return handleCallback(callback,err);handleCallback(callback,null,result.result)})};Db.prototype.close=function(force,callback){if(typeof force=="function")callback=force,force=false;this.s.topology.close(force);if(this.listeners("close").length>0)this.emit("close");this.removeAllListeners("close");if(this.s.parentDb)this.s.parentDb.close();if(typeof callback=="function")handleCallback(callback,null)};Db.prototype.admin=function(){return new Admin(this,this.s.topology)};Db.prototype.collection=function(name,options,callback){var self=this;if(typeof options=="function")callback=options,options={};options=options||{};if(options==null||!options.strict){try{var collection=new Collection(this,this.s.topology,this.s.databaseName,name,this.s.pkFactory,options);if(callback)callback(null,collection);return collection}catch(err){if(callback)return callback(err);throw err}}if(typeof callback!="function"){throw toError(f("A callback is required in strict mode. While getting collection %s.",name))}this.listCollections({name:name}).toArray(function(err,collections){if(err!=null)return handleCallback(callback,err,null);if(collections.length==0)return handleCallback(callback,toError(f("Collection %s does not exist. Currently in strict mode.",name)),null);try{return handleCallback(callback,null,new Collection(self,self.s.topology,self.s.databaseName,name,self.s.pkFactory,options))}catch(err){return handleCallback(callback,err,null)}})};Db.prototype.createCollection=function(name,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,0);callback=args.pop();name=args.length?args.shift():null;options=args.length?args.shift()||{}:{};var finalOptions=writeConcern(shallowClone(options),this,options);this.listCollections({name:name}).toArray(function(err,collections){if(err!=null)return handleCallback(callback,err,null);if(collections.length>0&&finalOptions.strict){return handleCallback(callback,new MongoError(f("Collection %s already exists. Currently in strict mode.",name)),null)}else if(collections.length>0){try{return handleCallback(callback,null,new Collection(self,self.s.topology,self.s.databaseName,name,self.s.pkFactory,options))}catch(err){return handleCallback(callback,err)}}var cmd={create:name};for(var n in options){if(options[n]!=null&&typeof options[n]!="function")cmd[n]=options[n]}self.command(cmd,finalOptions,function(err,result){if(err)return handleCallback(callback,err);handleCallback(callback,null,new Collection(self,self.s.topology,self.s.databaseName,name,self.s.pkFactory,options))})})};Db.prototype.stats=function(options,callback){if(typeof options=="function")callback=options,options={};options=options||{};var commandObject={dbStats:true};if(options["scale"]!=null)commandObject["scale"]=options["scale"];this.command(commandObject,options,callback)};var listCollectionsTranforms=function(databaseName){var matching=f("%s.",databaseName);return{doc:function(doc){var index=doc.name.indexOf(matching);if(doc.name&&index==0){doc.name=doc.name.substr(index+matching.length)}return doc}}};Db.prototype.listCollections=function(filter,options){filter=filter||{};options=options||{};if(this.serverConfig.capabilities().hasListCollectionsCommand){var cursor=options.batchSize?{batchSize:options.batchSize}:{};var command={listCollections:true,filter:filter,cursor:cursor};options.cursorFactory=CommandCursor;options.transforms=listCollectionsTranforms(this.s.databaseName);return this.s.topology.cursor(f("%s.$cmd",this.s.databaseName),command,options)}if(!this.serverConfig.capabilities().hasListCollectionsCommand){if(typeof filter.name=="string"&&!new RegExp("^"+this.databaseName+"\\.").test(filter.name)){filter=shallowClone(filter);filter.name=f("%s.%s",this.s.databaseName,filter.name)}}if(filter==null){filter.name=f("/%s/",this.s.databaseName)}if(filter.name){filter={$and:[{name:filter.name},{name:/^((?!\$).)*$/}]}}else{filter={name:/^((?!\$).)*$/}}var options={transforms:listCollectionsTranforms(this.s.databaseName)};var cursor=this.collection(Db.SYSTEM_NAMESPACE_COLLECTION).find(filter,options);if(options.batchSize)cursor=cursor.batchSize(options.batchSize);return cursor};Db.prototype.eval=function(code,parameters,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,1);callback=args.pop();parameters=args.length?args.shift():parameters;options=args.length?args.shift()||{}:{};var finalCode=code;var finalParameters=[];if(!(finalCode instanceof Code))finalCode=new Code(finalCode);if(parameters!=null&&!Array.isArray(parameters)&&typeof parameters!=="function"){finalParameters=[parameters]}else if(parameters!=null&&Array.isArray(parameters)&&typeof parameters!=="function"){finalParameters=parameters}var cmd={$eval:finalCode,args:finalParameters};if(options["nolock"]){cmd["nolock"]=options["nolock"]}options.readPreference=new CoreReadPreference(ReadPreference.PRIMARY);self.command(cmd,options,function(err,result){if(err)return handleCallback(callback,err,null);if(result&&result.ok==1)return handleCallback(callback,null,result.retval);if(result)return handleCallback(callback,new MongoError(f("eval failed: %s",result.errmsg)),null);handleCallback(callback,err,result)})};Db.prototype.renameCollection=function(fromCollection,toCollection,options,callback){if(typeof options=="function")callback=options,options={};options.new_collection=true;this.collection(fromCollection).rename(toCollection,options,callback)};Db.prototype.dropCollection=function(name,callback){callback||(callback=function(){});var cmd={drop:name};this.command(cmd,this.s.options,function(err,result){if(err)return handleCallback(callback,err);if(result.ok)return handleCallback(callback,null,true);handleCallback(callback,null,false)})};Db.prototype.dropDatabase=function(callback){if(typeof options=="function")callback=options,options={};var cmd={dropDatabase:1};this.command(cmd,this.s.options,function(err,result){if(callback==null)return;if(err)return handleCallback(callback,err,null);handleCallback(callback,null,result.ok?true:false)})};Db.prototype.collections=function(callback){var self=this;this.listCollections().toArray(function(err,documents){if(err!=null)return handleCallback(callback,err,null);documents=documents.filter(function(doc){return doc.name.indexOf("$")==-1});handleCallback(callback,null,documents.map(function(d){return new Collection(self,self.s.topology,self.s.databaseName,d.name.replace(self.s.databaseName+".",""),self.s.pkFactory,self.s.options)}))})};Db.prototype.executeDbAdminCommand=function(selector,options,callback){if(typeof options=="function")callback=options,options={};if(options.readPreference){options.readPreference=options.readPreference}this.s.topology.command("admin.$cmd",selector,options,function(err,result){if(err)return handleCallback(callback,err);handleCallback(callback,null,result.result)})};Db.prototype.createIndex=function(name,fieldOrSpec,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,2);callback=args.pop();options=args.length?args.shift()||{}:{};options=typeof callback==="function"?options:callback;options=options==null?{}:options;var finalOptions=writeConcern({},self,options);if(finalOptions.writeConcern&&typeof callback!="function"){throw new MongoError("Cannot use a writeConcern without a provided callback")}options=shallowClone(options);options.readPreference=ReadPreference.PRIMARY;createIndexUsingCreateIndexes(self,name,fieldOrSpec,options,function(err,result){if(err==null)return handleCallback(callback,err,result);var doc=createCreateIndexCommand(self,name,fieldOrSpec,options);finalOptions.checkKeys=false;self.s.topology.insert(f("%s.%s",self.s.databaseName,Db.SYSTEM_INDEX_COLLECTION),doc,finalOptions,function(err,result){if(callback==null)return;if(err)return handleCallback(callback,err);if(result==null)return handleCallback(callback,null,null);if(result.result.writeErrors)return handleCallback(callback,MongoError.create(result.result.writeErrors[0]),null);handleCallback(callback,null,doc.name)})})};Db.prototype.ensureIndex=function(name,fieldOrSpec,options,callback){var self=this;if(typeof options=="function")callback=options,options={};options=options||{};var finalOptions=writeConcern({},self,options);var selector=createCreateIndexCommand(self,name,fieldOrSpec,options);var index_name=selector.name;var commandOptions={};this.indexInformation(name,finalOptions,function(err,indexInformation){if(err!=null&&err.code!=26)return handleCallback(callback,err,null);if(indexInformation==null||!indexInformation[index_name]){self.createIndex(name,fieldOrSpec,options,callback)}else{if(typeof callback==="function")return handleCallback(callback,null,index_name)}})};Db.prototype.db=function(dbName){var options={};for(var key in this.options){options[key]=this.options[key]}options.parentDb=this;var db=new Db(dbName,this.s.topology,options);this.once("error",createListener(this,"error",db));this.once("timeout",createListener(this,"timeout",db));this.once("close",createListener(this,"close",db));this.once("parseError",createListener(this,"parseError",db));return db};var _executeAuthCreateUserCommand=function(self,username,password,options,callback){if(typeof username=="string"&&password!=null&&typeof password=="object"){options=password;password=null}if(typeof options=="function"){callback=options;options={}}if(options.digestPassword!=null){throw toError("The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option.")}var customData=options.customData!=null?options.customData:{};var roles=Array.isArray(options.roles)?options.roles:[];var maxTimeMS=typeof options.maxTimeMS=="number"?options.maxTimeMS:null;if(roles.length==0){console.log("Creating a user without roles is deprecated in MongoDB >= 2.6")}var commandOptions={writeCommand:true};if(options["dbName"])commandOptions.dbName=options["dbName"];if(maxTimeMS!=null)commandOptions.maxTimeMS=maxTimeMS;if((self.databaseName.toLowerCase()=="admin"||options.dbName=="admin")&&!Array.isArray(options.roles)){roles=["root"]}else if(!Array.isArray(options.roles)){roles=["dbOwner"]}var command={createUser:username,customData:customData,roles:roles,digestPassword:false};command=writeConcern(command,self,options);var md5=crypto.createHash("md5");md5.update(username+":mongo:"+password);var userPassword=md5.digest("hex");if(typeof password=="string"){command.pwd=userPassword}commandOptions.readPreference=CoreReadPreference.primary;self.command(command,commandOptions,function(err,result){if(err&&err.ok==0&&err.code==undefined)return handleCallback(callback,{code:-5e3},null);if(err)return handleCallback(callback,err,null);handleCallback(callback,!result.ok?toError(result):null,result.ok?[{user:username,pwd:""}]:null)})};Db.prototype.addUser=function(username,password,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,2);callback=args.pop();options=args.length?args.shift()||{}:{};_executeAuthCreateUserCommand(this,username,password,options,function(err,r){if(err&&err.code==-5e3){var finalOptions=writeConcern(shallowClone(options),self,options);var md5=crypto.createHash("md5");md5.update(username+":mongo:"+password);var userPassword=md5.digest("hex");var db=options.dbName?self.db(options.dbName):self;var collection=db.collection(Db.SYSTEM_USER_COLLECTION);collection.count({},function(err,count){if(err!=null)return handleCallback(callback,err,null);collection.find({user:username},{dbName:options["dbName"]}).toArray(function(err,documents){if(err!=null)return handleCallback(callback,err,null);finalOptions.upsert=true;collection.update({user:username},{$set:{user:username,pwd:userPassword}},finalOptions,function(err,results,full){if(count==0&&err)return handleCallback(callback,null,[{user:username,pwd:userPassword}]);if(err)return handleCallback(callback,err,null);handleCallback(callback,null,[{user:username,pwd:userPassword}])})})});return}if(err)return handleCallback(callback,err);handleCallback(callback,err,r)})};var _executeAuthRemoveUserCommand=function(self,username,options,callback){if(typeof options=="function")callback=options,options={};var commandOptions={writeCommand:true};if(options["dbName"])commandOptions.dbName=options["dbName"];var maxTimeMS=typeof options.maxTimeMS=="number"?options.maxTimeMS:null;if(maxTimeMS!=null)commandOptions.maxTimeMS=maxTimeMS;var command={dropUser:username};command=writeConcern(command,self,options);commandOptions.readPreference=CoreReadPreference.primary;self.command(command,commandOptions,function(err,result){if(err&&!err.ok&&err.code==undefined)return handleCallback(callback,{code:-5e3});if(err)return handleCallback(callback,err,null);handleCallback(callback,null,result.ok?true:false)})};Db.prototype.removeUser=function(username,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,1);callback=args.pop();options=args.length?args.shift()||{}:{};_executeAuthRemoveUserCommand(this,username,options,function(err,result){if(err&&err.code==-5e3){var finalOptions=writeConcern(shallowClone(options),self,options);var db=options.dbName?self.db(options.dbName):self;var collection=db.collection(Db.SYSTEM_USER_COLLECTION);collection.findOne({user:username},{},function(err,user){if(user==null)return handleCallback(callback,err,false);collection.remove({user:username},finalOptions,function(err,result){handleCallback(callback,err,true)})});return}if(err)return handleCallback(callback,err);handleCallback(callback,err,result)})};Db.prototype.authenticate=function(username,password,options,callback){if(typeof options=="function")callback=options,options={};var self=this;if(!options.authMechanism){options.authMechanism="DEFAULT"}else if(options.authMechanism!="GSSAPI"&&options.authMechanism!="MONGODB-CR"&&options.authMechanism!="MONGODB-X509"&&options.authMechanism!="SCRAM-SHA-1"&&options.authMechanism!="PLAIN"){return handleCallback(callback,new MongoError("only GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism"))}var authdb=options.authdb?options.authdb:options.dbName;authdb=options.authSource?options.authSource:authdb;authdb=authdb?authdb:this.databaseName;var _callback=function(err,result){if(self.listeners("authenticated").length>0){self.emit("authenticated",err,result)}handleCallback(callback,err,result)};var authMechanism=options.authMechanism||"";authMechanism=authMechanism.toUpperCase();if(authMechanism=="MONGODB-CR"){this.s.topology.auth("mongocr",authdb,username,password,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}else if(authMechanism=="PLAIN"){this.s.topology.auth("plain",authdb,username,password,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}else if(authMechanism=="MONGODB-X509"){this.s.topology.auth("x509",authdb,username,password,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}else if(authMechanism=="SCRAM-SHA-1"){this.s.topology.auth("scram-sha-1",authdb,username,password,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}else if(authMechanism=="GSSAPI"){if(process.platform=="win32"){this.s.topology.auth("sspi",authdb,username,password,options,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}else{this.s.topology.auth("gssapi",authdb,username,password,options,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}}else if(authMechanism=="DEFAULT"){this.s.topology.auth("default",authdb,username,password,function(err,result){if(err)return handleCallback(callback,err,false);_callback(null,true)})}else{handleCallback(callback,new MongoError(f("authentication mechanism %s not supported",options.authMechanism),false))}};Db.prototype.logout=function(options,callback){var args=Array.prototype.slice.call(arguments,0);callback=args.pop();options=args.length?args.shift()||{}:{};var cmd={logout:1};options.onAll=true;if(this.s.authSource)options.dbName=this.s.authSource;this.command(cmd,options,function(err,result){if(err)return handleCallback(callback,err,false);handleCallback(callback,null,true)})};var getReadPreference=function(options,db){if(options.readPreference)return options;if(db.readPreference)options.readPreference=db.readPreference;return options};Db.prototype.indexInformation=function(name,options,callback){if(typeof callback==="undefined"){if(typeof options==="undefined"){callback=name;name=null}else{callback=options}options={}}var full=options["full"]==null?false:options["full"];var self=this;var processResults=function(indexes){var info={};for(var i=0;i<indexes.length;i++){var index=indexes[i];info[index.name]=[];for(var name in index.key){info[index.name].push([name,index.key[name]])}}return info};this.collection(name).listIndexes().toArray(function(err,indexes){if(err)return callback(toError(err));if(!Array.isArray(indexes))return handleCallback(callback,null,[]);if(full)return handleCallback(callback,null,indexes);handleCallback(callback,null,processResults(indexes))})};var createCreateIndexCommand=function(db,name,fieldOrSpec,options){var indexParameters=parseIndexOptions(fieldOrSpec);var fieldHash=indexParameters.fieldHash;var keys=indexParameters.keys;var indexName=typeof options.name=="string"?options.name:indexParameters.name;var selector={ns:db.databaseName+"."+name,key:fieldHash,name:indexName};var finalUnique=options==null||"object"===typeof options?false:options;options=options==null||typeof options=="boolean"?{}:options;var keysToOmit=Object.keys(selector);for(var optionName in options){if(keysToOmit.indexOf(optionName)==-1){selector[optionName]=options[optionName]}}if(selector["unique"]==null)selector["unique"]=finalUnique;var removeKeys=["w","wtimeout","j","fsync","readPreference"];for(var i=0;i<removeKeys.length;i++){delete selector[removeKeys[i]]}return selector};var createIndexUsingCreateIndexes=function(self,name,fieldOrSpec,options,callback){var indexParameters=parseIndexOptions(fieldOrSpec);var indexName=typeof options.name=="string"?options.name:indexParameters.name;var indexes=[{name:indexName,key:indexParameters.fieldHash}];var keysToOmit=Object.keys(indexes[0]);for(var optionName in options){if(keysToOmit.indexOf(optionName)==-1){indexes[0][optionName]=options[optionName]}var removeKeys=["w","wtimeout","j","fsync","readPreference"];for(var i=0;i<removeKeys.length;i++){delete indexes[0][removeKeys[i]]}}var cmd={createIndexes:name,indexes:indexes};cmd=writeConcern(cmd,self,options);self.command(cmd,options,function(err,result){if(err)return handleCallback(callback,err,null);if(result.ok==0)return handleCallback(callback,toError(result),null);handleCallback(callback,null,indexName)})};var validateDatabaseName=function(databaseName){if(typeof databaseName!=="string")throw new MongoError("database name must be a string");if(databaseName.length===0)throw new MongoError("database name cannot be the empty string");if(databaseName=="$external")return;var invalidChars=[" ",".","$","/","\\"];for(var i=0;i<invalidChars.length;i++){if(databaseName.indexOf(invalidChars[i])!=-1)throw new MongoError("database names cannot contain the character '"+invalidChars[i]+"'")}};var writeConcern=function(target,db,options){if(options.w!=null||options.j!=null||options.fsync!=null){var opts={};if(options.w)opts.w=options.w;if(options.wtimeout)opts.wtimeout=options.wtimeout;if(options.j)opts.j=options.j;if(options.fsync)opts.fsync=options.fsync;target.writeConcern=opts}else if(db.writeConcern.w!=null||db.writeConcern.j!=null||db.writeConcern.fsync!=null){target.writeConcern=db.writeConcern}return target};var createListener=function(self,e,object){var listener=function(err){if(e!="error"){object.emit(e,err,self)}};return listener};Db.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";Db.SYSTEM_INDEX_COLLECTION="system.indexes";Db.SYSTEM_PROFILE_COLLECTION="system.profile";Db.SYSTEM_USER_COLLECTION="system.users";Db.SYSTEM_COMMAND_COLLECTION="$cmd";Db.SYSTEM_JS_COLLECTION="system.js";module.exports=Db}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(Buffer){"use strict";var checkCollectionName=__webpack_require__(122).checkCollectionName,ObjectID=__webpack_require__(114).BSON.ObjectID,Long=__webpack_require__(114).BSON.Long,Code=__webpack_require__(114).BSON.Code,f=__webpack_require__(52).format,AggregationCursor=__webpack_require__(158),MongoError=__webpack_require__(114).MongoError,shallowClone=__webpack_require__(122).shallowClone,isObject=__webpack_require__(122).isObject,toError=__webpack_require__(122).toError,normalizeHintField=__webpack_require__(122).normalizeHintField,handleCallback=__webpack_require__(122).handleCallback,decorateCommand=__webpack_require__(122).decorateCommand,formattedOrderClause=__webpack_require__(122).formattedOrderClause,ReadPreference=__webpack_require__(94),CoreReadPreference=__webpack_require__(114).ReadPreference,CommandCursor=__webpack_require__(123),Cursor=__webpack_require__(97),unordered=__webpack_require__(159),ordered=__webpack_require__(160);var Collection=function(db,topology,dbName,name,pkFactory,options){checkCollectionName(name);var self=this;var internalHint=null;var opts=options!=null&&"object"===typeof options?options:{};var slaveOk=options==null||options.slaveOk==null?db.slaveOk:options.slaveOk;var serializeFunctions=options==null||options.serializeFunctions==null?db.serializeFunctions:options.serializeFunctions;var raw=options==null||options.raw==null?db.raw:options.raw;var readPreference=null;var collectionHint=null;var namespace=f("%s.%s",dbName,name);if(options&&options.readPreference){readPreference=options.readPreference}else if(db.options.readPreference){readPreference=db.options.readPreference}pkFactory=pkFactory==null?ObjectID:pkFactory;this.s={pkFactory:pkFactory,db:db,topology:topology,dbName:dbName,options:options,namespace:namespace,readPreference:readPreference,raw:raw,slaveOk:slaveOk,serializeFunctions:serializeFunctions,internalHint:internalHint,collectionHint:collectionHint,name:name}};Object.defineProperty(Collection.prototype,"collectionName",{enumerable:true,get:function(){return this.s.name}});Object.defineProperty(Collection.prototype,"namespace",{enumerable:true,get:function(){return this.s.namespace}});Object.defineProperty(Collection.prototype,"writeConcern",{enumerable:true,get:function(){var ops={};if(this.s.options.w!=null)ops.w=this.s.options.w;if(this.s.options.j!=null)ops.j=this.s.options.j;if(this.s.options.fsync!=null)ops.fsync=this.s.options.fsync;if(this.s.options.wtimeout!=null)ops.wtimeout=this.s.options.wtimeout;return ops}});Object.defineProperty(Collection.prototype,"hint",{enumerable:true,get:function(){return this.s.collectionHint},set:function(v){this.s.collectionHint=normalizeHintField(v)}});Collection.prototype.find=function(){var options,args=Array.prototype.slice.call(arguments,0),has_callback=typeof args[args.length-1]==="function",has_weird_callback=typeof args[0]==="function",callback=has_callback?args.pop():has_weird_callback?args.shift():null,len=args.length,selector=len>=1?args[0]:{},fields=len>=2?args[1]:undefined;if(len===1&&has_weird_callback){selector={};options=args[0]}if(len===2&&!Array.isArray(fields)){var fieldKeys=Object.keys(fields);var is_option=false;for(var i=0;i<fieldKeys.length;i++){if(testForFields[fieldKeys[i]]!=null){is_option=true;break}}if(is_option){options=fields;fields=undefined}else{options={}}}else if(len===2&&Array.isArray(fields)&&!Array.isArray(fields[0])){var newFields={};for(var i=0;i<fields.length;i++){newFields[fields[i]]=1}fields=newFields}if(3===len){options=args[2]}selector=selector==null?{}:selector;var object=selector;if(Buffer.isBuffer(object)){var object_size=object[0]|object[1]<<8|object[2]<<16|object[3]<<24;

if(object_size!=object.length){var error=new Error("query selector raw message size does not match message header size ["+object.length+"] != ["+object_size+"]");error.name="MongoError";throw error}}var object=fields;if(Buffer.isBuffer(object)){var object_size=object[0]|object[1]<<8|object[2]<<16|object[3]<<24;if(object_size!=object.length){var error=new Error("query fields raw message size does not match message header size ["+object.length+"] != ["+object_size+"]");error.name="MongoError";throw error}}if(selector instanceof ObjectID||selector!=null&&selector._bsontype=="ObjectID"){selector={_id:selector}}if(options&&options.fields&&!Buffer.isBuffer(options.fields)){fields={};if(Array.isArray(options.fields)){if(!options.fields.length){fields["_id"]=1}else{for(var i=0,l=options.fields.length;i<l;i++){fields[options.fields[i]]=1}}}else{fields=options.fields}}if(!options)options={};var newOptions={};for(var key in options){newOptions[key]=options[key]}newOptions.skip=len>3?args[2]:options.skip?options.skip:0;newOptions.limit=len>3?args[3]:options.limit?options.limit:0;newOptions.raw=options.raw!=null&&typeof options.raw==="boolean"?options.raw:this.s.raw;newOptions.hint=options.hint!=null?normalizeHintField(options.hint):this.s.collectionHint;newOptions.timeout=len==5?args[4]:typeof options.timeout==="undefined"?undefined:options.timeout;newOptions.slaveOk=options.slaveOk!=null?options.slaveOk:this.s.db.slaveOk;newOptions=getReadPreference(this,newOptions,this.s.db,this);if(newOptions.readPreference!=null&&(newOptions.readPreference!="primary"||newOptions.readPreference.mode!="primary")){newOptions.slaveOk=true}if(selector!=null&&typeof selector!="object"){throw new MongoError("query selector must be an object")}var findCommand={find:this.s.namespace,limit:newOptions.limit,skip:newOptions.skip,query:selector};if(typeof newOptions.awaitdata=="boolean"){newOptions.awaitData=newOptions.awaitdata}if(typeof newOptions.timeout=="boolean")newOptions.noCursorTimeout=newOptions.timeout;for(var name in newOptions){if(newOptions[name]!=null)findCommand[name]=newOptions[name]}var formatFields=function(fields){var object={};if(Array.isArray(fields)){for(var i=0;i<fields.length;i++){if(Array.isArray(fields[i])){object[fields[i][0]]=fields[i][1]}else{object[fields[i][0]]=1}}}else{object=fields}return object};if(fields)findCommand.fields=formatFields(fields);newOptions.db=this.s.db;if(newOptions.raw==null&&this.s.raw)newOptions.raw=this.s.raw;if(findCommand.sort)findCommand.sort=formattedOrderClause(findCommand.sort);if(typeof callback=="function")return handleCallback(callback,null,this.s.topology.cursor(this.s.namespace,findCommand,newOptions));return this.s.topology.cursor(this.s.namespace,findCommand,newOptions)};Collection.prototype.insertOne=function(doc,options,callback){if(typeof options=="function")callback=options,options={};if(Array.isArray(doc))return callback(new MongoError("doc parameter must be an object"));insertDocuments(this,[doc],options,function(err,r){if(err)return callback(err);r.insertedCount=r.result.n;r.insertedId=doc._id;callback(null,r)})};Collection.prototype.insertMany=function(docs,options,callback){if(typeof options=="function")callback=options,options={};if(!Array.isArray(docs))return callback(new MongoError("docs parameter must be an array of documents"));insertDocuments(this,docs,options,function(err,r){if(err)return callback(err);r.insertedCount=r.result.n;var ids=[];for(var i=0;i<docs.length;i++){if(docs[i]._id)ids.push(docs[i]._id)}r.insertedIds=ids;callback(null,r)})};Collection.prototype.bulkWrite=function(operations,options,callback){if(typeof options=="function")callback=options,options={};if(typeof callback!="function")throw new MongoError("bulkWrite must have a callback function specified");if(!Array.isArray(operations))throw new MongoError("operations must be an array of documents");var bulk=options.ordered==true||options.ordered==null?this.initializeOrderedBulkOp():this.initializeUnorderedBulkOp();for(var i=0;i<operations.length;i++){bulk.raw(operations[i])}var finalOptions=writeConcern(shallowClone(options),this.s.db,this,options);var writeCon=finalOptions.writeConcern?finalOptions.writeConcern:{};bulk.execute(writeCon,function(err,r){r.insertedCount=r.nInserted;r.matchedCount=r.nMatched;r.modifiedCount=r.nModified||0;r.deletedCount=r.nRemoved;r.upsertedCount=r.getUpsertedIds().length;r.upsertedIds={};r.insertedIds={};var inserted=r.getInsertedIds();for(var i=0;i<inserted.length;i++){r.insertedIds[inserted[i].index]=inserted[i]._id}var upserted=r.getUpsertedIds();for(var i=0;i<upserted.length;i++){r.upsertedIds[upserted[i].index]=upserted[i]._id}callback(null,r)})};var insertDocuments=function(self,docs,options,callback){if(typeof options=="function")callback=options,options={};options=options||{};docs=Array.isArray(docs)?docs:[docs];var finalOptions=writeConcern(shallowClone(options),self.s.db,self,options);if(typeof finalOptions.checkKeys!="boolean")finalOptions.checkKeys=true;if(options.keepGoing==true)finalOptions.ordered=false;finalOptions["serializeFunctions"]=options["serializeFunctions"]||self.s.serializeFunctions;for(var i=0;i<docs.length;i++){if(docs[i]._id==null)docs[i]._id=self.s.pkFactory.createPk()}self.s.topology.insert(self.s.namespace,docs,finalOptions,function(err,result){if(callback==null)return;if(err)return handleCallback(callback,err);if(result==null)return handleCallback(callback,null,null);if(result.result.code)return handleCallback(callback,toError(result.result));if(result.result.writeErrors)return handleCallback(callback,toError(result.result.writeErrors[0]));result.ops=docs;handleCallback(callback,null,result)})};Collection.prototype.insert=function(docs,options,callback){return insertDocuments(this,docs,options,callback)};Collection.prototype.updateOne=function(filter,update,options,callback){if(typeof options=="function")callback=options,options={};options=shallowClone(options);options.multi=false;updateDocuments(this,filter,update,options,function(err,r){if(err)return callback(err);r.matchedCount=r.result.n;r.modifiedCount=r.result.nModified!=null?r.result.nModified:r.result.n;r.upsertedId=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?r.result.upserted[0]:null;r.upsertedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length?r.result.upserted.length:0;callback(null,r)})};Collection.prototype.replaceOne=function(filter,update,options,callback){if(typeof options=="function")callback=options,options={};options=shallowClone(options);options.multi=false;updateDocuments(this,filter,update,options,function(err,r){if(err)return callback(err);r.matchedCount=r.result.n;r.modifiedCount=r.result.nModified!=null?r.result.nModified:r.result.n;r.upsertedId=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?r.result.upserted[0]:null;r.upsertedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length?r.result.upserted.length:0;callback(null,r)})};Collection.prototype.updateMany=function(filter,update,options,callback){if(typeof options=="function")callback=options,options={};options=shallowClone(options);options.multi=true;updateDocuments(this,filter,update,options,function(err,r){if(err)return callback(err);r.matchedCount=r.result.n;r.modifiedCount=r.result.nModified!=null?r.result.nModified:r.result.n;r.upsertedId=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?r.result.upserted[0]:null;r.upsertedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length?r.result.upserted.length:0;callback(null,r)})};var updateDocuments=function(self,selector,document,options,callback){if("function"===typeof options)callback=options,options=null;if(options==null)options={};if(!("function"===typeof callback))callback=null;if(selector==null||typeof selector!="object")return callback(toError("selector must be a valid JavaScript object"));if(document==null||typeof document!="object")return callback(toError("document must be a valid JavaScript object"));var finalOptions=writeConcern(shallowClone(options),self.s.db,self,options);finalOptions["serializeFunctions"]=options["serializeFunctions"]||self.s.serializeFunctions;var op={q:selector,u:document};if(options.upsert)op.upsert=true;if(options.multi)op.multi=true;self.s.topology.update(self.s.namespace,[op],finalOptions,function(err,result){if(callback==null)return;if(err)return handleCallback(callback,err,null);if(result==null)return handleCallback(callback,null,null);if(result.result.code)return handleCallback(callback,toError(result.result));if(result.result.writeErrors)return handleCallback(callback,toError(result.result.writeErrors[0]));handleCallback(callback,null,result)})};Collection.prototype.update=function(selector,document,options,callback){return updateDocuments(this,selector,document,options,callback)};Collection.prototype.deleteOne=function(filter,options,callback){if(typeof options=="function")callback=options,options={};var options=shallowClone(options);options.single=true;removeDocuments(this,filter,options,function(err,r){if(err)return callback(err);r.deletedCount=r.result.n;callback(null,r)})};Collection.prototype.removeOne=Collection.prototype.deleteOne;Collection.prototype.deleteMany=function(filter,options,callback){if(typeof options=="function")callback=options,options={};var options=shallowClone(options);options.single=false;removeDocuments(this,filter,options,function(err,r){if(err)return callback(err);r.deletedCount=r.result.n;callback(null,r)})};Collection.prototype.removeMany=Collection.prototype.deleteMany;var removeDocuments=function(self,selector,options,callback){if(typeof options=="function"){callback=options,options={}}else if(typeof selector==="function"){callback=selector;options={};selector={}}options=options||{};var finalOptions=writeConcern(shallowClone(options),self.s.db,self,options);if(selector==null)selector={};var op={q:selector,limit:0};if(options.single)op.limit=1;self.s.topology.remove(self.s.namespace,[op],finalOptions,function(err,result){if(callback==null)return;if(err)return handleCallback(callback,err,null);if(result==null)return handleCallback(callback,null,null);if(result.result.code)return handleCallback(callback,toError(result.result));if(result.result.writeErrors)return handleCallback(callback,toError(result.result.writeErrors[0]));handleCallback(callback,null,result)})};Collection.prototype.remove=function(selector,options,callback){return removeDocuments(this,selector,options,callback)};Collection.prototype.save=function(doc,options,callback){if(typeof options=="function")callback=options,options={};options=options||{};var finalOptions=writeConcern(shallowClone(options),this.s.db,this,options);if(doc._id!=null){finalOptions.upsert=true;return updateDocuments(this,{_id:doc._id},doc,finalOptions,callback)}insertDocuments(this,[doc],options,function(err,r){if(callback==null)return;if(doc==null)return handleCallback(callback,null,null);if(err)return handleCallback(callback,err,null);handleCallback(callback,null,r)})};Collection.prototype.findOne=function(){var self=this;var args=Array.prototype.slice.call(arguments,0);var callback=args.pop();var cursor=this.find.apply(this,args).limit(-1).batchSize(1);cursor.next(function(err,item){if(err!=null)return handleCallback(callback,toError(err),null);handleCallback(callback,null,item)})};Collection.prototype.rename=function(newName,opt,callback){var self=this;if(typeof opt=="function")callback=opt,opt={};checkCollectionName(newName);var renameCollection=f("%s.%s",this.s.dbName,this.s.name);var toCollection=f("%s.%s",this.s.dbName,newName);var dropTarget=typeof opt.dropTarget=="boolean"?opt.dropTarget:false;var cmd={renameCollection:renameCollection,to:toCollection,dropTarget:dropTarget};self.s.db.admin().command(cmd,opt,function(err,doc){if(err)return handleCallback(callback,err,null);if(doc.errmsg)return handleCallback(callback,toError(doc),null);try{return handleCallback(callback,null,new Collection(self.s.db,self.s.topology,self.s.dbName,newName,self.s.pkFactory,self.s.options))}catch(err){return handleCallback(callback,toError(err),null)}})};Collection.prototype.drop=function(callback){this.s.db.dropCollection(this.s.name,callback)};Collection.prototype.options=function(callback){var self=this;this.s.db.listCollections({name:this.s.name}).toArray(function(err,collections){if(err)return handleCallback(callback,err);if(collections.length==0)return handleCallback(callback,new MongoError(f("collection %s not found",self.s.namespace)));handleCallback(callback,err,collections[0].options||null)})};Collection.prototype.isCapped=function(callback){this.options(function(err,document){if(err)return handleCallback(callback,err);handleCallback(callback,null,document&&document.capped)})};Collection.prototype.createIndex=function(fieldOrSpec,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();options=args.length?args.shift()||{}:{};options=typeof callback==="function"?options:callback;options=options==null?{}:options;this.s.db.createIndex(this.s.name,fieldOrSpec,options,callback)};Collection.prototype.createIndexes=function(indexSpecs,callback){for(var i=0;i<indexSpecs.length;i++){if(indexSpecs[i].name==null){var keys=[];for(var name in indexSpecs[i].key){keys.push(f("%s_%s",name,indexSpecs[i].key[name]))}indexSpecs[i].name=keys.join("_")}}this.s.db.command({createIndexes:this.s.name,indexes:indexSpecs},callback)};Collection.prototype.dropIndex=function(indexName,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();options=args.length?args.shift()||{}:{};var cmd={deleteIndexes:this.s.name,index:indexName};this.s.db.command(cmd,options,function(err,result){if(typeof callback!="function")return;if(err)return handleCallback(callback,err,null);handleCallback(callback,null,result)})};Collection.prototype.dropIndexes=function(callback){this.dropIndex("*",function(err,result){if(err)return handleCallback(callback,err,false);handleCallback(callback,null,true)})};Collection.prototype.dropAllIndexes=Collection.prototype.dropIndexes;Collection.prototype.reIndex=function(options,callback){if(typeof options=="function")callback=options,options={};options=options||{};var cmd={reIndex:this.s.name};this.s.db.command(cmd,options,function(err,result){if(callback==null)return;if(err)return handleCallback(callback,err,null);handleCallback(callback,null,result.ok?true:false)})};Collection.prototype.listIndexes=function(options){options=options||{};options=shallowClone(options);options.cursorFactory=CommandCursor;if(this.s.db.serverConfig.capabilities().hasListIndexesCommand){var cursor=options.batchSize?{batchSize:options.batchSize}:{};var command={listIndexes:this.s.name,cursor:cursor};return this.s.topology.cursor(f("%s.$cmd",this.s.dbName),command,options)}var ns=f("%s.system.indexes",this.s.dbName);return this.s.topology.cursor(ns,{find:ns,query:{ns:this.s.namespace}},options)};Collection.prototype.ensureIndex=function(fieldOrSpec,options,callback){if(typeof options=="function")callback=options,options={};options=options||{};this.s.db.ensureIndex(this.s.name,fieldOrSpec,options,callback)};Collection.prototype.indexExists=function(indexes,callback){this.indexInformation(function(err,indexInformation){if(err!=null)return handleCallback(callback,err,null);if(!Array.isArray(indexes))return handleCallback(callback,null,indexInformation[indexes]!=null);for(var i=0;i<indexes.length;i++){if(indexInformation[indexes[i]]==null){return handleCallback(callback,null,false)}}return handleCallback(callback,null,true)})};Collection.prototype.indexInformation=function(options,callback){var args=Array.prototype.slice.call(arguments,0);callback=args.pop();options=args.length?args.shift()||{}:{};this.s.db.indexInformation(this.s.name,options,callback)};Collection.prototype.count=function(query,options,callback){var args=Array.prototype.slice.call(arguments,0);callback=args.pop();query=args.length?args.shift()||{}:{};options=args.length?args.shift()||{}:{};var skip=options.skip;var limit=options.limit;var hint=options.hint;var maxTimeMS=options.maxTimeMS;var cmd={count:this.s.name,query:query,fields:null};if(typeof skip=="number")cmd.skip=skip;if(typeof limit=="number")cmd.limit=limit;if(hint)options.hint=hint;options=getReadPreference(this,options,this.s.db,this);this.s.db.command(cmd,options,function(err,result){if(err)return handleCallback(callback,err);handleCallback(callback,null,result.n)})};Collection.prototype.distinct=function(key,query,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();query=args.length?args.shift()||{}:{};options=args.length?args.shift()||{}:{};var maxTimeMS=options.maxTimeMS;var cmd={distinct:this.s.name,key:key,query:query};options=getReadPreference(this,options,this.s.db,this);this.s.db.command(cmd,options,function(err,result){if(err)return handleCallback(callback,err);handleCallback(callback,null,result.values)})};Collection.prototype.indexes=function(callback){this.s.db.indexInformation(this.s.name,{full:true},callback)};Collection.prototype.stats=function(options,callback){var args=Array.prototype.slice.call(arguments,0);callback=args.pop();options=args.length?args.shift()||{}:{};var commandObject={collStats:this.s.name};if(options["scale"]!=null)commandObject["scale"]=options["scale"];options=getReadPreference(this,options,this.s.db,this);this.s.db.command(commandObject,options,callback)};Collection.prototype.findOneAndDelete=function(filter,options,callback){if(typeof options=="function")callback=options,options={};this.findAndModify(filter,options.sort,null,{fields:options.projection,remove:true},callback)};Collection.prototype.findOneAndReplace=function(filter,replacement,options,callback){if(typeof options=="function")callback=options,options={};this.findAndModify(filter,options.sort,replacement,{fields:options.projection,update:true,"new":typeof options.returnOriginal=="boolean"?!options.returnOriginal:false,upsert:typeof options.upsert=="boolean"?options.upsert:false},callback)};Collection.prototype.findOneAndUpdate=function(filter,update,options,callback){if(typeof options=="function")callback=options,options={};this.findAndModify(filter,options.sort,update,{fields:options.projection,update:true,"new":typeof options.returnOriginal=="boolean"?!options.returnOriginal:false,upsert:typeof options.upsert=="boolean"?options.upsert:false},callback)};Collection.prototype.findAndModify=function(query,sort,doc,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();sort=args.length?args.shift()||[]:[];doc=args.length?args.shift():null;options=args.length?args.shift()||{}:{};var queryObject={findandmodify:this.s.name,query:query};sort=formattedOrderClause(sort);if(sort){queryObject.sort=sort}queryObject.new=options.new?true:false;queryObject.remove=options.remove?true:false;queryObject.upsert=options.upsert?true:false;if(options.fields){queryObject.fields=options.fields}if(doc&&!options.remove){queryObject.update=doc}if(options["serializeFunctions"]!=null){options["serializeFunctions"]=options["serializeFunctions"]}else{options["serializeFunctions"]=this.s.serializeFunctions}options.checkKeys=false;this.s.db.command(queryObject,options,function(err,result){if(err)return handleCallback(callback,err,null);return handleCallback(callback,null,result)})};Collection.prototype.findAndRemove=function(query,sort,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();sort=args.length?args.shift()||[]:[];options=args.length?args.shift()||{}:{};options["remove"]=true;this.findAndModify(query,sort,null,options,callback)};Collection.prototype.aggregate=function(pipeline,options,callback){if(Array.isArray(pipeline)){if(typeof options=="function"){callback=options;options={}}if(options==null&&callback==null){options={}}}else{var args=Array.prototype.slice.call(arguments,0);callback=args.pop();var opts=args[args.length-1];options=opts&&(opts.readPreference||opts.explain||opts.cursor||opts.out||opts.maxTimeMS||opts.allowDiskUse)?args.pop():{};pipeline=args}if(typeof options.out=="string"){pipeline.push({$out:options.out})}var command={aggregate:this.s.name,pipeline:pipeline};if(options.allowDiskUse)command.allowDiskUse=options.allowDiskUse;if(typeof options.maxTimeMS=="number")command.maxTimeMS=options.maxTimeMS;options=getReadPreference(this,options,this.s.db,this);if(options.explain)command.explain=options.explain;if(options.cursor!=null&&typeof options.cursor!="object"){throw toError("cursor options must be an object")}options.cursorFactory=AggregationCursor;if(typeof callback!="function"){if(this.s.topology.capabilities().hasAggregationCursor){options.cursor=options.cursor||{batchSize:1e3};command.cursor=options.cursor}if(typeof options.allowDiskUse=="boolean")command.allowDiskUse=options.allowDiskUse;if(typeof options.maxTimeMS=="number")command.maxTimeMS=options.maxTimeMS;return this.s.topology.cursor(this.s.namespace,command,options)}var cursor=null;if(options.cursor){return this.s.topology.cursor(this.s.namespace,command,options)}this.s.db.command(command,options,function(err,result){if(err){handleCallback(callback,err)}else if(result["err"]||result["errmsg"]){handleCallback(callback,toError(result))}else if(typeof result=="object"&&result["serverPipeline"]){handleCallback(callback,null,result["serverPipeline"])}else if(typeof result=="object"&&result["stages"]){handleCallback(callback,null,result["stages"])}else{handleCallback(callback,null,result.result)}})};Collection.prototype.parallelCollectionScan=function(options,callback){var self=this;if(typeof options=="function")callback=options,options={numCursors:1};options.numCursors=options.numCursors||1;options.batchSize=options.batchSize||1e3;options=getReadPreference(this,options,this.s.db,this);var commandObject={parallelCollectionScan:this.s.name,numCursors:options.numCursors};this.s.db.command(commandObject,options,function(err,result){if(err)return handleCallback(callback,err,null);if(result==null)return handleCallback(callback,new Error("no result returned for parallelCollectionScan"),null);var cursors=[];for(var i=0;i<result.cursors.length;i++){var rawId=result.cursors[i].cursor.id;var cursorId=typeof rawId=="number"?Long.fromNumber(rawId):rawId;var cmd={batchSize:options.batchSize,cursorId:cursorId,items:result.cursors[i].cursor.firstBatch};cursors.push(self.s.topology.cursor(self.s.namespace,cursorId,options))}handleCallback(callback,null,cursors)})};Collection.prototype.geoNear=function(x,y,options,callback){var point=typeof x=="object"&&x,args=Array.prototype.slice.call(arguments,point?1:2);callback=args.pop();options=args.length?args.shift()||{}:{};var commandObject={geoNear:this.s.name,near:point||[x,y]};options=getReadPreference(this,options,this.s.db,this);var exclude={readPreference:true,geoNear:true,near:true};commandObject=decorateCommand(commandObject,options,exclude);this.s.db.command(commandObject,options,function(err,res){if(err)return handleCallback(callback,err);if(res.err||res.errmsg)return handleCallback(callback,toError(res));handleCallback(callback,null,res)})};Collection.prototype.geoHaystackSearch=function(x,y,options,callback){var args=Array.prototype.slice.call(arguments,2);callback=args.pop();options=args.length?args.shift()||{}:{};var commandObject={geoSearch:this.s.name,near:[x,y]};commandObject=decorateCommand(commandObject,options,{readPreference:true});options=getReadPreference(this,options,this.s.db,this);this.s.db.command(commandObject,options,function(err,res){if(err)return handleCallback(callback,err);if(res.err||res.errmsg)handleCallback(callback,utils.toError(res));handleCallback(callback,null,res)})};var groupFunction=function(){var c=db[ns].find(condition);var map=new Map;var reduce_function=reduce;while(c.hasNext()){var obj=c.next();var key={};for(var i=0,len=keys.length;i<len;++i){var k=keys[i];key[k]=obj[k]}var aggObj=map.get(key);if(aggObj==null){var newObj=Object.extend({},key);aggObj=Object.extend(newObj,initial);map.put(key,aggObj)}reduce_function(obj,aggObj)}return{result:map.values()}}.toString();Collection.prototype.group=function(keys,condition,initial,reduce,finalize,command,options,callback){var args=Array.prototype.slice.call(arguments,3);callback=args.pop();reduce=args.length?args.shift():null;finalize=args.length?args.shift():null;command=args.length?args.shift():null;options=args.length?args.shift()||{}:{};if(!(typeof finalize=="function")){command=finalize;finalize=null}if(!Array.isArray(keys)&&keys instanceof Object&&typeof keys!=="function"&&!(keys instanceof Code)){keys=Object.keys(keys)}if(typeof reduce==="function"){reduce=reduce.toString()}if(typeof finalize==="function"){finalize=finalize.toString()}command=command==null?true:command;if(command){var reduceFunction=reduce instanceof Code?reduce:new Code(reduce);var selector={group:{ns:this.s.name,$reduce:reduceFunction,cond:condition,initial:initial,out:"inline"}};if(finalize!=null)selector.group["finalize"]=finalize;if("function"===typeof keys||keys instanceof Code){selector.group.$keyf=keys instanceof Code?keys:new Code(keys)}else{var hash={};keys.forEach(function(key){hash[key]=1});selector.group.key=hash}options=getReadPreference(this,options,this.s.db,this);this.s.db.command(selector,options,function(err,result){if(err)return handleCallback(callback,err,null);handleCallback(callback,null,result.retval)})}else{var scope=reduce!=null&&reduce instanceof Code?reduce.scope:{};scope.ns=this.s.name;scope.keys=keys;scope.condition=condition;scope.initial=initial;var groupfn=groupFunction.replace(/ reduce;/,reduce.toString()+";");this.s.db.eval(new Code(groupfn,scope),function(err,results){if(err)return handleCallback(callback,err,null);handleCallback(callback,null,results.result||results)})}};function processScope(scope){if(!isObject(scope)){return scope}var keys=Object.keys(scope);var i=keys.length;var key;var new_scope={};while(i--){key=keys[i];if("function"==typeof scope[key]){new_scope[key]=new Code(String(scope[key]))}else{new_scope[key]=processScope(scope[key])}}return new_scope}Collection.prototype.mapReduce=function(map,reduce,options,callback){var self=this;if("function"===typeof options)callback=options,options={};if(null==options.out){throw new Error("the out option parameter must be defined, see mongodb docs for possible values")}if("function"===typeof map){map=map.toString()}if("function"===typeof reduce){reduce=reduce.toString()}if("function"===typeof options.finalize){options.finalize=options.finalize.toString()}var mapCommandHash={mapreduce:this.s.name,map:map,reduce:reduce};for(var n in options){if("scope"==n){mapCommandHash[n]=processScope(options[n])}else{mapCommandHash[n]=options[n]}}options=getReadPreference(this,options,this.s.db,this);if(options.readPreference!=false&&options.readPreference!="primary"&&options["out"]&&(options["out"].inline!=1&&options["out"]!="inline")){options.readPreference="primary"}this.s.db.command(mapCommandHash,{readPreference:options.readPreference},function(err,result){if(err)return handleCallback(callback,err);if(1!=result.ok||result.err||result.errmsg){return handleCallback(callback,toError(result))}var stats={};if(result.timeMillis)stats["processtime"]=result.timeMillis;if(result.counts)stats["counts"]=result.counts;if(result.timing)stats["timing"]=result.timing;if(result.results){if(options["verbose"]==null||!options["verbose"]){return handleCallback(callback,null,result.results)}return handleCallback(callback,null,result.results,stats)}var collection=null;if(result.result!=null&&typeof result.result=="object"){var doc=result.result;collection=self.s.db.db(doc.db).collection(doc.collection)}else{collection=self.s.db.collection(result.result)}if(options["verbose"]==null||!options["verbose"]){return handleCallback(callback,err,collection)}handleCallback(callback,err,collection,stats)})};Collection.prototype.initializeUnorderedBulkOp=function(options){return unordered(this.s.topology,this,options)};Collection.prototype.initializeOrderedBulkOp=function(options){return ordered(this.s.topology,this,options)};var writeConcern=function(target,db,col,options){if(options.w!=null||options.j!=null||options.fsync!=null){var opts={};if(options.w!=null)opts.w=options.w;if(options.wtimeout!=null)opts.wtimeout=options.wtimeout;if(options.j!=null)opts.j=options.j;if(options.fsync!=null)opts.fsync=options.fsync;target.writeConcern=opts}else if(col.writeConcern.w!=null||col.writeConcern.j!=null||col.writeConcern.fsync!=null){target.writeConcern=col.writeConcern}else if(db.writeConcern.w!=null||db.writeConcern.j!=null||db.writeConcern.fsync!=null){target.writeConcern=db.writeConcern}return target};var getReadPreference=function(self,options,db,coll){var r=null;if(options.readPreference){r=options.readPreference}else if(self.s.readPreference){r=self.s.readPreference}else if(db.readPreference){r=db.readPreference}if(r instanceof ReadPreference){options.readPreference=new CoreReadPreference(r.mode,r.tags)}else if(typeof r=="string"){options.readPreference=new CoreReadPreference(r)}return options};var testForFields={limit:1,sort:1,fields:1,skip:1,hint:1,explain:1,snapshot:1,timeout:1,tailable:1,tailableRetryInterval:1,numberOfRetries:1,awaitdata:1,awaitData:1,exhaust:1,batchSize:1,returnKey:1,maxScan:1,min:1,max:1,showDiskLoc:1,comment:1,raw:1,readPreference:1,partial:1,read:1,dbName:1,oplogReplay:1,connection:1,maxTimeMS:1,transforms:1};module.exports=Collection}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process){"use strict";var EventEmitter=__webpack_require__(120).EventEmitter,inherits=__webpack_require__(52).inherits,CServer=__webpack_require__(114).Server,Cursor=__webpack_require__(97),f=__webpack_require__(52).format,ServerCapabilities=__webpack_require__(125).ServerCapabilities,Store=__webpack_require__(125).Store,MongoError=__webpack_require__(114).MongoError,shallowClone=__webpack_require__(122).shallowClone;var Server=function(host,port,options){options=options||{};if(!(this instanceof Server))return new Server(host,port,options);EventEmitter.call(this);var self=this;var storeOptions={force:false,bufferMaxEntries:-1};var store=options.store||new Store(self,storeOptions);if(host.indexOf("/")!=-1){if(port!=null&&typeof port=="object"){options=port;port=null}}else if(port==null){throw new MongoError("port must be specified")}var clonedOptions=shallowClone(options);clonedOptions.host=host;clonedOptions.port=port;var reconnect=typeof options.auto_reconnect=="boolean"?options.auto_reconnect:true;reconnect=typeof options.autoReconnect=="boolean"?options.autoReconnect:reconnect;var emitError=typeof options.emitError=="boolean"?options.emitError:true;var poolSize=typeof options.poolSize=="number"?options.poolSize:5;if(options.socketOptions){if(options.socketOptions.connectTimeoutMS){this.connectTimeoutMS=options.socketOptions.connectTimeoutMS;clonedOptions.connectionTimeout=options.socketOptions.connectTimeoutMS}if(options.socketOptions.socketTimeoutMS){clonedOptions.socketTimeout=options.socketOptions.socketTimeoutMS}if(typeof options.socketOptions.keepAlive=="number"){clonedOptions.keepAliveInitialDelay=options.socketOptions.keepAlive;clonedOptions.keepAlive=true}if(typeof options.socketOptions.noDelay=="boolean"){clonedOptions.noDelay=options.socketOptions.noDelay}}clonedOptions.cursorFactory=Cursor;clonedOptions.reconnect=reconnect;clonedOptions.emitError=emitError;clonedOptions.size=poolSize;if(clonedOptions.sslCA)clonedOptions.ca=clonedOptions.sslCA;if(typeof clonedOptions.sslValidate=="boolean")clonedOptions.rejectUnauthorized=clonedOptions.sslValidate;if(clonedOptions.sslKey)clonedOptions.key=clonedOptions.sslKey;if(clonedOptions.sslCert)clonedOptions.cert=clonedOptions.sslCert;if(clonedOptions.sslPass)clonedOptions.passphrase=clonedOptions.sslPass;clonedOptions.disconnectHandler=store;var server=new CServer(clonedOptions);var sCapabilities=null;this.s={
server:server,sCapabilities:null,clonedOptions:clonedOptions,reconnect:reconnect,emitError:emitError,poolSize:poolSize,storeOptions:storeOptions,store:store,host:host,port:port,options:options};Object.defineProperty(this,"bson",{enumerable:true,get:function(){return self.s.server.bson}});Object.defineProperty(this,"isMasterDoc",{enumerable:true,get:function(){return self.s.server.lastIsMaster()}});Object.defineProperty(this,"poolSize",{enumerable:true,get:function(){return self.s.server.connections().length}});Object.defineProperty(this,"autoReconnect",{enumerable:true,get:function(){return self.s.reconnect}});Object.defineProperty(this,"host",{enumerable:true,get:function(){return self.s.host}});Object.defineProperty(this,"port",{enumerable:true,get:function(){return self.s.port}})};inherits(Server,EventEmitter);Server.prototype.parserType=function(){return this.s.server.parserType()};Server.prototype.connect=function(db,_options,callback){var self=this;if("function"===typeof _options)callback=_options,_options={};if(_options==null)_options={};if(!("function"===typeof callback))callback=null;self.s.options=_options;self.s.storeOptions.bufferMaxEntries=db.bufferMaxEntries;var connectErrorHandler=function(event){return function(err){var events=["timeout","error","close"];events.forEach(function(e){self.s.server.removeListener(e,connectHandlers[e])});self.s.server.removeListener("connect",connectErrorHandler);try{callback(err)}catch(err){process.nextTick(function(){throw err})}}};var errorHandler=function(event){return function(err){if(event!="error"){self.emit(event,err)}}};var reconnectHandler=function(err){self.emit("reconnect",self);self.s.store.execute()};var destroyHandler=function(){self.s.store.flush()};var connectHandler=function(){["timeout","error","close"].forEach(function(e){self.s.server.removeAllListeners(e)});self.s.server.once("timeout",errorHandler("timeout"));self.s.server.once("error",errorHandler("error"));self.s.server.once("close",errorHandler("close"));self.s.server.once("destroy",destroyHandler);self.emit("open",null,self);try{callback(null,self)}catch(err){process.nextTick(function(){throw err})}};var connectHandlers={timeout:connectErrorHandler("timeout"),error:connectErrorHandler("error"),close:connectErrorHandler("close")};self.s.server.once("timeout",connectHandlers.timeout);self.s.server.once("error",connectHandlers.error);self.s.server.once("close",connectHandlers.close);self.s.server.once("connect",connectHandler);self.s.server.on("reconnect",reconnectHandler);self.s.server.connect(_options)};Server.prototype.capabilities=function(){if(this.s.sCapabilities)return this.s.sCapabilities;this.s.sCapabilities=new ServerCapabilities(this.s.server.lastIsMaster());return this.s.sCapabilities};Server.prototype.command=function(ns,cmd,options,callback){this.s.server.command(ns,cmd,options,callback)};Server.prototype.insert=function(ns,ops,options,callback){this.s.server.insert(ns,ops,options,callback)};Server.prototype.update=function(ns,ops,options,callback){this.s.server.update(ns,ops,options,callback)};Server.prototype.remove=function(ns,ops,options,callback){this.s.server.remove(ns,ops,options,callback)};Server.prototype.isConnected=function(){return this.s.server.isConnected()};Server.prototype.cursor=function(ns,cmd,options){options.disconnectHandler=this.s.store;return this.s.server.cursor(ns,cmd,options)};Server.prototype.setBSONParserType=function(type){return this.s.server.setBSONParserType(type)};Server.prototype.lastIsMaster=function(){return this.s.server.lastIsMaster()};Server.prototype.close=function(forceClosed){this.s.server.destroy();if(forceClosed==true){this.s.storeOptions.force=forceClosed;this.s.store.flush()}};Server.prototype.auth=function(){var args=Array.prototype.slice.call(arguments,0);this.s.server.auth.apply(this.s.server,args)};Server.prototype.connections=function(){return this.s.server.connections()};module.exports=Server}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var EventEmitter=__webpack_require__(120).EventEmitter,inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,Server=__webpack_require__(91),Mongos=__webpack_require__(93),Cursor=__webpack_require__(97),ReadPreference=__webpack_require__(94),MongoCR=__webpack_require__(114).MongoCR,MongoError=__webpack_require__(114).MongoError,ServerCapabilities=__webpack_require__(125).ServerCapabilities,Store=__webpack_require__(125).Store,CServer=__webpack_require__(114).Server,CReplSet=__webpack_require__(114).ReplSet,CoreReadPreference=__webpack_require__(114).ReadPreference,shallowClone=__webpack_require__(122).shallowClone;var ReplSet=function(servers,options){if(!(this instanceof ReplSet))return new ReplSet(servers,options);options=options||{};var self=this;for(var i=0;i<servers.length;i++){if(!(servers[i]instanceof Server)){throw new MongoError("all seed list instances must be of the Server type")}}var storeOptions={force:false,bufferMaxEntries:-1};var store=options.store||new Store(self,storeOptions);EventEmitter.call(this);var tag=options.tag;var seedlist=servers.map(function(x){return{host:x.host,port:x.port}});var finalOptions=shallowClone(options);finalOptions.size=typeof options.poolSize=="number"?options.poolSize:5;finalOptions.reconnect=typeof options.auto_reconnect=="boolean"?options.auto_reconnect:true;finalOptions.emitError=typeof options.emitError=="boolean"?options.emitError:true;finalOptions.cursorFactory=Cursor;finalOptions.disconnectHandler=store;if(options.socketOptions){if(options.socketOptions.connectTimeoutMS){this.connectTimeoutMS=options.socketOptions.connectTimeoutMS;finalOptions.connectionTimeout=options.socketOptions.connectTimeoutMS}if(options.socketOptions.socketTimeoutMS){finalOptions.socketTimeout=options.socketOptions.socketTimeoutMS}}var replicaSet=options.replicaSet||options.rs_name;finalOptions.setName=replicaSet;var debug=typeof options.debug=="boolean"?options.debug:false;if(debug){finalOptions.debug=debug}if(options.socketOptions&&typeof options.socketOptions.keepAlive=="number"){finalOptions.keepAlive=true;if(typeof options.socketOptions.keepAlive=="number"){finalOptions.keepAliveInitialDelay=options.socketOptions.keepAlive}}if(options.socketOptions&&typeof options.socketOptions.connectionTimeout=="number"){finalOptions.connectionTimeout=options.socketOptions.connectionTimeout}if(options.socketOptions&&typeof options.socketOptions.socketTimeout=="number"){finalOptions.socketTimeout=options.socketOptions.socketTimeout}if(options.socketOptions&&typeof options.socketOptions.noDelay=="boolean"){finalOptions.noDelay=options.socketOptions.noDelay}if(typeof options.secondaryAcceptableLatencyMS=="number"){finalOptions.acceptableLatency=options.secondaryAcceptableLatencyMS}if(options.connectWithNoPrimary==true){finalOptions.secondaryOnlyConnectionAllowed=true}finalOptions.disconnectHandler=store;if(options.sslCA)finalOptions.ca=options.sslCA;if(typeof options.sslValidate=="boolean")finalOptions.rejectUnauthorized=options.sslValidate;if(options.sslKey)finalOptions.key=options.sslKey;if(options.sslCert)finalOptions.cert=options.sslCert;if(options.sslPass)finalOptions.passphrase=options.sslPass;var replset=new CReplSet(seedlist,finalOptions);var sCapabilities=null;replset.addAuthProvider("mongocr",new MongoCR);replset.on("reconnect",function(){self.emit("reconnect");store.execute()});this.s={replset:replset,sCapabilities:null,tag:options.tag,storeOptions:storeOptions,clonedOptions:finalOptions,store:store,options:options};if(debug){Object.defineProperty(this,"replset",{enumerable:true,get:function(){return replset}})}Object.defineProperty(this,"isMasterDoc",{enumerable:true,get:function(){return replset.lastIsMaster()}});Object.defineProperty(this,"bson",{enumerable:true,get:function(){return replset.bson}});Object.defineProperty(this,"haInterval",{enumerable:true,get:function(){return replset.haInterval}})};inherits(ReplSet,EventEmitter);var translateReadPreference=function(options){if(typeof options.readPreference=="string"){options.readPreference=new CoreReadPreference(options.readPreference)}else if(options.readPreference instanceof ReadPreference){options.readPreference=new CoreReadPreference(options.readPreference.mode,options.readPreference.tags)}return options};ReplSet.prototype.parserType=function(){return this.s.replset.parserType()};ReplSet.prototype.connect=function(db,_options,callback){var self=this;if("function"===typeof _options)callback=_options,_options={};if(_options==null)_options={};if(!("function"===typeof callback))callback=null;self.s.options=_options;self.s.storeOptions.bufferMaxEntries=db.bufferMaxEntries;var errorHandler=function(event){return function(err){if(event!="error"){self.emit(event,err)}}};var connectHandler=function(){["timeout","error","close"].forEach(function(e){self.s.replset.removeAllListeners(e)});self.s.replset.once("timeout",errorHandler("timeout"));self.s.replset.once("error",errorHandler("error"));self.s.replset.once("close",errorHandler("close"));var relay=function(event){return function(t,server){self.emit(event,t,server)}};var replsetRelay=function(event){return function(t,server){self.emit(event,t,server.lastIsMaster(),server)}};var relayHa=function(t,state){self.emit("ha",t,state);if(t=="start"){self.emit("ha_connect",t,state)}else if(t=="end"){self.emit("ha_ismaster",t,state)}};self.s.replset.on("joined",replsetRelay("joined"));self.s.replset.on("left",relay("left"));self.s.replset.on("ping",relay("ping"));self.s.replset.on("ha",relayHa);self.s.replset.on("fullsetup",function(topology){self.emit("fullsetup",null,self)});self.s.replset.on("all",function(topology){self.emit("all",null,self)});self.emit("open",null,self);try{callback(null,self)}catch(err){process.nextTick(function(){throw err})}};var connectErrorHandler=function(event){return function(err){["timeout","error","close"].forEach(function(e){self.s.replset.removeListener(e,connectErrorHandler)});self.s.replset.removeListener("connect",connectErrorHandler);self.s.replset.destroy();try{callback(err)}catch(err){if(!self.s.replset.isConnected())process.nextTick(function(){throw err})}}};self.s.replset.once("timeout",connectErrorHandler("timeout"));self.s.replset.once("error",connectErrorHandler("error"));self.s.replset.once("close",connectErrorHandler("close"));self.s.replset.once("connect",connectHandler);self.s.replset.connect(_options)};ReplSet.prototype.capabilities=function(){if(this.s.sCapabilities)return this.s.sCapabilities;this.s.sCapabilities=new ServerCapabilities(this.s.replset.lastIsMaster());return this.s.sCapabilities};ReplSet.prototype.command=function(ns,cmd,options,callback){options=translateReadPreference(options);this.s.replset.command(ns,cmd,options,callback)};ReplSet.prototype.insert=function(ns,ops,options,callback){this.s.replset.insert(ns,ops,options,callback)};ReplSet.prototype.update=function(ns,ops,options,callback){this.s.replset.update(ns,ops,options,callback)};ReplSet.prototype.remove=function(ns,ops,options,callback){this.s.replset.remove(ns,ops,options,callback)};ReplSet.prototype.isConnected=function(){return this.s.replset.isConnected()};ReplSet.prototype.setBSONParserType=function(type){return this.s.replset.setBSONParserType(type)};ReplSet.prototype.cursor=function(ns,cmd,options){options=translateReadPreference(options);options.disconnectHandler=this.s.store;return this.s.replset.cursor(ns,cmd,options)};ReplSet.prototype.lastIsMaster=function(){return this.s.replset.lastIsMaster()};ReplSet.prototype.close=function(forceClosed){var self=this;this.s.replset.destroy();if(forceClosed==true){this.s.storeOptions.force=forceClosed;this.s.store.flush()}var events=["timeout","error","close","joined","left"];events.forEach(function(e){self.removeAllListeners(e)})};ReplSet.prototype.auth=function(){var args=Array.prototype.slice.call(arguments,0);this.s.replset.auth.apply(this.s.replset,args)};ReplSet.prototype.connections=function(){return this.s.replset.connections()};module.exports=ReplSet}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var EventEmitter=__webpack_require__(120).EventEmitter,inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,ServerCapabilities=__webpack_require__(125).ServerCapabilities,MongoCR=__webpack_require__(114).MongoCR,CMongos=__webpack_require__(114).Mongos,Cursor=__webpack_require__(97),Server=__webpack_require__(91),Store=__webpack_require__(125).Store,shallowClone=__webpack_require__(122).shallowClone;var Mongos=function(servers,options){if(!(this instanceof Mongos))return new Mongos(servers,options);options=options||{};var self=this;for(var i=0;i<servers.length;i++){if(!(servers[i]instanceof Server)){throw new MongoError("all seed list instances must be of the Server type")}}var storeOptions={force:false,bufferMaxEntries:-1};var store=options.store||new Store(self,storeOptions);EventEmitter.call(this);var tag=options.tag;var seedlist=servers.map(function(x){return{host:x.host,port:x.port}});var finalOptions=shallowClone(options);finalOptions.size=typeof options.poolSize=="number"?options.poolSize:5;finalOptions.reconnect=typeof options.auto_reconnect=="boolean"?options.auto_reconnect:true;finalOptions.emitError=typeof options.emitError=="boolean"?options.emitError:true;finalOptions.cursorFactory=Cursor;finalOptions.disconnectHandler=store;if(options.socketOptions){if(options.socketOptions.connectTimeoutMS){this.connectTimeoutMS=options.socketOptions.connectTimeoutMS;finalOptions.connectionTimeout=options.socketOptions.connectTimeoutMS}if(options.socketOptions.socketTimeoutMS)finalOptions.socketTimeout=options.socketOptions.socketTimeoutMS}var debug=typeof options.debug=="boolean"?options.debug:false;if(debug){finalOptions.debug=debug}if(options.socketOptions&&typeof options.socketOptions.keepAlive=="number"){finalOptions.keepAlive=true;if(typeof options.socketOptions.keepAlive=="number"){finalOptions.keepAliveInitialDelay=options.socketOptions.keepAlive}}if(options.socketOptions&&typeof options.socketOptions.connectionTimeout=="number"){finalOptions.connectionTimeout=options.socketOptions.connectionTimeout}if(options.socketOptions&&typeof options.socketOptions.socketTimeout=="number"){finalOptions.socketTimeout=options.socketOptions.socketTimeout}if(options.socketOptions&&typeof options.socketOptions.noDelay=="boolean"){finalOptions.noDelay=options.socketOptions.noDelay}if(typeof options.secondaryAcceptableLatencyMS=="number"){finalOptions.acceptableLatency=options.secondaryAcceptableLatencyMS}finalOptions.disconnectHandler=store;var mongos=new CMongos(seedlist,finalOptions);var sCapabilities=null;mongos.addAuthProvider("mongocr",new MongoCR);this.s={mongos:mongos,sCapabilities:sCapabilities,debug:debug,storeOptions:storeOptions,clonedOptions:finalOptions,store:store,options:options};Object.defineProperty(this,"isMasterDoc",{enumerable:true,get:function(){return self.s.mongos.lastIsMaster()}});Object.defineProperty(this,"numberOfConnectedServers",{enumerable:true,get:function(){return self.s.mongos.connectedServers().length}});Object.defineProperty(this,"bson",{enumerable:true,get:function(){return self.s.mongos.bson}});Object.defineProperty(this,"haInterval",{enumerable:true,get:function(){return self.s.mongos.haInterval}})};inherits(Mongos,EventEmitter);Mongos.prototype.connect=function(db,_options,callback){var self=this;if("function"===typeof _options)callback=_options,_options={};if(_options==null)_options={};if(!("function"===typeof callback))callback=null;self.s.options=_options;self.s.storeOptions.bufferMaxEntries=db.bufferMaxEntries;var connectErrorHandler=function(event){return function(err){var events=["timeout","error","close"];events.forEach(function(e){self.removeListener(e,connectErrorHandler)});self.s.mongos.removeListener("connect",connectErrorHandler);try{callback(err)}catch(err){process.nextTick(function(){throw err})}}};var errorHandler=function(event){return function(err){if(event!="error"){self.emit(event,err)}}};var reconnectHandler=function(err){self.emit("reconnect");self.s.store.execute()};var connectHandler=function(){["timeout","error","close"].forEach(function(e){self.s.mongos.removeAllListeners(e)});self.s.mongos.once("timeout",errorHandler("timeout"));self.s.mongos.once("error",errorHandler("error"));self.s.mongos.once("close",errorHandler("close"));var relay=function(event){return function(t,server){self.emit(event,t,server)}};self.s.mongos.on("joined",relay("joined"));self.s.mongos.on("left",relay("left"));self.s.mongos.on("fullsetup",relay("fullsetup"));self.emit("open",null,self);try{callback(null,self)}catch(err){process.nextTick(function(){throw err})}};self.s.mongos.once("timeout",connectErrorHandler("timeout"));self.s.mongos.once("error",connectErrorHandler("error"));self.s.mongos.once("close",connectErrorHandler("close"));self.s.mongos.once("connect",connectHandler);self.s.mongos.on("reconnect",reconnectHandler);self.s.mongos.connect(_options)};Mongos.prototype.parserType=function(){return this.s.mongos.parserType()};Mongos.prototype.capabilities=function(){if(this.s.sCapabilities)return this.s.sCapabilities;this.s.sCapabilities=new ServerCapabilities(this.s.mongos.lastIsMaster());return this.s.sCapabilities};Mongos.prototype.command=function(ns,cmd,options,callback){this.s.mongos.command(ns,cmd,options,callback)};Mongos.prototype.insert=function(ns,ops,options,callback){this.s.mongos.insert(ns,ops,options,function(e,m){callback(e,m)})};Mongos.prototype.update=function(ns,ops,options,callback){this.s.mongos.update(ns,ops,options,callback)};Mongos.prototype.remove=function(ns,ops,options,callback){this.s.mongos.remove(ns,ops,options,callback)};Mongos.prototype.isConnected=function(){return this.s.mongos.isConnected()};Mongos.prototype.cursor=function(ns,cmd,options){options.disconnectHandler=this.s.store;return this.s.mongos.cursor(ns,cmd,options)};Mongos.prototype.setBSONParserType=function(type){return this.s.mongos.setBSONParserType(type)};Mongos.prototype.lastIsMaster=function(){return this.s.mongos.lastIsMaster()};Mongos.prototype.close=function(forceClosed){this.s.mongos.destroy();if(forceClosed==true){this.s.storeOptions.force=forceClosed;this.s.store.flush()}};Mongos.prototype.auth=function(){var args=Array.prototype.slice.call(arguments,0);this.s.mongos.auth.apply(this.s.mongos,args)};Mongos.prototype.connections=function(){return this.s.mongos.connections()};module.exports=Mongos}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var ReadPreference=function(mode,tags){if(!(this instanceof ReadPreference))return new ReadPreference(mode,tags);this._type="ReadPreference";this.mode=mode;this.tags=tags};ReadPreference.isValid=function(_mode){return _mode==ReadPreference.PRIMARY||_mode==ReadPreference.PRIMARY_PREFERRED||_mode==ReadPreference.SECONDARY||_mode==ReadPreference.SECONDARY_PREFERRED||_mode==ReadPreference.NEAREST||_mode==true||_mode==false||_mode==null};ReadPreference.prototype.isValid=function(mode){var _mode=typeof mode=="string"?mode:this.mode;return ReadPreference.isValid(_mode)};ReadPreference.prototype.toObject=function(){var object={mode:this.mode};if(this.tags!=null){object["tags"]=this.tags}return object};ReadPreference.PRIMARY="primary";ReadPreference.PRIMARY_PREFERRED="primaryPreferred";ReadPreference.SECONDARY="secondary";ReadPreference.SECONDARY_PREFERRED="secondaryPreferred";ReadPreference.NEAREST="nearest";module.exports=ReadPreference},function(module,exports,__webpack_require__){(function(process){"use strict";var Chunk=__webpack_require__(96),ObjectID=__webpack_require__(114).BSON.ObjectID,Buffer=__webpack_require__(53).Buffer,fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()),timers=__webpack_require__(61),f=__webpack_require__(52).format,util=__webpack_require__(52),MongoError=__webpack_require__(114).MongoError,inherits=util.inherits,Duplex=__webpack_require__(316).Duplex||__webpack_require__(333).Duplex;var REFERENCE_BY_FILENAME=0,REFERENCE_BY_ID=1;var GridStore=function GridStore(db,id,filename,mode,options){if(!(this instanceof GridStore))return new GridStore(db,id,filename,mode,options);var self=this;this.db=db;if(typeof options==="undefined")options={};if(typeof mode==="undefined"){mode=filename;filename=undefined}else if(typeof mode=="object"){options=mode;mode=filename;filename=undefined}if(id instanceof ObjectID){this.referenceBy=REFERENCE_BY_ID;this.fileId=id;this.filename=filename}else if(typeof filename=="undefined"){this.referenceBy=REFERENCE_BY_FILENAME;this.filename=id;if(mode.indexOf("w")!=null){this.fileId=new ObjectID}}else{this.referenceBy=REFERENCE_BY_ID;this.fileId=id;this.filename=filename}this.mode=mode==null?"r":mode;this.options=options||{};this.isOpen=false;this.root=this.options["root"]==null?GridStore.DEFAULT_ROOT_COLLECTION:this.options["root"];this.position=0;this.readPreference=this.options.readPreference||"primary";this.writeConcern=_getWriteConcern(db,this.options);this.internalChunkSize=this.options["chunkSize"]==null?Chunk.DEFAULT_CHUNK_SIZE:this.options["chunkSize"];Object.defineProperty(this,"chunkSize",{enumerable:true,get:function(){return this.internalChunkSize},set:function(value){if(!(this.mode[0]=="w"&&this.position==0&&this.uploadDate==null)){this.internalChunkSize=this.internalChunkSize}else{this.internalChunkSize=value}}});Object.defineProperty(this,"md5",{enumerable:true,get:function(){return this.internalMd5}});Object.defineProperty(this,"chunkNumber",{enumerable:true,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})};GridStore.prototype.open=function(callback){if(this.mode!="w"&&this.mode!="w+"&&this.mode!="r"){callback(new MongoError("Illegal mode "+this.mode),null);return}var self=this;var writeConcern=_getWriteConcern(this.db,this.options);if(self.mode=="w"||self.mode=="w+"){var collection=self.collection();collection.ensureIndex([["filename",1]],writeConcern,function(err,index){var chunkCollection=self.chunkCollection();chunkCollection.ensureIndex([["files_id",1],["n",1]],writeConcern,function(err,index){_open(self,writeConcern,function(err,r){if(err)return callback(err);self.isOpen=true;callback(err,r)})})})}else{_open(self,writeConcern,function(err,r){if(err)return callback(err);self.isOpen=true;callback(err,r)})}};GridStore.prototype.eof=function(){return this.position==this.length?true:false};GridStore.prototype.getc=function(callback){var self=this;if(self.eof()){callback(null,null)}else if(self.currentChunk.eof()){nthChunk(self,self.currentChunk.chunkNumber+1,function(err,chunk){self.currentChunk=chunk;self.position=self.position+1;callback(err,self.currentChunk.getc())})}else{self.position=self.position+1;callback(null,self.currentChunk.getc())}};GridStore.prototype.puts=function(string,callback){var finalString=string.match(/\n$/)==null?string+"\n":string;this.write(finalString,callback)};GridStore.prototype.stream=function(){return new GridStoreStream(this)};GridStore.prototype.write=function write(data,close,callback){return _writeNormal(this,data,close,callback)};GridStore.prototype.destroy=function destroy(){if(!this.writable)return;this.readable=false;if(this.writable){this.writable=false;this._q.length=0;this.emit("close")}};GridStore.prototype.writeFile=function(file,callback){var self=this;if(typeof file==="string"){fs.open(file,"r",function(err,fd){if(err)return callback(err);self.writeFile(fd,callback)});return}self.open(function(err,self){if(err)return callback(err,self);fs.fstat(file,function(err,stats){if(err)return callback(err,self);var offset=0;var index=0;var numberOfChunksLeft=Math.min(stats.size/self.chunkSize);var writeChunk=function(){fs.read(file,self.chunkSize,offset,"binary",function(err,data,bytesRead){if(err)return callback(err,self);offset=offset+bytesRead;var chunk=new Chunk(self,{n:index++},self.writeConcern);chunk.write(data,function(err,chunk){if(err)return callback(err,self);chunk.save({},function(err,result){if(err)return callback(err,self);self.position=self.position+data.length;self.currentChunk=chunk;if(offset>=stats.size){fs.close(file);self.close(function(err,result){if(err)return callback(err,self);return callback(null,self)})}else{return process.nextTick(writeChunk)}})})})};process.nextTick(writeChunk)})})};GridStore.prototype.close=function(callback){var self=this;if(self.mode[0]=="w"){var options=self.writeConcern;if(self.currentChunk!=null&&self.currentChunk.position>0){self.currentChunk.save({},function(err,chunk){if(err&&typeof callback=="function")return callback(err);self.collection(function(err,files){if(err&&typeof callback=="function")return callback(err);if(self.uploadDate!=null){files.remove({_id:self.fileId},self.writeConcern,function(err,collection){if(err&&typeof callback=="function")return callback(err);buildMongoObject(self,function(err,mongoObject){if(err){if(typeof callback=="function")return callback(err);else throw err}files.save(mongoObject,options,function(err){if(typeof callback=="function")callback(err,mongoObject)})})})}else{self.uploadDate=new Date;buildMongoObject(self,function(err,mongoObject){if(err){if(typeof callback=="function")return callback(err);else throw err}files.save(mongoObject,options,function(err){if(typeof callback=="function")callback(err,mongoObject)})})}})})}else{self.collection(function(err,files){if(err&&typeof callback=="function")return callback(err);self.uploadDate=new Date;buildMongoObject(self,function(err,mongoObject){if(err){if(typeof callback=="function")return callback(err);else throw err}files.save(mongoObject,options,function(err){if(typeof callback=="function")callback(err,mongoObject)})})})}}else if(self.mode[0]=="r"){if(typeof callback=="function")callback(null,null)}else{if(typeof callback=="function")callback(new MongoError(f("Illegal mode %s",self.mode),null))}};GridStore.prototype.chunkCollection=function(callback){if(typeof callback=="function")return this.db.collection(this.root+".chunks",callback);return this.db.collection(this.root+".chunks")};GridStore.prototype.unlink=function(callback){var self=this;deleteChunks(this,function(err){if(err!==null){err.message="at deleteChunks: "+err.message;return callback(err)}self.collection(function(err,collection){if(err!==null){err.message="at collection: "+err.message;return callback(err)}collection.remove({_id:self.fileId},self.writeConcern,function(err){callback(err,self)})})})};GridStore.prototype.collection=function(callback){if(typeof callback=="function")this.db.collection(this.root+".files",callback);return this.db.collection(this.root+".files")};GridStore.prototype.readlines=function(separator,callback){var args=Array.prototype.slice.call(arguments,0);callback=args.pop();separator=args.length?args.shift():"\n";this.read(function(err,data){if(err)return callback(err);var items=data.toString().split(separator);items=items.length>0?items.splice(0,items.length-1):[];for(var i=0;i<items.length;i++){items[i]=items[i]+separator}callback(null,items)})};GridStore.prototype.rewind=function(callback){var self=this;if(this.currentChunk.chunkNumber!=0){if(this.mode[0]=="w"){deleteChunks(self,function(err,gridStore){if(err)return callback(err);self.currentChunk=new Chunk(self,{n:0},self.writeConcern);self.position=0;callback(null,self)})}else{self.currentChunk(0,function(err,chunk){if(err)return callback(err);self.currentChunk=chunk;self.currentChunk.rewind();self.position=0;callback(null,self)})}}else{self.currentChunk.rewind();self.position=0;callback(null,self)}};GridStore.prototype.read=function(length,buffer,callback){var self=this;var args=Array.prototype.slice.call(arguments,0);callback=args.pop();length=args.length?args.shift():null;buffer=args.length?args.shift():null;var finalLength=length==null?self.length-self.position:length;var finalBuffer=buffer==null?new Buffer(finalLength):buffer;finalBuffer._index=buffer!=null&&buffer._index!=null?buffer._index:0;if(self.currentChunk.length()-self.currentChunk.position+finalBuffer._index>=finalLength){var slice=self.currentChunk.readSlice(finalLength-finalBuffer._index);slice.copy(finalBuffer,finalBuffer._index);self.position=self.position+finalBuffer.length;if(finalLength==0&&finalBuffer.length==0)return callback(new MongoError("File does not exist"),null);return callback(null,finalBuffer)}var slice=self.currentChunk.readSlice(self.currentChunk.length()-self.currentChunk.position);slice.copy(finalBuffer,finalBuffer._index);finalBuffer._index+=slice.length;nthChunk(self,self.currentChunk.chunkNumber+1,function(err,chunk){if(err)return callback(err);if(chunk.length()>0){self.currentChunk=chunk;self.read(length,finalBuffer,callback)}else{if(finalBuffer._index>0){callback(null,finalBuffer)}else{callback(new MongoError("no chunks found for file, possibly corrupt"),null)}}})};GridStore.prototype.tell=function(callback){callback(null,this.position)};GridStore.prototype.seek=function(position,seekLocation,callback){var self=this;var args=Array.prototype.slice.call(arguments,1);callback=args.pop();seekLocation=args.length?args.shift():null;if(self.mode!="r"){return callback(new MongoError("seek is only supported for mode r"))}var seekLocationFinal=seekLocation==null?GridStore.IO_SEEK_SET:seekLocation;var finalPosition=position;var targetPosition=0;if(seekLocationFinal==GridStore.IO_SEEK_CUR){targetPosition=self.position+finalPosition}else if(seekLocationFinal==GridStore.IO_SEEK_END){targetPosition=self.length+finalPosition}else{targetPosition=finalPosition}var newChunkNumber=Math.floor(targetPosition/self.chunkSize);if(newChunkNumber!=self.currentChunk.chunkNumber){var seekChunk=function(){nthChunk(self,newChunkNumber,function(err,chunk){self.currentChunk=chunk;self.position=targetPosition;self.currentChunk.position=self.position%self.chunkSize;callback(err,self)})};seekChunk()}else{self.position=targetPosition;self.currentChunk.position=self.position%self.chunkSize;callback(null,self)}};var _open=function(self,options,callback){var collection=self.collection();var query=self.referenceBy==REFERENCE_BY_ID?{_id:self.fileId}:{filename:self.filename};query=null==self.fileId&&self.filename==null?null:query;options.readPreference=self.readPreference;if(query!=null){collection.findOne(query,options,function(err,doc){if(err)return error(err);if(doc!=null){self.fileId=doc._id;self.filename=self.mode=="r"||self.filename==undefined?doc.filename:self.filename;self.contentType=doc.contentType;self.internalChunkSize=doc.chunkSize;self.uploadDate=doc.uploadDate;self.aliases=doc.aliases;self.length=doc.length;self.metadata=doc.metadata;self.internalMd5=doc.md5}else if(self.mode!="r"){self.fileId=self.fileId==null?new ObjectID:self.fileId;self.contentType=GridStore.DEFAULT_CONTENT_TYPE;self.internalChunkSize=self.internalChunkSize==null?Chunk.DEFAULT_CHUNK_SIZE:self.internalChunkSize;self.length=0}else{self.length=0;var txtId=self.fileId instanceof ObjectID?self.fileId.toHexString():self.fileId;return error(new MongoError(f("file with id %s not opened for writing",self.referenceBy==REFERENCE_BY_ID?txtId:self.filename)),self)}if(self.mode=="r"){nthChunk(self,0,options,function(err,chunk){if(err)return error(err);self.currentChunk=chunk;self.position=0;callback(null,self)})}else if(self.mode=="w"){deleteChunks(self,options,function(err,result){if(err)return error(err);self.currentChunk=new Chunk(self,{n:0},self.writeConcern);self.contentType=self.options["content_type"]==null?self.contentType:self.options["content_type"];self.internalChunkSize=self.options["chunk_size"]==null?self.internalChunkSize:self.options["chunk_size"];self.metadata=self.options["metadata"]==null?self.metadata:self.options["metadata"];self.aliases=self.options["aliases"]==null?self.aliases:self.options["aliases"];self.position=0;callback(null,self);

})}else if(self.mode=="w+"){nthChunk(self,lastChunkNumber(self),options,function(err,chunk){if(err)return error(err);self.currentChunk=chunk==null?new Chunk(self,{n:0},self.writeConcern):chunk;self.currentChunk.position=self.currentChunk.data.length();self.metadata=self.options["metadata"]==null?self.metadata:self.options["metadata"];self.aliases=self.options["aliases"]==null?self.aliases:self.options["aliases"];self.position=self.length;callback(null,self)})}})}else{self.fileId=null==self.fileId?new ObjectID:self.fileId;self.contentType=GridStore.DEFAULT_CONTENT_TYPE;self.internalChunkSize=self.internalChunkSize==null?Chunk.DEFAULT_CHUNK_SIZE:self.internalChunkSize;self.length=0;var collection2=self.chunkCollection();if(self.mode=="w"){deleteChunks(self,options,function(err,result){if(err)return error(err);self.currentChunk=new Chunk(self,{n:0},self.writeConcern);self.contentType=self.options["content_type"]==null?self.contentType:self.options["content_type"];self.internalChunkSize=self.options["chunk_size"]==null?self.internalChunkSize:self.options["chunk_size"];self.metadata=self.options["metadata"]==null?self.metadata:self.options["metadata"];self.aliases=self.options["aliases"]==null?self.aliases:self.options["aliases"];self.position=0;callback(null,self)})}else if(self.mode=="w+"){nthChunk(self,lastChunkNumber(self),options,function(err,chunk){if(err)return error(err);self.currentChunk=chunk==null?new Chunk(self,{n:0},self.writeConcern):chunk;self.currentChunk.position=self.currentChunk.data.length();self.metadata=self.options["metadata"]==null?self.metadata:self.options["metadata"];self.aliases=self.options["aliases"]==null?self.aliases:self.options["aliases"];self.position=self.length;callback(null,self)})}}function error(err){if(error.err)return;callback(error.err=err)}};var writeBuffer=function(self,buffer,close,callback){if(typeof close==="function"){callback=close;close=null}var finalClose=typeof close=="boolean"?close:false;if(self.mode!="w"){callback(new MongoError(f("file with id %s not opened for writing",self.referenceBy==REFERENCE_BY_ID?self.referenceBy:self.filename)),null)}else{if(self.currentChunk.position+buffer.length>=self.chunkSize){var previousChunkNumber=self.currentChunk.chunkNumber;var leftOverDataSize=self.chunkSize-self.currentChunk.position;var firstChunkData=buffer.slice(0,leftOverDataSize);var leftOverData=buffer.slice(leftOverDataSize);var chunksToWrite=[self.currentChunk.write(firstChunkData)];while(leftOverData.length>=self.chunkSize){var newChunk=new Chunk(self,{n:previousChunkNumber+1},self.writeConcern);var firstChunkData=leftOverData.slice(0,self.chunkSize);leftOverData=leftOverData.slice(self.chunkSize);previousChunkNumber=previousChunkNumber+1;newChunk.write(firstChunkData);chunksToWrite.push(newChunk)}self.currentChunk=new Chunk(self,{n:previousChunkNumber+1},self.writeConcern);if(leftOverData.length>0)self.currentChunk.write(leftOverData);self.position=self.position+buffer.length;var numberOfChunksToWrite=chunksToWrite.length;for(var i=0;i<chunksToWrite.length;i++){chunksToWrite[i].save({},function(err,result){if(err)return callback(err);numberOfChunksToWrite=numberOfChunksToWrite-1;if(numberOfChunksToWrite<=0){if(finalClose){return self.close(function(err,result){callback(err,self)})}return callback(null,self)}})}}else{self.position=self.position+buffer.length;self.currentChunk.write(buffer);if(finalClose){return self.close(function(err,result){callback(err,self)})}return callback(null,self)}}};var buildMongoObject=function(self,callback){var mongoObject={_id:self.fileId,filename:self.filename,contentType:self.contentType,length:self.position?self.position:0,chunkSize:self.chunkSize,uploadDate:self.uploadDate,aliases:self.aliases,metadata:self.metadata};var md5Command={filemd5:self.fileId,root:self.root};self.db.command(md5Command,function(err,results){if(err)return callback(err);mongoObject.md5=results.md5;callback(null,mongoObject)})};var nthChunk=function(self,chunkNumber,options,callback){if(typeof options=="function"){callback=options;options={}}options=options||self.writeConcern;options.readPreference=self.readPreference;self.chunkCollection().findOne({files_id:self.fileId,n:chunkNumber},options,function(err,chunk){if(err)return callback(err);var finalChunk=chunk==null?{}:chunk;callback(null,new Chunk(self,finalChunk,self.writeConcern))})};var lastChunkNumber=function(self){return Math.floor((self.length?self.length-1:0)/self.chunkSize)};var deleteChunks=function(self,options,callback){if(typeof options=="function"){callback=options;options={}}options=options||self.writeConcern;if(self.fileId!=null){self.chunkCollection().remove({files_id:self.fileId},options,function(err,result){if(err)return callback(err,false);callback(null,true)})}else{callback(null,true)}};GridStore.DEFAULT_ROOT_COLLECTION="fs";GridStore.DEFAULT_CONTENT_TYPE="binary/octet-stream";GridStore.IO_SEEK_SET=0;GridStore.IO_SEEK_CUR=1;GridStore.IO_SEEK_END=2;GridStore.exist=function(db,fileIdObject,rootCollection,options,callback){var args=Array.prototype.slice.call(arguments,2);callback=args.pop();rootCollection=args.length?args.shift():null;options=args.length?args.shift():{};var readPreference=options.readPreference||"primary";var rootCollectionFinal=rootCollection!=null?rootCollection:GridStore.DEFAULT_ROOT_COLLECTION;db.collection(rootCollectionFinal+".files",function(err,collection){if(err)return callback(err);var query=typeof fileIdObject=="string"||Object.prototype.toString.call(fileIdObject)=="[object RegExp]"?{filename:fileIdObject}:{_id:fileIdObject};if(fileIdObject!=null&&typeof fileIdObject=="object"){query=fileIdObject}collection.findOne(query,{readPreference:readPreference},function(err,item){if(err)return callback(err);callback(null,item==null?false:true)})})};GridStore.list=function(db,rootCollection,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();rootCollection=args.length?args.shift():null;options=args.length?args.shift():{};if(rootCollection!=null&&typeof rootCollection=="object"){options=rootCollection;rootCollection=null}var readPreference=options.readPreference||"primary";var byId=options["id"]!=null?options["id"]:false;var rootCollectionFinal=rootCollection!=null?rootCollection:GridStore.DEFAULT_ROOT_COLLECTION;var items=[];db.collection(rootCollectionFinal+".files",function(err,collection){if(err)return callback(err);collection.find({},{readPreference:readPreference},function(err,cursor){if(err)return callback(err);cursor.each(function(err,item){if(item!=null){items.push(byId?item._id:item.filename)}else{callback(err,items)}})})})};GridStore.read=function(db,name,length,offset,options,callback){var args=Array.prototype.slice.call(arguments,2);callback=args.pop();length=args.length?args.shift():null;offset=args.length?args.shift():null;options=args.length?args.shift():null;new GridStore(db,name,"r",options).open(function(err,gridStore){if(err)return callback(err);if(offset&&offset>=gridStore.length)return callback("offset larger than size of file",null);if(length&&length>gridStore.length)return callback("length is larger than the size of the file",null);if(offset&&length&&offset+length>gridStore.length)return callback("offset and length is larger than the size of the file",null);if(offset!=null){gridStore.seek(offset,function(err,gridStore){if(err)return callback(err);gridStore.read(length,callback)})}else{gridStore.read(length,callback)}})};GridStore.readlines=function(db,name,separator,options,callback){var args=Array.prototype.slice.call(arguments,2);callback=args.pop();separator=args.length?args.shift():null;options=args.length?args.shift():null;var finalSeperator=separator==null?"\n":separator;new GridStore(db,name,"r",options).open(function(err,gridStore){if(err)return callback(err);gridStore.readlines(finalSeperator,callback)})};GridStore.unlink=function(db,names,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,2);callback=args.pop();options=args.length?args.shift():{};var writeConcern=_getWriteConcern(db,options);if(names.constructor==Array){var tc=0;for(var i=0;i<names.length;i++){++tc;GridStore.unlink(db,names[i],options,function(result){if(--tc==0){callback(null,self)}})}}else{new GridStore(db,names,"w",options).open(function(err,gridStore){if(err)return callback(err);deleteChunks(gridStore,function(err,result){if(err)return callback(err);gridStore.collection(function(err,collection){if(err)return callback(err);collection.remove({_id:gridStore.fileId},writeConcern,function(err,result){callback(err,self)})})})})}};var _writeNormal=function(self,data,close,callback){if(Buffer.isBuffer(data)){return writeBuffer(self,data,close,callback)}else{return writeBuffer(self,new Buffer(data,"binary"),close,callback)}};var _setWriteConcernHash=function(options){var finalOptions={};if(options.w!=null)finalOptions.w=options.w;if(options.journal==true)finalOptions.j=options.journal;if(options.j==true)finalOptions.j=options.j;if(options.fsync==true)finalOptions.fsync=options.fsync;if(options.wtimeout!=null)finalOptions.wtimeout=options.wtimeout;return finalOptions};var _getWriteConcern=function(self,options){var finalOptions={w:1};options=options||{};if(options.w!=null||typeof options.j=="boolean"||typeof options.journal=="boolean"||typeof options.fsync=="boolean"){finalOptions=_setWriteConcernHash(options)}else if(options.safe!=null&&typeof options.safe=="object"){finalOptions=_setWriteConcernHash(options.safe)}else if(typeof options.safe=="boolean"){finalOptions={w:options.safe?1:0}}else if(self.options.w!=null||typeof self.options.j=="boolean"||typeof self.options.journal=="boolean"||typeof self.options.fsync=="boolean"){finalOptions=_setWriteConcernHash(self.options)}else if(self.safe&&(self.safe.w!=null||typeof self.safe.j=="boolean"||typeof self.safe.journal=="boolean"||typeof self.safe.fsync=="boolean")){finalOptions=_setWriteConcernHash(self.safe)}else if(typeof self.safe=="boolean"){finalOptions={w:self.safe?1:0}}if(finalOptions.w<1&&(finalOptions.journal==true||finalOptions.j==true||finalOptions.fsync==true))throw new MongoError("No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true");return finalOptions};var GridStoreStream=function(gs){var self=this;Duplex.call(this);this.gs=gs;this.endCalled=false;this.totalBytesToRead=this.gs.length-this.gs.position;this.seekPosition=this.gs.position};inherits(GridStoreStream,Duplex);GridStoreStream.prototype._pipe=GridStoreStream.prototype.pipe;GridStoreStream.prototype.pipe=function(destination){var self=this;self.gs.open(function(err){if(err)return self.emit("error",err);self.totalBytesToRead=self.gs.length-self.gs.position;self._pipe.apply(self,[destination])})};GridStoreStream.prototype._read=function(n){var self=this;var length=self.gs.length<self.gs.chunkSize?self.gs.length-self.seekPosition:self.gs.chunkSize;self.gs.read(length,function(err,buffer){if(self.endCalled||buffer==null)return self.push(null);if(buffer.length<=self.totalBytesToRead){self.totalBytesToRead=self.totalBytesToRead-buffer.length;self.push(buffer)}else if(buffer.length>self.totalBytesToRead){self.push(buffer.slice(0,buffer._index));self.totalBytesToRead=self.totalBytesToRead-buffer._index}if(self.totalBytesToRead<=0){self.endCalled=true}})};GridStoreStream.prototype.destroy=function(){this.pause();this.endCalled=true;this.gs.close();this.emit("end")};GridStoreStream.prototype.write=function(chunk,encoding,callback){var self=this;if(self.endCalled)return self.emit("error",new MongoError("attempting to write to stream after end called"));if(!self.gs.isOpen){self.gs.open(function(){self.gs.isOpen=true;self.gs.write(chunk,function(){self.emit("drain")})})}else{self.gs.write(chunk,function(){self.emit("drain")})}return false};GridStoreStream.prototype.end=function(chunk,encoding,callback){var self=this;var args=Array.prototype.slice.call(arguments,0);callback=args.pop();chunk=args.length?args.shift():null;encoding=args.length?args.shift():null;self.endCalled=true;if(chunk){self.gs.write(chunk,function(){self.gs.close(function(){if(typeof callback=="function")callback();self.emit("end")})})}self.gs.close(function(){if(typeof callback=="function")callback();self.emit("end")})};module.exports=GridStore}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(Buffer){"use strict";var Binary=__webpack_require__(114).BSON.Binary,ObjectID=__webpack_require__(114).BSON.ObjectID;var Chunk=function(file,mongoObject,writeConcern){if(!(this instanceof Chunk))return new Chunk(file,mongoObject);this.file=file;var self=this;var mongoObjectFinal=mongoObject==null?{}:mongoObject;this.writeConcern=writeConcern||{w:1};this.objectId=mongoObjectFinal._id==null?new ObjectID:mongoObjectFinal._id;this.chunkNumber=mongoObjectFinal.n==null?0:mongoObjectFinal.n;this.data=new Binary;if(mongoObjectFinal.data==null){}else if(typeof mongoObjectFinal.data=="string"){var buffer=new Buffer(mongoObjectFinal.data.length);buffer.write(mongoObjectFinal.data,"binary",0);this.data=new Binary(buffer)}else if(Array.isArray(mongoObjectFinal.data)){var buffer=new Buffer(mongoObjectFinal.data.length);buffer.write(mongoObjectFinal.data.join(""),"binary",0);this.data=new Binary(buffer)}else if(mongoObjectFinal.data._bsontype==="Binary"){this.data=mongoObjectFinal.data}else if(Buffer.isBuffer(mongoObjectFinal.data)){}else{throw Error("Illegal chunk format")}this.internalPosition=0};Chunk.prototype.write=function(data,callback){this.data.write(data,this.internalPosition);this.internalPosition=this.data.length();if(callback!=null)return callback(null,this);return this};Chunk.prototype.read=function(length){length=length==null||length==0?this.length():length;if(this.length()-this.internalPosition+1>=length){var data=this.data.read(this.internalPosition,length);this.internalPosition=this.internalPosition+length;return data}else{return""}};Chunk.prototype.readSlice=function(length){if(this.length()-this.internalPosition>=length){var data=null;if(this.data.buffer!=null){data=this.data.buffer.slice(this.internalPosition,this.internalPosition+length)}else{data=new Buffer(length);length=this.data.readInto(data,this.internalPosition)}this.internalPosition=this.internalPosition+length;return data}else{return null}};Chunk.prototype.eof=function(){return this.internalPosition==this.length()?true:false};Chunk.prototype.getc=function(){return this.read(1)};Chunk.prototype.rewind=function(){this.internalPosition=0;this.data=new Binary};Chunk.prototype.save=function(options,callback){var self=this;if(typeof options=="function"){callback=options;options={}}self.file.chunkCollection(function(err,collection){if(err)return callback(err);var writeOptions={};for(var name in options)writeOptions[name]=options[name];for(var name in self.writeConcern)writeOptions[name]=self.writeConcern[name];collection.remove({_id:self.objectId},writeOptions,function(err,result){if(err)return callback(err);if(self.data.length()>0){self.buildMongoObject(function(mongoObject){var options={forceServerObjectId:true};for(var name in self.writeConcern){options[name]=self.writeConcern[name]}collection.insert(mongoObject,writeOptions,function(err,collection){callback(err,self)})})}else{callback(null,self)}})})};Chunk.prototype.buildMongoObject=function(callback){var mongoObject={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};if(this.objectId!=null)mongoObject._id=this.objectId;callback(mongoObject)};Chunk.prototype.length=function(){return this.data.length()};Object.defineProperty(Chunk.prototype,"position",{enumerable:true,get:function(){return this.internalPosition},set:function(value){this.internalPosition=value}});Chunk.DEFAULT_CHUNK_SIZE=1024*255;module.exports=Chunk}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,toError=__webpack_require__(122).toError,getSingleProperty=__webpack_require__(122).getSingleProperty,formattedOrderClause=__webpack_require__(122).formattedOrderClause,handleCallback=__webpack_require__(122).handleCallback,Logger=__webpack_require__(114).Logger,EventEmitter=__webpack_require__(120).EventEmitter,ReadPreference=__webpack_require__(94),MongoError=__webpack_require__(114).MongoError,Readable=__webpack_require__(316).Readable||__webpack_require__(333).Readable,CoreCursor=__webpack_require__(114).Cursor,Query=__webpack_require__(114).Query,CoreReadPreference=__webpack_require__(114).ReadPreference;var flags=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var Cursor=function(bson,ns,cmd,options,topology,topologyOptions){CoreCursor.apply(this,Array.prototype.slice.call(arguments,0));var self=this;var state=Cursor.INIT;var streamOptions={};var numberOfRetries=options.numberOfRetries||5;var tailableRetryInterval=options.tailableRetryInterval||500;var currentNumberOfRetries=numberOfRetries;var maxTimeMS=null;Readable.call(this,{objectMode:true});this.s={maxTimeMS:null,numberOfRetries:numberOfRetries,tailableRetryInterval:tailableRetryInterval,currentNumberOfRetries:currentNumberOfRetries,state:state,streamOptions:streamOptions,bson:bson,ns:ns,cmd:cmd,options:options,topology:topology,topologyOptions:topologyOptions};this.timeout=self.s.options.noCursorTimeout==true;this.sortValue=self.s.cmd.sort;this.readPreference=self.s.options.readPreference};inherits(Cursor,Readable);for(var name in CoreCursor.prototype){Cursor.prototype[name]=CoreCursor.prototype[name]}Cursor.prototype.filter=function(filter){if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");this.s.cmd.query=filter;return this};Cursor.prototype.addCursorFlag=function(flag,value){if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");if(flags.indexOf(flag)==-1)throw new MongoError(f("flag % not a supported flag %s",flag,flags));if(typeof value!="boolean")throw new MongoError(f("flag % must be a boolean value",flag));this.s.cmd[flag]=value;return this};Cursor.prototype.addQueryModifier=function(name,value){if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");if(name[0]!="$")throw new MongoError(f("%s is not a valid query modifier"));var field=name.substr(1);this.s.cmd[field]=value;if(field=="orderby")this.s.cmd.sort=this.s.cmd[field];return this};Cursor.prototype.comment=function(value){if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");this.s.cmd.comment=value;return this};Cursor.prototype.maxTimeMS=function(value){if(typeof value!="number")throw new MongoError("maxTimeMS must be a number");if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");this.s.maxTimeMS=value;this.s.cmd.maxTimeMS=value;return this};Cursor.prototype.maxTimeMs=Cursor.prototype.maxTimeMS;Cursor.prototype.project=function(value){if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");this.s.cmd.fields=value;return this};Cursor.prototype.sort=function(keyOrList,direction){if(this.s.options.tailable)throw new MongoError("Tailable cursor doesn't support sorting");if(this.s.state==Cursor.CLOSED||this.s.state==Cursor.OPEN||this.isDead())throw new MongoError("Cursor is closed");var order=keyOrList;if(direction!=null){order=[[keyOrList,direction]]}this.s.cmd.sort=order;this.sortValue=order;return this};Cursor.prototype.batchSize=function(value){if(this.s.options.tailable)throw new MongoError("Tailable cursor doesn't support limit");if(this.s.state==Cursor.CLOSED||this.isDead())throw new MongoError("Cursor is closed");if(typeof value!="number")throw new MongoError("batchSize requires an integer");this.s.cmd.batchSize=value;this.setCursorBatchSize(value);return this};Cursor.prototype.limit=function(value){if(this.s.options.tailable)throw new MongoError("Tailable cursor doesn't support limit");if(this.s.state==Cursor.OPEN||this.s.state==Cursor.CLOSED||this.isDead())throw new MongoError("Cursor is closed");if(typeof value!="number")throw new MongoError("limit requires an integer");this.s.cmd.limit=value;this.setCursorLimit(value);return this};Cursor.prototype.skip=function(value){if(this.s.options.tailable)throw new MongoError("Tailable cursor doesn't support skip");if(this.s.state==Cursor.OPEN||this.s.state==Cursor.CLOSED||this.isDead())throw new MongoError("Cursor is closed");if(typeof value!="number")throw new MongoError("skip requires an integer");this.s.cmd.skip=value;this.setCursorSkip(value);return this};Cursor.prototype.nextObject=function(callback){var self=this;if(this.s.state==Cursor.CLOSED||self.isDead())return handleCallback(callback,new MongoError("Cursor is closed"));if(this.s.state==Cursor.INIT&&this.s.cmd.sort){try{this.s.cmd.sort=formattedOrderClause(this.s.cmd.sort)}catch(err){return handleCallback(callback,err)}}self.next(function(err,doc){if(err&&err.tailable&&self.s.currentNumberOfRetries==0)return callback(err);if(err&&err.tailable&&self.s.currentNumberOfRetries>0){self.s.currentNumberOfRetries=self.s.currentNumberOfRetries-1;return setTimeout(function(){self.nextObject(callback)},self.s.tailableRetryInterval)}self.s.state=Cursor.OPEN;if(err)return handleCallback(callback,err);handleCallback(callback,null,doc)})};var loop=function(self,callback){if(self.bufferedCount()==0)return;self.next(callback);return loop};Cursor.prototype.each=function(callback){this.rewind();this.s.state=Cursor.INIT;_each(this,callback)};var _each=function(self,callback){if(!callback)throw new MongoError("callback is mandatory");if(self.isNotified())return;if(self.s.state==Cursor.CLOSED||self.isDead()){return handleCallback(callback,new MongoError("Cursor is closed"),null)}if(self.s.state==Cursor.INIT)self.s.state=Cursor.OPEN;var fn=null;if(self.bufferedCount()>0){while(fn=loop(self,callback))fn(self,callback);_each(self,callback)}else{self.next(function(err,item){if(err)return handleCallback(callback,err);if(item==null){self.s.state=Cursor.CLOSED;return handleCallback(callback,null,null)}if(handleCallback(callback,null,item)==false)return;_each(self,callback)})}};Cursor.prototype.forEach=function(iterator,callback){this.each(function(err,doc){if(err){callback(err);return false}if(doc!=null){iterator(doc);return true}if(doc==null&&callback){var internalCallback=callback;callback=null;internalCallback(null);return false}})};Cursor.prototype.setReadPreference=function(r){if(this.s.state!=Cursor.INIT)throw new MongoError("cannot change cursor readPreference after cursor has been accessed");if(r instanceof ReadPreference){this.s.options.readPreference=new CoreReadPreference(r.mode,r.tags)}else{this.s.options.readPreference=new CoreReadPreference(r)}return this};Cursor.prototype.toArray=function(callback){var self=this;if(!callback)throw new MongoError("callback is mandatory");if(self.s.options.tailable)return handleCallback(callback,new MongoError("Tailable cursor cannot be converted to array"),null);var items=[];this.rewind();self.s.state=Cursor.INIT;var fetchDocs=function(){self.next(function(err,doc){if(err)return handleCallback(callback,err);if(doc==null){self.s.state=Cursor.CLOSED;return handleCallback(callback,null,items)}items.push(doc);if(self.bufferedCount()>0){var a=self.readBufferedDocuments(self.bufferedCount());items=items.concat(a)}fetchDocs()})};fetchDocs()};Cursor.prototype.count=function(applySkipLimit,opts,callback){var self=this;if(typeof opts=="function")callback=opts,opts={};opts=opts||{};if(self.s.cmd.query==null)callback(new MongoError("count can only be used with find command"));if(typeof applySkipLimit=="function"){callback=applySkipLimit;applySkipLimit=true}var opts={};if(applySkipLimit){if(typeof this.cursorSkip()=="number")opts.skip=this.cursorSkip();if(typeof this.cursorLimit()=="number")opts.limit=this.cursorLimit()}var delimiter=self.s.ns.indexOf(".");var command={count:self.s.ns.substr(delimiter+1),query:self.s.cmd.query};if(typeof maxTimeMS=="number"){command.maxTimeMS=self.s.maxTimeMS}var server=self.s.topology.getServer(opts);var connection=self.s.topology.getConnection(opts);var callbacks=server.getCallbacks();if(opts.skip)command.skip=opts.skip;if(opts.limit)command.limit=opts.limit;if(self.s.options.hint)command.hint=self.s.options.hint;var query=new Query(self.s.bson,f("%s.$cmd",self.s.ns.substr(0,delimiter)),command,{numberToSkip:0,numberToReturn:-1,checkKeys:false});callbacks.register(query.requestId,function(err,result){if(err)return handleCallback(callback,err);if(result.documents.length==1&&(result.documents[0].errmsg||result.documents[0].err||result.documents[0]["$err"]))return callback(MongoError.create(result.documents[0]));handleCallback(callback,null,result.documents[0].n)});connection.write(query.toBin())};Cursor.prototype.close=function(callback){this.s.state=Cursor.CLOSED;this.kill();this.emit("close");if(callback)return handleCallback(callback,null,this)};Cursor.prototype.isClosed=function(){return this.isDead()};Cursor.prototype.destroy=function(err){this.pause();this.close();if(err)this.emit("error",err)};Cursor.prototype.stream=function(options){this.s.streamOptions=options||{};return this};Cursor.prototype.explain=function(callback){this.s.cmd.explain=true;this.next(callback)};Cursor.prototype._read=function(n){var self=this;if(self.s.state==Cursor.CLOSED||self.isDead()){return self.push(null)}self.nextObject(function(err,result){if(err){if(!self.isDead())self.close();if(self.listeners("error")&&self.listeners("error").length>0){self.emit("error",err)}return self.emit("end")}if(typeof self.s.streamOptions.transform=="function"&&result!=null){return self.push(self.s.streamOptions.transform(result))}self.push(result)})};Object.defineProperty(Cursor.prototype,"namespace",{enumerable:true,get:function(){if(!this||!this.s){return null}var ns=this.s.ns||"";var firstDot=ns.indexOf(".");if(firstDot<0){return{database:this.s.ns,collection:""}}return{database:ns.substr(0,firstDot),collection:ns.substr(firstDot+1)}}});Cursor.INIT=0;Cursor.OPEN=1;Cursor.CLOSED=2;Cursor.GET_MORE=3;module.exports=Cursor},function(module,exports,__webpack_require__){"use strict";var object=__webpack_require__(126);var digits=__webpack_require__(127).digits;function create(config){if(typeof Object.create!=="function"){throw new Error("ES5 not supported by this JavaScript engine. "+"Please load the es5-shim and es5-sham library for compatibility.")}var math={};var _config={matrix:"matrix",number:"number",precision:64,epsilon:1e-14};math.config=function(options){if(options){object.deepExtend(_config,options);if(options.precision){math.type.BigNumber.config({precision:options.precision})}__webpack_require__(128)(math,_config);if(options.number&&options.number.defaultType){throw new Error("setting `number.defaultType` is deprecated. Use `number` instead.")}if(options.number&&options.number.precision){throw new Error("setting `number.precision` is deprecated. Use `precision` instead.")}if(options.matrix&&options.matrix.defaultType){throw new Error("setting `matrix.defaultType` is deprecated. Use `matrix` instead.")}if(options.matrix&&options.matrix["default"]){throw new Error("setting `matrix.default` is deprecated. Use `matrix` instead.")}if(options.decimals){throw new Error("setting `decimals` is deprecated. Use `precision` instead.")}}return object.clone(_config)};math.create=create;var BigNumber=__webpack_require__(129).constructor();BigNumber.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}};BigNumber.fromJSON=function(json){return new BigNumber(json.value)};if(typeof BigNumber.prototype.clone!=="function"){BigNumber.prototype.clone=function(){return this}}if(typeof BigNumber.convert!=="function"){BigNumber.convert=function(number){if(digits(number)>15){return number}else{return new BigNumber(number)}}}else{throw new Error("Cannot add function convert to BigNumber: function already exists")}math.error=__webpack_require__(130);math.type={};math.type.Complex=__webpack_require__(131);math.type.Range=__webpack_require__(132);math.type.Index=__webpack_require__(133);math.type.Matrix=__webpack_require__(134)(_config);math.type.Unit=__webpack_require__(135);math.type.Help=__webpack_require__(136);math.type.ResultSet=__webpack_require__(137);math.type.BigNumber=BigNumber;math.collection=__webpack_require__(138)(math,_config);math.type.CcsMatrix=__webpack_require__(139)(math,_config);math.type.CrsMatrix=__webpack_require__(140)(math,_config);math.type.DenseMatrix=__webpack_require__(141)(math,_config);math.type.Matrix._storage.ccs=math.type.CcsMatrix;math.type.Matrix._storage.crs=math.type.CrsMatrix;math.type.Matrix._storage.dense=math.type.DenseMatrix;math.type.Matrix._storage["default"]=math.type.DenseMatrix;math.expression={};math.expression.node=__webpack_require__(142);math.expression.parse=__webpack_require__(143)(math,_config);math.expression.Parser=__webpack_require__(144)(math,_config);math.expression.docs=__webpack_require__(145);math.json={reviver:__webpack_require__(146)(math,_config)};__webpack_require__(171)(math,_config);__webpack_require__(172)(math,_config);__webpack_require__(173)(math,_config);__webpack_require__(174)(math,_config);__webpack_require__(175)(math,_config);__webpack_require__(176)(math,_config);__webpack_require__(177)(math,_config);__webpack_require__(178)(math,_config);__webpack_require__(179)(math,_config);__webpack_require__(180)(math,_config);__webpack_require__(181)(math,_config);__webpack_require__(182)(math,_config);__webpack_require__(183)(math,_config);__webpack_require__(184)(math,_config);__webpack_require__(185)(math,_config);__webpack_require__(186)(math,_config);__webpack_require__(187)(math,_config);__webpack_require__(188)(math,_config);__webpack_require__(189)(math,_config);__webpack_require__(190)(math,_config);__webpack_require__(191)(math,_config);__webpack_require__(192)(math,_config);__webpack_require__(193)(math,_config);__webpack_require__(194)(math,_config);__webpack_require__(195)(math,_config);__webpack_require__(196)(math,_config);__webpack_require__(197)(math,_config);__webpack_require__(198)(math,_config);__webpack_require__(199)(math,_config);__webpack_require__(200)(math,_config);__webpack_require__(201)(math,_config);__webpack_require__(202)(math,_config);__webpack_require__(203)(math,_config);__webpack_require__(204)(math,_config);__webpack_require__(205)(math,_config);__webpack_require__(206)(math,_config);__webpack_require__(207)(math,_config);__webpack_require__(208)(math,_config);__webpack_require__(209)(math,_config);__webpack_require__(210)(math,_config);__webpack_require__(211)(math,_config);__webpack_require__(212)(math,_config);__webpack_require__(213)(math,_config);__webpack_require__(214)(math,_config);__webpack_require__(215)(math,_config);__webpack_require__(216)(math,_config);__webpack_require__(217)(math,_config);__webpack_require__(218)(math,_config);__webpack_require__(219)(math,_config);__webpack_require__(220)(math,_config);__webpack_require__(221)(math,_config);__webpack_require__(222)(math,_config);__webpack_require__(223)(math,_config);__webpack_require__(224)(math,_config);__webpack_require__(225)(math,_config);__webpack_require__(226)(math,_config);__webpack_require__(227)(math,_config);__webpack_require__(228)(math,_config);__webpack_require__(229)(math,_config);__webpack_require__(230)(math,_config);__webpack_require__(231)(math,_config);__webpack_require__(232)(math,_config);__webpack_require__(233)(math,_config);__webpack_require__(234)(math,_config);__webpack_require__(235)(math,_config);__webpack_require__(236)(math,_config);__webpack_require__(237)(math,_config);__webpack_require__(238)(math,_config);__webpack_require__(239)(math,_config);__webpack_require__(240)(math,_config);__webpack_require__(241)(math,_config);

__webpack_require__(242)(math,_config);__webpack_require__(243)(math,_config);__webpack_require__(244)(math,_config);__webpack_require__(245)(math,_config);__webpack_require__(246)(math,_config);__webpack_require__(247)(math,_config);__webpack_require__(248)(math,_config);__webpack_require__(249)(math,_config);__webpack_require__(250)(math,_config);__webpack_require__(251)(math,_config);__webpack_require__(252)(math,_config);__webpack_require__(253)(math,_config);__webpack_require__(254)(math,_config);__webpack_require__(255)(math,_config);__webpack_require__(256)(math,_config);__webpack_require__(257)(math,_config);__webpack_require__(258)(math,_config);__webpack_require__(259)(math,_config);__webpack_require__(260)(math,_config);__webpack_require__(261)(math,_config);__webpack_require__(262)(math,_config);__webpack_require__(263)(math,_config);__webpack_require__(264)(math,_config);__webpack_require__(265)(math,_config);__webpack_require__(266)(math,_config);__webpack_require__(267)(math,_config);__webpack_require__(268)(math,_config);__webpack_require__(269)(math,_config);__webpack_require__(270)(math,_config);__webpack_require__(271)(math,_config);__webpack_require__(272)(math,_config);__webpack_require__(273)(math,_config);__webpack_require__(274)(math,_config);__webpack_require__(275)(math,_config);__webpack_require__(276)(math,_config);__webpack_require__(277)(math,_config);__webpack_require__(278)(math,_config);__webpack_require__(279)(math,_config);__webpack_require__(280)(math,_config);__webpack_require__(281)(math,_config);__webpack_require__(282)(math,_config);__webpack_require__(283)(math,_config);__webpack_require__(284)(math,_config);__webpack_require__(285)(math,_config);__webpack_require__(286)(math,_config);__webpack_require__(287)(math,_config);__webpack_require__(288)(math,_config);__webpack_require__(289)(math,_config);__webpack_require__(290)(math,_config);__webpack_require__(291)(math,_config);__webpack_require__(292)(math,_config);__webpack_require__(293)(math,_config);__webpack_require__(294)(math,_config);__webpack_require__(295)(math,_config);__webpack_require__(296)(math,_config);__webpack_require__(297)(math,_config);__webpack_require__(298)(math,_config);__webpack_require__(299)(math,_config);__webpack_require__(300)(math,_config);__webpack_require__(301)(math,_config);__webpack_require__(302)(math,_config);__webpack_require__(303)(math,_config);math.ifElse=function(){throw new Error("Function ifElse is deprecated. Use the conditional operator instead.")};__webpack_require__(128)(math,_config);math.expression.transform={concat:__webpack_require__(147)(math,_config),filter:__webpack_require__(148)(math,_config),forEach:__webpack_require__(149)(math,_config),index:__webpack_require__(150)(math,_config),map:__webpack_require__(151)(math,_config),max:__webpack_require__(152)(math,_config),mean:__webpack_require__(153)(math,_config),min:__webpack_require__(154)(math,_config),range:__webpack_require__(155)(math,_config),subset:__webpack_require__(156)(math,_config)};math.chaining={};math.chaining.Chain=__webpack_require__(157)(math,_config);math.chaining.Selector=math.chaining.Chain;math.config(_config);math.config(config);return math}var math=create();if(typeof window!=="undefined"){window.mathjs=math}module.exports=math},function(module,exports,__webpack_require__){var EventEmitter=__webpack_require__(120).EventEmitter;var mixin=__webpack_require__(331);var proto=__webpack_require__(161);var Route=__webpack_require__(162);var Router=__webpack_require__(304);var req=__webpack_require__(163);var res=__webpack_require__(164);exports=module.exports=createApplication;function createApplication(){var app=function(req,res,next){app.handle(req,res,next)};mixin(app,EventEmitter.prototype,false);mixin(app,proto,false);app.request={__proto__:req,app:app};app.response={__proto__:res,app:app};app.init();return app}exports.application=proto;exports.request=req;exports.response=res;exports.Route=Route;exports.Router=Router;exports.query=__webpack_require__(165);exports.static=__webpack_require__(74);["json","urlencoded","bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"].forEach(function(name){Object.defineProperty(exports,name,{get:function(){throw new Error("Most middleware (like "+name+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:true})})},function(module,exports,__webpack_require__){module.exports={websocket:__webpack_require__(166),flashsocket:__webpack_require__(167),htmlfile:__webpack_require__(168),"xhr-polling":__webpack_require__(169),"jsonp-polling":__webpack_require__(170)}},function(module,exports,__webpack_require__){"use strict";var arrayUniq=__webpack_require__(334);module.exports=function(){return arrayUniq([].concat.apply([],arguments))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,errMsg){if(typeof fn!=="function"){throw new TypeError("Expected a function.")}var ret;var called=false;var fnName=fn.name||(/function ([^\(]+)/.exec(fn.toString())||[])[1];return function(){if(called){if(errMsg===true){fnName=fnName?fnName+"()":"Function";throw new Error(fnName+" can only be called once.")}return ret}called=true;ret=fn.apply(this,arguments);fn=null;return ret}}},function(module,exports,__webpack_require__){(function(setImmediate){"use strict";module.exports=typeof setImmediate==="function"?setImmediate:function setImmediate(){var args=[].slice.apply(arguments);args.splice(1,0,0);setTimeout.apply(null,args)}}).call(exports,__webpack_require__(61).setImmediate)},function(module,exports,__webpack_require__){"use strict";var path=__webpack_require__(8);var pathIsInside=__webpack_require__(519);module.exports=function(a,b){a=path.resolve(a);b=path.resolve(b);if(a===b){return false}return pathIsInside(a,b)}},function(module,exports,__webpack_require__){var assert=__webpack_require__(107);var NEWLINE="\n".charCodeAt(0);function emitNewlineEvents(stream){if(stream._emittingNewlines){return}var write=stream.write;stream.write=function(data){var rtn=write.apply(stream,arguments);if(stream.listeners("newline").length>0){var len=data.length,i=0;if(typeof data=="string"){for(;i<len;i++){processByte(stream,data.charCodeAt(i))}}else{for(;i<len;i++){processByte(stream,data[i])}}}return rtn};stream._emittingNewlines=true}module.exports=emitNewlineEvents;function processByte(stream,b){assert.equal(typeof b,"number");if(b===NEWLINE){stream.emit("newline")}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(process,setImmediate){(function(){var async={};var root,previous_async;root=this;if(root!=null){previous_async=root.async}async.noConflict=function(){root.async=previous_async;return async};function only_once(fn){var called=false;return function(){if(called)throw new Error("Callback was already called.");called=true;fn.apply(root,arguments)}}var _toString=Object.prototype.toString;var _isArray=Array.isArray||function(obj){return _toString.call(obj)==="[object Array]"};var _each=function(arr,iterator){if(arr.forEach){return arr.forEach(iterator)}for(var i=0;i<arr.length;i+=1){iterator(arr[i],i,arr)}};var _map=function(arr,iterator){if(arr.map){return arr.map(iterator)}var results=[];_each(arr,function(x,i,a){results.push(iterator(x,i,a))});return results};var _reduce=function(arr,iterator,memo){if(arr.reduce){return arr.reduce(iterator,memo)}_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)});return memo};var _keys=function(obj){if(Object.keys){return Object.keys(obj)}var keys=[];for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k)}}return keys};if(typeof process==="undefined"||!process.nextTick){if(typeof setImmediate==="function"){async.nextTick=function(fn){setImmediate(fn)};async.setImmediate=async.nextTick}else{async.nextTick=function(fn){setTimeout(fn,0)};async.setImmediate=async.nextTick}}else{async.nextTick=process.nextTick;if(typeof setImmediate!=="undefined"){async.setImmediate=function(fn){setImmediate(fn)}}else{async.setImmediate=async.nextTick}}async.each=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback()}var completed=0;_each(arr,function(x){iterator(x,only_once(done))});function done(err){if(err){callback(err);callback=function(){}}else{completed+=1;if(completed>=arr.length){callback()}}}};async.forEach=async.each;async.eachSeries=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback()}var completed=0;var iterate=function(){iterator(arr[completed],function(err){if(err){callback(err);callback=function(){}}else{completed+=1;if(completed>=arr.length){callback()}else{iterate()}}})};iterate()};async.forEachSeries=async.eachSeries;async.eachLimit=function(arr,limit,iterator,callback){var fn=_eachLimit(limit);fn.apply(null,[arr,iterator,callback])};async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){callback=callback||function(){};if(!arr.length||limit<=0){return callback()}var completed=0;var started=0;var running=0;(function replenish(){if(completed>=arr.length){return callback()}while(running<limit&&started<arr.length){started+=1;running+=1;iterator(arr[started-1],function(err){if(err){callback(err);callback=function(){}}else{completed+=1;running-=1;if(completed>=arr.length){callback()}else{replenish()}}})}})()}};var doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}};var doParallelLimit=function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}};var doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}};var _asyncMap=function(eachfn,arr,iterator,callback){arr=_map(arr,function(x,i){return{index:i,value:x}});if(!callback){eachfn(arr,function(x,callback){iterator(x.value,function(err){callback(err)})})}else{var results=[];eachfn(arr,function(x,callback){iterator(x.value,function(err,v){results[x.index]=v;callback(err)})},function(err){callback(err,results)})}};async.map=doParallel(_asyncMap);async.mapSeries=doSeries(_asyncMap);async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v;callback(err)})},function(err){callback(err,memo)})};async.inject=async.reduce;async.foldl=async.reduce;async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,memo,iterator,callback)};async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(v){results.push(x)}callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter);async.filterSeries=doSeries(_filter);async.select=async.filter;async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(!v){results.push(x)}callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject);async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){if(result){main_callback(x);main_callback=function(){}}else{callback()}})},function(err){main_callback()})};async.detect=doParallel(_detect);async.detectSeries=doSeries(_detect);async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(v){main_callback(true);main_callback=function(){}}callback()})},function(err){main_callback(false)})};async.any=async.some;async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(!v){main_callback(false);main_callback=function(){}}callback()})},function(err){main_callback(true)})};async.all=async.every;async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){if(err){callback(err)}else{callback(null,{value:x,criteria:criteria})}})},function(err,results){if(err){return callback(err)}else{var fn=function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0};callback(null,_map(results.sort(fn),function(x){return x.value}))}})};async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);var remainingTasks=keys.length;if(!remainingTasks){return callback()}var results={};var listeners=[];var addListener=function(fn){listeners.unshift(fn)};var removeListener=function(fn){for(var i=0;i<listeners.length;i+=1){if(listeners[i]===fn){listeners.splice(i,1);return}}};var taskComplete=function(){remainingTasks--;_each(listeners.slice(0),function(fn){fn()})};addListener(function(){if(!remainingTasks){var theCallback=callback;callback=function(){};theCallback(null,results)}});_each(keys,function(k){var task=_isArray(tasks[k])?tasks[k]:[tasks[k]];var taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}if(err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]});safeResults[k]=args;callback(err,safeResults);callback=function(){}}else{results[k]=args;async.setImmediate(taskComplete)}};var requires=task.slice(0,Math.abs(task.length-1))||[];var ready=function(){return _reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},true)&&!results.hasOwnProperty(k)};if(ready()){task[task.length-1](taskCallback,results)}else{var listener=function(){if(ready()){removeListener(listener);task[task.length-1](taskCallback,results)}};addListener(listener)}})};async.retry=function(times,task,callback){var DEFAULT_TIMES=5;var attempts=[];if(typeof times==="function"){callback=task;task=times;times=DEFAULT_TIMES}times=parseInt(times,10)||DEFAULT_TIMES;var wrappedTask=function(wrappedCallback,wrappedResults){var retryAttempt=function(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}};while(times){attempts.push(retryAttempt(task,!(times-=1)))}async.series(attempts,function(done,data){data=data[data.length-1];(wrappedCallback||callback)(data.err,data.result)})};return callback?wrappedTask():wrappedTask};async.waterfall=function(tasks,callback){callback=callback||function(){};if(!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length){return callback()}var wrapIterator=function(iterator){return function(err){if(err){callback.apply(null,arguments);callback=function(){}}else{var args=Array.prototype.slice.call(arguments,1);var next=iterator.next();if(next){args.push(wrapIterator(next))}else{args.push(callback)}async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()};var _parallel=function(eachfn,tasks,callback){callback=callback||function(){};if(_isArray(tasks)){eachfn.map(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}callback.call(null,err,args)})}},callback)}else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}results[k]=args;callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)};async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)};async.series=function(tasks,callback){callback=callback||function(){};if(_isArray(tasks)){async.mapSeries(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}callback.call(null,err,args)})}},callback)}else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}results[k]=args;callback(err)})},function(err){callback(err,results)})}};async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){if(tasks.length){tasks[index].apply(null,arguments)}return fn.next()};fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null};return fn};return makeCallback(0)};async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]);cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat);async.concatSeries=doSeries(_concat);async.whilst=function(test,iterator,callback){if(test()){iterator(function(err){if(err){return callback(err)}async.whilst(test,iterator,callback)})}else{callback()}};async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err){return callback(err)}var args=Array.prototype.slice.call(arguments,1);if(test.apply(null,args)){async.doWhilst(iterator,test,callback)}else{callback()}})};async.until=function(test,iterator,callback){if(!test()){iterator(function(err){if(err){return callback(err)}async.until(test,iterator,callback)})}else{callback()}};async.doUntil=function(iterator,test,callback){iterator(function(err){if(err){return callback(err)}var args=Array.prototype.slice.call(arguments,1);if(!test.apply(null,args)){async.doUntil(iterator,test,callback)}else{callback()}})};async.queue=function(worker,concurrency){if(concurrency===undefined){concurrency=1}function _insert(q,data,pos,callback){if(!q.started){q.started=true}if(!_isArray(data)){data=[data]}if(data.length==0){return async.setImmediate(function(){if(q.drain){q.drain()}})}_each(data,function(task){var item={data:task,callback:typeof callback==="function"?callback:null};if(pos){q.tasks.unshift(item)}else{q.tasks.push(item)}if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var workers=0;var q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(data,callback){_insert(q,data,false,callback)},kill:function(){q.drain=null;q.tasks=[]},unshift:function(data,callback){_insert(q,data,true,callback)},process:function(){if(!q.paused&&workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();if(q.empty&&q.tasks.length===0){q.empty()}workers+=1;var next=function(){workers-=1;if(task.callback){task.callback.apply(task,arguments)}if(q.drain&&q.tasks.length+workers===0){q.drain()}q.process()};var cb=only_once(next);worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},idle:function(){return q.tasks.length+workers===0},pause:function(){if(q.paused===true){return}q.paused=true;q.process()},resume:function(){if(q.paused===false){return}q.paused=false;q.process()}};return q};async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){var beg=-1,end=sequence.length-1;while(beg<end){var mid=beg+(end-beg+1>>>1);if(compare(item,sequence[mid])>=0){beg=mid}else{end=mid-1}}return beg}function _insert(q,data,priority,callback){if(!q.started){q.started=true}if(!_isArray(data)){data=[data]}if(data.length==0){return async.setImmediate(function(){if(q.drain){q.drain()}})}_each(data,function(task){var item={data:task,priority:priority,callback:typeof callback==="function"?callback:null};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item);if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);q.push=function(data,priority,callback){_insert(q,data,priority,callback)};delete q.unshift;return q};async.cargo=function(worker,payload){var working=false,tasks=[];var cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,drained:true,push:function(data,callback){if(!_isArray(data)){data=[data]}_each(data,function(task){tasks.push({data:task,callback:typeof callback==="function"?callback:null});cargo.drained=false;if(cargo.saturated&&tasks.length===payload){cargo.saturated()}});async.setImmediate(cargo.process)},process:function process(){if(working)return;if(tasks.length===0){if(cargo.drain&&!cargo.drained)cargo.drain();cargo.drained=true;return}var ts=typeof payload==="number"?tasks.splice(0,payload):tasks.splice(0,tasks.length);var ds=_map(ts,function(task){return task.data});if(cargo.empty)cargo.empty();working=true;worker(ds,function(){working=false;var args=arguments;_each(ts,function(data){if(data.callback){data.callback.apply(null,args)}});process()})},length:function(){return tasks.length},running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(err){if(console.error){console.error(err)}}else if(console[name]){_each(args,function(x){console[name](x)})}}}]))}};async.log=_console_fn("log");async.dir=_console_fn("dir");async.memoize=function(fn,hasher){var memo={};var queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments);var callback=args.pop();var key=hasher.apply(null,args);if(key in memo){async.nextTick(function(){callback.apply(null,memo[key])})}else if(key in queues){queues[key].push(callback)}else{queues[key]=[callback];fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++){q[i].apply(null,arguments)}}]))}};memoized.memo=memo;memoized.unmemoized=fn;return memoized};async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}};async.times=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i)}return async.map(counter,iterator,callback)};async.timesSeries=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i)}return async.mapSeries(counter,iterator,callback)};async.seq=function(){var fns=arguments;return function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0];var nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}};async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))};var _applyEach=function(eachfn,fns){var go=function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)};if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}else{return go}};async.applyEach=doParallel(_applyEach);async.applyEachSeries=doSeries(_applyEach);async.forever=function(fn,callback){function next(err){if(err){if(callback){return callback(err)}throw err}fn(next)}next()};if(typeof module!=="undefined"&&module.exports){module.exports=async}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return async}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{root.async=async}})()}).call(exports,__webpack_require__(9),__webpack_require__(61).setImmediate)},function(module,exports,__webpack_require__){var util=__webpack_require__(52);var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return""+value}if(util.isNumber(value)&&!isFinite(value)){return value.toString()}if(util.isFunction(value)||util.isRegExp(value)){return value.toString()}return value}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n)}else{return s}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected}else{return objEquiv(actual,expected)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}},function(module,exports,__webpack_require__){exports.isatty=function(){return false};function ReadStream(){throw new Error("tty.ReadStream is not implemented")}exports.ReadStream=ReadStream;function WriteStream(){throw new Error("tty.ReadStream is not implemented")}exports.WriteStream=WriteStream},function(module,exports,__webpack_require__){var punycode=__webpack_require__(337);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(386);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){
var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}},function(module,exports,__webpack_require__){(function(Buffer){var rng=__webpack_require__(305);function error(){var m=[].slice.call(arguments).join(" ");throw new Error([m,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}exports.createHash=__webpack_require__(306);exports.createHmac=__webpack_require__(307);exports.randomBytes=function(size,callback){if(callback&&callback.call){try{callback.call(this,undefined,new Buffer(rng(size)))}catch(err){callback(err)}}else{return new Buffer(rng(size))}};function each(a,f){for(var i in a)f(a[i],i)}exports.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var p=__webpack_require__(308)(exports);exports.pbkdf2=p.pbkdf2;exports.pbkdf2Sync=p.pbkdf2Sync;each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(name){exports[name]=function(){error("sorry,",name,"is not implemented yet")}})}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var Stream=__webpack_require__(316);var Response=__webpack_require__(309);var Base64=__webpack_require__(520);var inherits=__webpack_require__(521);var Request=module.exports=function(xhr,params){var self=this;self.writable=true;self.xhr=xhr;self.body=[];self.uri=(params.protocol||"http:")+"//"+params.host+(params.port?":"+params.port:"")+(params.path||"/");if(typeof params.withCredentials==="undefined"){params.withCredentials=true}try{xhr.withCredentials=params.withCredentials}catch(e){}if(params.responseType)try{xhr.responseType=params.responseType}catch(e){}xhr.open(params.method||"GET",self.uri,true);xhr.onerror=function(event){self.emit("error",new Error("Network error"))};self._headers={};if(params.headers){var keys=objectKeys(params.headers);for(var i=0;i<keys.length;i++){var key=keys[i];if(!self.isSafeRequestHeader(key))continue;var value=params.headers[key];self.setHeader(key,value)}}if(params.auth){this.setHeader("Authorization","Basic "+Base64.btoa(params.auth))}var res=new Response;res.on("close",function(){self.emit("close")});res.on("ready",function(){self.emit("response",res)});res.on("error",function(err){self.emit("error",err)});xhr.onreadystatechange=function(){if(xhr.__aborted)return;res.handle(xhr)}};inherits(Request,Stream);Request.prototype.setHeader=function(key,value){this._headers[key.toLowerCase()]=value};Request.prototype.getHeader=function(key){return this._headers[key.toLowerCase()]};Request.prototype.removeHeader=function(key){delete this._headers[key.toLowerCase()]};Request.prototype.write=function(s){this.body.push(s)};Request.prototype.destroy=function(s){this.xhr.__aborted=true;this.xhr.abort();this.emit("close")};Request.prototype.end=function(s){if(s!==undefined)this.body.push(s);var keys=objectKeys(this._headers);for(var i=0;i<keys.length;i++){var key=keys[i];var value=this._headers[key];if(isArray(value)){for(var j=0;j<value.length;j++){this.xhr.setRequestHeader(key,value[j])}}else this.xhr.setRequestHeader(key,value)}if(this.body.length===0){this.xhr.send("")}else if(typeof this.body[0]==="string"){this.xhr.send(this.body.join(""))}else if(isArray(this.body[0])){var body=[];for(var i=0;i<this.body.length;i++){body.push.apply(body,this.body[i])}this.xhr.send(body)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){var len=0;for(var i=0;i<this.body.length;i++){len+=this.body[i].length}var body=new this.body[0].constructor(len);var k=0;for(var i=0;i<this.body.length;i++){var b=this.body[i];for(var j=0;j<b.length;j++){body[k++]=b[j]}}this.xhr.send(body)}else if(isXHR2Compatible(this.body[0])){this.xhr.send(this.body[0])}else{var body="";for(var i=0;i<this.body.length;i++){body+=this.body[i].toString()}this.xhr.send(body)}};Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Request.prototype.isSafeRequestHeader=function(headerName){if(!headerName)return false;return indexOf(Request.unsafeHeaders,headerName.toLowerCase())===-1};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};var indexOf=function(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(xs[i]===x)return i}return-1};var isXHR2Compatible=function(obj){if(typeof Blob!=="undefined"&&obj instanceof Blob)return true;if(typeof ArrayBuffer!=="undefined"&&obj instanceof ArrayBuffer)return true;if(typeof FormData!=="undefined"&&obj instanceof FormData)return true}},function(module,exports,__webpack_require__){(function(process,Buffer){var net=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "net"');e.code="MODULE_NOT_FOUND";throw e}()),util=__webpack_require__(310),Queue=__webpack_require__(311),to_array=__webpack_require__(312),events=__webpack_require__(120),crypto=__webpack_require__(110),parsers=[],commands,connection_id=0,default_port=6379,default_host="127.0.0.1";exports.debug_mode=false;try{__webpack_require__(313);parsers.push(__webpack_require__(313))}catch(err){if(exports.debug_mode){console.warn("hiredis parser not installed.")}}parsers.push(__webpack_require__(314));function RedisClient(stream,options){this.stream=stream;this.options=options=options||{};this.connection_id=++connection_id;this.connected=false;this.ready=false;this.connections=0;if(this.options.socket_nodelay===undefined){this.options.socket_nodelay=true}this.should_buffer=false;this.command_queue_high_water=this.options.command_queue_high_water||1e3;this.command_queue_low_water=this.options.command_queue_low_water||0;this.max_attempts=null;if(options.max_attempts&&!isNaN(options.max_attempts)&&options.max_attempts>0){this.max_attempts=+options.max_attempts}this.command_queue=new Queue;this.offline_queue=new Queue;this.commands_sent=0;this.connect_timeout=false;if(options.connect_timeout&&!isNaN(options.connect_timeout)&&options.connect_timeout>0){this.connect_timeout=+options.connect_timeout}this.enable_offline_queue=true;if(typeof this.options.enable_offline_queue==="boolean"){this.enable_offline_queue=this.options.enable_offline_queue}this.initialize_retry_vars();this.pub_sub_mode=false;this.subscription_set={};this.monitoring=false;this.closing=false;this.server_info={};this.auth_pass=null;this.parser_module=null;this.selected_db=null;this.old_state=null;var self=this;this.stream.on("connect",function(){self.on_connect()});this.stream.on("data",function(buffer_from_socket){self.on_data(buffer_from_socket)});this.stream.on("error",function(msg){self.on_error(msg.message)});this.stream.on("close",function(){self.connection_gone("close")});this.stream.on("end",function(){self.connection_gone("end")});this.stream.on("drain",function(){self.should_buffer=false;self.emit("drain")});events.EventEmitter.call(this)}util.inherits(RedisClient,events.EventEmitter);exports.RedisClient=RedisClient;RedisClient.prototype.initialize_retry_vars=function(){this.retry_timer=null;this.retry_totaltime=0;this.retry_delay=150;this.retry_backoff=1.7;this.attempts=1};RedisClient.prototype.flush_and_error=function(message){var command_obj;while(this.offline_queue.length>0){command_obj=this.offline_queue.shift();if(typeof command_obj.callback==="function"){command_obj.callback(message)}}this.offline_queue=new Queue;while(this.command_queue.length>0){command_obj=this.command_queue.shift();if(typeof command_obj.callback==="function"){command_obj.callback(message)}}this.command_queue=new Queue};RedisClient.prototype.on_error=function(msg){var message="Redis connection to "+this.host+":"+this.port+" failed - "+msg,self=this,command_obj;if(this.closing){return}if(exports.debug_mode){console.warn(message)}this.flush_and_error(message);this.connected=false;this.ready=false;this.emit("error",new Error(message));this.connection_gone("error")};RedisClient.prototype.do_auth=function(){var self=this;if(exports.debug_mode){console.log("Sending auth to "+self.host+":"+self.port+" id "+self.connection_id)}self.send_anyway=true;self.send_command("auth",[this.auth_pass],function(err,res){if(err){if(err.toString().match("LOADING")){console.log("Redis still loading, trying to authenticate later");setTimeout(function(){self.do_auth()},2e3);return}else{return self.emit("error",new Error("Auth error: "+err.message))}}if(res.toString()!=="OK"){return self.emit("error",new Error("Auth failed: "+res.toString()))}if(exports.debug_mode){console.log("Auth succeeded "+self.host+":"+self.port+" id "+self.connection_id)}if(self.auth_callback){self.auth_callback(err,res);self.auth_callback=null}self.emit("connect");if(self.options.no_ready_check){self.on_ready()}else{self.ready_check()}});self.send_anyway=false};RedisClient.prototype.on_connect=function(){if(exports.debug_mode){console.log("Stream connected "+this.host+":"+this.port+" id "+this.connection_id)}var self=this;this.connected=true;this.ready=false;this.attempts=0;this.connections+=1;this.command_queue=new Queue;this.emitted_end=false;this.initialize_retry_vars();if(this.options.socket_nodelay){this.stream.setNoDelay()}this.stream.setTimeout(0);this.init_parser();if(this.auth_pass){this.do_auth()}else{this.emit("connect");if(this.options.no_ready_check){this.on_ready()}else{this.ready_check()}}};RedisClient.prototype.init_parser=function(){var self=this;if(this.options.parser){if(!parsers.some(function(parser){if(parser.name===self.options.parser){self.parser_module=parser;if(exports.debug_mode){console.log("Using parser module: "+self.parser_module.name)}return true}})){throw new Error("Couldn't find named parser "+self.options.parser+" on this system")}}else{if(exports.debug_mode){console.log("Using default parser module: "+parsers[0].name)}this.parser_module=parsers[0]}this.parser_module.debug_mode=exports.debug_mode;this.reply_parser=new this.parser_module.Parser({return_buffers:self.options.return_buffers||self.options.detect_buffers||false});this.reply_parser.on("reply error",function(reply){self.return_error(new Error(reply))});this.reply_parser.on("reply",function(reply){self.return_reply(reply)});this.reply_parser.on("error",function(err){self.emit("error",new Error("Redis reply parser error: "+err.stack))})};RedisClient.prototype.on_ready=function(){var self=this;this.ready=true;if(this.old_state!==null){this.monitoring=this.old_state.monitoring;this.pub_sub_mode=this.old_state.pub_sub_mode;this.selected_db=this.old_state.selected_db;this.old_state=null}if(this.selected_db!==null){this.send_command("select",[this.selected_db])}if(this.pub_sub_mode===true){var callback_count=0;var callback=function(){callback_count--;if(callback_count==0){self.emit("ready")}};Object.keys(this.subscription_set).forEach(function(key){var parts=key.split(" ");if(exports.debug_mode){console.warn("sending pub/sub on_ready "+parts[0]+", "+parts[1])}callback_count++;self.send_command(parts[0]+"scribe",[parts[1]],callback)});return}else if(this.monitoring){this.send_command("monitor")}else{this.send_offline_queue()}this.emit("ready")};RedisClient.prototype.on_info_cmd=function(err,res){var self=this,obj={},lines,retry_time;if(err){return self.emit("error",new Error("Ready check failed: "+err.message))}lines=res.toString().split("\r\n");lines.forEach(function(line){var parts=line.split(":");if(parts[1]){obj[parts[0]]=parts[1]}});obj.versions=[];obj.redis_version.split(".").forEach(function(num){obj.versions.push(+num)});this.server_info=obj;if(!obj.loading||obj.loading&&obj.loading==="0"){if(exports.debug_mode){console.log("Redis server ready.")}this.on_ready()}else{retry_time=obj.loading_eta_seconds*1e3;if(retry_time>1e3){retry_time=1e3}if(exports.debug_mode){console.log("Redis server still loading, trying again in "+retry_time)}setTimeout(function(){self.ready_check()},retry_time)}};RedisClient.prototype.ready_check=function(){var self=this;if(exports.debug_mode){console.log("checking server ready state...")}this.send_anyway=true;this.info(function(err,res){self.on_info_cmd(err,res)});this.send_anyway=false};RedisClient.prototype.send_offline_queue=function(){var command_obj,buffered_writes=0;while(this.offline_queue.length>0){command_obj=this.offline_queue.shift();if(exports.debug_mode){console.log("Sending offline command: "+command_obj.command)}buffered_writes+=!this.send_command(command_obj.command,command_obj.args,command_obj.callback)}this.offline_queue=new Queue;if(!buffered_writes){this.should_buffer=false;this.emit("drain")}};RedisClient.prototype.connection_gone=function(why){var self=this,message;if(this.retry_timer){return}if(exports.debug_mode){console.warn("Redis connection is gone from "+why+" event.")}this.connected=false;this.ready=false;if(this.old_state===null){var state={monitoring:this.monitoring,pub_sub_mode:this.pub_sub_mode,selected_db:this.selected_db};this.old_state=state;this.monitoring=false;this.pub_sub_mode=false;this.selected_db=null}if(!this.emitted_end){this.emit("end");this.emitted_end=true}this.flush_and_error("Redis connection gone from "+why+" event.");if(this.closing){this.retry_timer=null;if(exports.debug_mode){console.warn("connection ended from quit command, not retrying.")}return}this.retry_delay=Math.floor(this.retry_delay*this.retry_backoff);if(exports.debug_mode){console.log("Retry connection in "+this.current_retry_delay+" ms")}if(this.max_attempts&&this.attempts>=this.max_attempts){this.retry_timer=null;console.error("node_redis: Couldn't get Redis connection after "+this.max_attempts+" attempts.");return}this.attempts+=1;this.emit("reconnecting",{delay:self.retry_delay,attempt:self.attempts});this.retry_timer=setTimeout(function(){if(exports.debug_mode){console.log("Retrying connection...")}self.retry_totaltime+=self.current_retry_delay;if(self.connect_timeout&&self.retry_totaltime>=self.connect_timeout){self.retry_timer=null;console.error("node_redis: Couldn't get Redis connection after "+self.retry_totaltime+"ms.");return}self.stream.connect(self.port,self.host);self.retry_timer=null},this.retry_delay)};RedisClient.prototype.on_data=function(data){if(exports.debug_mode){console.log("net read "+this.host+":"+this.port+" id "+this.connection_id+": "+data.toString())}try{this.reply_parser.execute(data)}catch(err){this.emit("error",err)}};RedisClient.prototype.return_error=function(err){var command_obj=this.command_queue.shift(),queue_len=this.command_queue.getLength();if(this.pub_sub_mode===false&&queue_len===0){this.emit("idle");this.command_queue=new Queue}if(this.should_buffer&&queue_len<=this.command_queue_low_water){this.emit("drain");this.should_buffer=false}if(command_obj&&typeof command_obj.callback==="function"){try{command_obj.callback(err)}catch(callback_err){process.nextTick(function(){throw callback_err})}}else{console.log("node_redis: no callback to send error: "+err.message);process.nextTick(function(){throw err})}};function try_callback(callback,reply){try{callback(null,reply)}catch(err){process.nextTick(function(){throw err})}}function reply_to_object(reply){var obj={},j,jl,key,val;if(reply.length===0){return null}for(j=0,jl=reply.length;j<jl;j+=2){key=reply[j].toString();val=reply[j+1];obj[key]=val}return obj}function reply_to_strings(reply){var i;if(Buffer.isBuffer(reply)){return reply.toString()}if(Array.isArray(reply)){for(i=0;i<reply.length;i++){reply[i]=reply[i].toString()}return reply}return reply}RedisClient.prototype.return_reply=function(reply){var command_obj,obj,i,len,type,timestamp,argindex,args,queue_len;command_obj=this.command_queue.shift(),queue_len=this.command_queue.getLength();if(this.pub_sub_mode===false&&queue_len===0){this.emit("idle");this.command_queue=new Queue}if(this.should_buffer&&queue_len<=this.command_queue_low_water){this.emit("drain");this.should_buffer=false}if(command_obj&&!command_obj.sub_command){if(typeof command_obj.callback==="function"){if(this.options.detect_buffers&&command_obj.buffer_args===false){reply=reply_to_strings(reply)}if(reply&&"hgetall"===command_obj.command.toLowerCase()){reply=reply_to_object(reply)}try_callback(command_obj.callback,reply)}else if(exports.debug_mode){console.log("no callback for reply: "+(reply&&reply.toString&&reply.toString()))}}else if(this.pub_sub_mode||command_obj&&command_obj.sub_command){if(Array.isArray(reply)){type=reply[0].toString();if(type==="message"){this.emit("message",reply[1].toString(),reply[2])}else if(type==="pmessage"){this.emit("pmessage",reply[1].toString(),reply[2].toString(),reply[3])}else if(type==="subscribe"||type==="unsubscribe"||type==="psubscribe"||type==="punsubscribe"){if(reply[2]===0){this.pub_sub_mode=false;if(this.debug_mode){console.log("All subscriptions removed, exiting pub/sub mode")}}else{this.pub_sub_mode=true}if(command_obj&&typeof command_obj.callback==="function"){try_callback(command_obj.callback,reply[1].toString())}this.emit(type,reply[1].toString(),reply[2])}else{throw new Error("subscriptions are active but got unknown reply type "+type)}}else if(!this.closing){throw new Error("subscriptions are active but got an invalid reply: "+reply)}}else if(this.monitoring){len=reply.indexOf(" ");timestamp=reply.slice(0,len);argindex=reply.indexOf('"');args=reply.slice(argindex+1,-1).split('" "').map(function(elem){return elem.replace(/\\"/g,'"')});this.emit("monitor",timestamp,args)}else{throw new Error("node_redis command queue state error. If you can reproduce this, please report it.")}};function Command(command,args,sub_command,buffer_args,callback){this.command=command;this.args=args;this.sub_command=sub_command;this.buffer_args=buffer_args;this.callback=callback}RedisClient.prototype.send_command=function(command,args,callback){var arg,this_args,command_obj,i,il,elem_count,buffer_args,stream=this.stream,command_str="",buffered_writes=0,last_arg_type;if(typeof command!=="string"){throw new Error("First argument to send_command must be the command name string, not "+typeof command)}if(Array.isArray(args)){if(typeof callback==="function"){}else if(!callback){last_arg_type=typeof args[args.length-1];if(last_arg_type==="function"||last_arg_type==="undefined"){callback=args.pop()}}else{throw new Error("send_command: last argument must be a callback or undefined")}}else{throw new Error("send_command: second argument must be an array")}if((command==="sadd"||command==="SADD")&&args.length>0&&Array.isArray(args[args.length-1])){args=args.slice(0,-1).concat(args[args.length-1])}buffer_args=false;for(i=0,il=args.length,arg;i<il;i+=1){if(Buffer.isBuffer(args[i])){buffer_args=true}}command_obj=new Command(command,args,false,buffer_args,callback);if(!this.ready&&!this.send_anyway||!stream.writable){if(exports.debug_mode){if(!stream.writable){console.log("send command: stream is not writeable.")}}if(this.enable_offline_queue){if(exports.debug_mode){console.log("Queueing "+command+" for next server connection.")}this.offline_queue.push(command_obj);this.should_buffer=true}else{var not_writeable_error=new Error("send_command: stream not writeable. enable_offline_queue is false");if(command_obj.callback){command_obj.callback(not_writeable_error)}else{throw not_writeable_error}}return false}if(command==="subscribe"||command==="psubscribe"||command==="unsubscribe"||command==="punsubscribe"){this.pub_sub_command(command_obj)}else if(command==="monitor"){this.monitoring=true}else if(command==="quit"){this.closing=true}else if(this.pub_sub_mode===true){throw new Error("Connection in pub/sub mode, only pub/sub commands may be used")}this.command_queue.push(command_obj);this.commands_sent+=1;elem_count=args.length+1;command_str="*"+elem_count+"\r\n$"+command.length+"\r\n"+command+"\r\n";if(!buffer_args){for(i=0,il=args.length,arg;i<il;i+=1){arg=args[i];if(typeof arg!=="string"){arg=String(arg)}command_str+="$"+Buffer.byteLength(arg)+"\r\n"+arg+"\r\n"}if(exports.debug_mode){console.log("send "+this.host+":"+this.port+" id "+this.connection_id+": "+command_str)}buffered_writes+=!stream.write(command_str)}else{if(exports.debug_mode){console.log("send command ("+command_str+") has Buffer arguments")}buffered_writes+=!stream.write(command_str);for(i=0,il=args.length,arg;i<il;i+=1){arg=args[i];if(!(Buffer.isBuffer(arg)||arg instanceof String)){arg=String(arg)}if(Buffer.isBuffer(arg)){if(arg.length===0){if(exports.debug_mode){console.log("send_command: using empty string for 0 length buffer")}buffered_writes+=!stream.write("$0\r\n\r\n")}else{buffered_writes+=!stream.write("$"+arg.length+"\r\n");buffered_writes+=!stream.write(arg);buffered_writes+=!stream.write("\r\n");if(exports.debug_mode){console.log("send_command: buffer send "+arg.length+" bytes")}}}else{if(exports.debug_mode){console.log("send_command: string send "+Buffer.byteLength(arg)+" bytes: "+arg)}buffered_writes+=!stream.write("$"+Buffer.byteLength(arg)+"\r\n"+arg+"\r\n")}}}if(exports.debug_mode){console.log("send_command buffered_writes: "+buffered_writes," should_buffer: "+this.should_buffer)}if(buffered_writes||this.command_queue.getLength()>=this.command_queue_high_water){this.should_buffer=true}return!this.should_buffer};RedisClient.prototype.pub_sub_command=function(command_obj){var i,key,command,args;if(this.pub_sub_mode===false&&exports.debug_mode){console.log("Entering pub/sub mode from "+command_obj.command)}this.pub_sub_mode=true;command_obj.sub_command=true;command=command_obj.command;args=command_obj.args;if(command==="subscribe"||command==="psubscribe"){if(command==="subscribe"){key="sub"}else{key="psub"}for(i=0;i<args.length;i++){this.subscription_set[key+" "+args[i]]=true}}else{if(command==="unsubscribe"){key="sub"}else{key="psub"}for(i=0;i<args.length;i++){delete this.subscription_set[key+" "+args[i]]}}};RedisClient.prototype.end=function(){this.stream._events={};this.connected=false;this.ready=false;return this.stream.end()};function Multi(client,args){this.client=client;this.queue=[["MULTI"]];if(Array.isArray(args)){this.queue=this.queue.concat(args)}}exports.Multi=Multi;function set_union(seta,setb){var obj={};seta.forEach(function(val){obj[val]=true});setb.forEach(function(val){obj[val]=true});return Object.keys(obj)}commands=set_union(["get","set","setnx","setex","append","strlen","del","exists","setbit","getbit","setrange","getrange","substr","incr","decr","mget","rpush","lpush","rpushx","lpushx","linsert","rpop","lpop","brpop","brpoplpush","blpop","llen","lindex","lset","lrange","ltrim","lrem","rpoplpush","sadd","srem","smove","sismember","scard","spop","srandmember","sinter","sinterstore","sunion","sunionstore","sdiff","sdiffstore","smembers","zadd","zincrby","zrem","zremrangebyscore","zremrangebyrank","zunionstore","zinterstore","zrange","zrangebyscore","zrevrangebyscore","zcount","zrevrange","zcard","zscore","zrank","zrevrank","hset","hsetnx","hget","hmset","hmget","hincrby","hdel","hlen","hkeys","hvals","hgetall","hexists","incrby","decrby","getset","mset","msetnx","randomkey","select","move","rename","renamenx","expire","expireat","keys","dbsize","auth","ping","echo","save","bgsave","bgrewriteaof","shutdown","lastsave","type","multi","exec","discard","sync","flushdb","flushall","sort","info","monitor","ttl","persist","slaveof","debug","config","subscribe","unsubscribe","psubscribe","punsubscribe","publish","watch","unwatch","cluster","restore","migrate","dump","object","client","eval","evalsha"],__webpack_require__(315));

commands.forEach(function(command){RedisClient.prototype[command]=function(args,callback){if(Array.isArray(args)&&typeof callback==="function"){return this.send_command(command,args,callback)}else{return this.send_command(command,to_array(arguments))}};RedisClient.prototype[command.toUpperCase()]=RedisClient.prototype[command];Multi.prototype[command]=function(){this.queue.push([command].concat(to_array(arguments)));return this};Multi.prototype[command.toUpperCase()]=Multi.prototype[command]});RedisClient.prototype.select=function(db,callback){var self=this;this.send_command("select",[db],function(err,res){if(err===null){self.selected_db=db}if(typeof callback==="function"){callback(err,res)}})};RedisClient.prototype.SELECT=RedisClient.prototype.select;RedisClient.prototype.auth=function(){var args=to_array(arguments);this.auth_pass=args[0];this.auth_callback=args[1];if(exports.debug_mode){console.log("Saving auth as "+this.auth_pass)}if(this.connected){this.send_command("auth",args)}};RedisClient.prototype.AUTH=RedisClient.prototype.auth;RedisClient.prototype.hmget=function(arg1,arg2,arg3){if(Array.isArray(arg2)&&typeof arg3==="function"){return this.send_command("hmget",[arg1].concat(arg2),arg3)}else if(Array.isArray(arg1)&&typeof arg2==="function"){return this.send_command("hmget",arg1,arg2)}else{return this.send_command("hmget",to_array(arguments))}};RedisClient.prototype.HMGET=RedisClient.prototype.hmget;RedisClient.prototype.hmset=function(args,callback){var tmp_args,tmp_keys,i,il,key;if(Array.isArray(args)&&typeof callback==="function"){return this.send_command("hmset",args,callback)}args=to_array(arguments);if(typeof args[args.length-1]==="function"){callback=args[args.length-1];args.length-=1}else{callback=null}if(args.length===2&&typeof args[0]==="string"&&typeof args[1]==="object"){tmp_args=[args[0]];tmp_keys=Object.keys(args[1]);for(i=0,il=tmp_keys.length;i<il;i++){key=tmp_keys[i];tmp_args.push(key);if(typeof args[1][key]!=="string"){var err=new Error("hmset expected value to be a string",key,":",args[1][key]);if(callback)return callback(err);else throw err}tmp_args.push(args[1][key])}args=tmp_args}return this.send_command("hmset",args,callback)};RedisClient.prototype.HMSET=RedisClient.prototype.hmset;Multi.prototype.hmset=function(){var args=to_array(arguments),tmp_args;if(args.length>=2&&typeof args[0]==="string"&&typeof args[1]==="object"){tmp_args=["hmset",args[0]];Object.keys(args[1]).map(function(key){tmp_args.push(key);tmp_args.push(args[1][key])});if(args[2]){tmp_args.push(args[2])}args=tmp_args}else{args.unshift("hmset")}this.queue.push(args);return this};Multi.prototype.HMSET=Multi.prototype.hmset;Multi.prototype.exec=function(callback){var self=this;this.queue.forEach(function(args,index){var command=args[0],obj;if(typeof args[args.length-1]==="function"){args=args.slice(1,-1)}else{args=args.slice(1)}if(args.length===1&&Array.isArray(args[0])){args=args[0]}if(command.toLowerCase()==="hmset"&&typeof args[1]==="object"){obj=args.pop();Object.keys(obj).forEach(function(key){args.push(key);args.push(obj[key])})}this.client.send_command(command,args,function(err,reply){if(err){var cur=self.queue[index];if(typeof cur[cur.length-1]==="function"){cur[cur.length-1](err)}else{throw new Error(err)}self.queue.splice(index,1)}})},this);return this.client.send_command("EXEC",[],function(err,replies){if(err){if(callback){callback(new Error(err));return}else{throw new Error(err)}}var i,il,j,jl,reply,args;if(replies){for(i=1,il=self.queue.length;i<il;i+=1){reply=replies[i-1];args=self.queue[i];if(reply&&args[0].toLowerCase()==="hgetall"){replies[i-1]=reply=reply_to_object(reply)}if(typeof args[args.length-1]==="function"){args[args.length-1](null,reply)}}}if(callback){callback(null,replies)}})};Multi.prototype.EXEC=Multi.prototype.exec;RedisClient.prototype.multi=function(args){return new Multi(this,args)};RedisClient.prototype.MULTI=function(args){return new Multi(this,args)};var eval=RedisClient.prototype.eval;RedisClient.prototype.eval=RedisClient.prototype.EVAL=function(){var self=this,args=to_array(arguments),callback;if(typeof args[args.length-1]==="function"){callback=args.pop()}var source=args[0];args[0]=crypto.createHash("sha1").update(source).digest("hex");self.evalsha(args,function(err,reply){if(err&&/NOSCRIPT/.test(err.message)){args[0]=source;eval.call(self,args,callback)}else if(callback){callback(err,reply)}})};exports.createClient=function(port_arg,host_arg,options){var port=port_arg||default_port,host=host_arg||default_host,redis_client,net_client;net_client=net.createConnection(port,host);redis_client=new RedisClient(net_client,options);redis_client.port=port;redis_client.host=host;return redis_client};exports.print=function(err,reply){if(err){console.log("Error: "+err)}else{console.log("Reply: "+reply)}}}).call(exports,__webpack_require__(9),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process){module.exports=glob;var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());var minimatch=__webpack_require__(548);var Minimatch=minimatch.Minimatch;var inherits=__webpack_require__(549);var EE=__webpack_require__(120).EventEmitter;var path=__webpack_require__(8);var assert=__webpack_require__(107);var globSync=__webpack_require__(317);var common=__webpack_require__(318);var alphasort=common.alphasort;var alphasorti=common.alphasorti;var isAbsolute=common.isAbsolute;var setopts=common.setopts;var ownProp=common.ownProp;var inflight=__webpack_require__(550);var util=__webpack_require__(52);var childrenIgnored=common.childrenIgnored;var once=__webpack_require__(551);function glob(pattern,options,cb){if(typeof options==="function")cb=options,options={};if(!options)options={};if(options.sync){if(cb)throw new TypeError("callback provided to sync glob");return globSync(pattern,options)}return new Glob(pattern,options,cb)}glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;glob.glob=glob;glob.hasMagic=function(pattern,options_){var options=util._extend({},options_);options.noprocess=true;var g=new Glob(pattern,options);var set=g.minimatch.set;if(set.length>1)return true;for(var j=0;j<set[0].length;j++){if(typeof set[0][j]!=="string")return true}return false};glob.Glob=Glob;inherits(Glob,EE);function Glob(pattern,options,cb){if(typeof options==="function"){cb=options;options=null}if(options&&options.sync){if(cb)throw new TypeError("callback provided to sync glob");return new GlobSync(pattern,options)}if(!(this instanceof Glob))return new Glob(pattern,options,cb);setopts(this,pattern,options);this._didRealPath=false;var n=this.minimatch.set.length;this.matches=new Array(n);if(typeof cb==="function"){cb=once(cb);this.on("error",cb);this.on("end",function(matches){cb(null,matches)})}var self=this;var n=this.minimatch.set.length;this._processing=0;this.matches=new Array(n);this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(n===0)return done();for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false,done)}function done(){--self._processing;if(self._processing<=0)self._finish()}}Glob.prototype._finish=function(){assert(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this);this.emit("end",this.found)};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var n=this.matches.length;if(n===0)return this._finish();var self=this;for(var i=0;i<this.matches.length;i++)this._realpathSet(i,next);function next(){if(--n===0)self._finish()}};Glob.prototype._realpathSet=function(index,cb){var matchset=this.matches[index];if(!matchset)return cb();var found=Object.keys(matchset);var self=this;var n=found.length;if(n===0)return cb();var set=this.matches[index]=Object.create(null);found.forEach(function(p,i){p=self._makeAbs(p);fs.realpath(p,self.realpathCache,function(er,real){if(!er)set[real]=true;else if(er.syscall==="stat")set[p]=true;else self.emit("error",er);if(--n===0){self.matches[index]=set;cb()}})})};Glob.prototype._mark=function(p){return common.mark(this,p)};Glob.prototype._makeAbs=function(f){return common.makeAbs(this,f)};Glob.prototype.abort=function(){this.aborted=true;this.emit("abort")};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit("pause")}};Glob.prototype.resume=function(){if(this.paused){this.emit("resume");this.paused=false;if(this._emitQueue.length){var eq=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<eq.length;i++){var e=eq[i];this._emitMatch(e[0],e[1])}}if(this._processQueue.length){var pq=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<pq.length;i++){var p=pq[i];this._processing--;this._process(p[0],p[1],p[2],p[3])}}}};Glob.prototype._process=function(pattern,index,inGlobStar,cb){assert(this instanceof Glob);assert(typeof cb==="function");if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([pattern,index,inGlobStar,cb]);return}var n=0;while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join("/"),index,cb);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/");break}var remain=pattern.slice(n);var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.join("/"))){if(!prefix||!isAbsolute(prefix))prefix="/"+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return cb();var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar,cb);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar,cb)};Glob.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){return self._processReaddir2(prefix,read,abs,remain,index,inGlobStar,entries,cb)})};Glob.prototype._processReaddir2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)===".";var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=="."||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return cb();if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}this._emitMatch(index,e)}return cb()}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}this._process([e].concat(remain),index,inGlobStar,cb)}cb()};Glob.prototype._emitMatch=function(index,e){if(this.aborted)return;if(this.matches[index][e])return;if(this.paused){this._emitQueue.push([index,e]);return}var abs=this._makeAbs(e);if(this.nodir){var c=this.cache[abs];if(c==="DIR"||Array.isArray(c))return}if(this.mark)e=this._mark(e);this.matches[index][e]=true;var st=this.statCache[abs];if(st)this.emit("stat",e,st);this.emit("match",e)};Glob.prototype._readdirInGlobStar=function(abs,cb){if(this.aborted)return;if(this.follow)return this._readdir(abs,false,cb);var lstatkey="lstat\x00"+abs;var self=this;var lstatcb=inflight(lstatkey,lstatcb_);if(lstatcb)fs.lstat(abs,lstatcb);function lstatcb_(er,lstat){if(er)return cb();var isSym=lstat.isSymbolicLink();self.symlinks[abs]=isSym;if(!isSym&&!lstat.isDirectory()){self.cache[abs]="FILE";cb()}else self._readdir(abs,false,cb)}};Glob.prototype._readdir=function(abs,inGlobStar,cb){if(this.aborted)return;cb=inflight("readdir\x00"+abs+"\x00"+inGlobStar,cb);if(!cb)return;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs,cb);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==="FILE")return cb();if(Array.isArray(c))return cb(null,c)}var self=this;fs.readdir(abs,readdirCb(this,abs,cb))};function readdirCb(self,abs,cb){return function(er,entries){if(er)self._readdirError(abs,er,cb);else self._readdirEntries(abs,entries,cb)}}Glob.prototype._readdirEntries=function(abs,entries,cb){if(this.aborted)return;if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==="/")e=abs+e;else e=abs+"/"+e;this.cache[e]=true}}this.cache[abs]=entries;return cb(null,entries)};Glob.prototype._readdirError=function(f,er,cb){if(this.aborted)return;switch(er.code){case"ENOTDIR":this.cache[this._makeAbs(f)]="FILE";break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)return this.emit("error",er);if(!this.silent)console.error("glob error",er);break}return cb()};Glob.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){self._processGlobStar2(prefix,read,abs,remain,index,inGlobStar,entries,cb)})};Glob.prototype._processGlobStar2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false,cb);var isSym=this.symlinks[abs];var len=entries.length;if(isSym&&inGlobStar)return cb();for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==="."&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true,cb);var below=gspref.concat(entries[i],remain);this._process(below,index,true,cb)}cb()};Glob.prototype._processSimple=function(prefix,index,cb){var self=this;this._stat(prefix,function(er,exists){self._processSimple2(prefix,index,er,exists,cb)})};Glob.prototype._processSimple2=function(prefix,index,er,exists,cb){if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return cb();if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+="/"}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this._emitMatch(index,prefix);cb()};Glob.prototype._stat=function(f,cb){var abs=this._makeAbs(f);var needDir=f.slice(-1)==="/";if(f.length>this.maxLength)return cb();if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c="DIR";if(!needDir||c==="DIR")return cb(null,c);if(needDir&&c==="FILE")return cb()}var exists;var stat=this.statCache[abs];if(stat!==undefined){if(stat===false)return cb(null,stat);else{var type=stat.isDirectory()?"DIR":"FILE";if(needDir&&type==="FILE")return cb();else return cb(null,type,stat)}}var self=this;var statcb=inflight("stat\x00"+abs,lstatcb_);if(statcb)fs.lstat(abs,statcb);function lstatcb_(er,lstat){if(lstat&&lstat.isSymbolicLink()){return fs.stat(abs,function(er,stat){if(er)self._stat2(f,abs,null,lstat,cb);else self._stat2(f,abs,er,stat,cb)})}else{self._stat2(f,abs,er,lstat,cb)}}};Glob.prototype._stat2=function(f,abs,er,stat,cb){if(er){this.statCache[abs]=false;return cb()}var needDir=f.slice(-1)==="/";this.statCache[abs]=stat;if(abs.slice(-1)==="/"&&!stat.isDirectory())return cb(null,false,stat);var c=stat.isDirectory()?"DIR":"FILE";this.cache[abs]=this.cache[abs]||c;if(needDir&&c!=="DIR")return cb();return cb(null,c,stat)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){module.exports={MongoError:__webpack_require__(319),Server:__webpack_require__(320),ReplSet:__webpack_require__(321),Mongos:__webpack_require__(322),Logger:__webpack_require__(323),Cursor:__webpack_require__(324),ReadPreference:__webpack_require__(325),BSON:__webpack_require__(568),Query:__webpack_require__(326).Query,MongoCR:__webpack_require__(327),X509:__webpack_require__(328),Plain:__webpack_require__(329),GSSAPI:__webpack_require__(330)}},function(module,exports,__webpack_require__){module.exports=function(html){return String(html).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(module,exports,__webpack_require__){exports=module.exports=function(a,b){if(a&&b){for(var key in b){a[key]=b[key]}}return a}},function(module,exports,__webpack_require__){var url=__webpack_require__(109);var parse=url.parse;var Url=url.Url;var simplePathRegExp=/^(\/\/?(?!\/)[^\?#\s]*)(\?[^#\s]*)?$/;module.exports=parseurl;module.exports.original=originalurl;function parseurl(req){var url=req.url;if(url===undefined){return undefined}var parsed=req._parsedUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedUrl=parsed}function originalurl(req){var url=req.originalUrl;if(typeof url!=="string"){return parseurl(req)}var parsed=req._parsedOriginalUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedOriginalUrl=parsed}function fastparse(str){var simplePath=typeof str==="string"&&simplePathRegExp.exec(str);if(simplePath){var pathname=simplePath[1];var search=simplePath[2]||null;var url=Url!==undefined?new Url:{};url.path=str;url.href=str;url.pathname=pathname;url.search=search;url.query=search&&search.substr(1);return url}return parse(str)}function fresh(url,parsedUrl){return typeof parsedUrl==="object"&&parsedUrl!==null&&(Url===undefined||parsedUrl instanceof Url)&&parsedUrl._raw===url}},function(module,exports,__webpack_require__){var debug=__webpack_require__(564)("send");var deprecate=__webpack_require__(522)("send");var destroy=__webpack_require__(523);var escapeHtml=__webpack_require__(115),parseRange=__webpack_require__(524),Stream=__webpack_require__(316),mime=__webpack_require__(552),fresh=__webpack_require__(525),path=__webpack_require__(8),http=__webpack_require__(79),fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()),normalize=path.normalize,join=path.join;var etag=__webpack_require__(526);var EventEmitter=__webpack_require__(120).EventEmitter;var ms=__webpack_require__(527);var onFinished=__webpack_require__(528);var extname=path.extname;var maxMaxAge=60*60*24*365*1e3;var resolve=path.resolve;var sep=path.sep;var toString=Object.prototype.toString;var upPathRegexp=/(?:^|[\\\/])\.\.(?:[\\\/]|$)/;exports=module.exports=send;exports.mime=mime;var listenerCount=EventEmitter.listenerCount||function(emitter,type){return emitter.listeners(type).length};function send(req,path,options){return new SendStream(req,path,options)}function SendStream(req,path,options){var opts=options||{};this.options=opts;this.path=path;this.req=req;this._etag=opts.etag!==undefined?Boolean(opts.etag):true;this._dotfiles=opts.dotfiles!==undefined?opts.dotfiles:"ignore";if(["allow","deny","ignore"].indexOf(this._dotfiles)===-1){throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"')}this._hidden=Boolean(opts.hidden);if(opts.hidden!==undefined){deprecate("hidden: use dotfiles: '"+(this._hidden?"allow":"ignore")+"' instead")}if(opts.dotfiles===undefined){this._dotfiles=undefined}this._extensions=opts.extensions!==undefined?normalizeList(opts.extensions,"extensions option"):[];this._index=opts.index!==undefined?normalizeList(opts.index,"index option"):["index.html"];this._lastModified=opts.lastModified!==undefined?Boolean(opts.lastModified):true;this._maxage=opts.maxAge||opts.maxage;this._maxage=typeof this._maxage==="string"?ms(this._maxage):Number(this._maxage);this._maxage=!isNaN(this._maxage)?Math.min(Math.max(0,this._maxage),maxMaxAge):0;this._root=opts.root?resolve(opts.root):null;if(!this._root&&opts.from){this.from(opts.from)}}SendStream.prototype.__proto__=Stream.prototype;SendStream.prototype.etag=deprecate.function(function etag(val){val=Boolean(val);debug("etag %s",val);this._etag=val;return this},"send.etag: pass etag as option");SendStream.prototype.hidden=deprecate.function(function hidden(val){val=Boolean(val);debug("hidden %s",val);this._hidden=val;this._dotfiles=undefined;return this},"send.hidden: use dotfiles option");SendStream.prototype.index=deprecate.function(function index(paths){var index=!paths?[]:normalizeList(paths,"paths argument");debug("index %o",paths);this._index=index;return this},"send.index: pass index as option");SendStream.prototype.root=function(path){path=String(path);this._root=resolve(path);return this};SendStream.prototype.from=deprecate.function(SendStream.prototype.root,"send.from: pass root as option");SendStream.prototype.root=deprecate.function(SendStream.prototype.root,"send.root: pass root as option");SendStream.prototype.maxage=deprecate.function(function maxage(maxAge){maxAge=typeof maxAge==="string"?ms(maxAge):Number(maxAge);if(isNaN(maxAge))maxAge=0;if(Infinity==maxAge)maxAge=60*60*24*365*1e3;debug("max-age %d",maxAge);this._maxage=maxAge;return this},"send.maxage: pass maxAge as option");SendStream.prototype.error=function(status,err){var res=this.res;var msg=http.STATUS_CODES[status];err=err||new Error(msg);err.status=status;if(listenerCount(this,"error")!==0){return this.emit("error",err)}res._headers=undefined;res.statusCode=err.status;res.end(msg)};SendStream.prototype.hasTrailingSlash=function(){return"/"==this.path[this.path.length-1]};SendStream.prototype.isConditionalGET=function(){return this.req.headers["if-none-match"]||this.req.headers["if-modified-since"]};SendStream.prototype.removeContentHeaderFields=function(){var res=this.res;Object.keys(res._headers).forEach(function(field){if(0==field.indexOf("content")){res.removeHeader(field)}})};SendStream.prototype.notModified=function(){var res=this.res;debug("not modified");this.removeContentHeaderFields();res.statusCode=304;res.end()};SendStream.prototype.headersAlreadySent=function headersAlreadySent(){var err=new Error("Can't set headers after they are sent.");debug("headers already sent");this.error(500,err)};SendStream.prototype.isCachable=function(){var res=this.res;return res.statusCode>=200&&res.statusCode<300||304==res.statusCode};SendStream.prototype.onStatError=function(err){var notfound=["ENOENT","ENAMETOOLONG","ENOTDIR"];if(~notfound.indexOf(err.code))return this.error(404,err);this.error(500,err)};SendStream.prototype.isFresh=function(){return fresh(this.req.headers,this.res._headers)};SendStream.prototype.isRangeFresh=function isRangeFresh(){var ifRange=this.req.headers["if-range"];if(!ifRange)return true;return~ifRange.indexOf('"')?~ifRange.indexOf(this.res._headers["etag"]):Date.parse(this.res._headers["last-modified"])<=Date.parse(ifRange)};SendStream.prototype.redirect=function(path){if(listenerCount(this,"directory")!==0){return this.emit("directory")}if(this.hasTrailingSlash())return this.error(403);var res=this.res;path+="/";res.statusCode=301;res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Location",path);res.end('Redirecting to <a href="'+escapeHtml(path)+'">'+escapeHtml(path)+"</a>\n")};SendStream.prototype.pipe=function(res){var self=this,args=arguments,root=this._root;this.res=res;var path=decode(this.path);if(path===-1)return this.error(400);if(~path.indexOf("\x00"))return this.error(400);var parts;if(root!==null){if(upPathRegexp.test(normalize("."+sep+path))){debug('malicious path "%s"',path);return this.error(403)}path=normalize(join(root,path));root=normalize(root+sep);parts=path.substr(root.length).split(sep)}else{if(upPathRegexp.test(path)){debug('malicious path "%s"',path);return this.error(403)}parts=normalize(path).split(sep);path=resolve(path)}if(containsDotFile(parts)){var access=this._dotfiles;if(access===undefined){access=parts[parts.length-1][0]==="."?this._hidden?"allow":"ignore":"allow"}debug('%s dotfile "%s"',access,path);switch(access){case"allow":break;case"deny":return this.error(403);case"ignore":default:return this.error(404)}}if(this._index.length&&this.path[this.path.length-1]==="/"){this.sendIndex(path);return res}this.sendFile(path);return res};SendStream.prototype.send=function(path,stat){var len=stat.size;var options=this.options;var opts={};var res=this.res;var req=this.req;var ranges=req.headers.range;var offset=options.start||0;if(res._header){return this.headersAlreadySent()}debug('pipe "%s"',path);this.setHeader(path,stat);this.type(path);if(this.isConditionalGET()&&this.isCachable()&&this.isFresh()){return this.notModified()}len=Math.max(0,len-offset);if(options.end!==undefined){var bytes=options.end-offset+1;if(len>bytes)len=bytes}if(ranges){ranges=parseRange(len,ranges);if(!this.isRangeFresh()){debug("range stale");ranges=-2}if(-1==ranges){debug("range unsatisfiable");res.setHeader("Content-Range","bytes */"+stat.size);return this.error(416)}if(-2!=ranges&&ranges.length===1){debug("range %j",ranges);res.statusCode=206;res.setHeader("Content-Range","bytes "+ranges[0].start+"-"+ranges[0].end+"/"+len);offset+=ranges[0].start;len=ranges[0].end-ranges[0].start+1}}for(var prop in options){opts[prop]=options[prop]}opts.start=offset;opts.end=Math.max(offset,offset+len-1);res.setHeader("Content-Length",len);if("HEAD"==req.method)return res.end();this.stream(path,opts)};SendStream.prototype.sendFile=function sendFile(path){var i=0;var self=this;debug('stat "%s"',path);fs.stat(path,function onstat(err,stat){if(err&&err.code==="ENOENT"&&!extname(path)&&path[path.length-1]!==sep){return next(err)}if(err)return self.onStatError(err);if(stat.isDirectory())return self.redirect(self.path);self.emit("file",path,stat);self.send(path,stat)});function next(err){if(self._extensions.length<=i){return err?self.onStatError(err):self.error(404)}var p=path+"."+self._extensions[i++];debug('stat "%s"',p);fs.stat(p,function(err,stat){if(err)return next(err);if(stat.isDirectory())return next();self.emit("file",p,stat);self.send(p,stat)})}};SendStream.prototype.sendIndex=function sendIndex(path){var i=-1;var self=this;function next(err){if(++i>=self._index.length){if(err)return self.onStatError(err);return self.error(404)}var p=join(path,self._index[i]);debug('stat "%s"',p);fs.stat(p,function(err,stat){if(err)return next(err);if(stat.isDirectory())return next();self.emit("file",p,stat);self.send(p,stat)})}next()};SendStream.prototype.stream=function(path,options){var finished=false;var self=this;var res=this.res;var req=this.req;var stream=fs.createReadStream(path,options);this.emit("stream",stream);stream.pipe(res);onFinished(res,function onfinished(){finished=true;destroy(stream)});stream.on("error",function onerror(err){if(finished)return;finished=true;destroy(stream);self.onStatError(err)});stream.on("end",function onend(){self.emit("end")})};SendStream.prototype.type=function(path){var res=this.res;if(res.getHeader("Content-Type"))return;var type=mime.lookup(path);var charset=mime.charsets.lookup(type);debug("content-type %s",type);res.setHeader("Content-Type",type+(charset?"; charset="+charset:""))};SendStream.prototype.setHeader=function setHeader(path,stat){var res=this.res;this.emit("headers",res,path,stat);if(!res.getHeader("Accept-Ranges"))res.setHeader("Accept-Ranges","bytes");if(!res.getHeader("Date"))res.setHeader("Date",(new Date).toUTCString());if(!res.getHeader("Cache-Control"))res.setHeader("Cache-Control","public, max-age="+Math.floor(this._maxage/1e3));if(this._lastModified&&!res.getHeader("Last-Modified")){var modified=stat.mtime.toUTCString();debug("modified %s",modified);res.setHeader("Last-Modified",modified)}if(this._etag&&!res.getHeader("ETag")){var val=etag(stat);debug("etag %s",val);res.setHeader("ETag",val)}};function containsDotFile(parts){for(var i=0;i<parts.length;i++){if(parts[i][0]==="."){return true}}return false}function decode(path){try{return decodeURIComponent(path)}catch(err){return-1}}function normalizeList(val,name){var list=[].concat(val||[]);for(var i=0;i<list.length;i++){if(typeof list[i]!=="string"){throw new TypeError(name+" must be array of strings or false")}}return list}},function(module,exports,__webpack_require__){(function(process){module.exports=glob;var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());var minimatch=__webpack_require__(578);var Minimatch=minimatch.Minimatch;var inherits=__webpack_require__(577);var EE=__webpack_require__(120).EventEmitter;var path=__webpack_require__(8);var assert=__webpack_require__(107);var globSync=__webpack_require__(335);var common=__webpack_require__(336);var alphasort=common.alphasort;var alphasorti=common.alphasorti;var isAbsolute=common.isAbsolute;var setopts=common.setopts;var ownProp=common.ownProp;var inflight=__webpack_require__(579);var util=__webpack_require__(52);var childrenIgnored=common.childrenIgnored;var once=__webpack_require__(580);function glob(pattern,options,cb){if(typeof options==="function")cb=options,options={};if(!options)options={};if(options.sync){if(cb)throw new TypeError("callback provided to sync glob");return globSync(pattern,options)}return new Glob(pattern,options,cb)}glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;glob.glob=glob;glob.hasMagic=function(pattern,options_){var options=util._extend({},options_);options.noprocess=true;var g=new Glob(pattern,options);var set=g.minimatch.set;if(set.length>1)return true;for(var j=0;j<set[0].length;j++){if(typeof set[0][j]!=="string")return true}return false};glob.Glob=Glob;inherits(Glob,EE);function Glob(pattern,options,cb){if(typeof options==="function"){cb=options;options=null}if(options&&options.sync){if(cb)throw new TypeError("callback provided to sync glob");return new GlobSync(pattern,options)}if(!(this instanceof Glob))return new Glob(pattern,options,cb);setopts(this,pattern,options);this._didRealPath=false;var n=this.minimatch.set.length;this.matches=new Array(n);if(typeof cb==="function"){cb=once(cb);this.on("error",cb);this.on("end",function(matches){cb(null,matches)})}var self=this;var n=this.minimatch.set.length;this._processing=0;this.matches=new Array(n);this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(n===0)return done();for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false,done)}function done(){--self._processing;if(self._processing<=0)self._finish()}}Glob.prototype._finish=function(){assert(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this);this.emit("end",this.found)};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var n=this.matches.length;if(n===0)return this._finish();var self=this;for(var i=0;i<this.matches.length;i++)this._realpathSet(i,next);function next(){if(--n===0)self._finish()}};Glob.prototype._realpathSet=function(index,cb){var matchset=this.matches[index];if(!matchset)return cb();var found=Object.keys(matchset);var self=this;var n=found.length;if(n===0)return cb();var set=this.matches[index]=Object.create(null);found.forEach(function(p,i){p=self._makeAbs(p);fs.realpath(p,self.realpathCache,function(er,real){if(!er)set[real]=true;else if(er.syscall==="stat")set[p]=true;else self.emit("error",er);if(--n===0){self.matches[index]=set;cb()}})})};Glob.prototype._mark=function(p){return common.mark(this,p)};Glob.prototype._makeAbs=function(f){return common.makeAbs(this,f)};Glob.prototype.abort=function(){this.aborted=true;this.emit("abort")};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit("pause")}};Glob.prototype.resume=function(){if(this.paused){this.emit("resume");this.paused=false;if(this._emitQueue.length){var eq=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<eq.length;i++){var e=eq[i];this._emitMatch(e[0],e[1])}}if(this._processQueue.length){var pq=this._processQueue.slice(0);

this._processQueue.length=0;for(var i=0;i<pq.length;i++){var p=pq[i];this._processing--;this._process(p[0],p[1],p[2],p[3])}}}};Glob.prototype._process=function(pattern,index,inGlobStar,cb){assert(this instanceof Glob);assert(typeof cb==="function");if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([pattern,index,inGlobStar,cb]);return}var n=0;while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join("/"),index,cb);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/");break}var remain=pattern.slice(n);var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.join("/"))){if(!prefix||!isAbsolute(prefix))prefix="/"+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return cb();var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar,cb);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar,cb)};Glob.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){return self._processReaddir2(prefix,read,abs,remain,index,inGlobStar,entries,cb)})};Glob.prototype._processReaddir2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)===".";var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=="."||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return cb();if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}this._emitMatch(index,e)}return cb()}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}this._process([e].concat(remain),index,inGlobStar,cb)}cb()};Glob.prototype._emitMatch=function(index,e){if(this.aborted)return;if(this.matches[index][e])return;if(this.paused){this._emitQueue.push([index,e]);return}var abs=this._makeAbs(e);if(this.nodir){var c=this.cache[abs];if(c==="DIR"||Array.isArray(c))return}if(this.mark)e=this._mark(e);this.matches[index][e]=true;var st=this.statCache[abs];if(st)this.emit("stat",e,st);this.emit("match",e)};Glob.prototype._readdirInGlobStar=function(abs,cb){if(this.aborted)return;if(this.follow)return this._readdir(abs,false,cb);var lstatkey="lstat\x00"+abs;var self=this;var lstatcb=inflight(lstatkey,lstatcb_);if(lstatcb)fs.lstat(abs,lstatcb);function lstatcb_(er,lstat){if(er)return cb();var isSym=lstat.isSymbolicLink();self.symlinks[abs]=isSym;if(!isSym&&!lstat.isDirectory()){self.cache[abs]="FILE";cb()}else self._readdir(abs,false,cb)}};Glob.prototype._readdir=function(abs,inGlobStar,cb){if(this.aborted)return;cb=inflight("readdir\x00"+abs+"\x00"+inGlobStar,cb);if(!cb)return;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs,cb);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==="FILE")return cb();if(Array.isArray(c))return cb(null,c)}var self=this;fs.readdir(abs,readdirCb(this,abs,cb))};function readdirCb(self,abs,cb){return function(er,entries){if(er)self._readdirError(abs,er,cb);else self._readdirEntries(abs,entries,cb)}}Glob.prototype._readdirEntries=function(abs,entries,cb){if(this.aborted)return;if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==="/")e=abs+e;else e=abs+"/"+e;this.cache[e]=true}}this.cache[abs]=entries;return cb(null,entries)};Glob.prototype._readdirError=function(f,er,cb){if(this.aborted)return;switch(er.code){case"ENOTDIR":this.cache[this._makeAbs(f)]="FILE";break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)return this.emit("error",er);if(!this.silent)console.error("glob error",er);break}return cb()};Glob.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){self._processGlobStar2(prefix,read,abs,remain,index,inGlobStar,entries,cb)})};Glob.prototype._processGlobStar2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false,cb);var isSym=this.symlinks[abs];var len=entries.length;if(isSym&&inGlobStar)return cb();for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==="."&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true,cb);var below=gspref.concat(entries[i],remain);this._process(below,index,true,cb)}cb()};Glob.prototype._processSimple=function(prefix,index,cb){var self=this;this._stat(prefix,function(er,exists){self._processSimple2(prefix,index,er,exists,cb)})};Glob.prototype._processSimple2=function(prefix,index,er,exists,cb){if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return cb();if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+="/"}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this._emitMatch(index,prefix);cb()};Glob.prototype._stat=function(f,cb){var abs=this._makeAbs(f);var needDir=f.slice(-1)==="/";if(f.length>this.maxLength)return cb();if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c="DIR";if(!needDir||c==="DIR")return cb(null,c);if(needDir&&c==="FILE")return cb()}var exists;var stat=this.statCache[abs];if(stat!==undefined){if(stat===false)return cb(null,stat);else{var type=stat.isDirectory()?"DIR":"FILE";if(needDir&&type==="FILE")return cb();else return cb(null,type,stat)}}var self=this;var statcb=inflight("stat\x00"+abs,lstatcb_);if(statcb)fs.lstat(abs,statcb);function lstatcb_(er,lstat){if(lstat&&lstat.isSymbolicLink()){return fs.stat(abs,function(er,stat){if(er)self._stat2(f,abs,null,lstat,cb);else self._stat2(f,abs,er,stat,cb)})}else{self._stat2(f,abs,er,lstat,cb)}}};Glob.prototype._stat2=function(f,abs,er,stat,cb){if(er){this.statCache[abs]=false;return cb()}var needDir=f.slice(-1)==="/";this.statCache[abs]=stat;if(abs.slice(-1)==="/"&&!stat.isDirectory())return cb(null,false,stat);var c=stat.isDirectory()?"DIR":"FILE";this.cache[abs]=this.cache[abs]||c;if(needDir&&c!=="DIR")return cb();return cb(null,c,stat)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},function(module,exports,__webpack_require__){"use strict";var ReadPreference=__webpack_require__(94);module.exports=function(url,options){options=options||{};var connection_part="";var auth_part="";var query_string_part="";var dbName="admin";if(url.indexOf("mongodb://")!=0)throw Error("URL must be in the format mongodb://user:pass@host:port/dbname");if(url.indexOf("?")!=-1){query_string_part=url.substr(url.indexOf("?")+1);connection_part=url.substring("mongodb://".length,url.indexOf("?"))}else{connection_part=url.substring("mongodb://".length)}if(connection_part.indexOf("@")!=-1){auth_part=connection_part.split("@")[0];connection_part=connection_part.split("@")[1]}if(connection_part.indexOf(".sock")!=-1){if(connection_part.indexOf(".sock/")!=-1){dbName=connection_part.split(".sock/")[1];connection_part=connection_part.split("/",connection_part.indexOf(".sock")+".sock".length)}}else if(connection_part.indexOf("/")!=-1){dbName=connection_part.split("/")[1];connection_part=connection_part.split("/")[0]}var object={};var authPart=auth_part||"";var auth=authPart.split(":",2);auth[0]=decodeURIComponent(auth[0]);if(auth[1]){auth[1]=decodeURIComponent(auth[1])}if(auth.length==2)object.auth={user:auth[0],password:auth[1]};var hostPart;var urlOptions;var servers;var serverOptions={socketOptions:{}};var dbOptions={read_preference_tags:[]};var replSetServersOptions={socketOptions:{}};object.server_options=serverOptions;object.db_options=dbOptions;object.rs_options=replSetServersOptions;object.mongos_options={};if(url.match(/\.sock/)){var domainSocket=url.substring(url.indexOf("mongodb://")+"mongodb://".length,url.lastIndexOf(".sock")+".sock".length);if(domainSocket.indexOf("@")!=-1)domainSocket=domainSocket.split("@")[1];servers=[{domain_socket:domainSocket}]}else{hostPart=connection_part;servers=hostPart.split(",").map(function(h){var _host,_port,ipv6match;if(ipv6match=/\[([^\]]+)\](?:\:(.+))?/.exec(h)){_host=ipv6match[1];_port=parseInt(ipv6match[2],10)||27017}else{var hostPort=h.split(":",2);_host=hostPort[0]||"localhost";_port=hostPort[1]!=null?parseInt(hostPort[1],10):27017;if(_host.indexOf("?")!=-1)_host=_host.split(/\?/)[0]}return{host:_host,port:_port}})}object.dbName=dbName||"admin";urlOptions=(query_string_part||"").split(/[&;]/);urlOptions.forEach(function(opt){if(!opt)return;var splitOpt=opt.split("="),name=splitOpt[0],value=splitOpt[1];switch(name){case"slaveOk":case"slave_ok":serverOptions.slave_ok=value=="true";dbOptions.slaveOk=value=="true";break;case"maxPoolSize":case"poolSize":serverOptions.poolSize=parseInt(value,10);replSetServersOptions.poolSize=parseInt(value,10);break;case"autoReconnect":case"auto_reconnect":serverOptions.auto_reconnect=value=="true";break;case"minPoolSize":throw new Error("minPoolSize not supported");case"maxIdleTimeMS":throw new Error("maxIdleTimeMS not supported");case"waitQueueMultiple":throw new Error("waitQueueMultiple not supported");case"waitQueueTimeoutMS":throw new Error("waitQueueTimeoutMS not supported");case"uuidRepresentation":throw new Error("uuidRepresentation not supported");case"ssl":if(value=="prefer"){serverOptions.ssl=value;replSetServersOptions.ssl=value;break}serverOptions.ssl=value=="true";replSetServersOptions.ssl=value=="true";break;case"replicaSet":case"rs_name":replSetServersOptions.rs_name=value;break;case"reconnectWait":replSetServersOptions.reconnectWait=parseInt(value,10);break;case"retries":replSetServersOptions.retries=parseInt(value,10);break;case"readSecondary":case"read_secondary":replSetServersOptions.read_secondary=value=="true";break;case"fsync":dbOptions.fsync=value=="true";break;case"journal":dbOptions.j=value=="true";break;case"safe":dbOptions.safe=value=="true";break;case"nativeParser":case"native_parser":dbOptions.native_parser=value=="true";break;case"connectTimeoutMS":serverOptions.socketOptions.connectTimeoutMS=parseInt(value,10);replSetServersOptions.socketOptions.connectTimeoutMS=parseInt(value,10);break;case"socketTimeoutMS":serverOptions.socketOptions.socketTimeoutMS=parseInt(value,10);replSetServersOptions.socketOptions.socketTimeoutMS=parseInt(value,10);break;case"w":dbOptions.w=parseInt(value,10);if(isNaN(dbOptions.w))dbOptions.w=value;break;case"authSource":dbOptions.authSource=value;break;case"gssapiServiceName":dbOptions.gssapiServiceName=value;break;case"authMechanism":if(value=="GSSAPI"){if(object.auth==null){var urlDecodeAuthPart=decodeURIComponent(authPart);if(urlDecodeAuthPart.indexOf("@")==-1)throw new Error("GSSAPI requires a provided principal");object.auth={user:urlDecodeAuthPart,password:null}}else{object.auth.user=decodeURIComponent(object.auth.user)}}else if(value=="MONGODB-X509"){object.auth={user:decodeURIComponent(authPart)}}if(value!="GSSAPI"&&value!="MONGODB-X509"&&value!="MONGODB-CR"&&value!="SCRAM-SHA-1"&&value!="PLAIN")throw new Error("only GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism");dbOptions.authMechanism=value;break;case"authMechanismProperties":var values=value.split(",");var o={};values.forEach(function(x){var v=x.split(":");o[v[0]]=v[1]});dbOptions.authMechanismProperties=o;if(typeof o.SERVICE_NAME=="string")dbOptions.gssapiServiceName=o.SERVICE_NAME;break;case"wtimeoutMS":dbOptions.wtimeout=parseInt(value,10);break;case"readPreference":if(!ReadPreference.isValid(value))throw new Error("readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest");dbOptions.read_preference=value;break;case"readPreferenceTags":value=decodeURIComponent(value);var tagObject={};if(value==null||value==""){dbOptions.read_preference_tags.push(tagObject);break}var tags=value.split(/\,/);for(var i=0;i<tags.length;i++){var parts=tags[i].trim().split(/\:/);tagObject[parts[0]]=parts[1]}dbOptions.read_preference_tags.push(tagObject);break;default:break}});if(dbOptions.read_preference_tags.length===0){dbOptions.read_preference_tags=null}if((dbOptions.w==-1||dbOptions.w==0)&&(dbOptions.journal==true||dbOptions.fsync==true||dbOptions.safe==true))throw new Error("w set to -1 or 0 cannot be combined with safe/w/journal/fsync");if(!dbOptions.read_preference)dbOptions.read_preference="primary";object.servers=servers;return object}},function(module,exports,__webpack_require__){(function(process){"use strict";var MongoError=__webpack_require__(114).MongoError;var shallowClone=function(obj){var copy={};for(var name in obj)copy[name]=obj[name];return copy};var getSingleProperty=function(obj,name,value){Object.defineProperty(obj,name,{enumerable:true,get:function(){return value}})};var formatSortValue=exports.formatSortValue=function(sortDirection){var value=(""+sortDirection).toLowerCase();switch(value){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Error("Illegal sort clause, must be of the form "+"[['field1', '(ascending|descending)'], "+"['field2', '(ascending|descending)']]")}};var formattedOrderClause=exports.formattedOrderClause=function(sortValue){var orderBy={};if(sortValue==null)return null;if(Array.isArray(sortValue)){if(sortValue.length===0){return null}for(var i=0;i<sortValue.length;i++){if(sortValue[i].constructor==String){orderBy[sortValue[i]]=1}else{orderBy[sortValue[i][0]]=formatSortValue(sortValue[i][1])}}}else if(sortValue!=null&&typeof sortValue=="object"){orderBy=sortValue}else if(typeof sortValue=="string"){orderBy[sortValue]=1}else{throw new Error("Illegal sort clause, must be of the form "+"[['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]")}return orderBy};var checkCollectionName=function checkCollectionName(collectionName){if("string"!==typeof collectionName){throw Error("collection name must be a String")}if(!collectionName||collectionName.indexOf("..")!=-1){throw Error("collection names cannot be empty")}if(collectionName.indexOf("$")!=-1&&collectionName.match(/((^\$cmd)|(oplog\.\$main))/)==null){throw Error("collection names must not contain '$'")}if(collectionName.match(/^\.|\.$/)!=null){throw Error("collection names must not start or end with '.'")}if(!!~collectionName.indexOf("\x00")){throw new Error("collection names cannot contain a null character")}};var handleCallback=function(callback,err,value1,value2){try{if(callback==null)return;if(value2)return callback(err,value1,value2);return callback(err,value1)}catch(err){process.nextTick(function(){throw err});return false}return true};var toError=function(error){if(error instanceof Error)return error;var msg=error.err||error.errmsg||error.errMessage||error;var e=new MongoError(msg);var keys=typeof error=="object"?Object.keys(error):[];for(var i=0;i<keys.length;i++){e[keys[i]]=error[keys[i]]}return e};var normalizeHintField=function normalizeHintField(hint){var finalHint=null;if(typeof hint=="string"){finalHint=hint}else if(Array.isArray(hint)){finalHint={};hint.forEach(function(param){finalHint[param]=1})}else if(hint!=null&&typeof hint=="object"){finalHint={};for(var name in hint){finalHint[name]=hint[name]}}return finalHint};var parseIndexOptions=function(fieldOrSpec){var fieldHash={};var indexes=[];var keys;if("string"==typeof fieldOrSpec){indexes.push(fieldOrSpec+"_"+1);fieldHash[fieldOrSpec]=1}else if(Array.isArray(fieldOrSpec)){fieldOrSpec.forEach(function(f){if("string"==typeof f){indexes.push(f+"_"+1);fieldHash[f]=1}else if(Array.isArray(f)){indexes.push(f[0]+"_"+(f[1]||1));fieldHash[f[0]]=f[1]||1}else if(isObject(f)){keys=Object.keys(f);keys.forEach(function(k){indexes.push(k+"_"+f[k]);fieldHash[k]=f[k]})}else{}})}else if(isObject(fieldOrSpec)){keys=Object.keys(fieldOrSpec);keys.forEach(function(key){indexes.push(key+"_"+fieldOrSpec[key]);fieldHash[key]=fieldOrSpec[key]})}return{name:indexes.join("_"),keys:keys,fieldHash:fieldHash}};var isObject=exports.isObject=function(arg){return"[object Object]"==toString.call(arg)};var debugOptions=function(debugFields,options){var finaloptions={};debugFields.forEach(function(n){finaloptions[n]=options[n]});return finaloptions};var decorateCommand=function(command,options,exclude){for(var name in options){if(exclude[name]==null)command[name]=options[name]}return command};exports.shallowClone=shallowClone;exports.getSingleProperty=getSingleProperty;exports.checkCollectionName=checkCollectionName;exports.toError=toError;exports.formattedOrderClause=formattedOrderClause;exports.parseIndexOptions=parseIndexOptions;exports.normalizeHintField=normalizeHintField;exports.handleCallback=handleCallback;exports.decorateCommand=decorateCommand;exports.isObject=isObject;exports.debugOptions=debugOptions}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,toError=__webpack_require__(122).toError,getSingleProperty=__webpack_require__(122).getSingleProperty,formattedOrderClause=__webpack_require__(122).formattedOrderClause,handleCallback=__webpack_require__(122).handleCallback,Logger=__webpack_require__(114).Logger,EventEmitter=__webpack_require__(120).EventEmitter,ReadPreference=__webpack_require__(94),MongoError=__webpack_require__(114).MongoError,Readable=__webpack_require__(316).Readable||__webpack_require__(333).Readable,CoreCursor=__webpack_require__(97),Query=__webpack_require__(114).Query,CoreReadPreference=__webpack_require__(114).ReadPreference;var CommandCursor=function(bson,ns,cmd,options,topology,topologyOptions){CoreCursor.apply(this,Array.prototype.slice.call(arguments,0));var self=this;var state=CommandCursor.INIT;var streamOptions={};var maxTimeMS=null;Readable.call(this,{objectMode:true});this.s={maxTimeMS:maxTimeMS,state:state,streamOptions:streamOptions,bson:bson,ns:ns,cmd:cmd,options:options,topology:topology,topologyOptions:topologyOptions}};inherits(CommandCursor,Readable);var methodsToInherit=["next","each","forEach","toArray","rewind","bufferedCount","readBufferedDocuments","close","isClosed"];for(var i=0;i<methodsToInherit.length;i++){CommandCursor.prototype[methodsToInherit[i]]=CoreCursor.prototype[methodsToInherit[i]]}CommandCursor.prototype.batchSize=function(value){if(this.s.state==CommandCursor.CLOSED||this.isDead())throw new MongoError("Cursor is closed");if(typeof value!="number")throw new MongoError("batchSize requires an integer");if(this.s.cmd.cursor)this.s.cmd.cursor.batchSize=value;this.setCursorBatchSize(value);return this};CommandCursor.prototype.maxTimeMS=function(value){if(this.s.topology.lastIsMaster().minWireVersion>2){this.s.cmd.maxTimeMS=value}return this};CommandCursor.prototype.get=CommandCursor.prototype.toArray;CommandCursor.INIT=0;CommandCursor.OPEN=1;CommandCursor.CLOSED=2;module.exports=CommandCursor},function(module,exports,__webpack_require__){"use strict";var toError=__webpack_require__(122).toError;var Admin=function(db,topology){if(!(this instanceof Admin))return new Admin(db,topology);var self=this;this.s={db:db,topology:topology}};Admin.prototype.command=function(command,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();options=args.length?args.shift():{};this.s.db.executeDbAdminCommand(command,options,function(err,doc){return callback!=null?callback(err,doc):null})};Admin.prototype.buildInfo=function(callback){this.serverInfo(callback)};Admin.prototype.serverInfo=function(callback){this.s.db.executeDbAdminCommand({buildinfo:1},function(err,doc){if(err!=null)return callback(err,null);return callback(null,doc)})};Admin.prototype.serverStatus=function(callback){var self=this;this.s.db.executeDbAdminCommand({serverStatus:1},function(err,doc){if(err==null&&doc.ok===1){callback(null,doc)}else{if(err)return callback(err,false);return callback(toError(doc),false)}})};Admin.prototype.profilingLevel=function(callback){var self=this;this.s.db.executeDbAdminCommand({profile:-1},function(err,doc){doc=doc;if(err==null&&doc.ok===1){var was=doc.was;if(was==0)return callback(null,"off");if(was==1)return callback(null,"slow_only");if(was==2)return callback(null,"all");return callback(new Error("Error: illegal profiling level value "+was),null)}else{err!=null?callback(err,null):callback(new Error("Error with profile command"),null)}})};Admin.prototype.ping=function(options,callback){var args=Array.prototype.slice.call(arguments,0);this.s.db.executeDbAdminCommand({ping:1},args.pop())};Admin.prototype.authenticate=function(username,password,callback){this.s.db.authenticate(username,password,{authdb:"admin"},function(err,doc){return callback(err,doc)})};Admin.prototype.logout=function(callback){this.s.db.logout({authdb:"admin"},function(err,doc){return callback(err,doc)})};Admin.prototype.addUser=function(username,password,options,callback){var args=Array.prototype.slice.call(arguments,2);callback=args.pop();options=args.length?args.shift():{};options.dbName="admin";this.s.db.addUser(username,password,options,function(err,doc){return callback(err,doc)})};Admin.prototype.removeUser=function(username,options,callback){var self=this;var args=Array.prototype.slice.call(arguments,1);callback=args.pop();options=args.length?args.shift():{};options.dbName="admin";this.s.db.removeUser(username,options,function(err,doc){return callback(err,doc)})};Admin.prototype.setProfilingLevel=function(level,callback){var self=this;var command={};var profile=0;if(level=="off"){profile=0}else if(level=="slow_only"){profile=1}else if(level=="all"){profile=2}else{return callback(new Error("Error: illegal profiling level value "+level))}command["profile"]=profile;this.s.db.executeDbAdminCommand(command,function(err,doc){doc=doc;if(err==null&&doc.ok===1)return callback(null,level);return err!=null?callback(err,null):callback(new Error("Error with profile command"),null)})};Admin.prototype.profilingInfo=function(callback){try{this.s.topology.cursor("admin.system.profile",{find:"system.profile",query:{}},{}).toArray(callback)}catch(err){return callback(err,null)}};Admin.prototype.validateCollection=function(collectionName,options,callback){var args=Array.prototype.slice.call(arguments,1);callback=args.pop();options=args.length?args.shift():{};var self=this;var command={validate:collectionName};var keys=Object.keys(options);for(var i=0;i<keys.length;i++){if(options.hasOwnProperty(keys[i])){command[keys[i]]=options[keys[i]]}}this.s.db.command(command,function(err,doc){if(err!=null)return callback(err,null);if(doc.ok===0)return callback(new Error("Error with validate command"),null);if(doc.result!=null&&doc.result.constructor!=String)return callback(new Error("Error with validation data"),null);if(doc.result!=null&&doc.result.match(/exception|corrupt/)!=null)return callback(new Error("Error: invalid collection "+collectionName),null);if(doc.valid!=null&&!doc.valid)return callback(new Error("Error: invalid collection "+collectionName),null);return callback(null,doc)})};Admin.prototype.listDatabases=function(callback){this.s.db.executeDbAdminCommand({listDatabases:1},{},function(err,doc){if(err!=null)return callback(err,null);return callback(null,doc)})};Admin.prototype.replSetGetStatus=function(callback){var self=this;this.s.db.executeDbAdminCommand({replSetGetStatus:1},function(err,doc){if(err==null&&doc.ok===1)return callback(null,doc);if(err)return callback(err,false);return callback(toError(doc),false)})};module.exports=Admin},function(module,exports,__webpack_require__){"use strict";var MongoError=__webpack_require__(114).MongoError,f=__webpack_require__(52).format;var Store=function(topology,storeOptions){var self=this;var storedOps=[];storeOptions=storeOptions||{force:false,bufferMaxEntries:-1};this.s={storedOps:storedOps,storeOptions:storeOptions,topology:topology};Object.defineProperty(this,"length",{enumerable:true,get:function(){return self.s.storedOps.length}})};Store.prototype.add=function(opType,ns,ops,options,callback){if(this.s.storeOptions.force)return callback(new MongoError("db closed by application"));if(this.s.storeOptions.bufferMaxEntries==0)return callback(new MongoError(f("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries)));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries){while(this.s.storedOps.length>0){var op=this.s.storedOps.shift();op.c(new MongoError(f("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries)))}return}this.s.storedOps.push({t:opType,n:ns,o:ops,op:options,c:callback})};Store.prototype.addObjectAndMethod=function(opType,object,method,params,callback){if(this.s.storeOptions.force)return callback(new MongoError("db closed by application"));if(this.s.storeOptions.bufferMaxEntries==0)return callback(new MongoError(f("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries)));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries){while(this.s.storedOps.length>0){var op=this.s.storedOps.shift();op.c(new MongoError(f("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries)))}return}this.s.storedOps.push({t:opType,m:method,o:object,p:params,c:callback})};Store.prototype.flush=function(){while(this.s.storedOps.length>0){this.s.storedOps.shift().c(new MongoError(f("no connection available for operation")))}};Store.prototype.execute=function(){var ops=this.s.storedOps;this.s.storedOps=[];while(ops.length>0){var op=ops.shift();if(op.t=="cursor"){op.o[op.m].apply(op.o,op.p)}else{this.s.topology[op.t](op.n,op.o,op.op,op.c)}}};Store.prototype.all=function(){return this.s.storedOps};var ServerCapabilities=function(ismaster){var setup_get_property=function(object,name,value){Object.defineProperty(object,name,{enumerable:true,get:function(){return value}})};var aggregationCursor=false;var writeCommands=false;var textSearch=false;var authCommands=false;var listCollections=false;var listIndexes=false;var maxNumberOfDocsInBatch=ismaster.maxWriteBatchSize||1e3;if(ismaster.minWireVersion>=0){textSearch=true}if(ismaster.maxWireVersion>=1){aggregationCursor=true;authCommands=true}if(ismaster.maxWireVersion>=2){writeCommands=true}if(ismaster.maxWireVersion>=3){listCollections=true;listIndexes=true}if(ismaster.minWireVersion==null){ismaster.minWireVersion=0;

}if(ismaster.maxWireVersion==null){ismaster.maxWireVersion=0}setup_get_property(this,"hasAggregationCursor",aggregationCursor);setup_get_property(this,"hasWriteCommands",writeCommands);setup_get_property(this,"hasTextSearch",textSearch);setup_get_property(this,"hasAuthCommands",authCommands);setup_get_property(this,"hasListCollectionsCommand",listCollections);setup_get_property(this,"hasListIndexesCommand",listIndexes);setup_get_property(this,"minWireVersion",ismaster.minWireVersion);setup_get_property(this,"maxWireVersion",ismaster.maxWireVersion);setup_get_property(this,"maxNumberOfDocsInBatch",maxNumberOfDocsInBatch)};exports.Store=Store;exports.ServerCapabilities=ServerCapabilities},function(module,exports,__webpack_require__){"use strict";exports.clone=function clone(x){var type=typeof x;if(type==="number"||type==="string"||type==="boolean"||x===null||x===undefined){return x}if(typeof x.clone==="function"){return x.clone()}if(Array.isArray(x)){return x.map(function(value){return clone(value)})}if(x instanceof Number)return new Number(x.valueOf());if(x instanceof String)return new String(x.valueOf());if(x instanceof Boolean)return new Boolean(x.valueOf());if(x instanceof Date)return new Date(x.valueOf());if(x instanceof RegExp)throw new TypeError("Cannot clone "+x);var m={};for(var key in x){if(x.hasOwnProperty(key)){m[key]=clone(x[key])}}return m};exports.extend=function(a,b){for(var prop in b){if(b.hasOwnProperty(prop)){a[prop]=b[prop]}}return a};exports.deepExtend=function deepExtend(a,b){if(Array.isArray(b)){throw new TypeError("Arrays are not supported by deepExtend")}for(var prop in b){if(b.hasOwnProperty(prop)){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={}}if(a[prop].constructor===Object){deepExtend(a[prop],b[prop])}else{a[prop]=b[prop]}}else if(Array.isArray(b[prop])){throw new TypeError("Arrays are not supported by deepExtend")}else{a[prop]=b[prop]}}}return a};exports.deepEqual=function deepEqual(a,b){var prop,i,len;if(Array.isArray(a)){if(!Array.isArray(b)){return false}if(a.length!=b.length){return false}for(i=0,len=a.length;i<len;i++){if(!exports.deepEqual(a[i],b[i])){return false}}return true}else if(a instanceof Object){if(Array.isArray(b)||!(b instanceof Object)){return false}for(prop in a){if(!exports.deepEqual(a[prop],b[prop])){return false}}for(prop in b){if(!exports.deepEqual(a[prop],b[prop])){return false}}return true}else{return typeof a===typeof b&&a==b}};exports.canDefineProperty=function(){try{if(Object.defineProperty){Object.defineProperty({},"x",{});return true}}catch(e){}return false};exports.lazy=function(object,prop,fn){if(exports.canDefineProperty()){var _uninitialized=true;var _value;Object.defineProperty(object,prop,{get:function(){if(_uninitialized){_value=fn();_uninitialized=false}return _value},set:function(value){_value=value;_uninitialized=false},configurable:true})}else{object[prop]=fn()}}},function(module,exports,__webpack_require__){"use strict";var NumberFormatter=__webpack_require__(338);exports.isNumber=function(value){return value instanceof Number||typeof value=="number"};exports.isInteger=function(value){return value==Math.round(value)};exports.sign=function(x){if(x>0){return 1}else if(x<0){return-1}else{return 0}};exports.format=function(value,options){if(typeof options==="function"){return options(value)}if(value===Infinity){return"Infinity"}else if(value===-Infinity){return"-Infinity"}else if(isNaN(value)){return"NaN"}var notation="auto";var precision=undefined;if(options){if(options.notation){notation=options.notation}if(exports.isNumber(options)){precision=options}else if(options.precision){precision=options.precision}}switch(notation){case"fixed":return exports.toFixed(value,precision);case"exponential":return exports.toExponential(value,precision);case"auto":return exports.toPrecision(value,precision,options&&options.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var digits=arguments[2];var e=arguments[4];return digits!=="."?digits+e:e});default:throw new Error('Unknown notation "'+notation+'". '+'Choose "auto", "exponential", or "fixed".')}};exports.toExponential=function(value,precision){return new NumberFormatter(value).toExponential(precision)};exports.toFixed=function(value,precision){return new NumberFormatter(value).toFixed(precision)};exports.toPrecision=function(value,precision,options){return new NumberFormatter(value).toPrecision(precision,options)};exports.digits=function(value){return value.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length};exports.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16;exports.nearlyEqual=function(x,y,epsilon){if(epsilon==null)return x==y;if(x==y)return true;if(isNaN(x)||isNaN(y))return false;if(isFinite(x)&&isFinite(y)){var diff=Math.abs(x-y);if(diff<exports.DBL_EPSILON){return true}else{return diff<=Math.max(Math.abs(x),Math.abs(y))*epsilon}}return false}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var object=__webpack_require__(126);var bignumber=__webpack_require__(339);var Complex=__webpack_require__(131);var BigNumber=math.type.BigNumber;math["true"]=true;math["false"]=false;math["null"]=null;math["uninitialized"]=__webpack_require__(340).UNINITIALIZED;if(config.number==="bignumber"){math["Infinity"]=new BigNumber(Infinity);math["NaN"]=new BigNumber(NaN);object.lazy(math,"pi",function(){return bignumber.pi(config.precision)});object.lazy(math,"tau",function(){return bignumber.tau(config.precision)});object.lazy(math,"e",function(){return bignumber.e(config.precision)});object.lazy(math,"phi",function(){return bignumber.phi(config.precision)});object.lazy(math,"E",function(){return math.e});object.lazy(math,"LN2",function(){return new BigNumber(2).ln()});object.lazy(math,"LN10",function(){return new BigNumber(10).ln()});object.lazy(math,"LOG2E",function(){return new BigNumber(1).div(new BigNumber(2).ln())});object.lazy(math,"LOG10E",function(){return new BigNumber(1).div(new BigNumber(10).ln())});object.lazy(math,"PI",function(){return math.pi});object.lazy(math,"SQRT1_2",function(){return new BigNumber("0.5").sqrt()});object.lazy(math,"SQRT2",function(){return new BigNumber(2).sqrt()})}else{math["Infinity"]=Infinity;math["NaN"]=NaN;math.pi=Math.PI;math.tau=Math.PI*2;math.e=Math.E;math.phi=1.618033988749895;math.E=math.e;math.LN2=Math.LN2;math.LN10=Math.LN10;math.LOG2E=Math.LOG2E;math.LOG10E=Math.LOG10E;math.PI=math.pi;math.SQRT1_2=Math.SQRT1_2;math.SQRT2=Math.SQRT2}math.i=new Complex(0,1);math.version=__webpack_require__(341)}},function(module,exports,__webpack_require__){var BigNumber=__webpack_require__(581);module.exports=BigNumber},function(module,exports,__webpack_require__){"use strict";exports.ArgumentsError=__webpack_require__(342);exports.DimensionError=__webpack_require__(343);exports.IndexError=__webpack_require__(344);exports.UnsupportedTypeError=__webpack_require__(345)},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346),Unit=__webpack_require__(135),number=util.number,isNumber=util.number.isNumber,isUnit=Unit.isUnit,isString=util.string.isString;function Complex(re,im){if(!(this instanceof Complex)){throw new SyntaxError("Constructor must be called with the new operator")}switch(arguments.length){case 0:this.re=0;this.im=0;break;case 1:var arg=arguments[0];if(typeof arg==="object"){if("re"in arg&&"im"in arg){var construct=new Complex(arg.re,arg.im);this.re=construct.re;this.im=construct.im;break}else if("r"in arg&&"phi"in arg){var construct=Complex.fromPolar(arg.r,arg.phi);this.re=construct.re;this.im=construct.im;break}}throw new SyntaxError("Object with the re and im or r and phi properties expected.");case 2:if(!isNumber(re)||!isNumber(im)){throw new TypeError("Two numbers expected in Complex constructor")}this.re=re;this.im=im;break;default:throw new SyntaxError("One, two or three arguments expected in Complex constructor")}}Complex.isComplex=function(value){return value instanceof Complex};var text,index,c;function skipWhitespace(){while(c==" "||c=="	"){next()}}function isDigitDot(c){return c>="0"&&c<="9"||c=="."}function isDigit(c){return c>="0"&&c<="9"}function next(){index++;c=text.charAt(index)}function revert(oldIndex){index=oldIndex;c=text.charAt(index)}function parseNumber(){var number="";var oldIndex;oldIndex=index;if(c=="+"){next()}else if(c=="-"){number+=c;next()}if(!isDigitDot(c)){revert(oldIndex);return null}if(c=="."){number+=c;next();if(!isDigit(c)){revert(oldIndex);return null}}else{while(isDigit(c)){number+=c;next()}if(c=="."){number+=c;next()}}while(isDigit(c)){number+=c;next()}if(c=="E"||c=="e"){number+=c;next();if(c=="+"||c=="-"){number+=c;next()}if(!isDigit(c)){revert(oldIndex);return null}while(isDigit(c)){number+=c;next()}}return number}function parseComplex(){var cnext=text.charAt(index+1);if(c=="I"||c=="i"){next();return"1"}else if((c=="+"||c=="-")&&(cnext=="I"||cnext=="i")){var number=c=="+"?"1":"-1";next();next();return number}return null}Complex.parse=function(str){text=str;index=-1;c="";if(!isString(text)){return null}next();skipWhitespace();var first=parseNumber();if(first){if(c=="I"||c=="i"){next();skipWhitespace();if(c){return null}return new Complex(0,Number(first))}else{skipWhitespace();var separator=c;if(separator!="+"&&separator!="-"){skipWhitespace();if(c){return null}return new Complex(Number(first),0)}else{next();skipWhitespace();var second=parseNumber();if(second){if(c!="I"&&c!="i"){return null}next()}else{second=parseComplex();if(!second){return null}}if(separator=="-"){if(second[0]=="-"){second="+"+second.substring(1)}else{second="-"+second}}next();skipWhitespace();if(c){return null}return new Complex(Number(first),Number(second))}}}else{first=parseComplex();if(first){skipWhitespace();if(c){return null}return new Complex(0,Number(first))}}return null};Complex.fromPolar=function(args){switch(arguments.length){case 1:var arg=arguments[0];if(typeof arg==="object"){return Complex.fromPolar(arg.r,arg.phi)}throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],phi=arguments[1];if(isNumber(r)){if(isUnit(phi)&&phi.hasBase(Unit.BASE_UNITS.ANGLE)){phi=phi.toNumber("rad")}if(isNumber(phi)){return new Complex(r*Math.cos(phi),r*Math.sin(phi))}throw new TypeError("Phi is not a number nor an angle unit.")}else{throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}};Complex.prototype.toPolar=function(){return{r:Math.sqrt(this.re*this.re+this.im*this.im),phi:Math.atan2(this.im,this.re)}};Complex.prototype.clone=function(){return new Complex(this.re,this.im)};Complex.prototype.equals=function(other){return this.re===other.re&&this.im===other.im};Complex.prototype.format=function(options){var str="";var im=this.im;var re=this.re;var strRe=number.format(this.re,options);var strIm=number.format(this.im,options);var precision=isNumber(options)?options:options?options.precision:null;if(precision!==null){var epsilon=Math.pow(10,-precision);if(Math.abs(re/im)<epsilon){re=0}if(Math.abs(im/re)<epsilon){im=0}}if(im==0){str=strRe}else if(re==0){if(im==1){str="i"}else if(im==-1){str="-i"}else{str=strIm+"i"}}else{if(im>0){if(im==1){str=strRe+" + i"}else{str=strRe+" + "+strIm+"i"}}else{if(im==-1){str=strRe+" - i"}else{str=strRe+" - "+strIm.substring(1)+"i"}}}return str};Complex.prototype.toString=function(){return this.format()};Complex.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}};Complex.fromJSON=function(json){return new Complex(json)};Complex.prototype.valueOf=Complex.prototype.toString;module.exports=Complex},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346);var number=util.number;var string=util.string;var array=util.array;function Range(start,end,step){if(!(this instanceof Range)){throw new SyntaxError("Constructor must be called with the new operator")}if(start!=null&&!number.isNumber(start)){throw new TypeError("Parameter start must be a number")}if(end!=null&&!number.isNumber(end)){throw new TypeError("Parameter end must be a number")}if(step!=null&&!number.isNumber(step)){throw new TypeError("Parameter step must be a number")}this.start=start!=null?parseFloat(start):0;this.end=end!=null?parseFloat(end):0;this.step=step!=null?parseFloat(step):1}Range.parse=function(str){if(!string.isString(str)){return null}var args=str.split(":");var nums=args.map(function(arg){return parseFloat(arg)});var invalid=nums.some(function(num){return isNaN(num)});if(invalid){return null}switch(nums.length){case 2:return new Range(nums[0],nums[1]);case 3:return new Range(nums[0],nums[2],nums[1]);default:return null}};Range.prototype.clone=function(){return new Range(this.start,this.end,this.step)};Range.isRange=function(object){return object instanceof Range};Range.prototype.size=function(){var len=0,start=this.start,step=this.step,end=this.end,diff=end-start;if(number.sign(step)==number.sign(diff)){len=Math.ceil(diff/step)}else if(diff==0){len=0}if(isNaN(len)){len=0}return[len]};Range.prototype.min=function(){var size=this.size()[0];if(size>0){if(this.step>0){return this.start}else{return this.start+(size-1)*this.step}}else{return undefined}};Range.prototype.max=function(){var size=this.size()[0];if(size>0){if(this.step>0){return this.start+(size-1)*this.step}else{return this.start}}else{return undefined}};Range.prototype.forEach=function(callback){var x=this.start;var step=this.step;var end=this.end;var i=0;if(step>0){while(x<end){callback(x,i,this);x+=step;i++}}else if(step<0){while(x>end){callback(x,i,this);x+=step;i++}}};Range.prototype.map=function(callback){var array=[];this.forEach(function(value,index,obj){array[index]=callback(value,index,obj)});return array};Range.prototype.toArray=function(){var array=[];this.forEach(function(value,index){array[index]=value});return array};Range.prototype.valueOf=function(){return this.toArray()};Range.prototype.format=function(options){var str=number.format(this.start,options);if(this.step!=1){str+=":"+number.format(this.step,options)}str+=":"+number.format(this.end,options);return str};Range.prototype.toString=function(){return this.format()};Range.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}};Range.fromJSON=function(json){return new Range(json.start,json.end,json.step)};module.exports=Range},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346),Range=__webpack_require__(132),number=util.number,isNumber=number.isNumber,isInteger=number.isInteger,isArray=Array.isArray;function Index(ranges){if(!(this instanceof Index)){throw new SyntaxError("Constructor must be called with the new operator")}this._ranges=[];this._isScalar=true;for(var i=0,ii=arguments.length;i<ii;i++){var arg=arguments[i];if(arg instanceof Range){this._ranges.push(arg);this._isScalar=false}else if(isArray(arg)){this._ranges.push(_createRange(arg));this._isScalar=false}else if(isNumber(arg)){this._ranges.push(_createRange([arg,arg+1]))}else{var primitive=arg.valueOf();if(isArray(primitive)){this._ranges.push(_createRange(primitive));this._isScalar=false}else{throw new TypeError("Ranges must be an Array, Number, or Range")}}}}function _createRange(arg){var num=arg.length;for(var i=0;i<num;i++){if(!isNumber(arg[i])||!isInteger(arg[i])){throw new TypeError("Index parameters must be integer numbers")}}switch(arg.length){case 2:return new Range(arg[0],arg[1]);case 3:return new Range(arg[0],arg[1],arg[2]);default:throw new SyntaxError("Wrong number of arguments in Index (2 or 3 expected)")}}Index.prototype.clone=function(){var index=new Index;index._ranges=util.object.clone(this._ranges);index._isScalar=this._isScalar;return index};Index.isIndex=function(object){return object instanceof Index};Index.create=function(ranges){var index=new Index;Index.apply(index,ranges);return index};Index.prototype.size=function(){var size=[];for(var i=0,ii=this._ranges.length;i<ii;i++){var range=this._ranges[i];size[i]=range.size()[0]}return size};Index.prototype.max=function(){var values=[];for(var i=0,ii=this._ranges.length;i<ii;i++){var range=this._ranges[i];values[i]=range.max()}return values};Index.prototype.min=function(){var values=[];for(var i=0,ii=this._ranges.length;i<ii;i++){var range=this._ranges[i];values[i]=range.min()}return values};Index.prototype.forEach=function(callback){for(var i=0,ii=this._ranges.length;i<ii;i++){callback(this._ranges[i],i,this)}};Index.prototype.range=function(dim){return this._ranges[dim]||null};Index.prototype.isScalar=function(){return this._isScalar};Index.prototype.toArray=function(){var array=[];for(var i=0,ii=this._ranges.length;i<ii;i++){var range=this._ranges[i],row=[],x=range.start,end=range.end,step=range.step;if(step>0){while(x<end){row.push(x);x+=step}}else if(step<0){while(x>end){row.push(x);x+=step}}array.push(row)}return array};Index.prototype.valueOf=Index.prototype.toArray;Index.prototype.toString=function(){var strings=[];for(var i=0,ii=this._ranges.length;i<ii;i++){var range=this._ranges[i];var str=number.format(range.start);if(range.step!=1){str+=":"+number.format(range.step)}str+=":"+number.format(range.end);strings.push(str)}return"["+strings.join(", ")+"]"};Index.prototype.toJSON=function(){return{mathjs:"Index",ranges:this._ranges}};Index.fromJSON=function(json){return Index.create(json.ranges)};module.exports=Index},function(module,exports,__webpack_require__){"use strict";var string=__webpack_require__(347),isString=string.isString;module.exports=function(config){function Matrix(){if(!(this instanceof Matrix)){throw new SyntaxError("Constructor must be called with the new operator")}}Matrix.isMatrix=function(object){return object instanceof Matrix};Matrix.storage=function(format){if(!isString(format)){throw new TypeError("format must be a string value")}var constructor=Matrix._storage[format];if(!constructor){throw new SyntaxError("Unsupported matrix storage format: "+format)}return constructor};Matrix._storage={};Matrix.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")};Matrix.prototype.subset=function(index,replacement,defaultValue){throw new Error("Cannot invoke subset on a Matrix interface")};Matrix.prototype.get=function(index){throw new Error("Cannot invoke get on a Matrix interface")};Matrix.prototype.set=function(index,value,defaultValue){throw new Error("Cannot invoke set on a Matrix interface")};Matrix.prototype.resize=function(size,defaultValue){throw new Error("Cannot invoke resize on a Matrix interface")};Matrix.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")};Matrix.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")};Matrix.prototype.map=function(callback,skipZeros){throw new Error("Cannot invoke map on a Matrix interface")};Matrix.prototype.forEach=function(callback){throw new Error("Cannot invoke forEach on a Matrix interface")};Matrix.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")};Matrix.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")};Matrix.prototype.format=function(options){throw new Error("Cannot invoke format on a Matrix interface")};Matrix.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")};Matrix.prototype.transpose=function(){throw new Error("Cannot invoke transpose on a Matrix interface")};Matrix.prototype.trace=function(){throw new Error("Cannot invoke transpose on a Matrix interface")};Matrix.prototype.multiply=function(value){throw new Error("Cannot invoke multiply on a Matrix interface")};return Matrix}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346),number=util.number,string=util.string,isNumber=util.number.isNumber,isString=util.string.isString;function Unit(value,name){if(!(this instanceof Unit)){throw new Error("Constructor must be called with the new operator")}if(value!=undefined&&!isNumber(value)){throw new TypeError("First parameter in Unit constructor must be a number")}if(name!=undefined&&(!isString(name)||name=="")){throw new TypeError("Second parameter in Unit constructor must be a string")}if(name!=undefined){var res=_findUnit(name);if(!res){throw new SyntaxError('Unknown unit "'+name+'"')}this.unit=res.unit;this.prefix=res.prefix}else{this.unit=UNIT_NONE;this.prefix=PREFIX_NONE}this.value=value!=undefined?this._normalize(value):null;this.fixPrefix=false}var text,index,c;function skipWhitespace(){while(c==" "||c=="	"){next()}}function isDigitDot(c){return c>="0"&&c<="9"||c=="."}function isDigit(c){return c>="0"&&c<="9"}function next(){index++;c=text.charAt(index)}function revert(oldIndex){index=oldIndex;c=text.charAt(index)}function parseNumber(){var number="";var oldIndex;oldIndex=index;if(c=="+"){next()}else if(c=="-"){number+=c;next()}if(!isDigitDot(c)){revert(oldIndex);return null}if(c=="."){number+=c;next();if(!isDigit(c)){revert(oldIndex);return null}}else{while(isDigit(c)){number+=c;next()}if(c=="."){number+=c;next()}}while(isDigit(c)){number+=c;next()}if(c=="E"||c=="e"){number+=c;next();if(c=="+"||c=="-"){number+=c;next()}if(!isDigit(c)){revert(oldIndex);return null}while(isDigit(c)){number+=c;next()}}return number}function parseUnit(){var unitName="";skipWhitespace();while(c&&c!=" "&&c!="	"){unitName+=c;next()}return unitName||null}Unit.parse=function(str){text=str;index=-1;c="";if(!isString(text)){return null}next();skipWhitespace();var value=parseNumber();var name;if(value){name=parseUnit();next();skipWhitespace();if(c){return null}if(value&&name){try{return new Unit(Number(value),name)}catch(err){}}}else{name=parseUnit();next();skipWhitespace();if(c){return null}if(name){try{return new Unit(null,name)}catch(err){}}}return null};Unit.isUnit=function(value){return value instanceof Unit};Unit.prototype.clone=function(){var clone=new Unit;for(var p in this){if(this.hasOwnProperty(p)){clone[p]=this[p]}}return clone};Unit.prototype._normalize=function(value){return(value+this.unit.offset)*this.unit.value*this.prefix.value};Unit.prototype._denormalize=function(value,prefixValue){if(prefixValue==undefined){return value/this.unit.value/this.prefix.value-this.unit.offset}else{return value/this.unit.value/prefixValue-this.unit.offset}};function _findUnit(str){for(var name in UNITS){if(UNITS.hasOwnProperty(name)){if(string.endsWith(str,name)){var unit=UNITS[name];var prefixLen=str.length-name.length;var prefixName=str.substring(0,prefixLen);var prefix=unit.prefixes[prefixName];if(prefix!==undefined){return{unit:unit,prefix:prefix}}}}}return null}Unit.isValuelessUnit=function(name){return _findUnit(name)!=null};Unit.prototype.hasBase=function(base){return this.unit.base===base};Unit.prototype.equalBase=function(other){return this.unit.base===other.unit.base};Unit.prototype.equals=function(other){return this.equalBase(other)&&this.value==other.value};Unit.prototype.to=function(valuelessUnit){var other;var value=this.value==null?this._normalize(1):this.value;if(isString(valuelessUnit)){other=new Unit(null,valuelessUnit);if(!this.equalBase(other)){throw new Error("Units do not match")}other.value=value;other.fixPrefix=true;return other}else if(valuelessUnit instanceof Unit){if(!this.equalBase(valuelessUnit)){throw new Error("Units do not match")}if(valuelessUnit.value!==null){throw new Error("Cannot convert to a unit with a value")}other=valuelessUnit.clone();other.value=value;other.fixPrefix=true;return other}else{throw new Error("String or Unit expected as parameter")}};Unit.prototype.toNumber=function(valuelessUnit){var other=this.to(valuelessUnit);return other._denormalize(other.value,other.prefix.value)};Unit.prototype.toString=function(){return this.format()};Unit.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.prefix.name+this.unit.name,fixPrefix:this.fixPrefix}};Unit.fromJSON=function(json){var unit=new Unit(json.value,json.unit);unit.fixPrefix=json.fixPrefix||false;return unit};Unit.prototype.valueOf=Unit.prototype.toString;Unit.prototype.format=function(options){var value,str;if(this.value!==null&&!this.fixPrefix){var bestPrefix=this._bestPrefix();value=this._denormalize(this.value,bestPrefix.value);str=number.format(value,options)+" ";str+=bestPrefix.name+this.unit.name}else{value=this._denormalize(this.value);str=this.value!==null?number.format(value,options)+" ":"";str+=this.prefix.name+this.unit.name}return str};Unit.prototype._bestPrefix=function(){var absValue=Math.abs(this.value/this.unit.value);var bestPrefix=PREFIX_NONE;var bestDiff=Math.abs(Math.log(absValue/bestPrefix.value)/Math.LN10-1.2);var prefixes=this.unit.prefixes;for(var p in prefixes){if(prefixes.hasOwnProperty(p)){var prefix=prefixes[p];if(prefix.scientific){var diff=Math.abs(Math.log(absValue/prefix.value)/Math.LN10-1.2);if(diff<bestDiff){bestPrefix=prefix;bestDiff=diff}}}}return bestPrefix};var PREFIXES={NONE:{"":{name:"",value:1,scientific:true}},SHORT:{"":{name:"",value:1,scientific:true},da:{name:"da",value:10,scientific:false},h:{name:"h",value:100,scientific:false},k:{name:"k",value:1e3,scientific:true},M:{name:"M",value:1e6,scientific:true},G:{name:"G",value:1e9,scientific:true},T:{name:"T",value:1e12,scientific:true},P:{name:"P",value:1e15,scientific:true},E:{name:"E",value:1e18,scientific:true},Z:{name:"Z",value:1e21,scientific:true},Y:{name:"Y",value:1e24,scientific:true},d:{name:"d",value:.1,scientific:false},c:{name:"c",value:.01,scientific:false},m:{name:"m",value:.001,scientific:true},u:{name:"u",value:1e-6,scientific:true},n:{name:"n",value:1e-9,scientific:true},p:{name:"p",value:1e-12,scientific:true},f:{name:"f",value:1e-15,scientific:true},a:{name:"a",value:1e-18,scientific:true},z:{name:"z",value:1e-21,scientific:true},y:{name:"y",value:1e-24,scientific:true}},LONG:{"":{name:"",value:1,scientific:true},deca:{name:"deca",value:10,scientific:false},hecto:{name:"hecto",value:100,scientific:false},kilo:{name:"kilo",value:1e3,scientific:true},mega:{name:"mega",value:1e6,scientific:true},giga:{name:"giga",value:1e9,scientific:true},tera:{name:"tera",value:1e12,scientific:true},peta:{name:"peta",value:1e15,scientific:true},exa:{name:"exa",value:1e18,scientific:true},zetta:{name:"zetta",value:1e21,scientific:true},yotta:{name:"yotta",value:1e24,scientific:true},deci:{name:"deci",value:.1,scientific:false},centi:{name:"centi",value:.01,scientific:false},milli:{name:"milli",value:.001,scientific:true},micro:{name:"micro",value:1e-6,scientific:true},nano:{name:"nano",value:1e-9,scientific:true},pico:{name:"pico",value:1e-12,scientific:true},femto:{name:"femto",value:1e-15,scientific:true},atto:{name:"atto",value:1e-18,scientific:true},zepto:{name:"zepto",value:1e-21,scientific:true},yocto:{name:"yocto",value:1e-24,scientific:true}},SQUARED:{"":{name:"",value:1,scientific:true},da:{name:"da",value:100,scientific:false},h:{name:"h",value:1e4,scientific:false},k:{name:"k",value:1e6,scientific:true},M:{name:"M",value:1e12,scientific:true},G:{name:"G",value:1e18,scientific:true},T:{name:"T",value:1e24,scientific:true},P:{name:"P",value:1e30,scientific:true},E:{name:"E",value:1e36,scientific:true},Z:{name:"Z",value:1e42,scientific:true},Y:{name:"Y",value:1e48,scientific:true},d:{name:"d",value:.01,scientific:false},c:{name:"c",value:1e-4,scientific:false},m:{name:"m",value:1e-6,scientific:true},u:{name:"u",value:1e-12,scientific:true},n:{name:"n",value:1e-18,scientific:true},p:{name:"p",value:1e-24,scientific:true},f:{name:"f",value:1e-30,scientific:true},a:{name:"a",value:1e-36,scientific:true},z:{name:"z",value:1e-42,scientific:true},y:{name:"y",value:1e-42,scientific:true}},CUBIC:{"":{name:"",value:1,scientific:true},da:{name:"da",value:1e3,scientific:false},h:{name:"h",value:1e6,scientific:false},k:{name:"k",value:1e9,scientific:true},M:{name:"M",value:1e18,scientific:true},G:{name:"G",value:1e27,scientific:true},T:{name:"T",value:1e36,scientific:true},P:{name:"P",value:1e45,scientific:true},E:{name:"E",value:1e54,scientific:true},Z:{name:"Z",value:1e63,scientific:true},Y:{name:"Y",value:1e72,scientific:true},d:{name:"d",value:.001,scientific:false},c:{name:"c",value:1e-6,scientific:false},m:{name:"m",value:1e-9,scientific:true},u:{name:"u",value:1e-18,scientific:true},n:{name:"n",value:1e-27,scientific:true},p:{name:"p",value:1e-36,scientific:true},f:{name:"f",value:1e-45,scientific:true},a:{name:"a",value:1e-54,scientific:true},z:{name:"z",value:1e-63,scientific:true},y:{name:"y",value:1e-72,scientific:true}},BINARY_SHORT:{"":{name:"",value:1,scientific:true},k:{name:"k",value:1e3,scientific:true},M:{name:"M",value:1e6,scientific:true},G:{name:"G",value:1e9,scientific:true},T:{name:"T",value:1e12,scientific:true},P:{name:"P",value:1e15,scientific:true},E:{name:"E",value:1e18,scientific:true},Z:{name:"Z",value:1e21,scientific:true},Y:{name:"Y",value:1e24,scientific:true},Ki:{name:"Ki",value:1024,scientific:true},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:true},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:true},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:true},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:true},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:true},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:true},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:true}},BINARY_LONG:{"":{name:"",value:1,scientific:true},kilo:{name:"kilo",value:1e3,scientific:true},mega:{name:"mega",value:1e6,scientific:true},giga:{name:"giga",value:1e9,scientific:true},tera:{name:"tera",value:1e12,scientific:true},peta:{name:"peta",value:1e15,scientific:true},exa:{name:"exa",value:1e18,scientific:true},zetta:{name:"zetta",value:1e21,scientific:true},yotta:{name:"yotta",value:1e24,scientific:true},kibi:{name:"kibi",value:1024,scientific:true},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:true},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:true},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:true},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:true},exi:{name:"exi",value:Math.pow(1024,6),scientific:true},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:true},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:true}}};var PREFIX_NONE={name:"",value:1,scientific:true};var BASE_UNITS={NONE:{},LENGTH:{},MASS:{},TIME:{},CURRENT:{},TEMPERATURE:{},LUMINOUS_INTENSITY:{},AMOUNT_OF_SUBSTANCE:{},FORCE:{},SURFACE:{},VOLUME:{},ANGLE:{},BIT:{}};var BASE_UNIT_NONE={};var UNIT_NONE={name:"",base:BASE_UNIT_NONE,value:1,offset:0};var UNITS={meter:{name:"meter",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.LONG,value:1,offset:0},inch:{name:"inch",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.0254,offset:0},foot:{name:"foot",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.3048,offset:0},yard:{name:"yard",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.9144,offset:0},mile:{name:"mile",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1609.344,offset:0},link:{name:"link",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.201168,offset:0},rod:{name:"rod",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:5.02921,offset:0},chain:{name:"chain",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1e-10,offset:0},m:{name:"m",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.SHORT,value:1,offset:0},"in":{name:"in",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.0254,offset:0},ft:{name:"ft",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.3048,offset:0},yd:{name:"yd",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.9144,offset:0},mi:{name:"mi",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1609.344,offset:0},li:{name:"li",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.201168,offset:0},rd:{name:"rd",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:5.02921,offset:0},ch:{name:"ch",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,
value:20.1168,offset:0},mil:{name:"mil",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:254e-7,offset:0},m2:{name:"m2",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:6.4516e-10,offset:0},m3:{name:"m3",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.CUBIC,value:1,offset:0},L:{name:"L",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.SHORT,value:.001,offset:0},l:{name:"l",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.SHORT,value:.001,offset:0},litre:{name:"litre",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.LONG,value:.001,offset:0},cuin:{name:"cuin",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:15e-6,offset:0},drop:{name:"drop",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-8,offset:0},minim:{name:"minim",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:1e-6,offset:0},cup:{name:"cup",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1173478,offset:0},obl:{name:"obl",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1589873,offset:0},g:{name:"g",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:.001,offset:0},gram:{name:"gram",base:BASE_UNITS.MASS,prefixes:PREFIXES.LONG,value:.001,offset:0},ton:{name:"ton",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:907.18474,offset:0},tonne:{name:"tonne",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:1e3,offset:0},grain:{name:"grain",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:45.359237,offset:0},stick:{name:"stick",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.115,offset:0},stone:{name:"stone",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6350,offset:0},gr:{name:"gr",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:45.359237,offset:0},s:{name:"s",base:BASE_UNITS.TIME,prefixes:PREFIXES.SHORT,value:1,offset:0},min:{name:"min",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:60,offset:0},h:{name:"h",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:3600,offset:0},second:{name:"second",base:BASE_UNITS.TIME,prefixes:PREFIXES.LONG,value:1,offset:0},sec:{name:"sec",base:BASE_UNITS.TIME,prefixes:PREFIXES.LONG,value:1,offset:0},minute:{name:"minute",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:60,offset:0},hour:{name:"hour",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:3600,offset:0},day:{name:"day",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:86400,offset:0},rad:{name:"rad",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:1,offset:0},deg:{name:"deg",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:.017453292519943295,offset:0},grad:{name:"grad",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:.015707963267948967,offset:0},cycle:{name:"cycle",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:6.283185307179586,offset:0},A:{name:"A",base:BASE_UNITS.CURRENT,prefixes:PREFIXES.SHORT,value:1,offset:0},ampere:{name:"ampere",base:BASE_UNITS.CURRENT,prefixes:PREFIXES.LONG,value:1,offset:0},K:{name:"K",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:0},degC:{name:"degC",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:273.15},degF:{name:"degF",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:0},celsius:{name:"celsius",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:BASE_UNITS.AMOUNT_OF_SUBSTANCE,prefixes:PREFIXES.NONE,value:1,offset:0},mole:{name:"mole",base:BASE_UNITS.AMOUNT_OF_SUBSTANCE,prefixes:PREFIXES.NONE,value:1,offset:0},cd:{name:"cd",base:BASE_UNITS.LUMINOUS_INTENSITY,prefixes:PREFIXES.NONE,value:1,offset:0},candela:{name:"candela",base:BASE_UNITS.LUMINOUS_INTENSITY,prefixes:PREFIXES.NONE,value:1,offset:0},N:{name:"N",base:BASE_UNITS.FORCE,prefixes:PREFIXES.SHORT,value:1,offset:0},newton:{name:"newton",base:BASE_UNITS.FORCE,prefixes:PREFIXES.LONG,value:1,offset:0},lbf:{name:"lbf",base:BASE_UNITS.FORCE,prefixes:PREFIXES.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:BASE_UNITS.FORCE,prefixes:PREFIXES.NONE,value:4.4482216152605,offset:0},b:{name:"b",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_LONG,value:1,offset:0},B:{name:"B",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_LONG,value:8,offset:0}};var PLURALS={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",litres:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",seconds:"second",minutes:"minute",hours:"hour",days:"day",radians:"rad",degrees:"deg",gradients:"grad",cycles:"cycle",amperes:"ampere",moles:"mole"};for(var name in PLURALS){if(PLURALS.hasOwnProperty(name)){var unit=UNITS[PLURALS[name]];var plural=Object.create(unit);plural.name=name;UNITS[name]=plural}}UNITS.lt=UNITS.l;UNITS.liter=UNITS.litre;UNITS.liters=UNITS.litres;UNITS.lb=UNITS.lbm;UNITS.lbs=UNITS.lbm;Unit.PREFIXES=PREFIXES;Unit.BASE_UNITS=BASE_UNITS;Unit.UNITS=UNITS;module.exports=Unit},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346);var object=util.object;var string=util.string;function Help(doc){if(!(this instanceof Help)){throw new SyntaxError("Constructor must be called with the new operator")}if(!doc)throw new Error('Argument "doc" missing');this.doc=doc}Help.isHelp=function(value){return value instanceof Help};Help.prototype.toText=function(math){var doc=this.doc||{};var desc="\n";if(doc.name){desc+="Name: "+doc.name+"\n\n"}if(doc.category){desc+="Category: "+doc.category+"\n\n"}if(doc.description){desc+="Description:\n    "+doc.description+"\n\n"}if(doc.syntax){desc+="Syntax:\n    "+doc.syntax.join("\n    ")+"\n\n"}if(doc.examples){var parser=math&&math.parser();desc+="Examples:\n";for(var i=0;i<doc.examples.length;i++){var expr=doc.examples[i];desc+="    "+expr+"\n";if(parser){var res;try{res=parser.eval(expr)}catch(e){res=e}if(res!==undefined&&!(res instanceof Help)){desc+="        "+string.format(res,{precision:14})+"\n"}}}desc+="\n"}if(doc.seealso){desc+="See also: "+doc.seealso.join(", ")+"\n"}return desc};Help.prototype.toString=function(){return this.toText()};Help.prototype.toJSON=function(){var obj=object.clone(this.doc);obj.mathjs="Help";return obj};Help.fromJSON=function(json){var doc={};for(var prop in json){if(prop!=="mathjs"){doc[prop]=json[prop]}}return new Help(doc)};Help.prototype.valueOf=Help.prototype.toString;module.exports=Help},function(module,exports,__webpack_require__){"use strict";function ResultSet(entries){if(!(this instanceof ResultSet)){throw new SyntaxError("Constructor must be called with the new operator")}this.entries=entries||[]}ResultSet.prototype.valueOf=function(){return this.entries};ResultSet.prototype.toString=function(){return"["+this.entries.join(", ")+"]"};ResultSet.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}};ResultSet.fromJSON=function(json){return new ResultSet(json.entries)};module.exports=ResultSet},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346),IndexError=__webpack_require__(344),DimensionError=__webpack_require__(343),array=util.array,isArray=util.array.isArray;module.exports=function(math){var Matrix=math.type.Matrix;var collection={};collection.argsToArray=function(args){if(args.length===0){return[]}else if(args.length==1){var array=args[0];if(array instanceof Matrix){array=array.valueOf()}if(!isArray(array)){array=[array]}return array}else{return util.array.argsToArray(args)}};collection.isCollection=function(x){return isArray(x)||x instanceof Matrix};collection.deepMap=function deepMap(array,callback,skipZeros){if(array&&typeof array.map==="function"){return array.map(function(x){return deepMap(x,callback,skipZeros)})}else{return callback(array)}};collection.deepMap2=function deepMap2(array1,array2,callback){var res,len,i;if(isArray(array1)){if(isArray(array2)){if(array1.length!=array2.length){throw new DimensionError(array1.length,array2.length)}res=[];len=array1.length;for(i=0;i<len;i++){res[i]=deepMap2(array1[i],array2[i],callback)}}else if(array2 instanceof Matrix){res=deepMap2(array1,array2.valueOf(),callback);return math.matrix(res)}else{res=[];len=array1.length;for(i=0;i<len;i++){res[i]=deepMap2(array1[i],array2,callback)}}}else if(array1 instanceof Matrix){if(array2 instanceof Matrix){res=deepMap2(array1.valueOf(),array2.valueOf(),callback);return math.matrix(res)}else{res=deepMap2(array1.valueOf(),array2,callback);return math.matrix(res)}}else{if(isArray(array2)){res=[];len=array2.length;for(i=0;i<len;i++){res[i]=deepMap2(array1,array2[i],callback)}}else if(array2 instanceof Matrix){res=deepMap2(array1,array2.valueOf(),callback);return math.matrix(res)}else{res=callback(array1,array2)}}return res};collection.reduce=function(mat,dim,callback){var size=isArray(mat)?array.size(mat):mat.size();if(dim<0){throw new IndexError(dim)}if(dim>=size.length){throw new IndexError(dim,size.length)}if(mat instanceof Matrix){return math.matrix(_reduce(mat.valueOf(),dim,callback))}else{return _reduce(mat,dim,callback)}};function _reduce(mat,dim,callback){var i,ret,val,tran;if(dim<=0){if(!isArray(mat[0])){val=mat[0];for(i=1;i<mat.length;i++){val=callback(val,mat[i])}return val}else{tran=_switch(mat);ret=[];for(i=0;i<tran.length;i++){ret[i]=_reduce(tran[i],dim-1,callback)}return ret}}else{ret=[];for(i=0;i<mat.length;i++){ret[i]=_reduce(mat[i],dim-1,callback)}return ret}}function _switch(mat){var I=mat.length;var J=mat[0].length;var i,j;var ret=[];for(j=0;j<J;j++){var tmp=[];for(i=0;i<I;i++){tmp.push(mat[i][j])}ret.push(tmp)}return ret}collection.deepForEach=function deepForEach(array,callback){if(array instanceof Matrix){array=array.valueOf()}for(var i=0,ii=array.length;i<ii;i++){var value=array[i];if(isArray(value)){deepForEach(value,callback)}else{callback(value)}}};return collection}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346);var DimensionError=__webpack_require__(343);var array=util.array;var object=util.object;var string=util.string;var number=util.number;var isArray=Array.isArray;var isNumber=util.number.isNumber;var isInteger=util.number.isInteger;var validateIndex=array.validateIndex;module.exports=function(math){var Index=math.type.Index,BigNumber=math.type.BigNumber,Matrix=math.type.Matrix;function CcsMatrix(data){if(!(this instanceof CcsMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(data instanceof Matrix){if(data.type==="CcsMatrix"){this._values=object.clone(data._values);this._index=object.clone(data._index);this._ptr=object.clone(data._ptr);this._size=object.clone(data._size)}else{_createFromArray(this,data.valueOf())}}else if(data&&isArray(data.values)&&isArray(data.index)&&isArray(data.ptr)&&isArray(data.size)){this._values=data.values;this._index=data.index;this._ptr=data.ptr;this._size=data.size}else if(isArray(data)){_createFromArray(this,data)}else if(data){throw new TypeError("Unsupported type of data ("+util.types.type(data)+")")}else{this._values=[];this._index=[];this._ptr=[0];this._size=[0]}}var _createFromArray=function(matrix,data){matrix._values=[];matrix._index=[];matrix._ptr=[];var rows=data.length;var columns=0;if(rows>0){var j=0;do{matrix._ptr.push(matrix._values.length);for(var i=0;i<rows;i++){var row=data[i];if(isArray(row)){if(j===0&&columns<row.length)columns=row.length;if(j<row.length){var v=row[j];if(!math.equal(v,0)){matrix._values.push(v);matrix._index.push(i)}}}else{if(j===0&&columns<1)columns=1;if(!math.equal(row,0)){matrix._values.push(row);matrix._index.push(i)}}}j++}while(j<columns)}matrix._ptr.push(matrix._values.length);matrix._size=[rows,columns]};CcsMatrix.prototype=new math.type.Matrix;CcsMatrix.prototype.type="CcsMatrix";CcsMatrix.prototype.storage=function(){return"ccs"};CcsMatrix.prototype.subset=function(index,replacement,defaultValue){switch(arguments.length){case 1:return _getsubset(this,index);case 2:case 3:return _setsubset(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}};var _getsubset=function(matrix,index){if(!(index instanceof Index)){throw new TypeError("Invalid index")}var isScalar=index.isScalar();if(isScalar){return matrix.get(index.min())}var size=index.size();if(size.length!=matrix._size.length){throw new DimensionError(size.length,matrix._size.length)}var min=index.min();var max=index.max();for(var i=0,ii=matrix._size.length;i<ii;i++){validateIndex(min[i],matrix._size[i]);validateIndex(max[i],matrix._size[i])}var callback=function(v){return v};return _map(matrix,min[0],max[0],min[1],max[1],callback,false)};var _setsubset=function(matrix,index,submatrix,defaultValue){if(!(index instanceof Index)){throw new TypeError("Invalid index")}var iSize=index.size(),isScalar=index.isScalar();var sSize;if(submatrix instanceof Matrix){sSize=submatrix.size();submatrix=submatrix.toArray()}else{sSize=array.size(submatrix)}if(isScalar){if(sSize.length!==0){throw new TypeError("Scalar expected")}matrix.set(index.min(),submatrix,defaultValue)}else{if(iSize.length!==1&&iSize.length!==2){throw new DimensionError(iSize.length,matrix._size.length,"<")}if(sSize.length<iSize.length){var i=0;var outer=0;while(iSize[i]===1&&sSize[i]===1){i++}while(iSize[i]===1){outer++;i++}submatrix=array.unsqueeze(submatrix,iSize.length,outer,sSize)}if(!object.deepEqual(iSize,sSize)){throw new DimensionError(iSize,sSize,">")}var x0=index.min()[0];var y0=index.min()[1];var m=sSize[0];var n=sSize[1];for(var x=0;x<m;x++){for(var y=0;y<n;y++){var v=submatrix[x][y];matrix.set([x+x0,y+y0],v,defaultValue)}}}return matrix};CcsMatrix.prototype.get=function(index){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);var i=index[0];var j=index[1];validateIndex(i,this._size[0]);validateIndex(j,this._size[1]);var k=_getValueIndex(i,this._ptr[j],this._ptr[j+1],this._index);if(k<this._ptr[j+1]&&this._index[k]===i)return object.clone(this._values[k]);return 0};CcsMatrix.prototype.set=function(index,v,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);var i=index[0];var j=index[1];var rows=this._size[0];var columns=this._size[1];if(i>rows-1||j>columns-1){_resize(this,Math.max(i+1,rows),Math.max(j+1,columns),defaultValue);rows=this._size[0];columns=this._size[1]}validateIndex(i,rows);validateIndex(j,columns);var k=_getValueIndex(i,this._ptr[j],this._ptr[j+1],this._index);if(k<this._ptr[j+1]&&this._index[k]===i){if(!math.equal(v,0)){this._values[k]=v}else{_remove(k,j,this._values,this._index,this._ptr)}}else{_insert(k,i,j,v,this._values,this._index,this._ptr)}return this};var _getValueIndex=function(i,top,bottom,index){if(bottom-top===0||i>index[bottom-1])return bottom;while(top<bottom){var p=~~((top+bottom)/2);var r=index[p];if(i<r)bottom=p;else if(i>r)top=p+1;else return p}return top};var _remove=function(k,j,values,index,ptr){values.splice(k,1);index.splice(k,1);for(var x=j+1;x<ptr.length;x++)ptr[x]--};var _insert=function(k,i,j,v,values,index,ptr){values.splice(k,0,v);index.splice(k,0,i);for(var x=j+1;x<ptr.length;x++)ptr[x]++};CcsMatrix.prototype.resize=function(size,defaultValue,copy){if(!isArray(size))throw new TypeError("Array expected");if(size.length!==2)throw new Error("Only two dimensions matrix are supported");size.forEach(function(value){if(!number.isNumber(value)||!number.isInteger(value)||value<0){throw new TypeError("Invalid size, must contain positive integers "+"(size: "+string.format(size)+")")}});var m=copy?this.clone():this;return _resize(m,size[0],size[1],defaultValue)};var _resize=function(matrix,rows,columns,defaultValue){var value=defaultValue||0;var ins=!math.equal(value,0);var r=matrix._size[0];var c=matrix._size[1];var i,j,k;if(columns>c){for(j=c;j<columns;j++){matrix._ptr[j]=matrix._values.length;if(ins){for(i=0;i<r;i++){matrix._values.push(value);matrix._index.push(i)}}}matrix._ptr[columns]=matrix._values.length}else if(columns<c){matrix._ptr.splice(columns+1,c-columns);matrix._values.splice(matrix._ptr[columns],matrix._values.length);matrix._index.splice(matrix._ptr[columns],matrix._index.length)}c=columns;if(rows>r){if(ins){var n=0;for(j=0;j<c;j++){matrix._ptr[j]=matrix._ptr[j]+n;k=matrix._ptr[j+1]+n;var p=0;for(i=r;i<rows;i++,p++){matrix._values.splice(k+p,0,value);matrix._index.splice(k+p,0,i);n++}}matrix._ptr[c]=matrix._values.length}}else if(rows<r){var d=0;for(j=0;j<c;j++){matrix._ptr[j]=matrix._ptr[j]-d;var k0=matrix._ptr[j];var k1=matrix._ptr[j+1]-d;for(k=k0;k<k1;k++){i=matrix._index[k];if(i>rows-1){matrix._values.splice(k,1);matrix._index.splice(k,1);d++}}}matrix._ptr[j]=matrix._values.length}matrix._size[0]=rows;matrix._size[1]=columns;return matrix};CcsMatrix.prototype.clone=function(){var m=new CcsMatrix({values:object.clone(this._values),index:object.clone(this._index),ptr:object.clone(this._ptr),size:object.clone(this._size)});return m};CcsMatrix.prototype.size=function(){return object.clone(this._size)};CcsMatrix.prototype.map=function(callback,skipZeros){var me=this;var rows=this._size[0];var columns=this._size[1];var invoke=function(v,i,j){return callback(v,[i,j],me)};return _map(this,0,rows-1,0,columns-1,invoke,skipZeros)};var _map=function(matrix,minRow,maxRow,minColumn,maxColumn,callback,skipZeros){var values=[];var index=[];var ptr=[];var invoke=function(v,x,y){v=callback(v,x,y);if(!math.equal(v,0)){values.push(v);index.push(x)}};for(var j=minColumn;j<=maxColumn;j++){ptr.push(values.length);var k0=matrix._ptr[j];var k1=matrix._ptr[j+1];var p=minRow;for(var k=k0;k<k1;k++){var i=matrix._index[k];if(i>=minRow&&i<=maxRow){if(!skipZeros){for(var x=p;x<i;x++)invoke(0,x-minRow,j-minColumn)}invoke(matrix._values[k],i-minRow,j-minColumn)}p=i+1}if(!skipZeros){for(var y=p;y<=maxRow;y++)invoke(0,y-minRow,j-minColumn)}}ptr.push(values.length);return new CcsMatrix({values:values,index:index,ptr:ptr,size:[maxRow-minRow+1,maxColumn-minColumn+1]})};CcsMatrix.prototype.forEach=function(callback,skipZeros){var me=this;var rows=this._size[0];var columns=this._size[1];for(var j=0;j<columns;j++){var k0=this._ptr[j];var k1=this._ptr[j+1];var p=0;for(var k=k0;k<k1;k++){var i=this._index[k];if(!skipZeros){for(var x=p;x<i;x++)callback(0,[x,j],me)}callback(this._values[k],[i,j],me);p=i+1}if(!skipZeros){for(var y=p;y<rows;y++)callback(0,[y,j],me)}}};CcsMatrix.prototype.toArray=function(){return _toArray(this,true)};CcsMatrix.prototype.valueOf=function(){return _toArray(this,false)};var _toArray=function(matrix,copy){var a=[];var rows=matrix._size[0];var columns=matrix._size[1];for(var j=0;j<columns;j++){var k0=matrix._ptr[j];var k1=matrix._ptr[j+1];var p=0;for(var k=k0;k<k1;k++){var i=matrix._index[k];for(var x=p;x<i;x++)(a[x]=a[x]||[])[j]=0;(a[i]=a[i]||[])[j]=copy?object.clone(matrix._values[k]):matrix._values[k];p=i+1}for(var y=p;y<rows;y++)(a[y]=a[y]||[])[j]=0}return a};CcsMatrix.prototype.format=function(options){var rows=this._size[0];var columns=this._size[1];var str="CCS ["+string.format(rows,options)+" x "+string.format(columns,options)+"] density: "+string.format(this._values.length/(rows*columns),options)+"\n";for(var j=0;j<columns;j++){var k0=this._ptr[j];var k1=this._ptr[j+1];for(var k=k0;k<k1;k++){var i=this._index[k];str+="\n    ("+string.format(i,options)+", "+string.format(j,options)+") ==> "+string.format(this._values[k],options)}}return str};CcsMatrix.prototype.toString=function(){return string.format(this.toArray())};CcsMatrix.prototype.toJSON=function(){return{mathjs:"CcsMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size}};CcsMatrix.prototype.transpose=function(){var rows=this._size[0];var columns=this._size[1];if(columns===0){throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+string.format(this._size)+")")}return new math.type.CrsMatrix({values:object.clone(this._values),index:object.clone(this._index),ptr:object.clone(this._ptr),size:[columns,rows]})};CcsMatrix.prototype.diagonal=function(k){if(k){if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("The parameter k must be an integer number")}}else{k=0}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var rows=this._size[0];var columns=this._size[1];var n=Math.min(rows-kSub,columns-kSuper);var values=[];for(var j=kSuper;j<columns&&values.length<n;j++){var k0=this._ptr[j];var k1=this._ptr[j+1];var cv=false;for(var x=k0;x<k1;x++){var i=this._index[x];if(i===j-kSuper+kSub){cv=true;values.push(object.clone(this._values[x]));break}else if(i>j-kSuper+kSub){break}}if(!cv&&values.length<n){values.push(0)}}return values};CcsMatrix.fromJSON=function(json){return new CcsMatrix(json)};CcsMatrix.diagonal=function(size,value,k){if(!isArray(size))throw new TypeError("Array expected, size parameter");if(size.length!==2)throw new Error("Only two dimensions matrix are supported");size=size.map(function(s){if(s instanceof BigNumber){s=s.toNumber()}if(!isNumber(s)||!isInteger(s)||s<1){throw new Error("Size values must be positive integers")}return s});if(k){if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("The parameter k must be an integer number")}}else{k=0}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var rows=size[0];var columns=size[1];var n=Math.min(rows-kSub,columns-kSuper);var _value;if(isArray(value)){if(value.length!==n){throw new Error("Invalid value array length")}_value=function(i){return value[i]}}else{_value=function(){return value}}var values=[];var index=[];var ptr=[];for(var j=0;j<columns;j++){ptr.push(values.length);var i=j-kSuper;if(i>=0&&i<n){var v=_value(i);if(!math.equal(v,0)){index.push(i+kSub);values.push(v)}}}ptr.push(values.length);return new CcsMatrix({values:values,index:index,ptr:ptr,size:[rows,columns]})};CcsMatrix.prototype.trace=function(){var size=this._size;var rows=size[0];var columns=size[1];if(rows===columns){var sum=0;if(this._values.length>0){for(var j=0;j<columns;j++){var k0=this._ptr[j];var k1=this._ptr[j+1];for(var k=k0;k<k1;k++){var i=this._index[k];if(i===j){sum=math.add(sum,this._values[k]);break}if(i>j){break}}}}return sum}throw new RangeError("Matrix must be square (size: "+string.format(size)+")")};CcsMatrix.prototype.multiply=function(value){var rows=this._size[0];var columns=this._size[1];if(value instanceof Matrix){var z=value.size();if(z.length===1){return _multiply(this,z[0],1,function(i){return value.get([i])})}if(z.length===2){return _multiply(this,z[0],z[1],function(i,j){return value.get([i,j])})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+z.length+" dimensions)")}if(isArray(value)){var s=array.size(value);if(s.length===1){return _multiply(this,s[0],1,function(i){return value[i]})}if(s.length===2){return _multiply(this,s[0],s[1],function(i,j){return value[i][j]})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+s.length+" dimensions)")}var callback=function(v){return math.multiply(v,value)};return _map(this,0,rows-1,0,columns-1,callback,false)};var _multiply=function(matrix,r,c,get){var rows=matrix._size[0];var columns=matrix._size[1];if(columns!==r){throw new RangeError("Dimension mismatch in multiplication. "+"Columns of A must match length of B "+"(A is "+rows+"x"+columns+", B is "+r+", "+columns+" != "+r+")")}var values=[];var index=[];var ptr=[];var data=[];for(var x=0;x<rows;x++)data[x]=0;for(var z=0;z<c;z++){ptr.push(values.length);for(var j=0;j<columns;j++){var k0=matrix._ptr[j];var k1=matrix._ptr[j+1];for(var k=k0;k<k1;k++){var i=matrix._index[k];data[i]=math.add(data[i],math.multiply(matrix._values[k],get(j,z)))}}for(var y=0;y<rows;y++){if(!math.equal(data[y],0)){values.push(data[y]);index.push(y)}data[y]=0}}ptr.push(values.length);if(rows===1&&c===1)return values.length===1?values[0]:0;return new CcsMatrix({values:values,index:index,ptr:ptr,size:[rows,c]})};return CcsMatrix}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346);var DimensionError=__webpack_require__(343);var array=util.array;var object=util.object;var string=util.string;var number=util.number;var isArray=Array.isArray;var isNumber=util.number.isNumber;var isInteger=util.number.isInteger;var validateIndex=array.validateIndex;module.exports=function(math){var Index=math.type.Index,BigNumber=math.type.BigNumber,Matrix=math.type.Matrix;function CrsMatrix(data){if(!(this instanceof CrsMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(data instanceof Matrix){if(data.type==="CrsMatrix"){this._values=object.clone(data._values);this._index=object.clone(data._index);this._ptr=object.clone(data._ptr);this._size=object.clone(data._size)}else{_createFromArray(this,data.valueOf())}}else if(data&&isArray(data.values)&&isArray(data.index)&&isArray(data.ptr)&&isArray(data.size)){this._values=data.values;this._index=data.index;this._ptr=data.ptr;this._size=data.size}else if(isArray(data)){_createFromArray(this,data)}else if(data){throw new TypeError("Unsupported type of data ("+util.types.type(data)+")")}else{this._values=[];this._index=[];this._ptr=[0];this._size=[0]}}var _createFromArray=function(matrix,data){matrix._values=[];matrix._index=[];matrix._ptr=[];var rows=data.length;var columns=0;for(var i=0;i<rows;i++){matrix._ptr.push(matrix._values.length);var row=data[i];if(isArray(row)){if(row.length>columns)columns=row.length;for(var j=0;j<row.length;j++){var v=row[j];if(!math.equal(v,0)){matrix._values.push(v);matrix._index.push(j)}}}else{if(i===0&&columns<1)columns=1;if(!math.equal(row,0)){matrix._values.push(row);matrix._index.push(0)}}}matrix._ptr.push(matrix._values.length);matrix._size=[rows,columns]};CrsMatrix.prototype=new math.type.Matrix;CrsMatrix.prototype.type="CrsMatrix";CrsMatrix.prototype.storage=function(){return"crs"};CrsMatrix.prototype.subset=function(index,replacement,defaultValue){switch(arguments.length){case 1:return _getsubset(this,index);case 2:case 3:return _setsubset(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}};var _getsubset=function(matrix,index){if(!(index instanceof Index)){throw new TypeError("Invalid index")}var isScalar=index.isScalar();if(isScalar){return matrix.get(index.min())}var size=index.size();if(size.length!=matrix._size.length){throw new DimensionError(size.length,matrix._size.length)}var min=index.min();var max=index.max();for(var i=0,ii=matrix._size.length;i<ii;i++){validateIndex(min[i],matrix._size[i]);validateIndex(max[i],matrix._size[i])}var callback=function(v){return v};return _map(matrix,min[0],max[0],min[1],max[1],callback,false)};var _setsubset=function(matrix,index,submatrix,defaultValue){if(!(index instanceof Index)){throw new TypeError("Invalid index")}var iSize=index.size(),isScalar=index.isScalar();var sSize;if(submatrix instanceof Matrix){sSize=submatrix.size();submatrix=submatrix.toArray()}else{sSize=array.size(submatrix)}if(isScalar){if(sSize.length!==0){throw new TypeError("Scalar expected")}matrix.set(index.min(),submatrix,defaultValue)}else{if(iSize.length!==1&&iSize.length!==2){throw new DimensionError(iSize.length,matrix._size.length,"<")}if(sSize.length<iSize.length){var i=0;var outer=0;while(iSize[i]===1&&sSize[i]===1){i++}while(iSize[i]===1){outer++;i++}submatrix=array.unsqueeze(submatrix,iSize.length,outer,sSize)}if(!object.deepEqual(iSize,sSize)){throw new DimensionError(iSize,sSize,">")}var x0=index.min()[0];var y0=index.min()[1];var m=sSize[0];var n=sSize[1];for(var x=0;x<m;x++){for(var y=0;y<n;y++){var v=submatrix[x][y];matrix.set([x+x0,y+y0],v,defaultValue)}}}return matrix};CrsMatrix.prototype.get=function(index){if(!isArray(index))throw new TypeError("Array expected");

if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);var i=index[0];var j=index[1];validateIndex(i,this._size[0]);validateIndex(j,this._size[1]);var k=_getValueIndex(j,this._ptr[i],this._ptr[i+1],this._index);if(k<this._ptr[i+1]&&this._index[k]===j)return object.clone(this._values[k]);return 0};CrsMatrix.prototype.set=function(index,v,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);var i=index[0];var j=index[1];var rows=this._size[0];var columns=this._size[1];if(i>rows-1||j>columns-1){_resize(this,Math.max(i+1,rows),Math.max(j+1,columns),defaultValue);rows=this._size[0];columns=this._size[1]}validateIndex(i,rows);validateIndex(j,columns);var k=_getValueIndex(j,this._ptr[i],this._ptr[i+1],this._index);if(k<this._ptr[i+1]&&this._index[k]===j){if(!math.equal(v,0)){this._values[k]=v}else{_remove(k,i,this._values,this._index,this._ptr)}}else{_insert(k,i,j,v,this._values,this._index,this._ptr)}return this};var _getValueIndex=function(j,left,right,index){if(right-left===0||j>index[right-1])return right;while(left<right){var p=~~((left+right)/2);var c=index[p];if(j<c)right=p;else if(j>c)left=p+1;else return p}return left};var _remove=function(k,i,values,index,ptr){values.splice(k,1);index.splice(k,1);for(var x=i+1;x<ptr.length;x++)ptr[x]--};var _insert=function(k,i,j,v,values,index,ptr){values.splice(k,0,v);index.splice(k,0,j);for(var x=i+1;x<ptr.length;x++)ptr[x]++};CrsMatrix.prototype.resize=function(size,defaultValue,copy){if(!isArray(size))throw new TypeError("Array expected");if(size.length!==2)throw new Error("Only two dimensions matrix are supported");size.forEach(function(value){if(!number.isNumber(value)||!number.isInteger(value)||value<0){throw new TypeError("Invalid size, must contain positive integers "+"(size: "+string.format(size)+")")}});var m=copy?this.clone():this;return _resize(m,size[0],size[1],defaultValue)};var _resize=function(matrix,rows,columns,defaultValue){var value=defaultValue||0;var ins=!math.equal(value,0);var r=matrix._size[0];var c=matrix._size[1];var i,j,k;if(rows>r){for(i=r;i<rows;i++){matrix._ptr[i]=matrix._values.length;if(ins){for(j=0;j<c;j++){matrix._values.push(value);matrix._index.push(j)}}}matrix._ptr[rows]=matrix._values.length}else if(rows<r){matrix._ptr.splice(rows+1,r-rows);matrix._values.splice(matrix._ptr[rows],matrix._values.length);matrix._index.splice(matrix._ptr[rows],matrix._index.length)}r=rows;if(columns>c){if(ins){var n=0;for(i=0;i<r;i++){matrix._ptr[i]=matrix._ptr[i]+n;k=matrix._ptr[i+1]+n;var p=0;for(j=c;j<columns;j++,p++){matrix._values.splice(k+p,0,value);matrix._index.splice(k+p,0,j);n++}}matrix._ptr[r]=matrix._values.length}}else if(columns<c){var d=0;for(i=0;i<r;i++){matrix._ptr[i]=matrix._ptr[i]-d;var k0=matrix._ptr[i];var k1=matrix._ptr[i+1]-d;for(k=k0;k<k1;k++){j=matrix._index[k];if(j>columns-1){matrix._values.splice(k,1);matrix._index.splice(k,1);d++}}}matrix._ptr[i]=matrix._values.length}matrix._size[0]=rows;matrix._size[1]=columns;return matrix};CrsMatrix.prototype.clone=function(){var m=new CrsMatrix({values:object.clone(this._values),index:object.clone(this._index),ptr:object.clone(this._ptr),size:object.clone(this._size)});return m};CrsMatrix.prototype.size=function(){return object.clone(this._size)};CrsMatrix.prototype.map=function(callback,skipZeros){var me=this;var rows=this._size[0];var columns=this._size[1];var invoke=function(v,i,j){return callback(v,[i,j],me)};return _map(this,0,rows-1,0,columns-1,invoke,skipZeros)};var _map=function(matrix,minRow,maxRow,minColumn,maxColumn,callback,skipZeros){var values=[];var index=[];var ptr=[];var invoke=function(v,x,y){v=callback(v,x,y);if(!math.equal(v,0)){values.push(v);index.push(y)}};for(var i=minRow;i<=maxRow;i++){ptr.push(values.length);var k0=matrix._ptr[i];var k1=matrix._ptr[i+1];var p=minColumn;for(var k=k0;k<k1;k++){var j=matrix._index[k];if(j>=minColumn&&j<=maxColumn){if(!skipZeros){for(var x=p;x<j;x++)invoke(0,i-minRow,x-minColumn)}invoke(matrix._values[k],i-minRow,j-minColumn)}p=j+1}if(!skipZeros){for(var y=p;y<=maxColumn;y++)invoke(0,i-minRow,y-minColumn)}}ptr.push(values.length);return new CrsMatrix({values:values,index:index,ptr:ptr,size:[maxRow-minRow+1,maxColumn-minColumn+1]})};CrsMatrix.prototype.forEach=function(callback,skipZeros){var me=this;var rows=this._size[0];var columns=this._size[1];for(var i=0;i<rows;i++){var k0=this._ptr[i];var k1=this._ptr[i+1];var p=0;for(var k=k0;k<k1;k++){var j=this._index[k];if(!skipZeros){for(var x=p;x<j;x++)callback(0,[i,x],me)}callback(this._values[k],[i,j],me);p=j+1}if(!skipZeros){for(var y=p;y<columns;y++)callback(0,[i,y],me)}}};CrsMatrix.prototype.toArray=function(){return _toArray(this,true)};CrsMatrix.prototype.valueOf=function(){return _toArray(this,false)};var _toArray=function(matrix,copy){var a=[];var rows=matrix._size[0];var columns=matrix._size[1];for(var i=0;i<rows;i++){var r=a[i]=[];var k0=matrix._ptr[i];var k1=matrix._ptr[i+1];var p=0;for(var k=k0;k<k1;k++){var j=matrix._index[k];for(var x=p;x<j;x++)r[x]=0;r[j]=copy?object.clone(matrix._values[k]):matrix._values[k];p=j+1}for(var y=p;y<columns;y++)r[y]=0}return a};CrsMatrix.prototype.format=function(options){var rows=this._size[0];var columns=this._size[1];var str="CRS ["+string.format(rows,options)+" x "+string.format(columns,options)+"] density: "+string.format(this._values.length/(rows*columns),options)+"\n";for(var i=0;i<rows;i++){var k0=this._ptr[i];var k1=this._ptr[i+1];for(var k=k0;k<k1;k++){var j=this._index[k];str+="\n    ("+string.format(i,options)+", "+string.format(j,options)+") ==> "+string.format(this._values[k],options)}}return str};CrsMatrix.prototype.toString=function(){return string.format(this.toArray())};CrsMatrix.prototype.toJSON=function(){return{mathjs:"CrsMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size}};CrsMatrix.prototype.transpose=function(){var rows=this._size[0];var columns=this._size[1];if(columns===0){throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+string.format(this._size)+")")}return new math.type.CcsMatrix({values:object.clone(this._values),index:object.clone(this._index),ptr:object.clone(this._ptr),size:[columns,rows]})};CrsMatrix.prototype.diagonal=function(k){if(k){if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("The parameter k must be an integer number")}}else{k=0}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var rows=this._size[0];var columns=this._size[1];var n=Math.min(rows-kSub,columns-kSuper);var values=[];for(var i=kSub;i<rows&&values.length<n;i++){var k0=this._ptr[i];var k1=this._ptr[i+1];var rv=false;for(var x=k0;x<k1;x++){var j=this._index[x];if(j===i+kSuper-kSub){rv=true;values.push(object.clone(this._values[x]));break}else if(j>i+kSuper-kSub){break}}if(!rv&&values.length<n){values.push(0)}}return values};CrsMatrix.fromJSON=function(json){return new CrsMatrix(json)};CrsMatrix.diagonal=function(size,value,k){if(!isArray(size))throw new TypeError("Array expected, size parameter");if(size.length!==2)throw new Error("Only two dimensions matrix are supported");size=size.map(function(s){if(s instanceof BigNumber){s=s.toNumber()}if(!isNumber(s)||!isInteger(s)||s<1){throw new Error("Size values must be positive integers")}return s});if(k){if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("The parameter k must be an integer number")}}else{k=0}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var rows=size[0];var columns=size[1];var n=Math.min(rows-kSub,columns-kSuper);var _value;if(isArray(value)){if(value.length!==n){throw new Error("Invalid value array length")}_value=function(i){return value[i]}}else{_value=function(){return value}}var values=[];var index=[];var ptr=[];for(var i=0;i<rows;i++){ptr.push(values.length);var j=i-kSub;if(j>=0&&j<n){var v=_value(j);if(!math.equal(v,0)){index.push(j+kSuper);values.push(v)}}}ptr.push(values.length);return new CrsMatrix({values:values,index:index,ptr:ptr,size:[rows,columns]})};CrsMatrix.prototype.trace=function(){var size=this._size;var rows=size[0];var columns=size[1];if(rows===columns){var sum=0;if(this._values.length>0){for(var i=0;i<rows;i++){var k0=this._ptr[i];var k1=this._ptr[i+1];for(var k=k0;k<k1;k++){var j=this._index[k];if(i===j){sum=math.add(sum,this._values[k]);break}if(j>i){break}}}}return sum}throw new RangeError("Matrix must be square (size: "+string.format(size)+")")};CrsMatrix.prototype.multiply=function(value){var rows=this._size[0];var columns=this._size[1];if(value instanceof Matrix){var z=value.size();if(z.length===1){return _multiply(this,z[0],1,function(i){return value.get([i])})}if(z.length===2){return _multiply(this,z[0],z[1],function(i,j){return value.get([i,j])})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+z.length+" dimensions)")}if(isArray(value)){var s=array.size(value);if(s.length===1){return _multiply(this,s[0],1,function(i){return value[i]})}if(s.length===2){return _multiply(this,s[0],s[1],function(i,j){return value[i][j]})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+s.length+" dimensions)")}var callback=function(v){return math.multiply(v,value)};return _map(this,0,rows-1,0,columns-1,callback,false)};var _multiply=function(matrix,r,c,get){var rows=matrix._size[0];var columns=matrix._size[1];if(columns!==r){throw new RangeError("Dimension mismatch in multiplication. "+"Columns of A must match length of B "+"(A is "+rows+"x"+columns+", B is "+r+", "+columns+" != "+r+")")}var values=[];var index=[];var ptr=[];for(var i=0;i<rows;i++){ptr.push(values.length);var k0=matrix._ptr[i];var k1=matrix._ptr[i+1];for(var z=0;z<c;z++){var value=0;for(var k=k0;k<k1;k++){var j=matrix._index[k];value=math.add(value,math.multiply(matrix._values[k],get(j,z)))}if(!math.equal(value,0)){values.push(value);index.push(z)}}}ptr.push(values.length);if(rows===1&&c===1)return values.length===1?values[0]:0;return new CrsMatrix({values:values,index:index,ptr:ptr,size:[rows,c]})};return CrsMatrix}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346);var DimensionError=__webpack_require__(343);var string=util.string;var array=util.array;var object=util.object;var isArray=Array.isArray;var isNumber=util.number.isNumber;var isInteger=util.number.isInteger;var validateIndex=array.validateIndex;module.exports=function(math){var Index=math.type.Index,BigNumber=math.type.BigNumber,Matrix=math.type.Matrix;function DenseMatrix(data){if(!(this instanceof DenseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(data instanceof Matrix){if(data.type==="DenseMatrix"){this._data=object.clone(data._data);this._size=object.clone(data._size)}else{this._data=data.toArray();this._size=data.size()}}else if(data&&isArray(data.data)&&isArray(data.size)){this._data=data.data;this._size=data.size}else if(isArray(data)){this._data=preprocess(data);this._size=array.size(this._data)}else if(data){throw new TypeError("Unsupported type of data ("+util.types.type(data)+")")}else{this._data=[];this._size=[0]}}DenseMatrix.prototype=new math.type.Matrix;DenseMatrix.prototype.type="DenseMatrix";DenseMatrix.prototype.storage=function(){return"dense"};DenseMatrix.prototype.subset=function(index,replacement,defaultValue){switch(arguments.length){case 1:return _get(this,index);case 2:case 3:return _set(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}};DenseMatrix.prototype.get=function(index){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);for(var x=0;x<index.length;x++)validateIndex(index[x],this._size[x]);var data=this._data;for(var i=0,ii=index.length;i<ii;i++){var index_i=index[i];validateIndex(index_i,data.length);data=data[index_i]}return object.clone(data)};DenseMatrix.prototype.set=function(index,value,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length<this._size.length)throw new DimensionError(index.length,this._size.length,"<");var i,ii,index_i;var size=index.map(function(i){return i+1});_fit(this,size,defaultValue);var data=this._data;for(i=0,ii=index.length-1;i<ii;i++){index_i=index[i];validateIndex(index_i,data.length);data=data[index_i]}index_i=index[index.length-1];validateIndex(index_i,data.length);data[index_i]=value;return this};function _get(matrix,index){if(!(index instanceof Index)){throw new TypeError("Invalid index")}var isScalar=index.isScalar();if(isScalar){return matrix.get(index.min())}else{var size=index.size();if(size.length!=matrix._size.length){throw new DimensionError(size.length,matrix._size.length)}var min=index.min();var max=index.max();for(var i=0,ii=matrix._size.length;i<ii;i++){validateIndex(min[i],matrix._size[i]);validateIndex(max[i],matrix._size[i])}return new DenseMatrix(_getSubmatrix(matrix._data,index,size.length,0))}}function _getSubmatrix(data,index,dims,dim){var last=dim==dims-1;var range=index.range(dim);if(last){return range.map(function(i){return data[i]})}else{return range.map(function(i){var child=data[i];return _getSubmatrix(child,index,dims,dim+1)})}}function _set(matrix,index,submatrix,defaultValue){if(!(index instanceof Index)){throw new TypeError("Invalid index")}var iSize=index.size(),isScalar=index.isScalar();var sSize;if(submatrix instanceof math.type.Matrix){sSize=submatrix.size();submatrix=submatrix.valueOf()}else{sSize=array.size(submatrix)}if(isScalar){if(sSize.length!==0){throw new TypeError("Scalar expected")}matrix.set(index.min(),submatrix,defaultValue)}else{if(iSize.length<matrix._size.length){throw new DimensionError(iSize.length,matrix._size.length,"<")}if(sSize.length<iSize.length){var i=0;var outer=0;while(iSize[i]===1&&sSize[i]===1){i++}while(iSize[i]===1){outer++;i++}submatrix=array.unsqueeze(submatrix,iSize.length,outer,sSize)}if(!object.deepEqual(iSize,sSize)){throw new DimensionError(iSize,sSize,">")}var size=index.max().map(function(i){return i+1});_fit(matrix,size,defaultValue);var dims=iSize.length,dim=0;_setSubmatrix(matrix._data,index,submatrix,dims,dim)}return matrix}function _setSubmatrix(data,index,submatrix,dims,dim){var last=dim==dims-1,range=index.range(dim);if(last){range.forEach(function(dataIndex,subIndex){validateIndex(dataIndex);data[dataIndex]=submatrix[subIndex]})}else{range.forEach(function(dataIndex,subIndex){validateIndex(dataIndex);_setSubmatrix(data[dataIndex],index,submatrix[subIndex],dims,dim+1)})}}DenseMatrix.prototype.resize=function(size,defaultValue,copy){if(!isArray(size))throw new TypeError("Array expected");var m=copy?this.clone():this;return _resize(m,size,defaultValue)};var _resize=function(matrix,size,defaultValue){if(size.length===0){var v=matrix._data;while(isArray(v)){v=v[0]}return object.clone(v)}matrix._size=object.clone(size);matrix._data=array.resize(matrix._data,matrix._size,defaultValue);return matrix};function _fit(matrix,size,defaultValue){var newSize=object.clone(matrix._size),changed=false;while(newSize.length<size.length){newSize.push(0);changed=true}for(var i=0,ii=size.length;i<ii;i++){if(size[i]>newSize[i]){newSize[i]=size[i];changed=true}}if(changed){_resize(matrix,newSize,defaultValue)}}DenseMatrix.prototype.clone=function(){var m=new DenseMatrix({data:object.clone(this._data),size:object.clone(this._size)});return m};DenseMatrix.prototype.size=function(){return this._size};DenseMatrix.prototype.map=function(callback){var me=this;var recurse=function(value,index){if(isArray(value)){return value.map(function(child,i){return recurse(child,index.concat(i))})}else{return callback(value,index,me)}};return new DenseMatrix({data:recurse(this._data,[]),size:object.clone(this._size)})};DenseMatrix.prototype.forEach=function(callback){var me=this;var recurse=function(value,index){if(isArray(value)){value.forEach(function(child,i){recurse(child,index.concat(i))})}else{callback(value,index,me)}};recurse(this._data,[])};DenseMatrix.prototype.toArray=function(){return object.clone(this._data)};DenseMatrix.prototype.valueOf=function(){return this._data};DenseMatrix.prototype.format=function(options){return string.format(this._data,options)};DenseMatrix.prototype.toString=function(){return string.format(this._data)};DenseMatrix.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size}};DenseMatrix.prototype.transpose=function(){switch(this._size.length){case 1:return this.clone();case 2:var rows=this._size[0];var columns=this._size[1];if(columns===0){throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+string.format(this._size)+")")}var transposed=[];var transposedRow;for(var j=0;j<columns;j++){transposedRow=transposed[j]=[];for(var i=0;i<rows;i++){transposedRow[i]=object.clone(this._data[i][j])}}return new DenseMatrix({data:transposed,size:[columns,rows]});default:throw new RangeError("Matrix must be two dimensional (size: "+string.format(this._size)+")")}};DenseMatrix.prototype.diagonal=function(k){if(k){if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("The parameter k must be an integer number")}}else{k=0}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var rows=this._size[0];var columns=this._size[1];var n=Math.min(rows-kSub,columns-kSuper);var vector=[];for(var i=0;i<n;i++){vector[i]=object.clone(this._data[i+kSub][i+kSuper])}return vector};DenseMatrix.diagonal=function(size,value,k,defaultValue){if(!isArray(size))throw new TypeError("Array expected, size parameter");if(size.length!==2)throw new Error("Only two dimensions matrix are supported");size=size.map(function(s){if(s instanceof BigNumber){s=s.toNumber()}if(!isNumber(s)||!isInteger(s)||s<1){throw new Error("Size values must be positive integers")}return s});if(k){if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("The parameter k must be an integer number")}}else{k=0}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var rows=size[0];var columns=size[1];var n=Math.min(rows-kSub,columns-kSuper);var _value;if(isArray(value)){if(value.length!==n){throw new Error("Invalid value array length")}_value=function(i){return value[i]}}else{_value=function(){return value}}var data=[];if(size.length>0){data=array.resize(data,size,defaultValue);for(var d=0;d<n;d++){data[d+kSub][d+kSuper]=_value(d)}}return new DenseMatrix({data:data,size:[rows,columns]})};DenseMatrix.prototype.trace=function(){var size=this._size;var data=this._data;switch(size.length){case 1:if(size[0]==1){return object.clone(data[0])}throw new RangeError("Matrix must be square (size: "+string.format(size)+")");case 2:var rows=size[0];var cols=size[1];if(rows===cols){var sum=0;for(var i=0;i<rows;i++)sum=math.add(sum,data[i][i]);return sum}throw new RangeError("Matrix must be square (size: "+string.format(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+string.format(size)+")")}};DenseMatrix.fromJSON=function(json){return new DenseMatrix(json)};DenseMatrix.prototype.multiply=function(value){switch(this._size.length){case 1:return _multiplyVector(this,this._size[0],value);case 2:return _multiplyMatrix(this,this._size[0],this._size[1],value);default:throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(matrix has "+this._size.length+" dimensions)")}};var _multiplyVector=function(matrix,m,value){if(value instanceof Matrix){var z=value.size();if(z.length===1){if(z[0]!==m)throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length.");return _multiplyVectorVector(matrix,m,function(i){return value.get([i])})}if(z.length===2){if(z[0]!==m)throw new RangeError("Dimension mismatch in multiplication. Matrix rows and Vector length must be equal.");return _multiplyVectorMatrix(matrix,m,z[1],function(i,j){return value.get([i,j])})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+z.length+" dimensions)")}if(isArray(value)){var s=array.size(value);if(s.length===1){if(s[0]!==m)throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length.");return _multiplyVectorVector(matrix,m,function(i){return value[i]})}if(s.length===2){if(s[0]!==m)throw new RangeError("Dimension mismatch in multiplication. Matrix rows and Vector length must be equal.");return _multiplyVectorMatrix(matrix,m,s[1],function(i,j){return value[i][j]})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+s.length+" dimensions)")}return matrix.map(function(v){return math.multiply(value,v)})};var _multiplyVectorVector=function(matrix,m,get){if(m===0)throw new Error("Cannot multiply two empty vectors");var result=0;for(var i=0;i<m;i++){result=math.add(result,math.multiply(matrix._data[i],get(i)))}return result};var _multiplyVectorMatrix=function(matrix,m,n,get){var result=[];for(var j=0;j<n;j++){var sum=0;for(var i=0;i<m;i++){sum=math.add(sum,math.multiply(matrix._data[i],get(i,j)))}result[j]=sum}if(n===1)return result[0];return new DenseMatrix({data:result,size:[n]})};var _multiplyMatrix=function(matrix,m,n,value){if(value instanceof Matrix){var z=value.size();if(z.length===1){if(z[0]!==n)throw new RangeError("Dimension mismatch in multiplication. Matrix columns must match vector length.");return _multiplyMatrixVector(matrix,m,n,function(i){return value.get([i])})}if(z.length===2){if(z[0]!==n){throw new RangeError("Dimension mismatch in multiplication. "+"Columns of A must match length of B "+"(A is "+m+"x"+n+", B is "+z[0]+", "+n+" != "+z[0]+")")}return _multiplyMatrixMatrix(matrix,m,n,z[1],function(i,j){return value.get([i,j])})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+z.length+" dimensions)")}if(isArray(value)){var s=array.size(value);if(s.length===1){if(s[0]!==n)throw new RangeError("Dimension mismatch in multiplication. Matrix columns must match vector length.");return _multiplyMatrixVector(matrix,m,n,function(i){return value[i]})}if(s.length===2){if(s[0]!==n){throw new RangeError("Dimension mismatch in multiplication. "+"Columns of A must match length of B "+"(A is "+m+"x"+n+", B is "+s[0]+", "+n+" != "+s[0]+")")}return _multiplyMatrixMatrix(matrix,m,n,s[1],function(i,j){return value[i][j]})}throw new Error("Can only multiply a 1 or 2 dimensional matrix "+"(value has "+s.length+" dimensions)")}return matrix.map(function(v){return math.multiply(value,v)})};var _multiplyMatrixVector=function(matrix,m,n,get){var result=[];for(var i=0;i<m;i++){var row=matrix._data[i];var sum=0;for(var j=0;j<n;j++){sum=math.add(sum,math.multiply(row[j],get(j)))}result[i]=sum}if(m===1)return result[0];return new DenseMatrix({data:result,size:[m]})};var _multiplyMatrixMatrix=function(matrix,m,n,c,get){var result=[];for(var i=0;i<m;i++){var row=matrix._data[i];result[i]=[];for(var j=0;j<c;j++){var sum=0;for(var x=0;x<n;x++){sum=math.add(sum,math.multiply(row[x],get(x,j)))}result[i][j]=sum}}if(m===1&&c===1)return result[0][0];return new DenseMatrix({data:result,size:[m,c]})};function preprocess(data){for(var i=0,ii=data.length;i<ii;i++){var elem=data[i];if(isArray(elem)){data[i]=preprocess(elem)}else if(elem instanceof math.type.Matrix){data[i]=preprocess(elem.valueOf())}}return data}return DenseMatrix}},function(module,exports,__webpack_require__){"use strict";exports.ArrayNode=__webpack_require__(348);exports.AssignmentNode=__webpack_require__(349);exports.BlockNode=__webpack_require__(350);exports.ConditionalNode=__webpack_require__(351);exports.ConstantNode=__webpack_require__(352);exports.IndexNode=__webpack_require__(353);exports.FunctionAssignmentNode=__webpack_require__(354);exports.FunctionNode=__webpack_require__(355);exports.Node=__webpack_require__(356);exports.OperatorNode=__webpack_require__(357);exports.RangeNode=__webpack_require__(358);exports.SymbolNode=__webpack_require__(359);exports.UpdateNode=__webpack_require__(360)},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(346),ArgumentsError=__webpack_require__(342),isString=util.string.isString,isArray=Array.isArray,ArrayNode=__webpack_require__(348),AssignmentNode=__webpack_require__(349),BlockNode=__webpack_require__(350),ConditionalNode=__webpack_require__(351),ConstantNode=__webpack_require__(352),FunctionAssignmentNode=__webpack_require__(354),IndexNode=__webpack_require__(353),OperatorNode=__webpack_require__(357),FunctionNode=__webpack_require__(355),RangeNode=__webpack_require__(358),SymbolNode=__webpack_require__(359),UpdateNode=__webpack_require__(360);module.exports=function(math){var Matrix=math.type.Matrix,collection=math.collection;function parse(expr,options){if(arguments.length!=1&&arguments.length!=2){throw new ArgumentsError("parse",arguments.length,1,2)}extra_nodes=options&&options.nodes?options.nodes:{};if(isString(expr)){expression=expr;return parseStart()}else if(isArray(expr)||expr instanceof Matrix){return collection.deepMap(expr,function(elem){if(!isString(elem))throw new TypeError("String expected");expression=elem;return parseStart()})}else{throw new TypeError("String or matrix expected")}}var TOKENTYPE={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4};var DELIMITERS={",":true,"(":true,")":true,"[":true,"]":true,'"':true,";":true,"+":true,"-":true,"*":true,".*":true,"/":true,"./":true,"%":true,"^":true,".^":true,"~":true,"!":true,"&":true,"|":true,"^|":true,"'":true,"=":true,":":true,"?":true,"==":true,"!=":true,"<":true,">":true,"<=":true,">=":true,"<<":true,">>":true,">>>":true};var NAMED_DELIMITERS={mod:true,to:true,"in":true,and:true,xor:true,or:true,not:true};var extra_nodes={};var expression="";var index=0;var c="";var token="";var token_type=TOKENTYPE.NULL;var nesting_level=0;var conditional_level=null;function first(){index=0;c=expression.charAt(0);nesting_level=0;conditional_level=null}function next(){index++;c=expression.charAt(index)}function nextPreview(){return expression.charAt(index+1)}function nextNextPreview(){return expression.charAt(index+2)}function getToken(){token_type=TOKENTYPE.NULL;token="";while(c==" "||c=="	"||c=="\n"&&nesting_level){next()}if(c=="#"){while(c!="\n"&&c!=""){next()}}if(c==""){token_type=TOKENTYPE.DELIMITER;return}if(c=="\n"&&!nesting_level){token_type=TOKENTYPE.DELIMITER;token=c;next();return}var c2=c+nextPreview();var c3=c2+nextNextPreview();if(c3.length==3&&DELIMITERS[c3]){token_type=TOKENTYPE.DELIMITER;token=c3;next();next();next();return}if(c2.length==2&&DELIMITERS[c2]){token_type=TOKENTYPE.DELIMITER;token=c2;next();next();return}if(DELIMITERS[c]){token_type=TOKENTYPE.DELIMITER;token=c;next();return}if(isDigitDot(c)){token_type=TOKENTYPE.NUMBER;if(c=="."){token+=c;next();if(!isDigit(c)){token_type=TOKENTYPE.UNKNOWN}}else{while(isDigit(c)){token+=c;next()}if(c=="."){token+=c;next()}}while(isDigit(c)){token+=c;next()}c2=nextPreview();if((c=="E"||c=="e")&&(isDigit(c2)||c2=="-"||c2=="+")){token+=c;next();if(c=="+"||c=="-"){token+=c;next()}if(!isDigit(c)){token_type=TOKENTYPE.UNKNOWN}while(isDigit(c)){token+=c;next()}}return}if(isAlpha(c)){while(isAlpha(c)||isDigit(c)){token+=c;next()}if(NAMED_DELIMITERS[token]){token_type=TOKENTYPE.DELIMITER}else{token_type=TOKENTYPE.SYMBOL}return}token_type=TOKENTYPE.UNKNOWN;while(c!=""){token+=c;next()}throw createSyntaxError('Syntax error in part "'+token+'"')}function getTokenSkipNewline(){do{getToken()}while(token=="\n")}function openParams(){nesting_level++}function closeParams(){nesting_level--}function isAlpha(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"||c=="_"}function isDigitDot(c){return c>="0"&&c<="9"||c=="."}function isDigit(c){return c>="0"&&c<="9"}function parseStart(){first();getToken();var node=parseBlock();if(token!=""){if(token_type==TOKENTYPE.DELIMITER){throw createError("Unexpected operator "+token)}else{throw createSyntaxError('Unexpected part "'+token+'"')}}return node}function parseBlock(){var node;var blocks=[];var visible;if(token==""){return new ConstantNode("undefined","undefined")}if(token!="\n"&&token!=";"){node=parseFunctionAssignment()}while(token=="\n"||token==";"){if(blocks.length==0&&node){visible=token!=";";blocks.push({node:node,visible:visible})}getToken();if(token!="\n"&&token!=";"&&token!=""){node=parseFunctionAssignment();visible=token!=";";blocks.push({node:node,visible:visible})}}if(blocks.length>0){return new BlockNode(blocks)}else{return node}}function parseFunctionAssignment(){if(token_type==TOKENTYPE.SYMBOL&&token=="function"){throw createSyntaxError('Deprecated keyword "function". '+'Functions can now be assigned without it, like "f(x) = x^2".')}return parseAssignment()}function parseAssignment(){var name,args,expr,valid;var node=parseConditional();if(token=="="){if(node instanceof SymbolNode){name=node.name;getTokenSkipNewline();expr=parseAssignment();return new AssignmentNode(name,expr)}else if(node instanceof IndexNode){getTokenSkipNewline();expr=parseAssignment();return new UpdateNode(node,expr)}else if(node instanceof FunctionNode){valid=true;args=[];name=node.name;node.args.forEach(function(arg,index){if(arg instanceof SymbolNode){args[index]=arg.name}else{valid=false}});if(valid){getTokenSkipNewline();expr=parseAssignment();return new FunctionAssignmentNode(name,args,expr)}}throw createSyntaxError("Invalid left hand side of assignment operator =")}return node}function parseConditional(){var node=parseLogicalOr();while(token=="?"){var prev=conditional_level;conditional_level=nesting_level;getTokenSkipNewline();var condition=node;var trueExpr=parseLogicalOr();if(token!=":")throw createSyntaxError("False part of conditional expression expected");conditional_level=null;getTokenSkipNewline();var falseExpr=parseConditional();node=new ConditionalNode(condition,trueExpr,falseExpr);conditional_level=prev}return node}function parseLogicalOr(){var node=parseLogicalXor();while(token=="or"){getTokenSkipNewline();node=new OperatorNode("or","or",[node,parseLogicalXor()])}return node}function parseLogicalXor(){var node=parseLogicalAnd();while(token=="xor"){getTokenSkipNewline();node=new OperatorNode("xor","xor",[node,parseLogicalAnd()])}return node}function parseLogicalAnd(){var node=parseBitwiseOr();while(token=="and"){getTokenSkipNewline();node=new OperatorNode("and","and",[node,parseBitwiseOr()])}return node}function parseBitwiseOr(){var node=parseBitwiseXor();while(token=="|"){getTokenSkipNewline();node=new OperatorNode("|","bitOr",[node,parseBitwiseXor()])}return node}function parseBitwiseXor(){var node=parseBitwiseAnd();while(token=="^|"){getTokenSkipNewline();node=new OperatorNode("^|","bitXor",[node,parseBitwiseAnd()])}return node}function parseBitwiseAnd(){var node=parseRelational();while(token=="&"){getTokenSkipNewline();node=new OperatorNode("&","bitAnd",[node,parseRelational()])}return node}function parseRelational(){var node,operators,name,fn,params;node=parseShift();operators={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};while(token in operators){name=token;fn=operators[name];getTokenSkipNewline();params=[node,parseShift()];node=new OperatorNode(name,fn,params)}return node}function parseShift(){var node,operators,name,fn,params;node=parseConversion();operators={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};while(token in operators){name=token;fn=operators[name];getTokenSkipNewline();params=[node,parseConversion()];node=new OperatorNode(name,fn,params)}return node}function parseConversion(){var node,operators,name,fn,params;node=parseRange();operators={to:"to","in":"to"};while(token in operators){name=token;fn=operators[name];getTokenSkipNewline();params=[node,parseRange()];node=new OperatorNode(name,fn,params)}return node}function parseRange(){var node,params=[];if(token==":"){node=new ConstantNode("1","number")}else{node=parseAddSubtract()}if(token==":"&&conditional_level!==nesting_level){params.push(node);while(token==":"&&params.length<3){
getTokenSkipNewline();if(token==")"||token=="]"||token==","||token==""){params.push(new SymbolNode("end"))}else{params.push(parseAddSubtract())}}if(params.length==3){node=new RangeNode(params[0],params[2],params[1])}else{node=new RangeNode(params[0],params[1])}}return node}function parseAddSubtract(){var node,operators,name,fn,params;node=parseMultiplyDivide();operators={"+":"add","-":"subtract"};while(token in operators){name=token;fn=operators[name];getTokenSkipNewline();params=[node,parseMultiplyDivide()];node=new OperatorNode(name,fn,params)}return node}function parseMultiplyDivide(){var node,operators,name,fn,params;node=parseUnary();operators={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};if(token in operators){while(token in operators){name=token;fn=operators[name];getTokenSkipNewline();params=[node,parseUnary()];node=new OperatorNode(name,fn,params)}}if(token_type==TOKENTYPE.SYMBOL||token=="in"&&node instanceof ConstantNode||token_type==TOKENTYPE.NUMBER&&!(node instanceof ConstantNode)||(token=="("||token=="[")){node=new OperatorNode("*","multiply",[node,parseMultiplyDivide()])}return node}function parseUnary(){var name,params;var fn={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"}[token];if(fn){name=token;getTokenSkipNewline();params=[parseUnary()];return new OperatorNode(name,fn,params)}return parsePow()}function parsePow(){var node,name,fn,params;node=parseLeftHandOperators();if(token=="^"||token==".^"){name=token;fn=name=="^"?"pow":"dotPow";getTokenSkipNewline();params=[node,parseUnary()];node=new OperatorNode(name,fn,params)}return node}function parseLeftHandOperators(){var node,operators,name,fn,params;node=parseCustomNodes();operators={"!":"factorial","'":"transpose"};while(token in operators){name=token;fn=operators[name];getToken();params=[node];node=new OperatorNode(name,fn,params)}return node}function parseCustomNodes(){var params=[],handler;if(token_type==TOKENTYPE.SYMBOL&&extra_nodes[token]){handler=extra_nodes[token];getToken();if(token=="("){params=[];openParams();getToken();if(token!=")"){params.push(parseConditional());while(token==","){getToken();params.push(parseConditional())}}if(token!=")"){throw createSyntaxError("Parenthesis ) expected")}closeParams();getToken()}return new handler(params)}return parseSymbol()}function parseSymbol(){var node,name;if(token_type==TOKENTYPE.SYMBOL||token_type==TOKENTYPE.DELIMITER&&token in NAMED_DELIMITERS){name=token;getToken();node=parseFunctions(name);node=parseIndex(node);return node}return parseString()}function parseFunctions(name){var params;if(token=="("){params=[];openParams();getToken();if(token!=")"){params.push(parseConditional());while(token==","){getToken();params.push(parseConditional())}}if(token!=")"){throw createSyntaxError("Parenthesis ) expected")}closeParams();getToken();return new FunctionNode(name,params)}return new SymbolNode(name)}function parseIndex(node){var params;while(token=="["){params=[];openParams();getToken();if(token!="]"){params.push(parseConditional());while(token==","){getToken();params.push(parseConditional())}}if(token!="]"){throw createSyntaxError("Parenthesis ] expected")}closeParams();getToken();node=new IndexNode(node,params)}return node}function parseString(){var node,str,tPrev;if(token=='"'){str="";tPrev="";while(c!=""&&(c!='"'||tPrev=="\\")){str+=c;tPrev=c;next()}getToken();if(token!='"'){throw createSyntaxError('End of string " expected')}getToken();node=new ConstantNode(str,"string");node=parseIndex(node);return node}return parseMatrix()}function parseMatrix(){var array,params,rows,cols;if(token=="["){openParams();getToken();if(token!="]"){var row=parseRow();if(token==";"){rows=1;params=[row];while(token==";"){getToken();params[rows]=parseRow();rows++}if(token!="]"){throw createSyntaxError("End of matrix ] expected")}closeParams();getToken();cols=params[0].nodes.length;for(var r=1;r<rows;r++){if(params[r].nodes.length!=cols){throw createError("Column dimensions mismatch "+"("+params[r].nodes.length+" != "+cols+")")}}array=new ArrayNode(params)}else{if(token!="]"){throw createSyntaxError("End of matrix ] expected")}closeParams();getToken();array=row}}else{closeParams();getToken();array=new ArrayNode([])}return array}return parseNumber()}function parseRow(){var params=[parseAssignment()];var len=1;while(token==","){getToken();params[len]=parseAssignment();len++}return new ArrayNode(params)}function parseNumber(){var number;if(token_type==TOKENTYPE.NUMBER){number=token;getToken();return new ConstantNode(number,"number")}return parseParentheses()}function parseParentheses(){var node;if(token=="("){openParams();getToken();node=parseAssignment();if(token!=")"){throw createSyntaxError("Parenthesis ) expected")}closeParams();getToken();return node}return parseEnd()}function parseEnd(){if(token==""){throw createSyntaxError("Unexpected end of expression")}else{throw createSyntaxError("Value expected")}}function col(){return index-token.length+1}function createSyntaxError(message){var c=col();var error=new SyntaxError(message+" (char "+c+")");error["char"]=c;return error}function createError(message){var c=col();var error=new Error(message+" (char "+c+")");error["char"]=c;return error}return parse}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var _parse=math.expression.parse;function Parser(){if(!(this instanceof Parser)){throw new SyntaxError("Constructor must be called with the new operator")}this.scope={}}Parser.prototype.parse=function(expr){throw new Error("Parser.parse is deprecated. Use math.parse instead.")};Parser.prototype.compile=function(expr){throw new Error("Parser.compile is deprecated. Use math.compile instead.")};Parser.prototype.eval=function(expr){return _parse(expr).compile(math).eval(this.scope)};Parser.prototype.get=function(name){return this.scope[name]};Parser.prototype.set=function(name,value){return this.scope[name]=value};Parser.prototype.remove=function(name){delete this.scope[name]};Parser.prototype.clear=function(){for(var name in this.scope){if(this.scope.hasOwnProperty(name)){delete this.scope[name]}}};return Parser}},function(module,exports,__webpack_require__){exports.e=__webpack_require__(361);exports.E=__webpack_require__(361);exports["false"]=__webpack_require__(362);exports.i=__webpack_require__(363);exports["Infinity"]=__webpack_require__(364);exports.LN2=__webpack_require__(365);exports.LN10=__webpack_require__(366);exports.LOG2E=__webpack_require__(367);exports.LOG10E=__webpack_require__(368);exports.NaN=__webpack_require__(369);exports["null"]=__webpack_require__(370);exports.pi=__webpack_require__(371);exports.PI=__webpack_require__(371);exports.phi=__webpack_require__(372);exports.SQRT1_2=__webpack_require__(373);exports.SQRT2=__webpack_require__(374);exports.tau=__webpack_require__(375);exports["true"]=__webpack_require__(376);exports.version=__webpack_require__(377);exports.abs=__webpack_require__(390);exports.add=__webpack_require__(391);exports.ceil=__webpack_require__(392);exports.cube=__webpack_require__(393);exports.divide=__webpack_require__(394);exports.dotDivide=__webpack_require__(395);exports.dotMultiply=__webpack_require__(396);exports.dotPow=__webpack_require__(397);exports.exp=__webpack_require__(398);exports.fix=__webpack_require__(399);exports.floor=__webpack_require__(400);exports.gcd=__webpack_require__(401);exports.lcm=__webpack_require__(402);exports.log=__webpack_require__(403);exports.log10=__webpack_require__(404);exports.mod=__webpack_require__(405);exports.multiply=__webpack_require__(406);exports.norm=__webpack_require__(407);exports.nthRoot=__webpack_require__(408);exports.pow=__webpack_require__(409);exports.round=__webpack_require__(410);exports.sign=__webpack_require__(411);exports.sqrt=__webpack_require__(412);exports.square=__webpack_require__(413);exports.subtract=__webpack_require__(414);exports.unaryMinus=__webpack_require__(415);exports.unaryPlus=__webpack_require__(416);exports.xgcd=__webpack_require__(417);exports.bitAnd=__webpack_require__(418);exports.bitNot=__webpack_require__(419);exports.bitOr=__webpack_require__(420);exports.bitXor=__webpack_require__(421);exports.leftShift=__webpack_require__(422);exports.rightArithShift=__webpack_require__(423);exports.rightLogShift=__webpack_require__(424);exports.arg=__webpack_require__(425);exports.conj=__webpack_require__(426);exports.re=__webpack_require__(427);exports.im=__webpack_require__(428);exports.bignumber=__webpack_require__(429);exports["boolean"]=__webpack_require__(430);exports.complex=__webpack_require__(431);exports.index=__webpack_require__(432);exports.matrix=__webpack_require__(433);exports.number=__webpack_require__(434);exports.string=__webpack_require__(435);exports.unit=__webpack_require__(436);exports["eval"]=__webpack_require__(437);exports.help=__webpack_require__(438);exports["and"]=__webpack_require__(439);exports["not"]=__webpack_require__(440);exports["or"]=__webpack_require__(441);exports["xor"]=__webpack_require__(442);exports["concat"]=__webpack_require__(443);exports.cross=__webpack_require__(444);exports.det=__webpack_require__(445);exports.diag=__webpack_require__(446);exports.dot=__webpack_require__(447);exports.eye=__webpack_require__(448);exports.flatten=__webpack_require__(449);exports.inv=__webpack_require__(450);exports.ones=__webpack_require__(451);exports.range=__webpack_require__(452);exports.resize=__webpack_require__(453);exports.size=__webpack_require__(454);exports.squeeze=__webpack_require__(455);exports.subset=__webpack_require__(456);exports.trace=__webpack_require__(457);exports.transpose=__webpack_require__(458);exports.zeros=__webpack_require__(459);exports.combinations=__webpack_require__(460);exports.factorial=__webpack_require__(461);exports.gamma=__webpack_require__(462);exports.permutations=__webpack_require__(463);exports.pickRandom=__webpack_require__(464);exports.random=__webpack_require__(465);exports.randomInt=__webpack_require__(466);exports.compare=__webpack_require__(467);exports.deepEqual=__webpack_require__(468);exports["equal"]=__webpack_require__(469);exports.larger=__webpack_require__(470);exports.largerEq=__webpack_require__(471);exports.smaller=__webpack_require__(472);exports.smallerEq=__webpack_require__(473);exports.unequal=__webpack_require__(474);exports.max=__webpack_require__(475);exports.mean=__webpack_require__(476);exports.median=__webpack_require__(477);exports.min=__webpack_require__(478);exports.prod=__webpack_require__(479);exports.std=__webpack_require__(480);exports.sum=__webpack_require__(481);exports["var"]=__webpack_require__(482);exports.acos=__webpack_require__(483);exports.acosh=__webpack_require__(484);exports.acot=__webpack_require__(485);exports.acoth=__webpack_require__(486);exports.acsc=__webpack_require__(487);exports.acsch=__webpack_require__(488);exports.asec=__webpack_require__(489);exports.asech=__webpack_require__(490);exports.asin=__webpack_require__(491);exports.asinh=__webpack_require__(492);exports.atan=__webpack_require__(493);exports.atanh=__webpack_require__(494);exports.atan2=__webpack_require__(495);exports.cos=__webpack_require__(496);exports.cosh=__webpack_require__(497);exports.cot=__webpack_require__(498);exports.coth=__webpack_require__(499);exports.csc=__webpack_require__(500);exports.csch=__webpack_require__(501);exports.sec=__webpack_require__(502);exports.sech=__webpack_require__(503);exports.sin=__webpack_require__(504);exports.sinh=__webpack_require__(505);exports.tan=__webpack_require__(506);exports.tanh=__webpack_require__(507);exports.to=__webpack_require__(508);exports.clone=__webpack_require__(509);exports.map=__webpack_require__(510);exports.filter=__webpack_require__(511);exports.forEach=__webpack_require__(512);exports.format=__webpack_require__(513);exports["import"]=__webpack_require__(514);exports.sort=__webpack_require__(515);exports["typeof"]=__webpack_require__(516)},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){function reviver(key,value){var name=value&&value.mathjs;var constructor=math.type[name];if(constructor&&constructor.fromJSON){return constructor.fromJSON(value)}return value}return reviver}},function(module,exports,__webpack_require__){"use strict";var BigNumber=__webpack_require__(129);var errorTransform=__webpack_require__(380).transform;var isNumber=__webpack_require__(127).isNumber;var argsToArray=__webpack_require__(340).argsToArray;module.exports=function(math){var transform=function(){var args=argsToArray(arguments);var lastIndex=args.length-1;var last=args[lastIndex];if(isNumber(last)){args[lastIndex]=last-1}else if(last instanceof BigNumber){args[lastIndex]=last.minus(1)}try{return math.concat.apply(math,args)}catch(err){throw errorTransform(err)}};math.concat.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var SymbolNode=__webpack_require__(359);var isBoolean=__webpack_require__(379).isBoolean;var argsToArray=__webpack_require__(340).argsToArray;var ArgumentsError=__webpack_require__(342);module.exports=function(math){var _filter=math.filter;var transform=function(args,math,scope){if(args.length!==2){throw new ArgumentsError("filter",arguments.length,2)}var x=args[0].compile(math).eval(scope);var test;if(args[1]instanceof SymbolNode){test=args[1].compile(math).eval(scope)}else{var _scope=scope||{};var symbol=args[1].filter(function(node){return node instanceof SymbolNode&&!(node.name in math)&&!(node.name in _scope)})[0];var sub=Object.create(_scope);var eq=args[1].compile(math);if(symbol){var name=symbol.name;test=function(x){sub[name]=x;return eq.eval(sub)}}else{throw new Error("No undefined variable found in filter equation")}}return _filter(x,test)};transform.rawArgs=true;math.filter.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;var transform=function(x,callback){if(arguments.length!=2){throw new math.error.ArgumentsError("forEach",arguments.length,2)}if(Array.isArray(x)){_forEachArray(x,callback,x)}else if(x instanceof Matrix){_forEachArray(x.valueOf(),callback,x)}else{throw new math.error.UnsupportedTypeError("forEach",math["typeof"](x))}};function _forEachArray(array,callback,arrayOrig){var recurse=function(value,index){if(Array.isArray(value)){value.forEach(function(child,i){recurse(child,index.concat(i+1))})}else{callback(value,index,arrayOrig)}};recurse(array,[])}math.forEach.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var BigNumber=__webpack_require__(129);var Range=__webpack_require__(132);var Index=__webpack_require__(133);var isNumber=__webpack_require__(127).isNumber;module.exports=function(math){var transform=function(){var args=[];for(var i=0,ii=arguments.length;i<ii;i++){var arg=arguments[i];if(arg instanceof Range){arg.start--;arg.end-=arg.step>0?0:2}else if(isNumber(arg)){arg--}else if(arg instanceof BigNumber){arg=arg.toNumber()-1}else{throw new TypeError("Ranges must be a Number or Range")}args[i]=arg}var res=new Index;Index.apply(res,args);return res};math.index.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;var transform=function(x,callback){if(arguments.length!=2){throw new math.error.ArgumentsError("map",arguments.length,2)}if(Array.isArray(x)){return _mapArray(x,callback,x)}else if(x instanceof Matrix){return math.matrix(_mapArray(x.valueOf(),callback,x))}else{throw new math.error.UnsupportedTypeError("map",math["typeof"](x))}};function _mapArray(arrayIn,callback,arrayOrig){var recurse=function(value,index){if(Array.isArray(value)){return value.map(function(child,i){return recurse(child,index.concat(i+1))})}else{return callback(value,index,arrayOrig)}};return recurse(arrayIn,[])}math.map.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var BigNumber=__webpack_require__(129);var errorTransform=__webpack_require__(380).transform;var isNumber=__webpack_require__(127).isNumber;var argsToArray=__webpack_require__(340).argsToArray;module.exports=function(math){var isCollection=math.collection.isCollection;var transform=function(){var args=argsToArray(arguments);if(args.length==2&&isCollection(args[0])){var dim=args[1];if(isNumber(dim)){args[1]=dim-1}else if(dim instanceof BigNumber){args[1]=dim.minus(1)}}try{return math.max.apply(math,args)}catch(err){throw errorTransform(err)}};math.max.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var BigNumber=__webpack_require__(129);var errorTransform=__webpack_require__(380).transform;var isNumber=__webpack_require__(127).isNumber;var argsToArray=__webpack_require__(340).argsToArray;module.exports=function(math){var isCollection=math.collection.isCollection;var transform=function(){var args=argsToArray(arguments);if(args.length==2&&isCollection(args[0])){var dim=args[1];if(isNumber(dim)){args[1]=dim-1}else if(dim instanceof BigNumber){args[1]=dim.minus(1)}}try{return math.mean.apply(math,args)}catch(err){throw errorTransform(err)}};math.mean.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var BigNumber=__webpack_require__(129);var errorTransform=__webpack_require__(380).transform;var isNumber=__webpack_require__(127).isNumber;var argsToArray=__webpack_require__(340).argsToArray;module.exports=function(math){var isCollection=math.collection.isCollection;var transform=function(){var args=argsToArray(arguments);if(args.length==2&&isCollection(args[0])){var dim=args[1];if(isNumber(dim)){args[1]=dim-1}else if(dim instanceof BigNumber){args[1]=dim.minus(1)}}try{return math.min.apply(math,args)}catch(err){throw errorTransform(err)}};math.min.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var isBoolean=__webpack_require__(379).isBoolean;var argsToArray=__webpack_require__(340).argsToArray;module.exports=function(math){var transform=function(){var args=argsToArray(arguments);var lastIndex=args.length-1;var last=args[lastIndex];if(!isBoolean(last)){args.push(true)}return math.range.apply(math,args)};math.range.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";var errorTransform=__webpack_require__(380).transform;var isBoolean=__webpack_require__(379).isBoolean;var argsToArray=__webpack_require__(340).argsToArray;module.exports=function(math){var transform=function(){try{return math.subset.apply(math,argsToArray(arguments))}catch(err){throw errorTransform(err)}};math.subset.transform=transform;return transform}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var string=__webpack_require__(347);function Chain(value){if(!(this instanceof Chain)){throw new SyntaxError("Constructor must be called with the new operator")}if(value instanceof Chain){this.value=value.value}else{this.value=value}}Chain.prototype.done=function(){return this.value};Chain.prototype.valueOf=function(){return this.value};Chain.prototype.toString=function(){return string.format(this.value)};function createProxy(name,value){var slice=Array.prototype.slice;if(typeof value==="function"){Chain.prototype[name]=function(){var args=[this.value].concat(slice.call(arguments,0));return new Chain(value.apply(this,args))}}else{Chain.prototype[name]=new Chain(value)}}Chain.createProxy=createProxy;for(var prop in math){if(math.hasOwnProperty(prop)){createProxy(prop,math[prop])}}return Chain}},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,toError=__webpack_require__(122).toError,getSingleProperty=__webpack_require__(122).getSingleProperty,formattedOrderClause=__webpack_require__(122).formattedOrderClause,handleCallback=__webpack_require__(122).handleCallback,Logger=__webpack_require__(114).Logger,EventEmitter=__webpack_require__(120).EventEmitter,ReadPreference=__webpack_require__(94),MongoError=__webpack_require__(114).MongoError,Readable=__webpack_require__(316).Readable||__webpack_require__(333).Readable,CoreCursor=__webpack_require__(97),Query=__webpack_require__(114).Query,CoreReadPreference=__webpack_require__(114).ReadPreference;var AggregationCursor=function(bson,ns,cmd,options,topology,topologyOptions){CoreCursor.apply(this,Array.prototype.slice.call(arguments,0));var self=this;var state=AggregationCursor.INIT;var streamOptions={};var maxTimeMS=null;Readable.call(this,{objectMode:true});this.s={maxTimeMS:maxTimeMS,state:state,streamOptions:streamOptions,bson:bson,ns:ns,cmd:cmd,options:options,topology:topology,topologyOptions:topologyOptions}};inherits(AggregationCursor,Readable);for(var name in CoreCursor.prototype){AggregationCursor.prototype[name]=CoreCursor.prototype[name]}AggregationCursor.prototype.batchSize=function(value){if(this.s.state==AggregationCursor.CLOSED||this.isDead())throw new MongoError("Cursor is closed");if(typeof value!="number")throw new MongoError("batchSize requires an integer");if(this.s.cmd.cursor)this.s.cmd.cursor.batchSize=value;this.setCursorBatchSize(value);return this};AggregationCursor.prototype.geoNear=function(document){this.s.cmd.pipeline.push({$geoNear:document});return this};AggregationCursor.prototype.group=function(document){this.s.cmd.pipeline.push({$group:document});return this};AggregationCursor.prototype.limit=function(value){this.s.cmd.pipeline.push({$limit:value});return this};AggregationCursor.prototype.match=function(document){this.s.cmd.pipeline.push({$match:document});return this};AggregationCursor.prototype.maxTimeMS=function(value){if(this.s.topology.lastIsMaster().minWireVersion>2){this.s.cmd.maxTimeMS=value}return this};AggregationCursor.prototype.out=function(destination){this.s.cmd.pipeline.push({$out:destination});return this};AggregationCursor.prototype.project=function(document){this.s.cmd.pipeline.push({$project:document});return this};AggregationCursor.prototype.redact=function(document){this.s.cmd.pipeline.push({$redact:document});return this};AggregationCursor.prototype.skip=function(value){this.s.cmd.pipeline.push({$skip:value});return this};AggregationCursor.prototype.sort=function(document){this.s.cmd.pipeline.push({$sort:document});return this};AggregationCursor.prototype.unwind=function(field){this.s.cmd.pipeline.push({$unwind:field});return this};AggregationCursor.prototype.get=AggregationCursor.prototype.toArray;AggregationCursor.INIT=0;AggregationCursor.OPEN=1;AggregationCursor.CLOSED=2;module.exports=AggregationCursor},function(module,exports,__webpack_require__){"use strict";var common=__webpack_require__(381),utils=__webpack_require__(122),toError=__webpack_require__(122).toError,f=__webpack_require__(52).format,shallowClone=utils.shallowClone,WriteError=common.WriteError,BulkWriteResult=common.BulkWriteResult,LegacyOp=common.LegacyOp,ObjectID=__webpack_require__(114).BSON.ObjectID,Batch=common.Batch,mergeBatchResults=common.mergeBatchResults;var FindOperatorsUnordered=function(self){this.s=self.s};FindOperatorsUnordered.prototype.update=function(updateDocument){var upsert=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:false;var document={q:this.s.currentOp.selector,u:updateDocument,multi:true,upsert:upsert};this.s.currentOp=null;return addToOperationsList(this,common.UPDATE,document)};FindOperatorsUnordered.prototype.updateOne=function(updateDocument){var upsert=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:false;var document={q:this.s.currentOp.selector,u:updateDocument,multi:false,upsert:upsert};this.s.currentOp=null;return addToOperationsList(this,common.UPDATE,document)};FindOperatorsUnordered.prototype.replaceOne=function(updateDocument){this.updateOne(updateDocument)};FindOperatorsUnordered.prototype.upsert=function(){this.s.currentOp.upsert=true;return this};FindOperatorsUnordered.prototype.removeOne=function(){var document={q:this.s.currentOp.selector,limit:1};this.s.currentOp=null;return addToOperationsList(this,common.REMOVE,document)};FindOperatorsUnordered.prototype.remove=function(){var document={q:this.s.currentOp.selector,limit:0};this.s.currentOp=null;return addToOperationsList(this,common.REMOVE,document)};var addToOperationsList=function(_self,docType,document){var bsonSize=_self.s.bson.calculateObjectSize(document,false);if(bsonSize>=_self.s.maxBatchSizeBytes)throw toError("document is larger than the maximum size "+_self.s.maxBatchSizeBytes);_self.s.currentBatch=null;if(docType==common.INSERT){_self.s.currentBatch=_self.s.currentInsertBatch}else if(docType==common.UPDATE){_self.s.currentBatch=_self.s.currentUpdateBatch}else if(docType==common.REMOVE){_self.s.currentBatch=_self.s.currentRemoveBatch}if(_self.s.currentBatch==null)_self.s.currentBatch=new Batch(docType,_self.s.currentIndex);if(_self.s.currentBatch.size+1>=_self.s.maxWriteBatchSize||_self.s.currentBatch.sizeBytes+bsonSize>=_self.s.maxBatchSizeBytes||_self.s.currentBatch.batchType!=docType){_self.s.batches.push(_self.s.currentBatch);_self.s.currentBatch=new Batch(docType,_self.s.currentIndex)}if(Array.isArray(document)){throw toError("operation passed in cannot be an Array")}else{_self.s.currentBatch.operations.push(document);_self.s.currentBatch.originalIndexes.push(_self.s.currentIndex);_self.s.currentIndex=_self.s.currentIndex+1}if(docType==common.INSERT){_self.s.currentInsertBatch=_self.s.currentBatch;_self.s.bulkResult.insertedIds.push({index:_self.s.currentIndex,_id:document._id})}else if(docType==common.UPDATE){_self.s.currentUpdateBatch=_self.s.currentBatch}else if(docType==common.REMOVE){_self.s.currentRemoveBatch=_self.s.currentBatch}_self.s.currentBatch.size=_self.s.currentBatch.size+1;_self.s.currentBatch.sizeBytes=_self.s.currentBatch.sizeBytes+bsonSize;return _self};var UnorderedBulkOperation=function(topology,collection,options){options=options==null?{}:options;var self=this;var namespace=collection.collectionName;var executed=false;var currentOp=null;var currentIndex=0;var batches=[];var currentInsertBatch=null;var currentUpdateBatch=null;var currentRemoveBatch=null;var bson=topology.bson;var capabilities=topology.capabilities();var maxBatchSizeBytes=topology.isMasterDoc.maxBsonObjectSize;var maxWriteBatchSize=topology.isMasterDoc.maxWriteBatchSize||1e3;var writeConcern=common.writeConcern(shallowClone(options),collection,options);var bulkResult={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:bulkResult,currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,currentBatch:null,currentIndex:0,batches:[],writeConcern:writeConcern,capabilities:capabilities,maxBatchSizeBytes:maxBatchSizeBytes,maxWriteBatchSize:maxWriteBatchSize,namespace:namespace,bson:bson,topology:topology,options:options,currentOp:currentOp,executed:executed,collection:collection}};UnorderedBulkOperation.prototype.insert=function(document){if(document._id==null)document._id=new ObjectID;return addToOperationsList(this,common.INSERT,document)};UnorderedBulkOperation.prototype.find=function(selector){if(!selector){throw toError("Bulk find operation must specify a selector")}this.s.currentOp={selector:selector};return new FindOperatorsUnordered(this)};Object.defineProperty(UnorderedBulkOperation.prototype,"length",{enumerable:true,get:function(){return this.s.currentIndex}});UnorderedBulkOperation.prototype.raw=function(op){var key=Object.keys(op)[0];if(op.updateOne&&op.updateOne.q||op.updateMany&&op.updateMany.q||op.replaceOne&&op.replaceOne.q){op[key].multi=op.updateOne||op.replaceOne?false:true;return addToOperationsList(this,common.UPDATE,op[key])}if(op.updateOne||op.updateMany||op.replaceOne){var multi=op.updateOne||op.replaceOne?false:true;var operation={q:op[key].filter,u:op[key].update||op[key].replacement,multi:multi};if(op[key].upsert)operation.upsert=true;return addToOperationsList(this,common.UPDATE,operation)}if(op.removeOne||op.removeMany||op.deleteOne&&op.deleteOne.q||op.deleteMany&&op.deleteMany.q){op[key].limit=op.removeOne?1:0;return addToOperationsList(this,common.REMOVE,op[key])}if(op.deleteOne||op.deleteMany){var limit=op.deleteOne?1:0;var operation={q:op[key].filter,limit:limit};return addToOperationsList(this,common.REMOVE,operation)}if(op.insertOne&&op.insertOne.document==null){if(op.insertOne._id==null)op.insertOne._id=new ObjectID;return addToOperationsList(this,common.INSERT,op.insertOne)}else if(op.insertOne&&op.insertOne.document){if(op.insertOne.document._id==null)op.insertOne.document._id=new ObjectID;return addToOperationsList(this,common.INSERT,op.insertOne.document)}if(op.insertMany){for(var i=0;i<op.insertMany.length;i++){addToOperationsList(this,common.INSERT,op.insertMany[i])}return}throw toError("bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany")};var executeBatch=function(self,batch,callback){var finalOptions={ordered:false};if(self.s.writeConcern!=null){finalOptions.writeConcern=self.s.writeConcern}var resultHandler=function(err,result){if(err)err.ok=0;callback(null,mergeBatchResults(false,batch,self.s.bulkResult,err,result))};try{if(batch.batchType==common.INSERT){self.s.topology.insert(self.s.collection.namespace,batch.operations,finalOptions,resultHandler)}else if(batch.batchType==common.UPDATE){self.s.topology.update(self.s.collection.namespace,batch.operations,finalOptions,resultHandler)}else if(batch.batchType==common.REMOVE){self.s.topology.remove(self.s.collection.namespace,batch.operations,finalOptions,resultHandler)}}catch(err){err.ok=0;callback(null,mergeBatchResults(false,batch,self.s.bulkResult,err,null))}};var executeBatches=function(self,callback){var numberOfCommandsToExecute=self.s.batches.length;for(var i=0;i<self.s.batches.length;i++){executeBatch(self,self.s.batches[i],function(err,result){numberOfCommandsToExecute=numberOfCommandsToExecute-1;if(numberOfCommandsToExecute==0){var error=self.s.bulkResult.writeErrors.length>0?self.s.bulkResult.writeErrors[0]:null;callback(error,new BulkWriteResult(self.s.bulkResult))}})}};UnorderedBulkOperation.prototype.execute=function(_writeConcern,callback){if(this.s.executed)throw toError("batch cannot be re-executed");if(typeof _writeConcern=="function"){callback=_writeConcern}else{this.s.writeConcern=_writeConcern}if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch);if(this.s.batches.length==0){throw toError("Invalid Operation, No operations in bulk")}return executeBatches(this,function(err,result){callback(err,result)})};var initializeUnorderedBulkOp=function(topology,collection,options){return new UnorderedBulkOperation(topology,collection,options)};module.exports=initializeUnorderedBulkOp},function(module,exports,__webpack_require__){"use strict";var common=__webpack_require__(381),utils=__webpack_require__(122),toError=__webpack_require__(122).toError,f=__webpack_require__(52).format,shallowClone=utils.shallowClone,WriteError=common.WriteError,BulkWriteResult=common.BulkWriteResult,LegacyOp=common.LegacyOp,ObjectID=__webpack_require__(114).BSON.ObjectID,Batch=common.Batch,mergeBatchResults=common.mergeBatchResults;var FindOperatorsOrdered=function(self){this.s=self.s};FindOperatorsOrdered.prototype.update=function(updateDocument){var upsert=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:false;var document={q:this.s.currentOp.selector,u:updateDocument,multi:true,upsert:upsert};this.s.currentOp=null;return addToOperationsList(this,common.UPDATE,document)};FindOperatorsOrdered.prototype.updateOne=function(updateDocument){var upsert=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:false;

var document={q:this.s.currentOp.selector,u:updateDocument,multi:false,upsert:upsert};this.s.currentOp=null;return addToOperationsList(this,common.UPDATE,document)};FindOperatorsOrdered.prototype.replaceOne=function(updateDocument){this.updateOne(updateDocument)};FindOperatorsOrdered.prototype.upsert=function(){this.s.currentOp.upsert=true;return this};FindOperatorsOrdered.prototype.deleteOne=function(){var document={q:this.s.currentOp.selector,limit:1};this.s.currentOp=null;return addToOperationsList(this,common.REMOVE,document)};FindOperatorsOrdered.prototype.removeOne=FindOperatorsOrdered.prototype.deleteOne;FindOperatorsOrdered.prototype.delete=function(){var document={q:this.s.currentOp.selector,limit:0};this.s.currentOp=null;return addToOperationsList(this,common.REMOVE,document)};FindOperatorsOrdered.prototype.remove=FindOperatorsOrdered.prototype.delete;var addToOperationsList=function(_self,docType,document){var bsonSize=_self.s.bson.calculateObjectSize(document,false);if(bsonSize>=_self.s.maxBatchSizeBytes)throw toError("document is larger than the maximum size "+_self.s.maxBatchSizeBytes);if(_self.s.currentBatch==null)_self.s.currentBatch=new Batch(docType,_self.s.currentIndex);if(_self.s.currentBatchSize+1>=_self.s.maxWriteBatchSize||_self.s.currentBatchSizeBytes+_self.s.currentBatchSizeBytes>=_self.s.maxBatchSizeBytes||_self.s.currentBatch.batchType!=docType){_self.s.batches.push(_self.s.currentBatch);_self.s.currentBatch=new Batch(docType,_self.s.currentIndex);_self.s.currentBatchSize=0;_self.s.currentBatchSizeBytes=0}else{_self.s.currentBatchSize=_self.s.currentBatchSize+1;_self.s.currentBatchSizeBytes=_self.s.currentBatchSizeBytes+bsonSize}if(docType==common.INSERT){_self.s.bulkResult.insertedIds.push({index:_self.s.currentIndex,_id:document._id})}if(Array.isArray(document)){throw toError("operation passed in cannot be an Array")}else{_self.s.currentBatch.originalIndexes.push(_self.s.currentIndex);_self.s.currentBatch.operations.push(document);_self.s.currentIndex=_self.s.currentIndex+1}return _self};function OrderedBulkOperation(topology,collection,options){options=options==null?{}:options;var self=this;var executed=false;var currentOp=null;var bson=topology.bson;var namespace=collection.collectionName;var maxBatchSizeBytes=topology.isMasterDoc.maxBsonObjectSize;var maxWriteBatchSize=topology.isMasterDoc.maxWriteBatchSize||1e3;var capabilities=topology.capabilities();var writeConcern=common.writeConcern(shallowClone(options),collection,options);var currentBatch=null;var currentIndex=0;var currentBatchSize=0;var currentBatchSizeBytes=0;var batches=[];var bulkResult={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:bulkResult,currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,batches:[],writeConcern:writeConcern,capabilities:capabilities,maxBatchSizeBytes:maxBatchSizeBytes,maxWriteBatchSize:maxWriteBatchSize,namespace:namespace,bson:bson,topology:topology,options:options,currentOp:currentOp,executed:executed,collection:collection}}OrderedBulkOperation.prototype.raw=function(op){var key=Object.keys(op)[0];if(op.updateOne&&op.updateOne.q||op.updateMany&&op.updateMany.q||op.replaceOne&&op.replaceOne.q){op[key].multi=op.updateOne||op.replaceOne?false:true;return addToOperationsList(this,common.UPDATE,op[key])}if(op.updateOne||op.updateMany||op.replaceOne){var multi=op.updateOne||op.replaceOne?false:true;var operation={q:op[key].filter,u:op[key].update||op[key].replacement,multi:multi};if(op[key].upsert)operation.upsert=true;return addToOperationsList(this,common.UPDATE,operation)}if(op.removeOne||op.removeMany||op.deleteOne&&op.deleteOne.q||op.deleteMany&&op.deleteMany.q){op[key].limit=op.removeOne?1:0;return addToOperationsList(this,common.REMOVE,op[key])}if(op.deleteOne||op.deleteMany){var limit=op.deleteOne?1:0;var operation={q:op[key].filter,limit:limit};return addToOperationsList(this,common.REMOVE,operation)}if(op.insertOne&&op.insertOne.document==null){if(op.insertOne._id==null)op.insertOne._id=new ObjectID;return addToOperationsList(this,common.INSERT,op.insertOne)}else if(op.insertOne&&op.insertOne.document){if(op.insertOne.document._id==null)op.insertOne.document._id=new ObjectID;return addToOperationsList(this,common.INSERT,op.insertOne.document)}if(op.insertMany){for(var i=0;i<op.insertMany.length;i++){if(op.insertMany[i]._id==null)op.insertMany[i]._id=new ObjectID;addToOperationsList(this,common.INSERT,op.insertMany[i])}return}throw toError("bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany")};OrderedBulkOperation.prototype.insert=function(document){if(document._id==null)document._id=new ObjectID;return addToOperationsList(this,common.INSERT,document)};OrderedBulkOperation.prototype.find=function(selector){if(!selector){throw toError("Bulk find operation must specify a selector")}this.s.currentOp={selector:selector};return new FindOperatorsOrdered(this)};Object.defineProperty(OrderedBulkOperation.prototype,"length",{enumerable:true,get:function(){return this.s.currentIndex}});var executeCommands=function(self,callback){if(self.s.batches.length==0){return callback(null,new BulkWriteResult(self.s.bulkResult))}var batch=self.s.batches.shift();var resultHandler=function(err,result){if(err)err.ok=0;var mergeResult=mergeBatchResults(true,batch,self.s.bulkResult,err,result);if(mergeResult!=null){return callback(null,new BulkWriteResult(self.s.bulkResult))}if(self.s.bulkResult.writeErrors.length>0){return callback(self.s.bulkResult.writeErrors[0],new BulkWriteResult(self.s.bulkResult))}executeCommands(self,callback)};var finalOptions={ordered:true};if(self.s.writeConcern!=null){finalOptions.writeConcern=self.s.writeConcern}try{if(batch.batchType==common.INSERT){self.s.topology.insert(self.s.collection.namespace,batch.operations,finalOptions,resultHandler)}else if(batch.batchType==common.UPDATE){self.s.topology.update(self.s.collection.namespace,batch.operations,finalOptions,resultHandler)}else if(batch.batchType==common.REMOVE){self.s.topology.remove(self.s.collection.namespace,batch.operations,finalOptions,resultHandler)}}catch(err){err.ok=0;callback(null,mergeBatchResults(false,batch,self.s.bulkResult,err,null))}};OrderedBulkOperation.prototype.execute=function(_writeConcern,callback){if(this.s.executed)throw new toError("batch cannot be re-executed");if(typeof _writeConcern=="function"){callback=_writeConcern}else{this.s.writeConcern=_writeConcern}if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch);if(this.s.batches.length==0){throw toError("Invalid Operation, No operations in bulk")}return executeCommands(this,callback)};var initializeOrderedBulkOp=function(topology,collection,options){return new OrderedBulkOperation(topology,collection,options)};module.exports=initializeOrderedBulkOp},function(module,exports,__webpack_require__){(function(process){var finalhandler=__webpack_require__(531);var flatten=__webpack_require__(383).flatten;var Router=__webpack_require__(304);var methods=__webpack_require__(530);var middleware=__webpack_require__(384);var query=__webpack_require__(165);var debug=__webpack_require__(574)("express:application");var View=__webpack_require__(385);var http=__webpack_require__(79);var compileETag=__webpack_require__(383).compileETag;var compileQueryParser=__webpack_require__(383).compileQueryParser;var compileTrust=__webpack_require__(383).compileTrust;var deprecate=__webpack_require__(532)("express");var merge=__webpack_require__(533);var resolve=__webpack_require__(8).resolve;var slice=Array.prototype.slice;var app=exports=module.exports={};var trustProxyDefaultSymbol="@@symbol:trust_proxy_default";app.init=function(){this.cache={};this.settings={};this.engines={};this.defaultConfiguration()};app.defaultConfiguration=function(){this.enable("x-powered-by");this.set("etag","weak");var env=process.env.NODE_ENV||"development";this.set("env",env);this.set("query parser","extended");this.set("subdomain offset",2);this.set("trust proxy",false);Object.defineProperty(this.settings,trustProxyDefaultSymbol,{configurable:true,value:true});debug("booting in %s mode",env);this.on("mount",function onmount(parent){if(this.settings[trustProxyDefaultSymbol]===true&&typeof parent.settings["trust proxy fn"]==="function"){delete this.settings["trust proxy"];delete this.settings["trust proxy fn"]}this.request.__proto__=parent.request;this.response.__proto__=parent.response;this.engines.__proto__=parent.engines;this.settings.__proto__=parent.settings});this.locals=Object.create(null);this.mountpath="/";this.locals.settings=this.settings;this.set("view",View);this.set("views",resolve("views"));this.set("jsonp callback name","callback");if(env==="production"){this.enable("view cache")}Object.defineProperty(this,"router",{get:function(){throw new Error("'app.router' is deprecated!\nPlease see the 3.x to 4.x migration guide for details on how to update your app.")}})};app.lazyrouter=function(){if(!this._router){this._router=new Router({caseSensitive:this.enabled("case sensitive routing"),strict:this.enabled("strict routing")});this._router.use(query(this.get("query parser fn")));this._router.use(middleware.init(this))}};app.handle=function(req,res,done){var router=this._router;done=done||finalhandler(req,res,{env:this.get("env"),onerror:logerror.bind(this)});if(!router){debug("no routes defined on app");done();return}router.handle(req,res,done)};app.use=function use(fn){var offset=0;var path="/";if(typeof fn!=="function"){var arg=fn;while(Array.isArray(arg)&&arg.length!==0){arg=arg[0]}if(typeof arg!=="function"){offset=1;path=fn}}var fns=flatten(slice.call(arguments,offset));if(fns.length===0){throw new TypeError("app.use() requires middleware functions")}this.lazyrouter();var router=this._router;fns.forEach(function(fn){if(!fn||!fn.handle||!fn.set){return router.use(path,fn)}debug(".use app under %s",path);fn.mountpath=path;fn.parent=this;router.use(path,function mounted_app(req,res,next){var orig=req.app;fn.handle(req,res,function(err){req.__proto__=orig.request;res.__proto__=orig.response;next(err)})});fn.emit("mount",this)},this);return this};app.route=function(path){this.lazyrouter();return this._router.route(path)};app.engine=function(ext,fn){if("function"!=typeof fn)throw new Error("callback function required");if("."!=ext[0])ext="."+ext;this.engines[ext]=fn;return this};app.param=function(name,fn){this.lazyrouter();if(Array.isArray(name)){name.forEach(function(key){this.param(key,fn)},this);return this}this._router.param(name,fn);return this};app.set=function(setting,val){if(arguments.length===1){return this.settings[setting]}this.settings[setting]=val;switch(setting){case"etag":debug("compile etag %s",val);this.set("etag fn",compileETag(val));break;case"query parser":debug("compile query parser %s",val);this.set("query parser fn",compileQueryParser(val));break;case"trust proxy":debug("compile trust proxy %s",val);this.set("trust proxy fn",compileTrust(val));Object.defineProperty(this.settings,trustProxyDefaultSymbol,{configurable:true,value:false});break}return this};app.path=function(){return this.parent?this.parent.path()+this.mountpath:""};app.enabled=function(setting){return!!this.set(setting)};app.disabled=function(setting){return!this.set(setting)};app.enable=function(setting){return this.set(setting,true)};app.disable=function(setting){return this.set(setting,false)};methods.forEach(function(method){app[method]=function(path){if("get"==method&&1==arguments.length)return this.set(path);this.lazyrouter();var route=this._router.route(path);route[method].apply(route,slice.call(arguments,1));return this}});app.all=function(path){this.lazyrouter();var route=this._router.route(path);var args=slice.call(arguments,1);methods.forEach(function(method){route[method].apply(route,args)});return this};app.del=deprecate.function(app.delete,"app.del: Use app.delete instead");app.render=function(name,options,fn){var opts={};var cache=this.cache;var engines=this.engines;var view;if("function"==typeof options){fn=options,options={}}merge(opts,this.locals);if(options._locals){merge(opts,options._locals)}merge(opts,options);opts.cache=null==opts.cache?this.enabled("view cache"):opts.cache;if(opts.cache)view=cache[name];if(!view){view=new(this.get("view"))(name,{defaultEngine:this.get("view engine"),root:this.get("views"),engines:engines});if(!view.path){var dirs=Array.isArray(view.root)&&view.root.length>1?'directories "'+view.root.slice(0,-1).join('", "')+'" or "'+view.root[view.root.length-1]+'"':'directory "'+view.root+'"';var err=new Error('Failed to lookup view "'+name+'" in views '+dirs);err.view=view;return fn(err)}if(opts.cache)cache[name]=view}try{view.render(opts,fn)}catch(err){fn(err)}};app.listen=function(){var server=http.createServer(this);return server.listen.apply(server,arguments)};function logerror(err){if(this.get("env")!=="test")console.error(err.stack||err.toString())}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var debug=__webpack_require__(574)("express:router:route");var Layer=__webpack_require__(382);var methods=__webpack_require__(530);var utils=__webpack_require__(383);module.exports=Route;function Route(path){debug("new %s",path);this.path=path;this.stack=[];this.methods={}}Route.prototype._handles_method=function _handles_method(method){if(this.methods._all){return true}method=method.toLowerCase();if(method==="head"&&!this.methods["head"]){method="get"}return Boolean(this.methods[method])};Route.prototype._options=function _options(){var methods=Object.keys(this.methods);if(this.methods.get&&!this.methods.head){methods.push("head")}for(var i=0;i<methods.length;i++){methods[i]=methods[i].toUpperCase()}return methods};Route.prototype.dispatch=function(req,res,done){var idx=0;var stack=this.stack;if(stack.length===0){return done()}var method=req.method.toLowerCase();if(method==="head"&&!this.methods["head"]){method="get"}req.route=this;next();function next(err){if(err&&err==="route"){return done()}var layer=stack[idx++];if(!layer){return done(err)}if(layer.method&&layer.method!==method){return next(err)}if(err){layer.handle_error(err,req,res,next)}else{layer.handle_request(req,res,next)}}};Route.prototype.all=function(){var callbacks=utils.flatten([].slice.call(arguments));callbacks.forEach(function(fn){if(typeof fn!=="function"){var type={}.toString.call(fn);var msg="Route.all() requires callback functions but got a "+type;throw new Error(msg)}var layer=Layer("/",{},fn);layer.method=undefined;this.methods._all=true;this.stack.push(layer)},this);return this};methods.forEach(function(method){Route.prototype[method]=function(){var callbacks=utils.flatten([].slice.call(arguments));callbacks.forEach(function(fn){if(typeof fn!=="function"){var type={}.toString.call(fn);var msg="Route."+method+"() requires callback functions but got a "+type;throw new Error(msg)}debug("%s %s",method,this.path);var layer=Layer("/",{},fn);layer.method=method;this.methods[method]=true;this.stack.push(layer)},this);return this}})},function(module,exports,__webpack_require__){var accepts=__webpack_require__(534);var deprecate=__webpack_require__(532)("express");var isIP=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "net"');e.code="MODULE_NOT_FOUND";throw e}()).isIP;var typeis=__webpack_require__(535);var http=__webpack_require__(79);var fresh=__webpack_require__(536);var parseRange=__webpack_require__(537);var parse=__webpack_require__(538);var proxyaddr=__webpack_require__(539);var req=exports=module.exports={__proto__:http.IncomingMessage.prototype};req.get=req.header=function(name){switch(name=name.toLowerCase()){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[name]}};req.accepts=function(){var accept=accepts(this);return accept.types.apply(accept,arguments)};req.acceptsEncodings=function(){var accept=accepts(this);return accept.encodings.apply(accept,arguments)};req.acceptsEncoding=deprecate.function(req.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead");req.acceptsCharsets=function(){var accept=accepts(this);return accept.charsets.apply(accept,arguments)};req.acceptsCharset=deprecate.function(req.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead");req.acceptsLanguages=function(){var accept=accepts(this);return accept.languages.apply(accept,arguments)};req.acceptsLanguage=deprecate.function(req.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead");req.range=function(size){var range=this.get("Range");if(!range)return;return parseRange(size,range)};req.param=function param(name,defaultValue){var params=this.params||{};var body=this.body||{};var query=this.query||{};var args=arguments.length===1?"name":"name, default";deprecate("req.param("+args+"): Use req.params, req.body, or req.query instead");if(null!=params[name]&&params.hasOwnProperty(name))return params[name];if(null!=body[name])return body[name];if(null!=query[name])return query[name];return defaultValue};req.is=function(types){if(!Array.isArray(types))types=[].slice.call(arguments);return typeis(this,types)};defineGetter(req,"protocol",function protocol(){var proto=this.connection.encrypted?"https":"http";var trust=this.app.get("trust proxy fn");if(!trust(this.connection.remoteAddress,0)){return proto}proto=this.get("X-Forwarded-Proto")||proto;return proto.split(/\s*,\s*/)[0]});defineGetter(req,"secure",function secure(){return"https"==this.protocol});defineGetter(req,"ip",function ip(){var trust=this.app.get("trust proxy fn");return proxyaddr(this,trust)});defineGetter(req,"ips",function ips(){var trust=this.app.get("trust proxy fn");var addrs=proxyaddr.all(this,trust);return addrs.slice(1).reverse()});defineGetter(req,"subdomains",function subdomains(){var hostname=this.hostname;if(!hostname)return[];var offset=this.app.get("subdomain offset");var subdomains=!isIP(hostname)?hostname.split(".").reverse():[hostname];return subdomains.slice(offset)});defineGetter(req,"path",function path(){return parse(this).pathname});defineGetter(req,"hostname",function hostname(){var trust=this.app.get("trust proxy fn");var host=this.get("X-Forwarded-Host");if(!host||!trust(this.connection.remoteAddress,0)){host=this.get("Host")}if(!host)return;var offset=host[0]==="["?host.indexOf("]")+1:0;var index=host.indexOf(":",offset);return~index?host.substring(0,index):host});defineGetter(req,"host",deprecate.function(function host(){return this.hostname},"req.host: Use req.hostname instead"));defineGetter(req,"fresh",function(){var method=this.method;var s=this.res.statusCode;if("GET"!=method&&"HEAD"!=method)return false;if(s>=200&&s<300||304==s){return fresh(this.headers,this.res._headers||{})}return false});defineGetter(req,"stale",function stale(){return!this.fresh});defineGetter(req,"xhr",function xhr(){var val=this.get("X-Requested-With")||"";return"xmlhttprequest"==val.toLowerCase()});function defineGetter(obj,name,getter){Object.defineProperty(obj,name,{configurable:true,enumerable:true,get:getter})}},function(module,exports,__webpack_require__){(function(Buffer,setImmediate){var contentDisposition=__webpack_require__(541);var deprecate=__webpack_require__(532)("express");var escapeHtml=__webpack_require__(542);var http=__webpack_require__(79);var isAbsolute=__webpack_require__(383).isAbsolute;var onFinished=__webpack_require__(543);var path=__webpack_require__(8);var merge=__webpack_require__(533);var sign=__webpack_require__(544).sign;var normalizeType=__webpack_require__(383).normalizeType;var normalizeTypes=__webpack_require__(383).normalizeTypes;var setCharset=__webpack_require__(383).setCharset;var statusCodes=http.STATUS_CODES;var cookie=__webpack_require__(545);var send=__webpack_require__(546);var extname=path.extname;var mime=send.mime;var resolve=path.resolve;var vary=__webpack_require__(547);var res=module.exports={__proto__:http.ServerResponse.prototype};res.status=function(code){this.statusCode=code;return this};res.links=function(links){var link=this.get("Link")||"";if(link)link+=", ";return this.set("Link",link+Object.keys(links).map(function(rel){return"<"+links[rel]+'>; rel="'+rel+'"'}).join(", "))};res.send=function send(body){var chunk=body;var encoding;var len;var req=this.req;var type;var app=this.app;if(arguments.length===2){if(typeof arguments[0]!=="number"&&typeof arguments[1]==="number"){deprecate("res.send(body, status): Use res.status(status).send(body) instead");this.statusCode=arguments[1]}else{deprecate("res.send(status, body): Use res.status(status).send(body) instead");this.statusCode=arguments[0];chunk=arguments[1]}}if(typeof chunk==="number"&&arguments.length===1){if(!this.get("Content-Type")){this.type("txt")}deprecate("res.send(status): Use res.sendStatus(status) instead");this.statusCode=chunk;chunk=http.STATUS_CODES[chunk]}switch(typeof chunk){case"string":if(!this.get("Content-Type")){this.type("html")}break;case"boolean":case"number":case"object":if(chunk===null){chunk=""}else if(Buffer.isBuffer(chunk)){if(!this.get("Content-Type")){this.type("bin")}}else{return this.json(chunk)}break}if(typeof chunk==="string"){encoding="utf8";type=this.get("Content-Type");if(typeof type==="string"){this.set("Content-Type",setCharset(type,"utf-8"))}}if(chunk!==undefined){if(!Buffer.isBuffer(chunk)){chunk=new Buffer(chunk,encoding);encoding=undefined}len=chunk.length;this.set("Content-Length",len)}var etag;var generateETag=len!==undefined&&app.get("etag fn");if(typeof generateETag==="function"&&!this.get("ETag")){if(etag=generateETag(chunk,encoding)){this.set("ETag",etag)}}if(req.fresh)this.statusCode=304;if(204==this.statusCode||304==this.statusCode){this.removeHeader("Content-Type");this.removeHeader("Content-Length");this.removeHeader("Transfer-Encoding");chunk=""}if(req.method==="HEAD"){this.end()}else{this.end(chunk,encoding)}return this};res.json=function json(obj){var val=obj;if(arguments.length===2){if(typeof arguments[1]==="number"){deprecate("res.json(obj, status): Use res.status(status).json(obj) instead");this.statusCode=arguments[1]}else{deprecate("res.json(status, obj): Use res.status(status).json(obj) instead");this.statusCode=arguments[0];val=arguments[1]}}var app=this.app;var replacer=app.get("json replacer");var spaces=app.get("json spaces");var body=JSON.stringify(val,replacer,spaces);if(!this.get("Content-Type")){this.set("Content-Type","application/json")}return this.send(body)};res.jsonp=function jsonp(obj){var val=obj;if(arguments.length===2){if(typeof arguments[1]==="number"){deprecate("res.jsonp(obj, status): Use res.status(status).json(obj) instead");this.statusCode=arguments[1]}else{deprecate("res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead");this.statusCode=arguments[0];val=arguments[1]}}var app=this.app;var replacer=app.get("json replacer");var spaces=app.get("json spaces");var body=JSON.stringify(val,replacer,spaces);var callback=this.req.query[app.get("jsonp callback name")];if(!this.get("Content-Type")){this.set("X-Content-Type-Options","nosniff");this.set("Content-Type","application/json")}if(Array.isArray(callback)){callback=callback[0]}if(typeof callback==="string"&&callback.length!==0){this.charset="utf-8";this.set("X-Content-Type-Options","nosniff");this.set("Content-Type","text/javascript");callback=callback.replace(/[^\[\]\w$.]/g,"");body=body.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");body="/**/ typeof "+callback+" === 'function' && "+callback+"("+body+");"}return this.send(body)};res.sendStatus=function sendStatus(statusCode){var body=http.STATUS_CODES[statusCode]||String(statusCode);this.statusCode=statusCode;this.type("txt");return this.send(body)};res.sendFile=function sendFile(path,options,fn){var req=this.req;var res=this;var next=req.next;if(!path){throw new TypeError("path argument is required to res.sendFile")}if(typeof options==="function"){fn=options;options={}}options=options||{};if(!options.root&&!isAbsolute(path)){throw new TypeError("path must be absolute or specify root to res.sendFile")}var pathname=encodeURI(path);var file=send(req,pathname,options);sendfile(res,file,options,function(err){if(fn)return fn(err);if(err&&err.code==="EISDIR")return next();if(err&&err.code!=="ECONNABORTED"&&err.syscall!=="write"){next(err)}})};res.sendfile=function(path,options,fn){var req=this.req;var res=this;var next=req.next;if(typeof options==="function"){fn=options;options={}}options=options||{};var file=send(req,path,options);sendfile(res,file,options,function(err){if(fn)return fn(err);if(err&&err.code==="EISDIR")return next();if(err&&err.code!=="ECONNABORT"&&err.syscall!=="write"){next(err)}})};res.sendfile=deprecate.function(res.sendfile,"res.sendfile: Use res.sendFile instead");res.download=function download(path,filename,fn){if(typeof filename==="function"){fn=filename;filename=null}filename=filename||path;var headers={"Content-Disposition":contentDisposition(filename)};var fullPath=resolve(path);return this.sendFile(fullPath,{headers:headers},fn)};res.contentType=res.type=function(type){return this.set("Content-Type",~type.indexOf("/")?type:mime.lookup(type))};res.format=function(obj){var req=this.req;var next=req.next;var fn=obj.default;if(fn)delete obj.default;var keys=Object.keys(obj);var key=req.accepts(keys);this.vary("Accept");if(key){this.set("Content-Type",normalizeType(key).value);obj[key](req,this,next)}else if(fn){fn()}else{var err=new Error("Not Acceptable");err.status=406;err.types=normalizeTypes(keys).map(function(o){return o.value});next(err)}return this};res.attachment=function attachment(filename){if(filename){this.type(extname(filename))}this.set("Content-Disposition",contentDisposition(filename));return this};res.append=function append(field,val){var prev=this.get(field);var value=val;if(prev){value=Array.isArray(prev)?prev.concat(val):Array.isArray(val)?[prev].concat(val):[prev,val]}return this.set(field,value)};res.set=res.header=function header(field,val){if(arguments.length===2){if(Array.isArray(val))val=val.map(String);else val=String(val);if("content-type"==field.toLowerCase()&&!/;\s*charset\s*=/.test(val)){var charset=mime.charsets.lookup(val.split(";")[0]);if(charset)val+="; charset="+charset.toLowerCase()}this.setHeader(field,val)}else{for(var key in field){this.set(key,field[key])}}return this};res.get=function(field){return this.getHeader(field)};res.clearCookie=function(name,options){var opts={expires:new Date(1),path:"/"};return this.cookie(name,"",options?merge(opts,options):opts)};res.cookie=function(name,val,options){options=merge({},options);var secret=this.req.secret;var signed=options.signed;if(signed&&!secret)throw new Error('cookieParser("secret") required for signed cookies');if("number"==typeof val)val=val.toString();if("object"==typeof val)val="j:"+JSON.stringify(val);if(signed)val="s:"+sign(val,secret);if("maxAge"in options){options.expires=new Date(Date.now()+options.maxAge);options.maxAge/=1e3}if(null==options.path)options.path="/";var headerVal=cookie.serialize(name,String(val),options);var prev=this.get("Set-Cookie");if(prev){if(Array.isArray(prev)){headerVal=prev.concat(headerVal)}else{headerVal=[prev,headerVal]}}this.set("Set-Cookie",headerVal);return this};res.location=function(url){var req=this.req;if("back"==url)url=req.get("Referrer")||"/";this.set("Location",url);return this};res.redirect=function redirect(url){var address=url;var body;var status=302;if(arguments.length===2){if(typeof arguments[0]==="number"){status=arguments[0];address=arguments[1]}else{deprecate("res.redirect(url, status): Use res.redirect(status, url) instead");status=arguments[1]}}this.location(address);address=this.get("Location");this.format({text:function(){body=statusCodes[status]+". Redirecting to "+encodeURI(address)},html:function(){var u=escapeHtml(address);body="<p>"+statusCodes[status]+'. Redirecting to <a href="'+u+'">'+u+"</a></p>"},"default":function(){body=""}});this.statusCode=status;this.set("Content-Length",Buffer.byteLength(body));if(this.req.method==="HEAD"){this.end()}else{this.end(body)}};res.vary=function(field){if(!field||Array.isArray(field)&&!field.length){deprecate("res.vary(): Provide a field name");return this}vary(this,field);return this};res.render=function(view,options,fn){options=options||{};var self=this;var req=this.req;var app=req.app;if("function"==typeof options){fn=options,options={}}options._locals=self.locals;fn=fn||function(err,str){if(err)return req.next(err);self.send(str)};app.render(view,options,fn)};function sendfile(res,file,options,callback){var done=false;var streaming;function onaborted(){if(done)return;done=true;var err=new Error("Request aborted");err.code="ECONNABORTED";callback(err)}function ondirectory(){if(done)return;done=true;var err=new Error("EISDIR, read");err.code="EISDIR";callback(err)}function onerror(err){if(done)return;done=true;callback(err)}function onend(){if(done)return;done=true;callback()}function onfile(){streaming=false}function onfinish(err){if(err&&err.code==="ECONNRESET")return onaborted();if(err)return onerror(err);if(done)return;setImmediate(function(){if(streaming!==false&&!done){onaborted();return}if(done)return;done=true;callback()})}function onstream(){streaming=true}file.on("directory",ondirectory);file.on("end",onend);file.on("error",onerror);file.on("file",onfile);file.on("stream",onstream);onFinished(res,onfinish);if(options.headers){file.on("headers",function headers(res){var obj=options.headers;var keys=Object.keys(obj);for(var i=0;i<keys.length;i++){var k=keys[i];res.setHeader(k,obj[k])}})}file.pipe(res)}}).call(exports,__webpack_require__(53).Buffer,__webpack_require__(61).setImmediate)},function(module,exports,__webpack_require__){var parseUrl=__webpack_require__(538);var qs=__webpack_require__(540);module.exports=function query(options){var queryparse=qs.parse;if(typeof options==="function"){queryparse=options;options=undefined}return function query(req,res,next){if(!req.query){var val=parseUrl(req).query;req.query=queryparse(val,options)}next()}}},function(module,exports,__webpack_require__){var protocolVersions=__webpack_require__(332);exports=module.exports=WebSocket;function WebSocket(mng,data,req){var transport,version=req.headers["sec-websocket-version"];if(typeof version!=="undefined"&&typeof protocolVersions[version]!=="undefined"){transport=new protocolVersions[version](mng,data,req)}else transport=new protocolVersions["default"](mng,data,req);if(typeof this.name!=="undefined")transport.name=this.name;return transport}},function(module,exports,__webpack_require__){var WebSocket=__webpack_require__(166);exports=module.exports=FlashSocket;function FlashSocket(mng,data,req){return WebSocket.call(this,mng,data,req)}FlashSocket.prototype.__proto__=WebSocket.prototype;FlashSocket.prototype.name="flashsocket";FlashSocket.init=function(manager){var server;function create(){if(!manager.get("flash policy server")){return}server=__webpack_require__(553).createServer({log:function(msg){manager.log.info(msg)}},manager.get("origins"));server.on("close",function(e){server=null});server.listen(manager.get("flash policy port"),manager.server);manager.flashPolicyServer=server}manager.on("set:origins",function(value,key){if(!server)return;server.origins=Array.isArray(value)?value:[value];server.compile()});manager.on("set:flash policy port",function(value,key){var transports=manager.get("transports");if(~transports.indexOf("flashsocket")){if(server){if(server.port===value)return;try{server.close()}catch(e){}}create()}});manager.on("set:flash policy server",function(value,key){var transports=manager.get("transports");if(~transports.indexOf("flashsocket")){if(server&&!value){try{server.close()}catch(e){}}}else if(!server&&value){create()}});manager.on("set:transports",function(value,key){if(!server&&~manager.get("transports").indexOf("flashsocket")){
create()}});if(~manager.get("transports").indexOf("flashsocket")){create()}}},function(module,exports,__webpack_require__){var HTTPTransport=__webpack_require__(388);exports=module.exports=HTMLFile;function HTMLFile(mng,data,req){HTTPTransport.call(this,mng,data,req)}HTMLFile.prototype.__proto__=HTTPTransport.prototype;HTMLFile.prototype.name="htmlfile";HTMLFile.prototype.handleRequest=function(req){HTTPTransport.prototype.handleRequest.call(this,req);if(req.method=="GET"){req.res.writeHead(200,{"Content-Type":"text/html; charset=UTF-8",Connection:"keep-alive","Transfer-Encoding":"chunked"});req.res.write("<html><body>"+"<script>var _ = function (msg) { parent.s._(msg, document); };</script>"+new Array(174).join(" "))}};HTMLFile.prototype.write=function(data){data="<script>_("+JSON.stringify(data).replace(/\//g,"\\/")+");</script>";if(this.response.write(data)){this.drained=true}this.log.debug(this.name+" writing",data)}},function(module,exports,__webpack_require__){(function(Buffer){var HTTPPolling=__webpack_require__(389);exports=module.exports=XHRPolling;function XHRPolling(mng,data,req){HTTPPolling.call(this,mng,data,req)}XHRPolling.prototype.__proto__=HTTPPolling.prototype;XHRPolling.prototype.name="xhr-polling";XHRPolling.prototype.doWrite=function(data){HTTPPolling.prototype.doWrite.call(this);var origin=this.req.headers.origin,headers={"Content-Type":"text/plain; charset=UTF-8","Content-Length":data===undefined?0:Buffer.byteLength(data),Connection:"Keep-Alive"};if(origin){headers["Access-Control-Allow-Origin"]=origin;headers["Access-Control-Allow-Credentials"]="true"}this.response.writeHead(200,headers);this.response.write(data);this.log.debug(this.name+" writing",data)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var HTTPPolling=__webpack_require__(389);var jsonpolling_re=/^\d+$/;exports=module.exports=JSONPPolling;function JSONPPolling(mng,data,req){HTTPPolling.call(this,mng,data,req);this.head="io.j[0](";this.foot=");";if(data.query.i&&jsonpolling_re.test(data.query.i)){this.head="io.j["+data.query.i+"]("}}JSONPPolling.prototype.__proto__=HTTPPolling.prototype;JSONPPolling.prototype.name="jsonppolling";JSONPPolling.prototype.postEncoded=true;JSONPPolling.prototype.onData=function(data){try{data=JSON.parse(data)}catch(e){this.error("parse","reconnect");return}HTTPPolling.prototype.onData.call(this,data)};JSONPPolling.prototype.doWrite=function(data){HTTPPolling.prototype.doWrite.call(this);var data=data===undefined?"":this.head+JSON.stringify(data)+this.foot;this.response.writeHead(200,{"Content-Type":"text/javascript; charset=UTF-8","Content-Length":Buffer.byteLength(data),Connection:"Keep-Alive","X-XSS-Protection":"0"});this.response.write(data);this.log.debug(this.name+" writing",data)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isCollection=collection.isCollection,isNumber=util.number.isNumber,isString=util.string.isString,isBoolean=util["boolean"].isBoolean;math.bignumber=function bignumber(value){if(arguments.length>1){throw new math.error.ArgumentsError("bignumber",arguments.length,0,1)}if(value instanceof BigNumber||isNumber(value)||isString(value)){return new BigNumber(value)}if(isBoolean(value)||value===null){return new BigNumber(+value)}if(isCollection(value)){return collection.deepMap(value,bignumber)}if(arguments.length==0){return new BigNumber(0)}throw new math.error.UnsupportedTypeError("bignumber",math["typeof"](value))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isCollection=collection.isCollection,isNumber=util.number.isNumber,isString=util.string.isString;math["boolean"]=function bool(value){if(arguments.length!=1){throw new math.error.ArgumentsError("boolean",arguments.length,0,1)}if(value==="true"||value===true){return true}if(value==="false"||value===false||value===null){return false}if(value instanceof Boolean){return value==true}if(isNumber(value)){return value!==0}if(value instanceof BigNumber){return!value.isZero()}if(isString(value)){var lcase=value.toLowerCase();if(lcase==="true"){return true}else if(lcase==="false"){return false}var num=Number(value);if(value!=""&&!isNaN(num)){return num!==0}}if(isCollection(value)){return collection.deepMap(value,bool)}throw new SyntaxError(value.toString()+" is no valid boolean")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isCollection=collection.isCollection,isNumber=util.number.isNumber,isString=util.string.isString,isComplex=Complex.isComplex;math.complex=function complex(args){switch(arguments.length){case 0:return new Complex(0,0);case 1:var arg=arguments[0];if(isNumber(arg)){return new Complex(arg,0)}if(arg instanceof BigNumber){return new Complex(arg.toNumber(),0)}if(isComplex(arg)){return arg.clone()}if(isString(arg)){var c=Complex.parse(arg);if(c){return c}else{throw new SyntaxError('String "'+arg+'" is no valid complex number')}}if(isCollection(arg)){return collection.deepMap(arg,complex)}if(typeof arg==="object"){if("re"in arg&&"im"in arg){return new Complex(arg.re,arg.im)}else if("r"in arg&&"phi"in arg){return Complex.fromPolar(arg.r,arg.phi)}}throw new TypeError("Two numbers, single string or an fitting object expected in function complex");case 2:var re=arguments[0],im=arguments[1];if(re instanceof BigNumber){re=re.toNumber()}if(im instanceof BigNumber){im=im.toNumber()}if(isNumber(re)&&isNumber(im)){return new Complex(re,im)}else{throw new TypeError("Two numbers or a single string expected in function complex")}default:throw new math.error.ArgumentsError("complex",arguments.length,0,2)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Index=__webpack_require__(133);math.index=function(ranges){var args=Array.prototype.slice.apply(arguments).map(function(arg){if(arg instanceof BigNumber){return arg.toNumber()}else if(Array.isArray(arg)){return arg.map(function(elem){return elem instanceof BigNumber?elem.toNumber():elem})}else{return arg}});var res=new Index;Index.apply(res,args);return res}}},function(module,exports,__webpack_require__){"use strict";var string=__webpack_require__(347);var isArray=Array.isArray;var isString=string.isString;module.exports=function(math){var Matrix=math.type.Matrix;math.matrix=function matrix(data,format){switch(arguments.length){case 0:data=[];format="default";break;case 1:if(isArray(data)){format="default"}else if(data instanceof Matrix){format=data.storage()}else if(isString(data)){format=data;data=[]}break;case 2:if(!isArray(data)&&!(data instanceof Matrix)){throw new TypeError("data must be an array value or Matrix instance")}break;default:throw new math.error.ArgumentsError("matrix",arguments.length,0,2)}var constructor=Matrix.storage(format);return new constructor(data)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346);var BigNumber=math.type.BigNumber;var Unit=math.type.Unit;var collection=math.collection;var isCollection=collection.isCollection;var isNumber=util.number.isNumber;var isBoolean=util["boolean"].isBoolean;var isString=util.string.isString;math.number=function number(value,valuelessUnit){switch(arguments.length){case 0:return 0;case 1:if(isCollection(value)){return collection.deepMap(value,number)}if(value instanceof BigNumber){return value.toNumber()}if(isString(value)){var num=Number(value);if(isNaN(num)){num=Number(value.valueOf())}if(isNaN(num)){throw new SyntaxError(value.toString()+" is no valid number")}return num}if(isBoolean(value)||value===null){return+value}if(isNumber(value)){return value}if(value instanceof Unit){throw new Error("Second argument with valueless unit expected")}throw new math.error.UnsupportedTypeError("number",math["typeof"](value));case 2:if(value instanceof Unit&&isString(valuelessUnit)||valuelessUnit instanceof Unit){return value.toNumber(valuelessUnit)}throw new math.error.UnsupportedTypeError("number",math["typeof"](value),math["typeof"](valuelessUnit));default:throw new math.error.ArgumentsError("number",arguments.length,0,1)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Parser=math.expression.Parser;math.parser=function parser(){return new Parser}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){math.chain=function(value){return new math.chaining.Chain(value)};math.select=function(value){if(console&&typeof console.log==="function"){console.log('WARNING: Function "select" is renamed to "chain". It will be deprecated in v2.0.')}math.select=math.chain;math.chaining.Chain.prototype["select"]=math.select;return math.chain(value)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),collection=math.collection,number=util.number,isNumber=util.number.isNumber,isCollection=collection.isCollection;math.string=function string(value){switch(arguments.length){case 0:return"";case 1:if(isNumber(value)){return number.format(value)}if(isCollection(value)){return collection.deepMap(value,string)}if(value===null){return"null"}return value.toString();default:throw new math.error.ArgumentsError("string",arguments.length,0,1)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Unit=__webpack_require__(135),collection=math.collection,isCollection=collection.isCollection,isString=util.string.isString;math.unit=function unit(args){switch(arguments.length){case 1:var arg=arguments[0];if(arg instanceof Unit){return arg.clone()}if(isString(arg)){if(Unit.isValuelessUnit(arg)){return new Unit(null,arg)}var u=Unit.parse(arg);if(u){return u}throw new SyntaxError('String "'+arg+'" is no valid unit')}if(isCollection(args)){return collection.deepMap(args,unit)}throw new TypeError("A string or a number and string expected in function unit");case 2:if(arguments[0]instanceof BigNumber){return new Unit(arguments[0].toNumber(),arguments[1])}else{return new Unit(arguments[0],arguments[1])}default:throw new math.error.ArgumentsError("unit",arguments.length,1,2)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),_parse=math.expression.parse,collection=math.collection,isString=util.string.isString,isCollection=collection.isCollection;math.compile=function compile(expr){if(arguments.length!=1){throw new math.error.ArgumentsError("compile",arguments.length,1)}if(isString(expr)){return _parse(expr).compile(math)}else if(isCollection(expr)){return collection.deepMap(expr,function(elem){return _parse(elem).compile(math)})}else{throw new TypeError("String, array, or matrix expected")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),_parse=math.expression.parse,collection=math.collection,isString=util.string.isString,isCollection=collection.isCollection;math.eval=function _eval(expr,scope){if(arguments.length!=1&&arguments.length!=2){throw new math.error.ArgumentsError("eval",arguments.length,1,2)}scope=scope||{};if(isString(expr)){return _parse(expr).compile(math).eval(scope)}else if(isCollection(expr)){return collection.deepMap(expr,function(elem){return _parse(elem).compile(math).eval(scope)})}else{throw new TypeError("String, array, or matrix expected")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Help=__webpack_require__(136);math.help=function help(search){if(arguments.length!=1){throw new SyntaxError("Wrong number of arguments in function help "+"("+arguments.length+" provided, 1 expected)")}var text=null;if(search instanceof String||typeof search==="string"){text=search}else{var prop;for(prop in math){if(math.hasOwnProperty(prop)&&search===math[prop]){text=prop;break}}}var doc=math.expression.docs[text];if(!text){throw new Error('Cannot find "'+search+'" in math.js')}else if(!doc){throw new Error('No documentation found on "'+text+'"')}return new Help(doc)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var _parse=math.expression.parse;math.parse=function parse(expr,options){return _parse.apply(_parse,arguments)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util.boolean.isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.abs=function abs(x){if(arguments.length!=1){throw new math.error.ArgumentsError("abs",arguments.length,1)}if(isNumber(x)){return Math.abs(x)}if(isComplex(x)){var re=Math.abs(x.re);var im=Math.abs(x.im);if(re<1e3&&im<1e3){return Math.sqrt(re*re+im*im)}else{if(re>=im){var i=im/re;return re*Math.sqrt(1+i*i)}else{var j=re/im;return im*Math.sqrt(1+j*j)}}}if(x instanceof BigNumber){return x.abs()}if(isCollection(x)){return collection.deepMap(x,abs,true)}if(isBoolean(x)||x===null){return Math.abs(x)}throw new math.error.UnsupportedTypeError("abs",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isNumber=util.number.isNumber,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.add=function add(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("add",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){return x+y}else if(isComplex(y)){return new Complex(x+y.re,y.im)}}if(isComplex(x)){if(isComplex(y)){return new Complex(x.re+y.re,x.im+y.im)}else if(isNumber(y)){return new Complex(x.re+y,x.im)}}if(isUnit(x)){if(isUnit(y)){if(x.value==null){throw new Error("Parameter x contains a unit with undefined value")}if(y.value==null){throw new Error("Parameter y contains a unit with undefined value")}if(!x.equalBase(y)){throw new Error("Units do not match")}var res=x.clone();res.value+=y.value;res.fixPrefix=false;return res}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.plus(y)}return add(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.plus(y)}return add(x,y.toNumber())}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,add)}if(isString(x)||isString(y)){return x+y}if(isBoolean(x)||x===null){return add(+x,y)}if(isBoolean(y)||y===null){return add(x,+y)}throw new math.error.UnsupportedTypeError("add",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isCollection=collection.isCollection,isComplex=Complex.isComplex;math.ceil=function ceil(x){if(arguments.length!=1){throw new math.error.ArgumentsError("ceil",arguments.length,1)}if(isNumber(x)){return Math.ceil(x)}if(isComplex(x)){return new Complex(Math.ceil(x.re),Math.ceil(x.im))}if(x instanceof BigNumber){return x.ceil()}if(isCollection(x)){return collection.deepMap(x,ceil,true)}if(isBoolean(x)||x===null){return Math.ceil(x)}throw new math.error.UnsupportedTypeError("ceil",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.cube=function cube(x){if(arguments.length!=1){throw new math.error.ArgumentsError("cube",arguments.length,1)}if(isNumber(x)){return x*x*x}if(isComplex(x)){return math.multiply(math.multiply(x,x),x)}if(x instanceof BigNumber){return x.times(x).times(x)}if(isCollection(x)){return collection.deepMap(x,cube)}if(isBoolean(x)||x===null){return cube(+x)}throw new math.error.UnsupportedTypeError("cube",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346);var BigNumber=math.type.BigNumber;var Complex=__webpack_require__(131);var Matrix=math.type.Matrix;var Unit=__webpack_require__(135);var isNumber=util.number.isNumber;var isBoolean=util["boolean"].isBoolean;var isComplex=Complex.isComplex;var isUnit=Unit.isUnit;math._divide=function _divide(x,y){if(isNumber(x)){if(isNumber(y)){return x/y}else if(isComplex(y)){return _divideComplex(new Complex(x,0),y)}}if(isComplex(x)){if(isComplex(y)){return _divideComplex(x,y)}else if(isNumber(y)){return _divideComplex(x,new Complex(y,0))}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.div(y)}return _divide(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.div(y)}return _divide(x,y.toNumber())}if(isUnit(x)){if(isNumber(y)){var res=x.clone();res.value=(res.value===null?res._normalize(1):res.value)/y;return res}}if(isBoolean(x)||x===null){return _divide(+x,y)}if(isBoolean(y)||y===null){return _divide(x,+y)}throw new math.error.UnsupportedTypeError("divide",math["typeof"](x),math["typeof"](y))};function _divideComplex(x,y){var den=y.re*y.re+y.im*y.im;if(den!=0){return new Complex((x.re*y.re+x.im*y.im)/den,(x.im*y.re-x.re*y.im)/den)}else{return new Complex(x.re!=0?x.re/0:0,x.im!=0?x.im/0:0)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var collection=math.collection;var isCollection=collection.isCollection;math.divide=function(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("divide",arguments.length,2)}if(isCollection(x)){if(isCollection(y)){return math.multiply(x,math.inv(y))}else{return collection.deepMap2(x,y,math._divide)}}if(isCollection(y)){return math.multiply(x,math.inv(y))}return math._divide(x,y)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var collection=math.collection;math.dotDivide=function dotDivide(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("dotDivide",arguments.length,2)}return collection.deepMap2(x,y,math.divide)};math.edivide=function(){throw new Error("Function edivide is renamed to dotDivide")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),collection=math.collection;math.dotMultiply=function dotMultiply(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("dotMultiply",arguments.length,2)}return collection.deepMap2(x,y,math.multiply)};math.emultiply=function(){throw new Error("Function emultiply is renamed to dotMultiply")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),collection=math.collection;math.dotPow=function dotPow(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("dotPow",arguments.length,2)}return collection.deepMap2(x,y,math.pow)};math.epow=function(){throw new Error("Function epow is renamed to dotPow")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Matrix=math.type.Matrix,collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.exp=function exp(x){if(arguments.length!=1){throw new math.error.ArgumentsError("exp",arguments.length,1)}if(isNumber(x)){return Math.exp(x)}if(isComplex(x)){var r=Math.exp(x.re);return new Complex(r*Math.cos(x.im),r*Math.sin(x.im))}if(x instanceof BigNumber){return x.exp()}if(isCollection(x)){return collection.deepMap(x,exp)}if(isBoolean(x)||x===null){return Math.exp(x)}throw new math.error.UnsupportedTypeError("exp",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.fix=function fix(x){if(arguments.length!=1){throw new math.error.ArgumentsError("fix",arguments.length,1)}if(isNumber(x)){return x>0?Math.floor(x):Math.ceil(x)}if(isComplex(x)){return new Complex(x.re>0?Math.floor(x.re):Math.ceil(x.re),x.im>0?Math.floor(x.im):Math.ceil(x.im))}if(x instanceof BigNumber){return x.isNegative()?x.ceil():x.floor()}if(isCollection(x)){return collection.deepMap(x,fix,true)}if(isBoolean(x)||x===null){return fix(+x)}throw new math.error.UnsupportedTypeError("fix",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.floor=function floor(x){if(arguments.length!=1){throw new math.error.ArgumentsError("floor",arguments.length,1)}if(isNumber(x)){return Math.floor(x)}if(isComplex(x)){return new Complex(Math.floor(x.re),Math.floor(x.im))}if(x instanceof BigNumber){return x.floor()}if(isCollection(x)){return collection.deepMap(x,floor,true)}if(isBoolean(x)||x===null){return floor(+x)}throw new math.error.UnsupportedTypeError("floor",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isCollection=collection.isCollection;math.gcd=function gcd(args){var a=arguments[0],b=arguments[1],r;if(arguments.length==2){if(isNumber(a)&&isNumber(b)){if(!isInteger(a)||!isInteger(b)){throw new Error("Parameters in function gcd must be integer numbers")}while(b!=0){r=a%b;a=b;b=r}return a<0?-a:a}if(isCollection(a)||isCollection(b)){return collection.deepMap2(a,b,gcd)}if(a instanceof BigNumber){if(isNumber(b)){b=BigNumber.convert(b)}else if(isBoolean(b)||b===null){b=new BigNumber(b?1:0)}if(b instanceof BigNumber){return _bigGcd(a,b)}return gcd(a.toNumber(),b)}if(b instanceof BigNumber){if(isNumber(a)){a=BigNumber.convert(a)}else if(isBoolean(a)||a===null){a=new BigNumber(a?1:0)}if(a instanceof BigNumber){return _bigGcd(a,b)}return gcd(a.toNumber(),b)}if(isBoolean(a)||a===null){return gcd(+a,b)}if(isBoolean(b)||b===null){return gcd(a,+b)}throw new math.error.UnsupportedTypeError("gcd",math["typeof"](a),math["typeof"](b))}if(arguments.length>2){for(var i=1;i<arguments.length;i++){a=gcd(a,arguments[i])}return a}throw new SyntaxError("Function gcd expects two or more arguments")};function _bigGcd(a,b){if(!a.isInt()||!b.isInt()){throw new Error("Parameters in function gcd must be integer numbers")}var zero=new BigNumber(0);while(!b.isZero()){var r=a.mod(b);a=b;b=r}return a.lt(zero)?a.neg():a}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isCollection=collection.isCollection;math.lcm=function lcm(args){var a=arguments[0],b=arguments[1],t;if(arguments.length==2){if(isNumber(a)&&isNumber(b)){if(!isInteger(a)||!isInteger(b)){throw new Error("Parameters in function lcm must be integer numbers")}if(a==0||b==0){return 0}var prod=a*b;while(b!=0){t=b;b=a%t;a=t}return Math.abs(prod/a)}if(isCollection(a)||isCollection(b)){return collection.deepMap2(a,b,lcm)}if(a instanceof BigNumber){if(isNumber(b)){b=BigNumber.convert(b)}else if(isBoolean(b)||b===null){b=new BigNumber(b?1:0)}if(b instanceof BigNumber){return _bigLcm(a,b)}return lcm(a.toNumber(),b)}if(b instanceof BigNumber){if(isNumber(a)){a=BigNumber.convert(a)}else if(isBoolean(a)||a===null){a=new BigNumber(a?1:0)}if(a instanceof BigNumber){return _bigLcm(a,b)}return lcm(a.toNumber(),b)}if(isBoolean(a)||a===null){return lcm(+a,b)}if(isBoolean(b)||b===null){return lcm(a,+b)}throw new math.error.UnsupportedTypeError("lcm",math["typeof"](a),math["typeof"](b))}if(arguments.length>2){for(var i=1;i<arguments.length;i++){a=lcm(a,arguments[i])}return a}throw new SyntaxError("Function lcm expects two or more arguments")};function _bigLcm(a,b){if(!a.isInt()||!b.isInt()){throw new Error("Parameters in function lcm must be integer numbers")}if(a.isZero()||b.isZero()){return new BigNumber(0)}var prod=a.times(b);while(!b.isZero()){var t=b;b=a.mod(t);a=t}return prod.div(a).abs()}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.log=function log(x,base){if(arguments.length==1){if(isNumber(x)){if(x>=0){return Math.log(x)}else{return log(new Complex(x,0))}}if(isComplex(x)){return new Complex(Math.log(Math.sqrt(x.re*x.re+x.im*x.im)),Math.atan2(x.im,x.re))}if(x instanceof BigNumber){if(x.isNegative()){return log(x.toNumber())}else{return x.ln()}}if(isCollection(x)){return collection.deepMap(x,log)}if(isBoolean(x)||x===null){return log(+x)}throw new math.error.UnsupportedTypeError("log",math["typeof"](x))}else if(arguments.length==2){return math.divide(log(x),log(base))}else{throw new math.error.ArgumentsError("log",arguments.length,1,2)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.log10=function log10(x){if(arguments.length!=1){throw new math.error.ArgumentsError("log10",arguments.length,1)}if(isNumber(x)){if(x>=0){return Math.log(x)/Math.LN10}else{return log10(new Complex(x,0))}}if(x instanceof BigNumber){if(x.isNegative()){return log10(x.toNumber())}else{return x.log()}}if(isComplex(x)){return new Complex(Math.log(Math.sqrt(x.re*x.re+x.im*x.im))/Math.LN10,Math.atan2(x.im,x.re)/Math.LN10)}if(isCollection(x)){return collection.deepMap(x,log10)}if(isBoolean(x)||x===null){return log10(+x)}throw new math.error.UnsupportedTypeError("log10",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isCollection=collection.isCollection;math.mod=function mod(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("mod",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){return _mod(x,y)}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return y.isZero()?x:x.mod(y)}return mod(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return y.isZero()?x:x.mod(y)}return mod(x,y.toNumber())}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,mod)}if(isBoolean(x)||x===null){return mod(+x,y)}if(isBoolean(y)||y===null){return mod(x,+y)}throw new math.error.UnsupportedTypeError("mod",math["typeof"](x),math["typeof"](y))};function _mod(x,y){if(y>0){return x-y*Math.floor(x/y)}else if(y==0){return x}else{throw new Error("Cannot calculate mod for a negative divisor")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isArray=Array.isArray,isUnit=Unit.isUnit;math.multiply=function multiply(x,y){var res;if(arguments.length!=2){throw new math.error.ArgumentsError("multiply",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){return x*y}else if(isComplex(y)){return _multiplyComplex(new Complex(x,0),y)}else if(isUnit(y)){res=y.clone();res.value=res.value===null?res._normalize(x):res.value*x;return res}}if(isComplex(x)){if(isNumber(y)){return _multiplyComplex(x,new Complex(y,0))}else if(isComplex(y)){return _multiplyComplex(x,y)}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.times(y)}return multiply(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.times(y)}return multiply(x,y.toNumber())}if(isUnit(x)){if(isNumber(y)){res=x.clone();res.value=res.value===null?res._normalize(y):res.value*y;return res}}if(isArray(x)){var m=math.matrix(x);var r=m.multiply(y);if(r instanceof Matrix){if(y instanceof Matrix)return r;return r.valueOf()}return r}if(x instanceof Matrix){return x.multiply(y)}if(isArray(y)){return collection.deepMap2(x,y,multiply)}else if(y instanceof Matrix){var mf=function(v){return multiply(x,v)};return collection.deepMap(y,mf,true)}if(isBoolean(x)||x===null){return multiply(+x,y)}if(isBoolean(y)||y===null){return multiply(x,+y)}throw new math.error.UnsupportedTypeError("multiply",math["typeof"](x),math["typeof"](y))};function _multiplyComplex(x,y){if(x.im==0){if(y.im==0){return new Complex(x.re*y.re,0)}else if(y.re==0){return new Complex(0,x.re*y.im)}else{return new Complex(x.re*y.re,x.re*y.im)}}else if(x.re==0){if(y.im==0){return new Complex(0,x.im*y.re)}else if(y.re==0){return new Complex(-x.im*y.im,0)}else{return new Complex(-x.im*y.im,x.im*y.re)}}else{if(y.im==0){return new Complex(x.re*y.re,x.im*y.re)}else if(y.re==0){return new Complex(-x.im*y.im,x.re*y.im)}else{return new Complex(x.re*y.re-x.im*y.im,x.re*y.im+x.im*y.re)}}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Matrix=math.type.Matrix,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isArray=Array.isArray;math.norm=function norm(x,p){if(arguments.length<1||arguments.length>2){
throw new math.error.ArgumentsError("abs",arguments.length,1,2)}if(isNumber(x)){return Math.abs(x)}if(isComplex(x)){var re=Math.abs(x.re);var im=Math.abs(x.im);if(re>=im){var i=im/re;return re*Math.sqrt(1+i*i)}var j=re/im;return im*Math.sqrt(1+j*j)}if(x instanceof BigNumber){return x.abs()}if(isBoolean(x)||x===null){return Math.abs(x)}if(isArray(x)){return norm(math.matrix(x),p)}if(x instanceof Matrix){var sizeX=x.size();if(p==null)p=2;if(sizeX.length==1){if(p===Number.POSITIVE_INFINITY||p==="inf"){var n;x.forEach(function(value){var v=math.abs(value);if(!n||math.larger(v,n))n=v},true);return n}if(p===Number.NEGATIVE_INFINITY||p==="-inf"){var n;x.forEach(function(value){var v=math.abs(value);if(!n||math.smaller(v,n))n=v},true);return n}if(p==="fro")return norm(x);if(isNumber(p)&&!isNaN(p)){if(!math.equal(p,0)){var n=0;x.forEach(function(value){n=math.add(math.pow(math.abs(value),p),n)},true);return math.pow(n,1/p)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}else if(sizeX.length==2){if(p==1){var c=[];x.forEach(function(value,index){var j=index[1];c[j]=math.add(c[j]||0,math.abs(value))},true);return math.max(c)}if(p==Number.POSITIVE_INFINITY||p==="inf"){var r=[];x.forEach(function(value,index){var i=index[0];r[i]=math.add(r[i]||0,math.abs(value))},true);return math.max(r)}if(p==="fro"){return math.sqrt(x.transpose().multiply(x).trace())}if(p==2){throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition")}throw new Error("Unsupported parameter value")}}throw new math.error.UnsupportedTypeError("norm",x)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346);var BigNumber=math.type.BigNumber;var collection=math.collection;var isNumber=util.number.isNumber;var isBoolean=util["boolean"].isBoolean;var isCollection=collection.isCollection;math.nthRoot=function nthRoot(a,root){if(arguments.length!=1&&arguments.length!=2){throw new math.error.ArgumentsError("nthRoot",arguments.length,1,2)}switch(arguments.length){case 1:if(isNumber(a)){return _nthRoot(a)}else if(a instanceof BigNumber){return _nthRootBig(a)}else if(isCollection(a)){return collection.deepMap(x,nthRoot)}if(isBoolean(a)||a===null){return nthRoot(+a)}break;case 2:if(isNumber(a)){if(isNumber(root)){return _nthRoot(a,root)}else if(root instanceof BigNumber){a=BigNumber.convert(a);if(a instanceof BigNumber){return _nthRootBig(a,root)}else{return _nthRoot(a,root.toNumber())}}}else if(a instanceof BigNumber){if(isNumber(root)){root=BigNumber.convert(root)}if(root instanceof BigNumber){return _nthRootBig(a,root)}else{return _nthRoot(a.toNumber(),root)}}else if(isCollection(a)&&!isCollection(root)){return collection.deepMap2(a,root,nthRoot)}if(isBoolean(a)||a===null){return nthRoot(+a,root)}if(isBoolean(root)||root===null){return nthRoot(a,+root)}break;default:throw new math.error.ArgumentsError("nthRoot",arguments.length,1,2)}if(isBoolean(x)||x===null){return arguments.length==2?nthRoot(+x,n):nthRoot(+x)}throw new math.error.UnsupportedTypeError("nthRoot",math["typeof"](a),math["typeof"](root))};function _nthRoot(a,root){var _root=root!=undefined?root:2;var inv=_root<0;if(inv)_root=-_root;if(_root==0)throw new Error("Root must be non-zero");if(a<0&&Math.abs(_root)%2!=1)throw new Error("Root must be odd when a is negative.");if(a==0)return 0;if(!Number.isFinite(a)){return inv?0:a}var epsilon=1e-16;var x=1;var i=0;var iMax=100;do{var delta=(a/Math.pow(x,_root-1)-x)/_root;x=x+delta;i++}while(Math.abs(delta)>epsilon&&i<iMax);return inv?1/x:x}function _nthRootBig(a,root){var _root=root!=undefined?root:new BigNumber(2);var zero=new BigNumber(0);var one=new BigNumber(1);var inv=_root.isNegative();if(inv)_root=_root.negated();if(_root.isZero())throw new Error("Root must be non-zero");if(a.isNegative()&&!_root.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(a.isZero())return zero;if(!a.isFinite()){return inv?zero:a}var x=one;var i=0;var iMax=100;do{var xPrev=x;var delta=a.div(x.pow(_root.minus(1))).minus(x).div(_root);x=x.plus(delta);i++}while(!x.equals(xPrev)&&i<iMax);return inv?one.div(x):x}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Matrix=math.type.Matrix,array=util.array,isNumber=util.number.isNumber,isBoolean=util.boolean.isBoolean,isArray=Array.isArray,isInteger=util.number.isInteger,isComplex=Complex.isComplex;math.pow=function pow(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("pow",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){if(isInteger(y)||x>=0){return Math.pow(x,y)}else{return powComplex(new Complex(x,0),new Complex(y,0))}}else if(isComplex(y)){return powComplex(new Complex(x,0),y)}}if(isComplex(x)){if(isNumber(y)){return powComplex(x,new Complex(y,0))}else if(isComplex(y)){return powComplex(x,y)}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){if(y.isInteger()||!x.isNegative()){return x.pow(y)}else{return pow(x.toNumber(),y.toNumber())}}else{return pow(x.toNumber(),y)}}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){if(y.isInteger()&&!x.isNegative()){return x.pow(y)}else{return pow(x.toNumber(),y.toNumber())}}else{return pow(x,y.toNumber())}}if(isArray(x)){if(!isNumber(y)||!isInteger(y)||y<0){throw new TypeError("For A^b, b must be a positive integer "+"(value is "+y+")")}var s=array.size(x);if(s.length!=2){throw new Error("For A^b, A must be 2 dimensional "+"(A has "+s.length+" dimensions)")}if(s[0]!=s[1]){throw new Error("For A^b, A must be square "+"(size is "+s[0]+"x"+s[1]+")")}var res=math.eye(s[0]).valueOf();var px=x;while(y>=1){if((y&1)==1){res=math.multiply(px,res)}y>>=1;px=math.multiply(px,px)}return res}else if(x instanceof Matrix){return math.matrix(pow(x.valueOf(),y))}if(isBoolean(x)||x===null){return pow(+x,y)}if(isBoolean(y)||y===null){return pow(x,+y)}throw new math.error.UnsupportedTypeError("pow",math["typeof"](x),math["typeof"](y))};function powComplex(x,y){var temp1=math.log(x);var temp2=math.multiply(temp1,y);return math.exp(temp2)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isInteger=util.number.isInteger,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,toFixed=util.number.toFixed;math.round=function round(x,n){if(arguments.length!=1&&arguments.length!=2){throw new math.error.ArgumentsError("round",arguments.length,1,2)}if(n==undefined){if(isNumber(x)){return Math.round(x)}if(isComplex(x)){return new Complex(Math.round(x.re),Math.round(x.im))}if(x instanceof BigNumber){return x.toDecimalPlaces(0)}if(isCollection(x)){return collection.deepMap(x,round)}if(isBoolean(x)||x===null){return Math.round(x)}throw new math.error.UnsupportedTypeError("round",math["typeof"](x))}else{if(!isNumber(n)||!isInteger(n)){if(n instanceof BigNumber){n=parseFloat(n.valueOf())}else if(isBoolean(n)||x===null){return round(x,+n)}else{throw new TypeError("Number of decimals in function round must be an integer")}}if(n<0||n>15){throw new Error("Number of decimals in function round must be in te range of 0-15")}if(isNumber(x)){return roundNumber(x,n)}if(isComplex(x)){return new Complex(roundNumber(x.re,n),roundNumber(x.im,n))}if(x instanceof BigNumber){return x.toDecimalPlaces(n)}if(isCollection(x)||isCollection(n)){return collection.deepMap2(x,n,round)}if(isBoolean(x)||x===null){return round(+x,n)}throw new math.error.UnsupportedTypeError("round",math["typeof"](x),math["typeof"](n))}};function roundNumber(value,decimals){return parseFloat(toFixed(value,decimals))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,number=util.number,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.sign=function sign(x){if(arguments.length!=1){throw new math.error.ArgumentsError("sign",arguments.length,1)}if(isNumber(x)){return number.sign(x)}if(isComplex(x)){var abs=Math.sqrt(x.re*x.re+x.im*x.im);return new Complex(x.re/abs,x.im/abs)}if(x instanceof BigNumber){return new BigNumber(x.cmp(0))}if(isCollection(x)){return collection.deepMap(x,sign,true)}if(isBoolean(x)||x===null){return number.sign(x)}throw new math.error.UnsupportedTypeError("sign",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.sqrt=function sqrt(x){if(arguments.length!=1){throw new math.error.ArgumentsError("sqrt",arguments.length,1)}if(isNumber(x)){if(x>=0){return Math.sqrt(x)}else{return sqrt(new Complex(x,0))}}if(isComplex(x)){var r=Math.sqrt(x.re*x.re+x.im*x.im);var re,im;if(x.re>=0){re=.5*Math.sqrt(2*(r+x.re))}else{re=Math.abs(x.im)/Math.sqrt(2*(r-x.re))}if(x.re<=0){im=.5*Math.sqrt(2*(r-x.re))}else{im=Math.abs(x.im)/Math.sqrt(2*(r+x.re))}if(x.im>=0){return new Complex(re,im)}else{return new Complex(re,-im)}}if(x instanceof BigNumber){if(x.isNegative()){return sqrt(x.toNumber())}else{return x.sqrt()}}if(isCollection(x)){return collection.deepMap(x,sqrt,true)}if(isBoolean(x)||x===null){return sqrt(+x)}throw new math.error.UnsupportedTypeError("sqrt",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection;math.square=function square(x){if(arguments.length!=1){throw new math.error.ArgumentsError("square",arguments.length,1)}if(isNumber(x)){return x*x}if(isComplex(x)){return math.multiply(x,x)}if(x instanceof BigNumber){return x.times(x)}if(isCollection(x)){return collection.deepMap(x,square,true)}if(isBoolean(x)||x===null){return x*x}throw new math.error.UnsupportedTypeError("square",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isNumber=util.number.isNumber,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.subtract=function subtract(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("subtract",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){return x-y}else if(isComplex(y)){return new Complex(x-y.re,-y.im)}}else if(isComplex(x)){if(isNumber(y)){return new Complex(x.re-y,x.im)}else if(isComplex(y)){return new Complex(x.re-y.re,x.im-y.im)}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.minus(y)}return subtract(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.minus(y)}return subtract(x,y.toNumber())}if(isUnit(x)){if(isUnit(y)){if(x.value==null){throw new Error("Parameter x contains a unit with undefined value")}if(y.value==null){throw new Error("Parameter y contains a unit with undefined value")}if(!x.equalBase(y)){throw new Error("Units do not match")}var res=x.clone();res.value-=y.value;res.fixPrefix=false;return res}}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,subtract)}if(isBoolean(x)||x===null){return subtract(+x,y)}if(isBoolean(y)||y===null){return subtract(x,+y)}throw new math.error.UnsupportedTypeError("subtract",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.unaryMinus=function unaryMinus(x){if(arguments.length!=1){throw new math.error.ArgumentsError("unaryMinus",arguments.length,1)}if(isNumber(x)){return-x}if(isComplex(x)){return new Complex(-x.re,-x.im)}if(x instanceof BigNumber){return x.neg()}if(isUnit(x)){var res=x.clone();res.value=-x.value;return res}if(isCollection(x)){return collection.deepMap(x,unaryMinus,true)}if(isBoolean(x)||isString(x)||x===null){return config.number=="bignumber"?new BigNumber(-x):-x}throw new math.error.UnsupportedTypeError("unaryMinus",math["typeof"](x))};math.unary=function unary(){throw new Error("Function unary is deprecated. Use unaryMinus instead.")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.unaryPlus=function unaryPlus(x){if(arguments.length!=1){throw new math.error.ArgumentsError("unaryPlus",arguments.length,1)}if(isNumber(x)){return x}if(isComplex(x)){return x.clone()}if(x instanceof BigNumber){return x}if(isUnit(x)){return x.clone()}if(isCollection(x)){return collection.deepMap(x,unaryPlus,true)}if(isBoolean(x)||isString(x)||x===null){return config.number=="bignumber"?new BigNumber(+x):+x}throw new math.error.UnsupportedTypeError("unaryPlus",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),Matrix=math.type.Matrix,BigNumber=math.type.BigNumber,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger;math.xgcd=function xgcd(a,b){if(arguments.length==2){if(isNumber(a)&&isNumber(b)){if(!isInteger(a)||!isInteger(b)){throw new Error("Parameters in function xgcd must be integer numbers")}return _xgcd(a,b)}if(a instanceof BigNumber){if(isNumber(b)){b=BigNumber.convert(b)}else if(isBoolean(b)||b===null){b=new BigNumber(b?1:0)}if(b instanceof BigNumber){return _bigXgcd(a,b)}return xgcd(a.toNumber(),b)}if(b instanceof BigNumber){if(isNumber(a)){a=BigNumber.convert(a)}else if(isBoolean(a)||a===null){a=new BigNumber(a?1:0)}if(a instanceof BigNumber){return _bigXgcd(a,b)}return xgcd(a.toNumber(),b)}if(isBoolean(a)||a===null){return xgcd(+a,b)}if(isBoolean(b)||b===null){return xgcd(a,+b)}throw new math.error.UnsupportedTypeError("xgcd",math["typeof"](a),math["typeof"](b))}throw new SyntaxError("Function xgcd expects two arguments")};function _xgcd(a,b){var t,q,r,x=0,lastx=1,y=1,lasty=0;while(b){q=Math.floor(a/b);r=a%b;t=x;x=lastx-q*x;lastx=t;t=y;y=lasty-q*y;lasty=t;a=b;b=r}var res;if(a<0){res=[-a,-lastx,-lasty]}else{res=[a,a?lastx:0,lasty]}return config.matrix==="array"?res:math.matrix(res)}function _bigXgcd(a,b){var t,q,r,zero=new BigNumber(0),x=new BigNumber(0),lastx=new BigNumber(1),y=new BigNumber(1),lasty=new BigNumber(0);while(!b.isZero()){q=a.div(b).floor();r=a.mod(b);t=x;x=lastx.minus(q.times(x));lastx=t;t=y;y=lasty.minus(q.times(y));lasty=t;a=b;b=r}var res;if(a.lt(zero)){res=[a.neg(),lastx.neg(),lasty.neg()]}else{res=[a,!a.isZero()?lastx:0,lasty]}return config.matrix==="array"?res:math.matrix(res)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection,bigBitAnd=util.bignumber.and;math.bitAnd=function bitAnd(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("bitAnd",arguments.length,2)}if(isNumber(x)&&isNumber(y)){if(!isInteger(x)||!isInteger(y)){throw new Error("Parameters in function bitAnd must be integer numbers")}return x&y}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,bitAnd)}if(isBoolean(x)||x===null){return bitAnd(+x,y)}if(isBoolean(y)||y===null){return bitAnd(x,+y)}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}if(y instanceof BigNumber){return bigBitAnd(x,y)}return bitAnd(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}if(x instanceof BigNumber){return bigBitAnd(x,y)}return bitAnd(x,y.toNumber())}throw new math.error.UnsupportedTypeError("bitAnd",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection,bigBitNot=util.bignumber.not;math.bitNot=function bitNot(x){if(arguments.length!=1){throw new math.error.ArgumentsError("bitNot",arguments.length,1)}if(isNumber(x)){if(!isInteger(x)){throw new Error("Parameter in function bitNot must be integer numbers")}return~x}if(x instanceof BigNumber){return bigBitNot(x)}if(isCollection(x)){return collection.deepMap(x,bitNot)}if(isBoolean(x)||x===null){return bitNot(+x)}throw new math.error.UnsupportedTypeError("bitNot",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection,bigBitOr=util.bignumber.or;math.bitOr=function bitOr(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("bitOr",arguments.length,2)}if(isNumber(x)&&isNumber(y)){if(!isInteger(x)||!isInteger(y)){throw new Error("Parameters in function bitOr must be integer numbers")}return x|y}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,bitOr)}if(isBoolean(x)||x===null){return bitOr(+x,y)}if(isBoolean(y)||y===null){return bitOr(x,+y)}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}if(y instanceof BigNumber){return bigBitOr(x,y)}return bitOr(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}if(x instanceof BigNumber){return bigBitOr(x,y)}return bitOr(x,y.toNumber())}throw new math.error.UnsupportedTypeError("bitOr",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection,bigBitXor=util.bignumber.xor;math.bitXor=function bitXor(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("bitXor",arguments.length,2)}if(isNumber(x)&&isNumber(y)){if(!isInteger(x)||!isInteger(y)){throw new Error("Parameters in function bitXor must be integer numbers")}return x^y}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,bitXor)}if(isBoolean(x)||x===null){return bitXor(+x,y)}if(isBoolean(y)||y===null){return bitXor(x,+y)}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}if(y instanceof BigNumber){return bigBitXor(x,y)}return bitXor(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}if(x instanceof BigNumber){return bigBitXor(x,y)}return bitXor(x,y.toNumber())}throw new math.error.UnsupportedTypeError("bitXor",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection,bigLeftShift=util.bignumber.leftShift;math.leftShift=function leftShift(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("leftShift",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){if(!isInteger(x)||!isInteger(y)){throw new Error("Parameters in function leftShift must be integer numbers")}return x<<y}if(y instanceof BigNumber){return bigLeftShift(BigNumber.convert(x),y)}}if(isNumber(y)){if(isFinite(y)&&!isInteger(y)){throw new Error("Parameters in function leftShift must be integer numbers")}if(x instanceof BigNumber){if(x.isFinite()&&!x.isInteger()){throw new Error("Parameters in function leftShift must be integer numbers")}if(x.isNaN()||isNaN(y)||y<0){return new BigNumber(NaN)}if(y==0||x.isZero()){return x}if(y==Infinity&&!x.isFinite()){return new BigNumber(NaN)}if(y<55){return x.times(Math.pow(2,y)+"")}y=BigNumber.convert(y);return bigLeftShift(x,y)}}if(isCollection(x)&&isNumber(y)){return collection.deepMap2(x,y,leftShift)}if(isBoolean(x)||x===null){return leftShift(+x,y)}if(isBoolean(y)||y===null){return leftShift(x,+y)}if(x instanceof BigNumber){if(y instanceof BigNumber){return bigLeftShift(x,y)}return leftShift(x.toNumber(),y)}if(y instanceof BigNumber){return leftShift(x,y.toNumber())}throw new math.error.UnsupportedTypeError("leftShift",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection,bigRightShift=util.bignumber.rightShift;math.rightArithShift=function rightArithShift(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("rightArithShift",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){if(!isInteger(x)||!isInteger(y)){throw new Error("Parameters in function rightArithShift must be integer numbers")}return x>>y}if(y instanceof BigNumber){return bigRightShift(BigNumber.convert(x),y)}}if(isNumber(y)){if(isFinite(y)&&!isInteger(y)){throw new Error("Parameters in function rightArithShift must be integer numbers")}if(x instanceof BigNumber){if(x.isFinite()&&!x.isInteger()){throw new Error("Parameters in function rightArithShift must be integer numbers")}if(x.isNaN()||isNaN(y)||y<0){return new BigNumber(NaN)}if(y==Infinity){if(x.isNegative()){return new BigNumber(-1)}if(!x.isFinite()){return new BigNumber(NaN)}return new BigNumber(0)}if(y<55){return x.div(Math.pow(2,y)+"").floor()}y=BigNumber.convert(y);return bigRightShift(x,y)}}if(isCollection(x)&&isNumber(y)){return collection.deepMap2(x,y,rightArithShift)}if(isBoolean(x)||x===null){return rightArithShift(+x,y)}if(isBoolean(y)||y===null){return rightArithShift(x,+y)}if(x instanceof BigNumber){if(y instanceof BigNumber){return bigRightShift(x,y)}return rightArithShift(x.toNumber(),y)}if(y instanceof BigNumber){return rightArithShift(x,y.toNumber())}throw new math.error.UnsupportedTypeError("rightArithShift",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),Matrix=math.type.Matrix,Unit=__webpack_require__(135),collection=math.collection,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isNumber=util.number.isNumber,isCollection=collection.isCollection;math.rightLogShift=function rightLogShift(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("rightLogShift",arguments.length,2)}if(isNumber(x)&&isNumber(y)){if(!isInteger(x)||!isInteger(y)){throw new Error("Parameters in function rightLogShift must be integer numbers")}return x>>>y}if(isCollection(x)&&isNumber(y)){return collection.deepMap2(x,y,rightLogShift)}if(isBoolean(x)||x===null){return rightLogShift(+x,y)}if(isBoolean(y)||y===null){return rightLogShift(x,+y)}throw new math.error.UnsupportedTypeError("rightLogShift",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isCollection=collection.isCollection,isComplex=Complex.isComplex;math.arg=function arg(x){if(arguments.length!=1){throw new math.error.ArgumentsError("arg",arguments.length,1)}if(isNumber(x)){return Math.atan2(0,x)}if(isComplex(x)){return Math.atan2(x.im,x.re)}if(isCollection(x)){return collection.deepMap(x,arg)}if(isBoolean(x)||x===null){return arg(+x)}if(x instanceof BigNumber){return arg(x.toNumber())}throw new math.error.UnsupportedTypeError("arg",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,object=util.object,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isCollection=collection.isCollection,isComplex=Complex.isComplex;math.conj=function conj(x){if(arguments.length!=1){throw new math.error.ArgumentsError("conj",arguments.length,1)}if(isNumber(x)){return x}if(x instanceof BigNumber){return new BigNumber(x)}if(isComplex(x)){return new Complex(x.re,-x.im)}if(isCollection(x)){return collection.deepMap(x,conj)}if(isBoolean(x)||x===null){return+x}return object.clone(x)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,object=util.object,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isCollection=collection.isCollection,isComplex=Complex.isComplex;math.re=function re(x){if(arguments.length!=1){throw new math.error.ArgumentsError("re",arguments.length,1)}if(isNumber(x)){return x}if(x instanceof BigNumber){return new BigNumber(x)}if(isComplex(x)){return x.re}if(isCollection(x)){return collection.deepMap(x,re)}if(isBoolean(x)||x===null){return+x}return object.clone(x)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isCollection=collection.isCollection,isComplex=Complex.isComplex;math.im=function im(x){if(arguments.length!=1){throw new math.error.ArgumentsError("im",arguments.length,1)}if(isNumber(x)){return 0}if(x instanceof BigNumber){return new BigNumber(0)}if(isComplex(x)){return x.im}if(isCollection(x)){return collection.deepMap(x,im)}if(isBoolean(x)||x===null){return 0}return 0}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.and=function and(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("and",arguments.length,2)}if((isNumber(x)||isBoolean(x)||x===null)&&(isNumber(y)||isBoolean(y)||y===null)){return!!(x&&y)}if(isComplex(x)){if(x.re==0&&x.im==0){return false}return and(true,y)}if(isComplex(y)){if(y.re==0&&y.im==0){return false}return and(x,true)}if(x instanceof BigNumber){if(x.isZero()||x.isNaN()){return false}return and(true,y)}if(y instanceof BigNumber){if(y.isZero()||y.isNaN()){return false}return and(x,true)}if(isUnit(x)){if(x.value===null||x.value==0){return false}return and(true,y)}if(isUnit(y)){if(y.value===null||y.value==0){return false}return and(x,true)}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,and)}throw new math.error.UnsupportedTypeError("and",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.not=function not(x){if(arguments.length!=1){throw new math.error.ArgumentsError("not",arguments.length,1)}if(isNumber(x)||isBoolean(x)||x===null){return!x}if(isComplex(x)){return x.re==0&&x.im==0}if(x instanceof BigNumber){return x.isZero()||x.isNaN()}if(isUnit(x)){return x.value===null||x.value==0}if(isCollection(x)){return collection.deepMap(x,not)}throw new math.error.UnsupportedTypeError("not",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.or=function or(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("or",arguments.length,2)}if((isNumber(x)||isBoolean(x)||x===null)&&(isNumber(y)||isBoolean(y)||y===null)){return!!(x||y)}if(isComplex(x)){if(x.re==0&&x.im==0){return or(false,y)}return true}if(isComplex(y)){if(y.re==0&&y.im==0){return or(x,false)}return true}if(x instanceof BigNumber){if(x.isZero()||x.isNaN()){return or(false,y)}return true}if(y instanceof BigNumber){if(y.isZero()||y.isNaN()){return or(x,false)}return true}if(isUnit(x)){if(x.value===null||x.value==0){return or(false,y)}return true}if(isUnit(y)){if(y.value===null||y.value==0){return or(x,false)}return true}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,or)}throw new math.error.UnsupportedTypeError("or",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.xor=function xor(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("xor",arguments.length,2)}if((isNumber(x)||isBoolean(x)||x===null)&&(isNumber(y)||isBoolean(y)||y===null)){return!!(!!x^!!y)}if(isComplex(x)){
return xor(!(x.re==0&&x.im==0),y)}if(isComplex(y)){return xor(x,!(y.re==0&&y.im==0))}if(x instanceof BigNumber){return xor(!(x.isZero()||x.isNaN()),y)}if(y instanceof BigNumber){return xor(x,!(y.isZero()||y.isNaN()))}if(isUnit(x)){return xor(!(x.value===null||x.value==0),y)}if(isUnit(y)){return xor(x,!(y.value===null||y.value==0))}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,xor)}throw new math.error.UnsupportedTypeError("xor",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346);var BigNumber=__webpack_require__(129);var Matrix=math.type.Matrix;var collection=math.collection;var object=util.object;var array=util.array;var isNumber=util.number.isNumber;var isInteger=util.number.isInteger;var isCollection=collection.isCollection;math.concat=function concat(args){var i,len=arguments.length,dim=-1,prevDim,asMatrix=false,matrices=[];for(i=0;i<len;i++){var arg=arguments[i];if(arg instanceof Matrix){asMatrix=true}if(i==len-1&&(isNumber(arg)||arg instanceof BigNumber)){prevDim=dim;dim=arg.valueOf();if(!isInteger(dim)){throw new TypeError("Integer number expected for dimension")}if(dim<0){throw new math.error.IndexError(dim)}if(i>0&&dim>prevDim){throw new math.error.IndexError(dim,prevDim+1)}}else if(isCollection(arg)){var matrix=object.clone(arg).valueOf();var size=array.size(arg.valueOf());matrices[i]=matrix;prevDim=dim;dim=size.length-1;if(i>0&&dim!=prevDim){throw new math.error.DimensionError(prevDim+1,dim+1)}}else{throw new math.error.UnsupportedTypeError("concat",math["typeof"](arg))}}if(matrices.length==0){throw new SyntaxError("At least one matrix expected")}var res=matrices.shift();while(matrices.length){res=_concat(res,matrices.shift(),dim,0)}return asMatrix?math.matrix(res):res};function _concat(a,b,concatDim,dim){if(dim<concatDim){if(a.length!=b.length){throw new math.error.DimensionError(a.length,b.length)}var c=[];for(var i=0;i<a.length;i++){c[i]=_concat(a[i],b[i],concatDim,dim+1)}return c}else{return a.concat(b)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var array=__webpack_require__(340);var Matrix=math.type.Matrix;math.cross=function cross(x,y){if(x instanceof Matrix){if(y instanceof Matrix){return math.matrix(_cross(x.toArray(),y.toArray()))}else if(Array.isArray(y)){return math.matrix(_cross(x.toArray(),y))}}else if(Array.isArray(x)){if(y instanceof Matrix){return math.matrix(_cross(x,y.toArray()))}else if(Array.isArray(y)){return _cross(x,y)}}throw new math.error.UnsupportedTypeError("cross",math["typeof"](x),math["typeof"](y))};function _cross(x,y){var xSize=array.size(x);var ySize=array.size(y);if(xSize.length!=1||ySize.length!=1||xSize[0]!=3||ySize[0]!=3){throw new RangeError("Vectors with length 3 expected "+"(Size A = ["+xSize.join(", ")+"], B = ["+ySize.join(", ")+"])")}return[math.subtract(math.multiply(x[1],y[2]),math.multiply(x[2],y[1])),math.subtract(math.multiply(x[2],y[0]),math.multiply(x[0],y[2])),math.subtract(math.multiply(x[0],y[1]),math.multiply(x[1],y[0]))]}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),Matrix=math.type.Matrix,object=util.object,string=util.string;math.det=function det(x){if(arguments.length!=1){throw new math.error.ArgumentsError("det",arguments.length,1)}var size;if(x instanceof Matrix){size=x.size()}else if(x instanceof Array){x=math.matrix(x);size=x.size()}else{size=[]}switch(size.length){case 0:return object.clone(x);case 1:if(size[0]==1){return object.clone(x.valueOf()[0])}else{throw new RangeError("Matrix must be square "+"(size: "+string.format(size)+")")}case 2:var rows=size[0];var cols=size[1];if(rows==cols){return _det(x.clone().valueOf(),rows,cols)}else{throw new RangeError("Matrix must be square "+"(size: "+string.format(size)+")")}default:throw new RangeError("Matrix must be two dimensional "+"(size: "+string.format(size)+")")}};function _det(matrix,rows,cols){if(rows==1){return object.clone(matrix[0][0])}else if(rows==2){return math.subtract(math.multiply(matrix[0][0],matrix[1][1]),math.multiply(matrix[1][0],matrix[0][1]))}else{var compute_mu=function(matrix){var i,j;var mu=new Array(matrix.length);var sum=0;for(i=1;i<matrix.length;i++){sum=math.add(sum,matrix[i][i])}for(i=0;i<matrix.length;i++){mu[i]=new Array(matrix.length);mu[i][i]=math.unaryMinus(sum);for(j=0;j<i;j++){mu[i][j]=0}for(j=i+1;j<matrix.length;j++){mu[i][j]=matrix[i][j]}if(i+1<matrix.length){sum=math.subtract(sum,matrix[i+1][i+1])}}return mu};var fa=matrix;for(var i=0;i<rows-1;i++){fa=math.multiply(compute_mu(fa),matrix)}if(rows%2==0){return math.unaryMinus(fa[0][0])}else{return fa[0][0]}}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,object=util.object,array=util.array,isArray=array.isArray,isNumber=util.number.isNumber,isString=util.string.isString,isInteger=util.number.isInteger;math.diag=function diag(x,k,format){if(arguments.length===0||arguments.length>3){throw new math.error.ArgumentsError("diag",arguments.length,1,3)}switch(arguments.length){case 1:k=0;format=undefined;break;case 2:if(isString(arguments[1])){format=arguments[1];k=0}break}if(!(x instanceof Matrix)&&!isArray(x)){throw new TypeError("First parameter in function diag must be a Matrix or Array")}if(k instanceof BigNumber)k=k.toNumber();if(!isNumber(k)||!isInteger(k)){throw new TypeError("Second parameter in function diag must be an integer")}if(format&&!isString(format)){throw new TypeError("Third parameter in function diag must be a String")}var kSuper=k>0?k:0;var kSub=k<0?-k:0;var s,defaultValue,vector,d,i,iMax;if(x instanceof Matrix){d=x.valueOf();format=format||x.storage();s=x.size()}else{d=x;s=array.size(x)}if(format){if(s.length===1){defaultValue=d[0]instanceof BigNumber?new BigNumber(0):0;var ms=[d.length+kSub,d.length+kSuper];var F=Matrix.storage(format);return F.diagonal(ms,d,k,defaultValue)}if(s.length===2){vector=x.diagonal(k);return math.matrix(vector,format)}throw new RangeError("Matrix for function diag must be 2 dimensional")}switch(s.length){case 1:defaultValue=d[0]instanceof BigNumber?new BigNumber(0):0;var data=[];array.resize(data,[d.length+kSub,d.length+kSuper],defaultValue);iMax=d.length;for(i=0;i<iMax;i++){data[i+kSub][i+kSuper]=object.clone(d[i])}return data;case 2:vector=[];iMax=Math.min(s[0]-kSub,s[1]-kSuper);for(i=0;i<iMax;i++){vector[i]=object.clone(d[i+kSub][i+kSuper])}return vector;default:throw new RangeError("Matrix for function diag must be 2 dimensional")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var array=__webpack_require__(340);var Matrix=math.type.Matrix;math.dot=function dot(x,y){if(x instanceof Matrix){if(y instanceof Matrix){return _dot(x.toArray(),y.toArray())}else if(Array.isArray(y)){return _dot(x.toArray(),y)}}else if(Array.isArray(x)){if(y instanceof Matrix){return _dot(x,y.toArray())}else if(Array.isArray(y)){return _dot(x,y)}}throw new math.error.UnsupportedTypeError("dot",math["typeof"](x),math["typeof"](y))};function _dot(x,y){var xSize=array.size(x);var ySize=array.size(y);var len=xSize[0];if(xSize.length!==1||ySize.length!==1)throw new RangeError("Vector expected");if(xSize[0]!=ySize[0])throw new RangeError("Vectors must have equal length ("+xSize[0]+" != "+ySize[0]+")");if(len==0)throw new RangeError("Cannot calculate the dot product of empty vectors");var prod=0;for(var i=0;i<len;i++){prod=math.add(prod,math.multiply(x[i],y[i]))}return prod}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,collection=math.collection,array=util.array,isNumber=util.number.isNumber,isInteger=util.number.isInteger,isString=util.string.isString,isArray=Array.isArray;math.eye=function eye(size,format){var args=collection.argsToArray(arguments);var f;if(args.length>0&&isString(args[args.length-1])){f=args[args.length-1];args=collection.argsToArray(args.slice(0,args.length-1))}else if(size instanceof Matrix){f=size.storage()}else if(!isArray(size)&&config.matrix==="matrix"){f="default"}if(args.length==1){args[1]=args[0]}else if(args.length>2){throw new math.error.ArgumentsError("eye",args.length,0,2)}var asBigNumber=false;args=args.map(function(value){if(value instanceof BigNumber){asBigNumber=true;value=value.toNumber()}if(!isNumber(value)||!isInteger(value)||value<0){throw new Error("Parameters in function eye must be positive integers")}return value});var one=asBigNumber?new BigNumber(1):1;var defaultValue=asBigNumber?new BigNumber(0):0;if(f){if(args.length===0){return math.matrix(f)}var F=Matrix.storage(f);return F.diagonal(args,one,0,defaultValue)}var res=[];if(args.length>0){res=array.resize(res,args,defaultValue);var minimum=math.min(args);for(var d=0;d<minimum;d++){res[d][d]=one}}return res}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346);var Matrix=math.type.Matrix;var object=util.object;var array=util.array;var isArray=Array.isArray;math.flatten=function flatten(x){if(arguments.length!==1){throw new math.error.ArgumentsError("flatten",arguments.length,1)}if(x instanceof Matrix){var clone=object.clone(x.toArray());var flat=array.flatten(clone);return math.matrix(flat)}if(isArray(x)){return array.flatten(object.clone(x))}throw new math.error.UnsupportedTypeError("flatten",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346);var Matrix=math.type.Matrix;math.inv=function inv(x){if(arguments.length!=1){throw new math.error.ArgumentsError("inv",arguments.length,1)}var size=math.size(x).valueOf();switch(size.length){case 0:return math._divide(1,x);case 1:if(size[0]==1){if(x instanceof Matrix){return math.matrix([math._divide(1,x.valueOf()[0])])}else{return[math._divide(1,x[0])]}}else{throw new RangeError("Matrix must be square "+"(size: "+util.string.format(size)+")")}case 2:var rows=size[0];var cols=size[1];if(rows==cols){if(x instanceof Matrix){return math.matrix(_inv(x.valueOf(),rows,cols),x.storage())}else{return _inv(x,rows,cols)}}else{throw new RangeError("Matrix must be square "+"(size: "+util.string.format(size)+")")}default:throw new RangeError("Matrix must be two dimensional "+"(size: "+util.string.format(size)+")")}};function _inv(matrix,rows,cols){var r,s,f,value,temp;if(rows==1){value=matrix[0][0];if(value==0){throw Error("Cannot calculate inverse, determinant is zero")}return[[math._divide(1,value)]]}else if(rows==2){var d=math.det(matrix);if(d==0){throw Error("Cannot calculate inverse, determinant is zero")}return[[math._divide(matrix[1][1],d),math._divide(math.unaryMinus(matrix[0][1]),d)],[math._divide(math.unaryMinus(matrix[1][0]),d),math._divide(matrix[0][0],d)]]}else{var A=matrix.concat();for(r=0;r<rows;r++){A[r]=A[r].concat()}var B=math.eye(rows).valueOf();for(var c=0;c<cols;c++){r=c;while(r<rows&&A[r][c]==0){r++}if(r==rows||A[r][c]==0){throw Error("Cannot calculate inverse, determinant is zero")}if(r!=c){temp=A[c];A[c]=A[r];A[r]=temp;temp=B[c];B[c]=B[r];B[r]=temp}var Ac=A[c],Bc=B[c];for(r=0;r<rows;r++){var Ar=A[r],Br=B[r];if(r!=c){if(Ar[c]!=0){f=math._divide(math.unaryMinus(Ar[c]),Ac[c]);for(s=c;s<cols;s++){Ar[s]=math.add(Ar[s],math.multiply(f,Ac[s]))}for(s=0;s<cols;s++){Br[s]=math.add(Br[s],math.multiply(f,Bc[s]))}}}else{f=Ac[c];for(s=c;s<cols;s++){Ar[s]=math._divide(Ar[s],f)}for(s=0;s<cols;s++){Br[s]=math._divide(Br[s],f)}}}}return B}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,collection=math.collection,array=util.array,isNumber=util.number.isNumber,isInteger=util.number.isInteger,isString=util.string.isString,isArray=Array.isArray;math.ones=function ones(size,format){var args=collection.argsToArray(arguments);var f;if(args.length>0&&isString(args[args.length-1])){f=args[args.length-1];args=collection.argsToArray(args.slice(0,args.length-1))}else if(size instanceof Matrix){f=size.storage()}else if(!isArray(size)&&config.matrix==="matrix"){f="default"}var asBigNumber=false;args=args.map(function(value){if(value instanceof BigNumber){asBigNumber=true;value=value.toNumber()}if(!isNumber(value)||!isInteger(value)||value<0){throw new Error("Parameters in function eye must be positive integers")}return value});var defaultValue=asBigNumber?new BigNumber(1):1;if(f){var m=math.matrix(f);if(args.length>0){return m.resize(args,defaultValue)}return m}var res=[];if(args.length>0){return array.resize(res,args,defaultValue)}return res}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,collection=math.collection,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isNumber=util.number.isNumber;math.range=function range(args){var params=Array.prototype.slice.call(arguments),start,end,step,includeEnd=false;if(isBoolean(params[params.length-1])){includeEnd=params.pop()?true:false}switch(params.length){case 1:if(isString(params[0])){var r=_parse(params[0]);if(!r){throw new SyntaxError('String "'+params[0]+'" is no valid range')}start=r.start;end=r.end;step=r.step}else{throw new TypeError("Two or three numbers or a single string expected in function range")}break;case 2:start=params[0];end=params[1];step=1;break;case 3:start=params[0];end=params[1];step=params[2];break;case 4:throw new TypeError("Parameter includeEnd must be a boolean");default:throw new math.error.ArgumentsError("range",arguments.length,2,4)}if(!isNumber(start)&&!(start instanceof BigNumber)){throw new TypeError("Parameter start must be a number")}if(!isNumber(end)&&!(end instanceof BigNumber)){throw new TypeError("Parameter end must be a number")}if(!isNumber(step)&&!(step instanceof BigNumber)){throw new TypeError("Parameter step must be a number")}if(start instanceof BigNumber||end instanceof BigNumber||step instanceof BigNumber){var asBigNumber=true;if(!(start instanceof BigNumber))start=BigNumber.convert(start);if(!(end instanceof BigNumber))end=BigNumber.convert(end);if(!(step instanceof BigNumber))step=BigNumber.convert(step);if(!(start instanceof BigNumber)||!(end instanceof BigNumber)||!(step instanceof BigNumber)){asBigNumber=false;if(start instanceof BigNumber)start=start.toNumber();if(end instanceof BigNumber)end=end.toNumber();if(step instanceof BigNumber)step=step.toNumber()}}var fn=asBigNumber?includeEnd?_bigRangeInc:_bigRange:includeEnd?_rangeInc:_range;var array=fn(start,end,step);return config.matrix==="array"?array:math.matrix(array)};function _range(start,end,step){var array=[],x=start;if(step>0){while(x<end){array.push(x);x+=step}}else if(step<0){while(x>end){array.push(x);x+=step}}return array}function _rangeInc(start,end,step){var array=[],x=start;if(step>0){while(x<=end){array.push(x);x+=step}}else if(step<0){while(x>=end){array.push(x);x+=step}}return array}function _bigRange(start,end,step){var array=[],x=start.clone(),zero=new BigNumber(0);if(step.gt(zero)){while(x.lt(end)){array.push(x);x=x.plus(step)}}else if(step.lt(zero)){while(x.gt(end)){array.push(x);x=x.plus(step)}}return array}function _bigRangeInc(start,end,step){var array=[],x=start.clone(),zero=new BigNumber(0);if(step.gt(zero)){while(x.lte(end)){array.push(x);x=x.plus(step)}}else if(step.lt(zero)){while(x.gte(end)){array.push(x);x=x.plus(step)}}return array}function _parse(str){var args=str.split(":"),nums=null;if(config.number==="bignumber"){try{nums=args.map(function(arg){return new BigNumber(arg)})}catch(err){return null}}else{nums=args.map(function(arg){return Number(arg)});var invalid=nums.some(function(num){return isNaN(num)});if(invalid){return null}}switch(nums.length){case 2:return{start:nums[0],end:nums[1],step:1};case 3:return{start:nums[0],end:nums[2],step:nums[1]};default:return null}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,array=util.array,clone=util.object.clone,string=util.string,isString=util.string.isString,isNumber=util.number.isNumber,isInteger=util.number.isInteger,isArray=array.isArray;math.resize=function resize(x,size,defaultValue){if(arguments.length!=2&&arguments.length!=3){throw new math.error.ArgumentsError("resize",arguments.length,2,3)}if(size instanceof Matrix){size=size.valueOf()}if(size.length&&size[0]instanceof BigNumber){size=size.map(function(value){return value instanceof BigNumber?value.toNumber():value})}if(x instanceof Matrix){return x.resize(size,defaultValue,true)}if(isString(x)){return _resizeString(x,size,defaultValue)}var asMatrix=isArray(x)?false:config.matrix!=="array";if(size.length==0){while(isArray(x)){x=x[0]}return clone(x)}else{if(!isArray(x)){x=[x]}x=clone(x);var res=array.resize(x,size,defaultValue);return asMatrix?math.matrix(res):res}};function _resizeString(str,size,defaultChar){if(defaultChar!==undefined){if(!isString(defaultChar)||defaultChar.length!==1){throw new TypeError("Single character expected as defaultValue")}}else{defaultChar=" "}if(size.length!==1){throw new math.error.DimensionError(size.length,1)}var len=size[0];if(!isNumber(len)||!isInteger(len)){throw new TypeError("Invalid size, must contain positive integers "+"(size: "+string.format(size)+")")}if(str.length>len){return str.substring(0,len)}else if(str.length<len){var res=str;for(var i=0,ii=len-str.length;i<ii;i++){res+=defaultChar}return res}else{return str}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),Matrix=math.type.Matrix,array=util.array,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit;math.size=function size(x){if(arguments.length!=1){throw new math.error.ArgumentsError("size",arguments.length,1)}var asArray=config.matrix==="array";if(isNumber(x)||isComplex(x)||isUnit(x)||isBoolean(x)||x==null||x instanceof BigNumber){return asArray?[]:math.matrix([])}if(isString(x)){return asArray?[x.length]:math.matrix([x.length])}if(Array.isArray(x)){return array.size(x)}if(x instanceof Matrix){return math.matrix(x.size())}throw new math.error.UnsupportedTypeError("size",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),Matrix=math.type.Matrix,object=util.object,array=util.array,isArray=Array.isArray;math.squeeze=function squeeze(x){if(arguments.length!=1){throw new math.error.ArgumentsError("squeeze",arguments.length,1)}if(isArray(x)){return array.squeeze(object.clone(x))}else if(x instanceof Matrix){var res=array.squeeze(x.toArray());return isArray(res)?math.matrix(res):res}else{return object.clone(x)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),Matrix=math.type.Matrix,Index=__webpack_require__(133),array=util.array,isString=util.string.isString,isArray=Array.isArray;math.subset=function subset(matrix,index,replacement,defaultValue){switch(arguments.length){case 2:return _getSubset(arguments[0],arguments[1]);case 3:case 4:return _setSubset(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw new math.error.ArgumentsError("subset",arguments.length,2,4)}};function _getSubset(value,index){var m,subset;if(isArray(value)){m=math.matrix(value);subset=m.subset(index);return subset&&subset.valueOf()}else if(value instanceof Matrix){return value.subset(index)}else if(isString(value)){return _getSubstring(value,index)}else{throw new math.error.UnsupportedTypeError("subset",math["typeof"](value))}}function _getSubstring(str,index){if(!(index instanceof Index)){throw new TypeError("Index expected")}if(index.size().length!=1){throw new math.error.DimensionError(index.size().length,1)}var strLen=str.length;array.validateIndex(index.min()[0],strLen);array.validateIndex(index.max()[0],strLen);var range=index.range(0);var substr="";range.forEach(function(v){substr+=str.charAt(v)});return substr}function _setSubset(value,index,replacement,defaultValue){var m;if(isArray(value)){m=math.matrix(math.clone(value));m.subset(index,replacement,defaultValue);return m.valueOf()}else if(value instanceof Matrix){return value.clone().subset(index,replacement,defaultValue)}else if(isString(value)){return _setSubstring(value,index,replacement,defaultValue)}else{throw new math.error.UnsupportedTypeError("subset",math["typeof"](value))}}function _setSubstring(str,index,replacement,defaultValue){if(!(index instanceof Index)){throw new TypeError("Index expected")}if(index.size().length!=1){throw new math.error.DimensionError(index.size().length,1)}if(defaultValue!==undefined){if(!isString(defaultValue)||defaultValue.length!==1){throw new TypeError("Single character expected as defaultValue")}}else{defaultValue=" "}var range=index.range(0);var len=range.size()[0];if(len!=replacement.length){throw new math.error.DimensionError(range.size()[0],replacement.length)}var strLen=str.length;array.validateIndex(index.min()[0]);array.validateIndex(index.max()[0]);var chars=[];for(var i=0;i<strLen;i++){chars[i]=str.charAt(i)}range.forEach(function(v,i){chars[v]=replacement.charAt(i)});if(chars.length>strLen){for(i=strLen-1,len=chars.length;i<len;i++){if(!chars[i]){chars[i]=defaultValue}}}return chars.join("")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),Matrix=math.type.Matrix,object=util.object,array=util.array,string=util.string;math.trace=function trace(x){if(arguments.length!=1){throw new math.error.ArgumentsError("trace",arguments.length,1)}if(x instanceof Matrix){return x.trace()}var size;if(x instanceof Array){size=array.size(x)}else{size=[]}switch(size.length){case 0:return object.clone(x);case 1:if(size[0]==1){return object.clone(x[0])}throw new RangeError("Array must be square (size: "+string.format(size)+")");case 2:var rows=size[0];var cols=size[1];if(rows==cols){var sum=0;for(var i=0;i<x.length;i++){sum=math.add(sum,x[i][i])}return sum}throw new RangeError("Array must be square (size: "+string.format(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+string.format(size)+")")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),Matrix=math.type.Matrix,object=util.object,string=util.string;math.transpose=function transpose(x){if(arguments.length!=1){throw new math.error.ArgumentsError("transpose",arguments.length,1)}var size=math.size(x).valueOf();switch(size.length){case 0:return object.clone(x);case 1:return object.clone(x);case 2:if(x instanceof Matrix){return x.transpose()}var rows=size[1],cols=size[0],data=x.valueOf(),transposed=[],transposedRow,clone=object.clone;if(rows===0){throw new RangeError("Cannot transpose a 2D matrix with no rows"+"(size: "+string.format(size)+")")}for(var r=0;r<rows;r++){transposedRow=transposed[r]=[];for(var c=0;c<cols;c++){transposedRow[c]=clone(data[c][r])}}return transposed;default:throw new RangeError("Matrix must be two dimensional "+"(size: "+string.format(size)+")")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Matrix=math.type.Matrix,collection=math.collection,array=util.array,isNumber=util.number.isNumber,isInteger=util.number.isInteger,isString=util.string.isString,isArray=Array.isArray;math.zeros=function zeros(size){var args=collection.argsToArray(arguments);var f;if(args.length>0&&isString(args[args.length-1])){f=args[args.length-1];args=collection.argsToArray(args.slice(0,args.length-1))}else if(size instanceof Matrix){f=size.storage()}else if(!isArray(size)&&config.matrix==="matrix"){f="default"}var asBigNumber=false;args=args.map(function(value){if(value instanceof BigNumber){asBigNumber=true;value=value.toNumber()}if(!isNumber(value)||!isInteger(value)||value<0){throw new Error("Parameters in function eye must be positive integers")}return value});var defaultValue=asBigNumber?new BigNumber(0):0;if(f){var m=math.matrix(f);if(args.length>0){return m.resize(args,defaultValue)}return m}var res=[];if(args.length>0){return array.resize(res,args,defaultValue)}return res}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isInteger=util.number.isInteger,isCollection=collection.isCollection;math.factorial=function factorial(n){var value,res,preciseFacs;if(arguments.length!=1){throw new math.error.ArgumentsError("factorial",arguments.length,1)}if(isNumber(n)){return n!==Number.POSITIVE_INFINITY?math.gamma(n+1):Math.sqrt(2*Math.PI)}if(n instanceof BigNumber){if(!isNonNegativeInteger(n)){return n.isNegative()||n.isFinite()?math.gamma(n.plus(1)):util.bignumber.tau(config.precision).sqrt()}n=n.toNumber();if(n<smallBigFacs.length){return BigNumber.convert(smallBigFacs[n]).toSD(config.precision)}var precision=config.precision+(Math.log(n)|0);var Big=BigNumber.constructor({precision:precision});n-=smallBigFacs.length;if(preciseFacs=bigBigFacs[precision]){if(preciseFacs[n]){return new BigNumber(preciseFacs[n].toPrecision(config.precision))}res=preciseFacs[preciseFacs.length-1]}else{preciseFacs=bigBigFacs[precision]=[];res=new Big(smallBigFacs[smallBigFacs.length-1]).toSD(precision)}var one=new Big(1);value=new Big(preciseFacs.length+smallBigFacs.length);for(var i=preciseFacs.length;i<n;++i){preciseFacs[i]=res=res.times(value);value=value.plus(one)}preciseFacs[n]=res.times(value);return new BigNumber(preciseFacs[n].toPrecision(config.precision))}if(isBoolean(n)||n===null){return 1}if(isCollection(n)){return collection.deepMap(n,factorial)}throw new math.error.UnsupportedTypeError("factorial",math["typeof"](n))};var isNonNegativeInteger=function(n){return n.isInteger()&&(!n.isNegative()||n.isZero())};var bigBigFacs=[];var smallBigFacs=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isNumber=util.number.isNumber,isInteger=util.number.isInteger,isCollection=collection.isCollection;math.gamma=function gamma(n){var t,x;var g=4.7421875;if(arguments.length!=1){throw new math.error.ArgumentsError("gamma",arguments.length,1)}if(isNumber(n)){if(isInteger(n)){if(n<=0){return isFinite(n)?Infinity:NaN}if(n>171){return Infinity}var value=n-2;var res=n-1;while(value>1){res*=value;value--}if(res==0){res=1}return res}if(n<.5){return Math.PI/(Math.sin(Math.PI*n)*gamma(1-n))}if(n>=171.35){return Infinity}if(n>85){var twoN=n*n;var threeN=twoN*n;var fourN=threeN*n;var fiveN=fourN*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*twoN)-139/(51840*threeN)-571/(2488320*fourN)+163879/(209018880*fiveN)+5246819/(75246796800*fiveN*n))}--n;x=p[0];for(var i=1;i<p.length;++i){x+=p[i]/(n+i)}t=n+g+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*x}if(isComplex(n)){if(n.im==0){return gamma(n.re)}n=new Complex(n.re-1,n.im);x=new Complex(p[0],0);for(var i=1;i<p.length;++i){var real=n.re+i;var den=real*real+n.im*n.im;if(den!=0){x.re+=p[i]*real/den;x.im+=-(p[i]*n.im)/den}else{x.re=p[i]<0?-Infinity:Infinity}}t=new Complex(n.re+g+.5,n.im);var twoPiSqrt=Math.sqrt(2*Math.PI);n.re+=.5;var result=math.pow(t,n);if(result.im==0){result.re*=twoPiSqrt}else if(result.re==0){result.im*=twoPiSqrt}else{result.re*=twoPiSqrt;result.im*=twoPiSqrt}var r=Math.exp(-t.re);t.re=r*Math.cos(-t.im);t.im=r*Math.sin(-t.im);return math.multiply(math.multiply(result,t),x)}if(n instanceof BigNumber){if(n.isInteger()){return n.isNegative()||n.isZero()?new BigNumber(Infinity):math.factorial(n.minus(1))}if(!n.isFinite()){return new BigNumber(n.isNegative()?NaN:Infinity)}}if(isBoolean(n)||n===null){return n?1:Infinity}if(isCollection(n)){return collection.deepMap(n,gamma)}throw new math.error.UnsupportedTypeError("gamma",math["typeof"](n))};var p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var distribution=__webpack_require__(517)(math);math.random=distribution("uniform").random}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var distribution=__webpack_require__(517)(math);math.randomInt=distribution("uniform").randomInt}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var distribution=__webpack_require__(517)(math);math.pickRandom=distribution("uniform").pickRandom}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,isNumber=util.number.isNumber,isInteger=util.number.isInteger;math.permutations=function permutations(n,k){var result,i;var arity=arguments.length;if(arity>2){throw new math.error.ArgumentsError("permutations",arguments.length,2)}if(isNumber(n)){if(!isInteger(n)||n<0){throw new TypeError("Positive integer value expected in function permutations")}if(arity==1){return math.factorial(n)}if(arity==2){if(isNumber(k)){if(!isInteger(k)||k<0){throw new TypeError("Positive integer value expected in function permutations")}if(k>n){throw new TypeError("second argument k must be less than or equal to first argument n")}result=1;for(i=n-k+1;i<=n;i++){result=result*i}return result}}}if(n instanceof BigNumber){if(k===undefined&&isPositiveInteger(n)){return math.factorial(n)}k=BigNumber.convert(k);if(!(k instanceof BigNumber)||!isPositiveInteger(n)||!isPositiveInteger(k)){throw new TypeError("Positive integer value expected in function permutations")}if(k.gt(n)){throw new TypeError("second argument k must be less than or equal to first argument n")}result=new BigNumber(1);for(i=n.minus(k).plus(1);i.lte(n);i=i.plus(1)){result=result.times(i)}return result}throw new math.error.UnsupportedTypeError("permutations",math["typeof"](n))};var isPositiveInteger=function(n){return n.isInteger()&&n.gte(0)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,collection=math.collection,isNumber=util.number.isNumber,isInteger=util.number.isInteger;math.combinations=function combinations(n,k){var max,result,i,ii;var arity=arguments.length;if(arity!=2){throw new math.error.ArgumentsError("combinations",arguments.length,2)}if(isNumber(n)){if(!isInteger(n)||n<0){throw new TypeError("Positive integer value enpected in function combinations")}if(k>n){throw new TypeError("k must be less than or equal to n")}max=Math.max(k,n-k);result=1;for(i=1;i<=n-max;i++){result=result*(max+i)/i;

}return result}if(n instanceof BigNumber){k=BigNumber.convert(k);if(!(k instanceof BigNumber)||!isPositiveInteger(n)||!isPositiveInteger(k)){throw new TypeError("Positive integer value expected in function combinations")}if(k.gt(n)){throw new TypeError("k must be less than n in function combinations")}max=n.minus(k);if(k.lt(max))max=k;result=new BigNumber(1);for(i=new BigNumber(1),ii=n.minus(max);i.lte(ii);i=i.plus(1)){result=result.times(max.plus(i)).dividedBy(i)}return result}throw new math.error.UnsupportedTypeError("combinations",math["typeof"](n))};var isPositiveInteger=function(n){return n.isInteger()&&n.gte(0)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.compare=function compare(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("compare",arguments.length,2)}if(isNumber(x)&&isNumber(y)){return nearlyEqual(x,y,config.epsilon)?0:x>y?1:-1}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return new BigNumber(x.cmp(y))}return compare(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return new BigNumber(x.cmp(y))}return compare(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value>y.value?1:x.value<y.value?-1:0}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,compare)}if(isString(x)||isString(y)){return x>y?1:x<y?-1:0}if(isBoolean(x)||x===null){return compare(+x,y)}if(isBoolean(y)||y===null){return compare(x,+y)}if(isComplex(x)||isComplex(y)){throw new TypeError("No ordering relation is defined for complex numbers")}throw new math.error.UnsupportedTypeError("compare",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var collection=math.collection,isCollection=collection.isCollection,isArray=Array.isArray;math.deepEqual=function deepEqual(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("deepEqual",arguments.length,2)}if(isCollection(x)||isCollection(y)){return _deepEqual(x.valueOf(),y.valueOf())}return math.equal(x,y)};function _deepEqual(x,y){if(isArray(x)){if(isArray(y)){var len=x.length;if(len!==y.length)return false;for(var i=0;i<len;i++){if(!_deepEqual(x[i],y[i]))return false}return true}else{return false}}else{if(isArray(y)){return false}else{return math.equal(x,y)}}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.equal=function equal(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("equal",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){return nearlyEqual(x,y,config.epsilon)}else if(isComplex(y)){return nearlyEqual(x,y.re,config.epsilon)&&nearlyEqual(y.im,0,config.epsilon)}}if(isComplex(x)){if(isNumber(y)){return nearlyEqual(x.re,y,config.epsilon)&&nearlyEqual(x.im,0,config.epsilon)}else if(isComplex(y)){return nearlyEqual(x.re,y.re,config.epsilon)&&nearlyEqual(x.im,y.im,config.epsilon)}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.eq(y)}return equal(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.eq(y)}return equal(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value==y.value}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,equal)}if(isString(x)||isString(y)){return x==y}if(isBoolean(x)){return equal(+x,y)}if(isBoolean(y)){return equal(x,+y)}if(x===null){return y===null}if(y===null){return x===null}if(x===undefined){return y===undefined}if(y===undefined){return x===undefined}throw new math.error.UnsupportedTypeError("equal",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.larger=function larger(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("larger",arguments.length,2)}if(isNumber(x)&&isNumber(y)){return!nearlyEqual(x,y,config.epsilon)&&x>y}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.gt(y)}return larger(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.gt(y)}return larger(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value>y.value}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,larger)}if(isString(x)||isString(y)){return x>y}if(isBoolean(x)||x===null){return larger(+x,y)}if(isBoolean(y)||y===null){return larger(x,+y)}if(isComplex(x)||isComplex(y)){throw new TypeError("No ordering relation is defined for complex numbers")}throw new math.error.UnsupportedTypeError("larger",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.largerEq=function largerEq(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("largerEq",arguments.length,2)}if(isNumber(x)&&isNumber(y)){return nearlyEqual(x,y,config.epsilon)||x>y}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.gte(y)}return largerEq(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.gte(y)}return largerEq(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value>=y.value}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,largerEq)}if(isString(x)||isString(y)){return x>=y}if(isBoolean(x)||x===null){return largerEq(+x,y)}if(isBoolean(y)||y===null){return largerEq(x,+y)}if(isComplex(x)||isComplex(y)){throw new TypeError("No ordering relation is defined for complex numbers")}throw new math.error.UnsupportedTypeError("largerEq",math["typeof"](x),math["typeof"](y))};math.largereq=function(){throw new Error("Function largereq is renamed to largerEq")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.smaller=function smaller(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("smaller",arguments.length,2)}if(isNumber(x)&&isNumber(y)){return!nearlyEqual(x,y,config.epsilon)&&x<y}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.lt(y)}return smaller(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.lt(y)}return smaller(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value<y.value}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,smaller)}if(isString(x)||isString(y)){return x<y}if(isBoolean(x)||x===null){return smaller(+x,y)}if(isBoolean(y)||y===null){return smaller(x,+y)}if(isComplex(x)||isComplex(y)){throw new TypeError("No ordering relation is defined for complex numbers")}throw new math.error.UnsupportedTypeError("smaller",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.smallerEq=function smallerEq(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("smallerEq",arguments.length,2)}if(isNumber(x)&&isNumber(y)){return nearlyEqual(x,y,config.epsilon)||x<y}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)||y===null){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return x.lte(y)}return smallerEq(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)||x===null){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return x.lte(y)}return smallerEq(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value<=y.value}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,smallerEq)}if(isString(x)||isString(y)){return x<=y}if(isBoolean(x)||x===null){return smallerEq(+x,y)}if(isBoolean(y)||y===null){return smallerEq(x,+y)}if(isComplex(x)||isComplex(y)){throw new TypeError("No ordering relation is defined for complex numbers")}throw new math.error.UnsupportedTypeError("smallerEq",math["typeof"](x),math["typeof"](y))};math.smallereq=function(){throw new Error("Function smallereq is renamed to smallerEq")}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,nearlyEqual=util.number.nearlyEqual,isBoolean=util["boolean"].isBoolean,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.unequal=function unequal(x,y){if(arguments.length!=2){throw new math.error.ArgumentsError("unequal",arguments.length,2)}if(isNumber(x)){if(isNumber(y)){return!nearlyEqual(x,y,config.epsilon)}else if(isComplex(y)){return!nearlyEqual(x,y.re,config.epsilon)||!nearlyEqual(y.im,0,config.epsilon)}}if(isComplex(x)){if(isNumber(y)){return!nearlyEqual(x.re,y,config.epsilon)||!nearlyEqual(x.im,0,config.epsilon)}else if(isComplex(y)){return!nearlyEqual(x.re,y.re,config.epsilon)||!nearlyEqual(x.im,y.im,config.epsilon)}}if(x instanceof BigNumber){if(isNumber(y)){y=BigNumber.convert(y)}else if(isBoolean(y)){y=new BigNumber(y?1:0)}if(y instanceof BigNumber){return!x.eq(y)}return unequal(x.toNumber(),y)}if(y instanceof BigNumber){if(isNumber(x)){x=BigNumber.convert(x)}else if(isBoolean(x)){x=new BigNumber(x?1:0)}if(x instanceof BigNumber){return!x.eq(y)}return unequal(x,y.toNumber())}if(isUnit(x)&&isUnit(y)){if(!x.equalBase(y)){throw new Error("Cannot compare units with different base")}return x.value!=y.value}if(isCollection(x)||isCollection(y)){return collection.deepMap2(x,y,unequal)}if(isString(x)||isString(y)){return x!=y}if(isBoolean(x)){return unequal(+x,y)}if(isBoolean(y)){return unequal(x,+y)}if(x===null){return y!==null}if(y===null){return x!==null}if(x===undefined){return y!==undefined}if(y===undefined){return x!==undefined}throw new math.error.UnsupportedTypeError("unequal",math["typeof"](x),math["typeof"](y))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,collection=math.collection,isCollection=collection.isCollection;math.min=function min(args){if(arguments.length==0){throw new SyntaxError("Function min requires one or more parameters (0 provided)")}if(isCollection(args)){if(arguments.length==1){return _min(args)}else if(arguments.length==2){return collection.reduce(arguments[0],arguments[1],_getSmaller)}else{throw new SyntaxError("Wrong number of parameters")}}else{return _min(arguments)}};function _getSmaller(x,y){return math.smaller(x,y)?x:y}function _min(array){var min=undefined;collection.deepForEach(array,function(value){if(min===undefined||math.smaller(value,min)){min=value}});if(min===undefined){throw new Error("Cannot calculate min of an empty array")}return min}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,collection=math.collection,isCollection=collection.isCollection;math.max=function max(args){if(arguments.length==0){throw new SyntaxError("Function max requires one or more parameters (0 provided)")}if(isCollection(args)){if(arguments.length==1){return _max(args)}else if(arguments.length==2){return collection.reduce(arguments[0],arguments[1],_getLarger)}else{throw new SyntaxError("Wrong number of parameters")}}else{return _max(arguments)}};function _getLarger(x,y){return math.larger(x,y)?x:y}function _max(array){var max=undefined;collection.deepForEach(array,function(value){if(max===undefined||math.larger(value,max)){max=value}});if(max===undefined){throw new Error("Cannot calculate max of an empty array")}return max}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,collection=math.collection,isCollection=collection.isCollection,size=__webpack_require__(340).size,isArray=Array.isArray;math.mean=function mean(args){if(arguments.length==0){throw new SyntaxError("Function mean requires one or more parameters (0 provided)")}if(isCollection(args)){if(arguments.length==1){return _mean(args)}else if(arguments.length==2){return _nmean(arguments[0],arguments[1])}else{throw new SyntaxError("Wrong number of parameters")}}else{return _mean(arguments)}};function _nmean(array,dim){var sum=collection.reduce(array,dim,math.add);var s=isArray(array)?size(array):array.size();return math.divide(sum,s[dim])}function _mean(array){var sum=0;var num=0;collection.deepForEach(array,function(value){sum=math.add(sum,value);num++});if(num===0){throw new Error("Cannot calculate mean of an empty array")}return math.divide(sum,num)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,Unit=__webpack_require__(135),BigNumber=math.type.BigNumber,collection=math.collection,isNumber=__webpack_require__(127).isNumber,isCollection=collection.isCollection,flatten=__webpack_require__(340).flatten;math.median=function median(args){if(arguments.length==0){throw new SyntaxError("Function median requires one or more parameters (0 provided)")}if(isCollection(args)){if(arguments.length==1){return _median(args.valueOf())}else if(arguments.length==2){throw new Error("median(A, dim) is not yet supported")}else{throw new SyntaxError("Wrong number of parameters")}}else{return _median(Array.prototype.slice.call(arguments))}};function _median(array){var flat=flatten(array);flat.sort(math.compare);var num=flat.length;if(num==0){throw new Error("Cannot calculate median of an empty array")}if(num%2==0){var left=flat[num/2-1];var right=flat[num/2];if(!isNumber(left)&&!(left instanceof BigNumber)&&!(left instanceof Unit)){throw new math.error.UnsupportedTypeError("median",math["typeof"](left))}if(!isNumber(right)&&!(right instanceof BigNumber)&&!(right instanceof Unit)){throw new math.error.UnsupportedTypeError("median",math["typeof"](right))}return math.divide(math.add(left,right),2)}else{var middle=flat[(num-1)/2];if(!isNumber(middle)&&!(middle instanceof BigNumber)&&!(middle instanceof Unit)){throw new math.error.UnsupportedTypeError("median",math["typeof"](middle))}return middle}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,collection=math.collection,isCollection=collection.isCollection;math.prod=function prod(args){if(arguments.length==0){throw new SyntaxError("Function prod requires one or more parameters (0 provided)")}if(isCollection(args)){if(arguments.length==1){return _prod(args)}else if(arguments.length==2){throw new Error("prod(A, dim) is not yet supported")}else{throw new SyntaxError("Wrong number of parameters")}}else{return _prod(arguments)}};function _prod(array){var prod=undefined;collection.deepForEach(array,function(value){prod=prod===undefined?value:math.multiply(prod,value)});if(prod===undefined){throw new Error("Cannot calculate prod of an empty array")}return prod}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){math.std=function std(array,normalization){if(arguments.length==0){throw new SyntaxError("Function std requires one or more parameters (0 provided)")}var variance=math["var"].apply(null,arguments);return math.sqrt(variance)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,collection=math.collection,isCollection=collection.isCollection;math.sum=function sum(args){if(arguments.length==0){throw new SyntaxError("Function sum requires one or more parameters (0 provided)")}if(isCollection(args)){if(arguments.length==1){return _sum(args)}else if(arguments.length==2){throw new Error("sum(A, dim) is not yet supported")}else{throw new SyntaxError("Wrong number of parameters")}}else{return _sum(arguments)}};function _sum(array){var sum=undefined;collection.deepForEach(array,function(value){sum=sum===undefined?value:math.add(sum,value)});if(sum===undefined){throw new Error("Cannot calculate sum of an empty array")}return sum}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix,BigNumber=math.type.BigNumber,collection=math.collection,isCollection=collection.isCollection,isString=__webpack_require__(347).isString,DEFAULT_NORMALIZATION="unbiased";math["var"]=function variance(array,normalization){if(arguments.length==0){throw new SyntaxError("Function var requires one or more parameters (0 provided)")}if(isCollection(array)){if(arguments.length==1){return _var(array,DEFAULT_NORMALIZATION)}else if(arguments.length==2){if(!isString(normalization)){throw new Error("String expected for parameter normalization")}return _var(array,normalization)}else{throw new SyntaxError("Wrong number of parameters")}}else{return _var(arguments,DEFAULT_NORMALIZATION)}};function _var(array,normalization){var sum=0;var num=0;collection.deepForEach(array,function(value){sum=math.add(sum,value);num++});if(num===0)throw new Error("Cannot calculate var of an empty array");var mean=math.divide(sum,num);sum=0;collection.deepForEach(array,function(value){var diff=math.subtract(value,mean);sum=math.add(sum,math.multiply(diff,diff))});switch(normalization){case"uncorrected":return math.divide(sum,num);case"biased":return math.divide(sum,num+1);case"unbiased":var zero=sum instanceof BigNumber?new BigNumber(0):0;return num==1?zero:math.divide(sum,num-1);default:throw new Error('Unknown normalization "'+normalization+'". '+'Choose "unbiased" (default), "uncorrected", or "biased".')}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,bigArcCos=util.bignumber.arccos_arcsec;math.acos=function acos(x){if(arguments.length!=1){throw new math.error.ArgumentsError("acos",arguments.length,1)}if(isNumber(x)){if(x>=-1&&x<=1){return Math.acos(x)}else{return acos(new Complex(x,0))}}if(isComplex(x)){var temp1=new Complex(x.im*x.im-x.re*x.re+1,-2*x.re*x.im);var temp2=math.sqrt(temp1);var temp3=new Complex(temp2.re-x.im,temp2.im+x.re);var temp4=math.log(temp3);return new Complex(1.5707963267948966-temp4.im,temp4.re)}if(isCollection(x)){return collection.deepMap(x,acos)}if(isBoolean(x)||x===null){return Math.acos(x)}if(x instanceof BigNumber){return bigArcCos(x,BigNumber,false)}throw new math.error.UnsupportedTypeError("acos",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigAcosh=util.bignumber.acosh_asinh_asech_acsch;math.acosh=function acosh(x){if(arguments.length!=1){throw new math.error.ArgumentsError("acosh",arguments.length,1)}if(isNumber(x)){if(x>=1){return Math.log(Math.sqrt(x*x-1)+x)}if(x<=-1){return new Complex(Math.log(Math.sqrt(x*x-1)-x),Math.PI)}return acosh(new Complex(x,0))}if(isComplex(x)){var temp;var acos=math.acos(x);if(acos.im<=0){temp=acos.re;acos.re=-acos.im;acos.im=temp}else{temp=acos.im;acos.im=-acos.re;acos.re=temp}return acos}if(isCollection(x)){return collection.deepMap(x,acosh)}if(isBoolean(x)||x===null){return x?0:new Complex(0,1.5707963267948966)}if(x instanceof BigNumber){return bigAcosh(x,BigNumber,false,false)}throw new math.error.UnsupportedTypeError("acosh",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,bigArcCot=util.bignumber.arctan_arccot;math.acot=function acot(x){if(arguments.length!=1){throw new math.error.ArgumentsError("acot",arguments.length,1)}if(isNumber(x)){return x?Math.atan(1/x):halfPi}if(isComplex(x)){if(x.im==0){return new Complex(x.re?Math.atan(1/x.re):halfPi,0)}var den=x.re*x.re+x.im*x.im;x=den!=0?new Complex(x.re=x.re/den,x.im=-x.im/den):new Complex(x.re!=0?x.re/0:0,x.im!=0?-(x.im/0):0);return math.atan(x)}if(isCollection(x)){return collection.deepMap(x,acot)}if(isBoolean(x)||x===null){return x?.7853981633974483:halfPi}if(x instanceof BigNumber){return bigArcCot(x,BigNumber,true)}throw new math.error.UnsupportedTypeError("acot",math["typeof"](x))};var halfPi=1.5707963267948966}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigAcoth=util.bignumber.atanh_acoth;math.acoth=function acoth(x){if(arguments.length!=1){throw new math.error.ArgumentsError("acoth",arguments.length,1)}if(isNumber(x)){if(x>=1||x<=-1){return isFinite(x)?(Math.log((x+1)/x)+Math.log(x/(x-1)))/2:0}return x?acoth(new Complex(x,0)):new Complex(0,halfPi)}if(isComplex(x)){if(x.re==0&&x.im==0){return new Complex(0,halfPi)}var den=x.re*x.re+x.im*x.im;x=den!=0?new Complex(x.re/den,-x.im/den):new Complex(x.re!=0?x.re/0:0,x.im!=0?-(x.im/0):0);return math.atanh(x)}if(isCollection(x)){return collection.deepMap(x,acoth)}if(isBoolean(x)||x===null){return x?Infinity:new Complex(0,halfPi)}if(x instanceof BigNumber){return bigAcoth(x,BigNumber,true)}throw new math.error.UnsupportedTypeError("acoth",math["typeof"](x))};var halfPi=1.5707963267948966}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,bigArcCsc=util.bignumber.arcsin_arccsc;math.acsc=function acsc(x){if(arguments.length!=1){throw new math.error.ArgumentsError("acsc",arguments.length,1)}if(isNumber(x)){if(x<=-1||x>=1){return Math.asin(1/x)}return acsc(new Complex(x,0))}if(isComplex(x)){if(x.re==0&&x.im==0){return new Complex(halfPi,Infinity)}var den=x.re*x.re+x.im*x.im;x=den!=0?new Complex(x.re=x.re/den,x.im=-x.im/den):new Complex(x.re!=0?x.re/0:0,x.im!=0?-(x.im/0):0);return math.asin(x)}if(isCollection(x)){return collection.deepMap(x,acsc)}if(isBoolean(x)||x===null){return x?halfPi:new Complex(halfPi,Infinity)}if(x instanceof BigNumber){return bigArcCsc(x,BigNumber,true)}throw new math.error.UnsupportedTypeError("acsc",math["typeof"](x))};var halfPi=1.5707963267948966}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigAcsch=util.bignumber.acosh_asinh_asech_acsch;math.acsch=function acsch(x){if(arguments.length!=1){throw new math.error.ArgumentsError("acsch",arguments.length,1)}if(isNumber(x)){x=1/x;return Math.log(x+Math.sqrt(x*x+1))}if(isComplex(x)){if(x.im==0){x=x.re!=0?Math.log(x.re+Math.sqrt(x.re*x.re+1)):Infinity;return new Complex(x,0)}var den=x.re*x.re+x.im*x.im;x=den!=0?new Complex(x.re/den,-x.im/den):new Complex(x.re!=0?x.re/0:0,x.im!=0?-(x.im/0):0);return math.asinh(x)}if(isCollection(x)){return collection.deepMap(x,acsch)}if(isBoolean(x)||x===null){return x?.881373587019543:Infinity}if(x instanceof BigNumber){return bigAcsch(x,BigNumber,true,true)}throw new math.error.UnsupportedTypeError("acsch",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,bigArcSec=util.bignumber.arccos_arcsec;math.asec=function asec(x){if(arguments.length!=1){throw new math.error.ArgumentsError("asec",arguments.length,1)}if(isNumber(x)){if(x<=-1||x>=1){return Math.acos(1/x)}return asec(new Complex(x,0))}if(isComplex(x)){if(x.re==0&&x.im==0){return new Complex(0,Infinity)}var den=x.re*x.re+x.im*x.im;x=den!=0?new Complex(x.re=x.re/den,x.im=-x.im/den):new Complex(x.re!=0?x.re/0:0,x.im!=0?-(x.im/0):0);return math.acos(x)}if(isCollection(x)){return collection.deepMap(x,asec)}if(isBoolean(x)||x===null){return x?0:new Complex(0,Infinity)}if(x instanceof BigNumber){return bigArcSec(x,BigNumber,true)}throw new math.error.UnsupportedTypeError("asec",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigAsech=util.bignumber.acosh_asinh_asech_acsch;math.asech=function asech(x){if(arguments.length!=1){throw new math.error.ArgumentsError("asech",arguments.length,1)}if(isNumber(x)){if(x<=1&&x>=-1){x=1/x;var ret=Math.sqrt(x*x-1);if(x>0){return Math.log(ret+x)}return new Complex(Math.log(ret-x),Math.PI)}return asech(new Complex(x,0))}if(isComplex(x)){if(x.re==0&&x.im==0){return new Complex(Infinity,0)}var den=x.re*x.re+x.im*x.im;x=den!=0?new Complex(x.re/den,-x.im/den):new Complex(x.re!=0?x.re/0:0,x.im!=0?-(x.im/0):0);return math.acosh(x)}if(isCollection(x)){return collection.deepMap(x,asech)}if(isBoolean(x)||x===null){return x?0:Infinity}if(x instanceof BigNumber){return bigAsech(x,BigNumber,false,true)}throw new math.error.UnsupportedTypeError("asech",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,bigArcSin=util.bignumber.arcsin_arccsc;math.asin=function asin(x){if(arguments.length!=1){throw new math.error.ArgumentsError("asin",arguments.length,1)}if(isNumber(x)){if(x>=-1&&x<=1){return Math.asin(x)}else{return asin(new Complex(x,0))}}if(isComplex(x)){var re=x.re;var im=x.im;var temp1=new Complex(im*im-re*re+1,-2*re*im);var temp2=math.sqrt(temp1);var temp3=new Complex(temp2.re-im,temp2.im+re);var temp4=math.log(temp3);return new Complex(temp4.im,-temp4.re)}if(isCollection(x)){return collection.deepMap(x,asin,true)}if(isBoolean(x)||x===null){return Math.asin(x)}if(x instanceof BigNumber){return bigArcSin(x,BigNumber,false)}throw new math.error.UnsupportedTypeError("asin",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigAsinh=util.bignumber.acosh_asinh_asech_acsch;math.asinh=function asinh(x){if(arguments.length!=1){throw new math.error.ArgumentsError("asinh",arguments.length,1)}if(isNumber(x)){return Math.log(Math.sqrt(x*x+1)+x)}if(isComplex(x)){var temp=x.im;x.im=-x.re;x.re=temp;var asin=math.asin(x);x.re=-x.im;x.im=temp;temp=asin.re;asin.re=-asin.im;asin.im=temp;return asin}if(isCollection(x)){return collection.deepMap(x,asinh,true)}if(isBoolean(x)||x===null){return x?.881373587019543:0}if(x instanceof BigNumber){return bigAsinh(x,BigNumber,true,false)}throw new math.error.UnsupportedTypeError("asinh",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,bigArcTan=util.bignumber.arctan_arccot;

math.atan=function atan(x){if(arguments.length!=1){throw new math.error.ArgumentsError("atan",arguments.length,1)}if(isNumber(x)){return Math.atan(x)}if(isComplex(x)){if(x.re==0){if(x.im==1){return new Complex(0,Infinity)}if(x.im==-1){return new Complex(0,-Infinity)}}var re=x.re;var im=x.im;var den=re*re+(1-im)*(1-im);var temp1=new Complex((1-im*im-re*re)/den,-2*re/den);var temp2=math.log(temp1);return new Complex(-.5*temp2.im,.5*temp2.re)}if(isCollection(x)){return collection.deepMap(x,atan,true)}if(isBoolean(x)||x===null){return Math.atan(x)}if(x instanceof BigNumber){return bigArcTan(x,BigNumber,false)}throw new math.error.UnsupportedTypeError("atan",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isCollection=collection.isCollection,atan2Big=util.bignumber.arctan2;math.atan2=function atan2(y,x){if(arguments.length!=2){throw new math.error.ArgumentsError("atan2",arguments.length,2)}if(isNumber(y)){if(isNumber(x)){return Math.atan2(y,x)}if(x instanceof BigNumber){return atan2Big(new BigNumber(y),x,BigNumber)}}if(isCollection(y)||isCollection(x)){return collection.deepMap2(y,x,atan2)}if(isBoolean(y)||y===null){return atan2(y?1:0,x)}if(isBoolean(x)||x===null){return atan2(y,x?1:0)}if(y instanceof BigNumber){if(isNumber(x)){return atan2Big(y,new BigNumber(x),BigNumber)}if(x instanceof BigNumber){return atan2Big(y,x,BigNumber)}return atan2(y.toNumber(),x)}if(x instanceof BigNumber){if(y instanceof BigNumber){return atan2Big(y,x,BigNumber)}return atan2(y,x.toNumber())}throw new math.error.UnsupportedTypeError("atan2",math["typeof"](y),math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigAtanh=util.bignumber.atanh_acoth;math.atanh=function atanh(x){if(arguments.length!=1){throw new math.error.ArgumentsError("atanh",arguments.length,1)}if(isNumber(x)){if(x<=1&&x>=-1){return Math.log((1+x)/(1-x))/2}return atanh(new Complex(x,0))}if(isComplex(x)){var noIM=x.re>1&&x.im==0;var oneMinus=1-x.re;var onePlus=1+x.re;var den=oneMinus*oneMinus+x.im*x.im;x=den!=0?new Complex((onePlus*oneMinus-x.im*x.im)/den,(x.im*oneMinus+onePlus*x.im)/den):new Complex(x.re!=-1?x.re/0:0,x.im!=0?x.im/0:0);var temp=x.re;x.re=Math.log(Math.sqrt(x.re*x.re+x.im*x.im))/2;x.im=Math.atan2(x.im,temp)/2;if(noIM){x.im=-x.im}return x}if(isCollection(x)){return collection.deepMap(x,atanh,true)}if(isBoolean(x)||x===null){return x?Infinity:0}if(x instanceof BigNumber){return bigAtanh(x,BigNumber,false)}throw new math.error.UnsupportedTypeError("atanh",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigCos=util.bignumber.cos_sin_sec_csc;math.cos=function cos(x){if(arguments.length!=1){throw new math.error.ArgumentsError("cos",arguments.length,1)}if(isNumber(x)){return Math.cos(x)}if(isComplex(x)){return new Complex(Math.cos(x.re)*math.cosh(-x.im),Math.sin(x.re)*math.sinh(-x.im))}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function cos is no angle")}return Math.cos(x.value)}if(isCollection(x)){return collection.deepMap(x,cos)}if(isBoolean(x)||x===null){return Math.cos(x)}if(x instanceof BigNumber){return bigCos(x,BigNumber,0,false)}throw new math.error.UnsupportedTypeError("cos",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigCosh=util.bignumber.cosh_sinh_csch_sech;math.cosh=function cosh(x){if(arguments.length!=1){throw new math.error.ArgumentsError("cosh",arguments.length,1)}if(isNumber(x)){return(Math.exp(x)+Math.exp(-x))/2}if(isComplex(x)){var ep=Math.exp(x.re);var en=Math.exp(-x.re);return new Complex(Math.cos(x.im)*(ep+en)/2,Math.sin(x.im)*(ep-en)/2)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function cosh is no angle")}return cosh(x.value)}if(isCollection(x)){return collection.deepMap(x,cosh)}if(isBoolean(x)||x===null){return cosh(x?1:0)}if(x instanceof BigNumber){return bigCosh(x,BigNumber,false,false)}throw new math.error.UnsupportedTypeError("cosh",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigCot=util.bignumber.tan_cot;math.cot=function cot(x){if(arguments.length!=1){throw new math.error.ArgumentsError("cot",arguments.length,1)}if(isNumber(x)){return 1/Math.tan(x)}if(isComplex(x)){var den=Math.exp(-4*x.im)-2*Math.exp(-2*x.im)*Math.cos(2*x.re)+1;return new Complex(2*Math.exp(-2*x.im)*Math.sin(2*x.re)/den,(Math.exp(-4*x.im)-1)/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function cot is no angle")}return 1/Math.tan(x.value)}if(isCollection(x)){return collection.deepMap(x,cot)}if(isBoolean(x)||x===null){return cot(+x)}if(x instanceof BigNumber){return bigCot(x,BigNumber,true)}throw new math.error.UnsupportedTypeError("cot",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigCoth=util.bignumber.tanh_coth;math.coth=function coth(x){if(arguments.length!=1){throw new math.error.ArgumentsError("coth",arguments.length,1)}if(isNumber(x)){var e=Math.exp(2*x);return(e+1)/(e-1)}if(isComplex(x)){var r=Math.exp(2*x.re);var re=r*Math.cos(2*x.im);var im=r*Math.sin(2*x.im);var den=(re-1)*(re-1)+im*im;return new Complex(((re+1)*(re-1)+im*im)/den,-2*im/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function coth is no angle")}return coth(x.value)}if(isCollection(x)){return collection.deepMap(x,coth)}if(isBoolean(x)||x===null){return coth(x?1:0)}if(x instanceof BigNumber){return bigCoth(x,BigNumber,true)}throw new math.error.UnsupportedTypeError("coth",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigCsc=util.bignumber.cos_sin_sec_csc;math.csc=function csc(x){if(arguments.length!=1){throw new math.error.ArgumentsError("csc",arguments.length,1)}if(isNumber(x)){return 1/Math.sin(x)}if(isComplex(x)){var den=.25*(Math.exp(-2*x.im)+Math.exp(2*x.im))-.5*Math.cos(2*x.re);return new Complex(.5*Math.sin(x.re)*(Math.exp(-x.im)+Math.exp(x.im))/den,.5*Math.cos(x.re)*(Math.exp(-x.im)-Math.exp(x.im))/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function csc is no angle")}return 1/Math.sin(x.value)}if(isCollection(x)){return collection.deepMap(x,csc)}if(isBoolean(x)||x===null){return csc(+x)}if(x instanceof BigNumber){return bigCsc(x,BigNumber,1,true)}throw new math.error.UnsupportedTypeError("csc",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,number=util.number,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigCsch=util.bignumber.cosh_sinh_csch_sech;math.csch=function csch(x){if(arguments.length!=1){throw new math.error.ArgumentsError("csch",arguments.length,1)}if(isNumber(x)){if(x==0)return Number.POSITIVE_INFINITY;return Math.abs(2/(Math.exp(x)-Math.exp(-x)))*number.sign(x)}if(isComplex(x)){var ep=Math.exp(x.re);var en=Math.exp(-x.re);var re=Math.cos(x.im)*(ep-en);var im=Math.sin(x.im)*(ep+en);var den=re*re+im*im;return new Complex(2*re/den,-2*im/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function csch is no angle")}return csch(x.value)}if(isCollection(x)){return collection.deepMap(x,csch)}if(isBoolean(x)||x===null){return csch(x?1:0)}if(x instanceof BigNumber){return bigCsch(x,BigNumber,true,true)}throw new math.error.UnsupportedTypeError("csch",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigSec=util.bignumber.cos_sin_sec_csc;math.sec=function sec(x){if(arguments.length!=1){throw new math.error.ArgumentsError("sec",arguments.length,1)}if(isNumber(x)){return 1/Math.cos(x)}if(isComplex(x)){var den=.25*(Math.exp(-2*x.im)+Math.exp(2*x.im))+.5*Math.cos(2*x.re);return new Complex(.5*Math.cos(x.re)*(Math.exp(-x.im)+Math.exp(x.im))/den,.5*Math.sin(x.re)*(Math.exp(x.im)-Math.exp(-x.im))/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function sec is no angle")}return 1/Math.cos(x.value)}if(isCollection(x)){return collection.deepMap(x,sec)}if(isBoolean(x)||x===null){return sec(+x)}if(x instanceof BigNumber){return bigSec(x,BigNumber,0,true)}throw new math.error.UnsupportedTypeError("sec",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigSech=util.bignumber.cosh_sinh_csch_sech;math.sech=function sech(x){if(arguments.length!=1){throw new math.error.ArgumentsError("sech",arguments.length,1)}if(isNumber(x)){return 2/(Math.exp(x)+Math.exp(-x))}if(isComplex(x)){var ep=Math.exp(x.re);var en=Math.exp(-x.re);var re=Math.cos(x.im)*(ep+en);var im=Math.sin(x.im)*(ep-en);var den=re*re+im*im;return new Complex(2*re/den,-2*im/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function sech is no angle")}return sech(x.value)}if(isCollection(x)){return collection.deepMap(x,sech)}if(isBoolean(x)||x===null){return sech(x?1:0)}if(x instanceof BigNumber){return bigSech(x,BigNumber,false,true)}throw new math.error.UnsupportedTypeError("sech",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigSin=util.bignumber.cos_sin_sec_csc;math.sin=function sin(x){if(arguments.length!=1){throw new math.error.ArgumentsError("sin",arguments.length,1)}if(isNumber(x)){return Math.sin(x)}if(isComplex(x)){return new Complex(Math.sin(x.re)*math.cosh(-x.im),Math.cos(x.re)*math.sinh(x.im))}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function sin is no angle")}return Math.sin(x.value)}if(isCollection(x)){return collection.deepMap(x,sin,true)}if(isBoolean(x)||x===null){return Math.sin(x)}if(x instanceof BigNumber){return bigSin(x,BigNumber,1,false)}throw new math.error.UnsupportedTypeError("sin",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigSinh=util.bignumber.cosh_sinh_csch_sech;math.sinh=function sinh(x){if(arguments.length!=1){throw new math.error.ArgumentsError("sinh",arguments.length,1)}if(isNumber(x)){if(Math.abs(x)<1){return x+x*x*x/6+x*x*x*x*x/120}else{return(Math.exp(x)-Math.exp(-x))/2}}if(isComplex(x)){var cim=Math.cos(x.im);var sim=Math.sin(x.im);var ep=Math.exp(x.re);var en=Math.exp(-x.re);return new Complex(cim*(ep-en)/2,sim*(ep+en)/2)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function sinh is no angle")}return sinh(x.value)}if(isCollection(x)){return collection.deepMap(x,sinh,true)}if(isBoolean(x)||x===null){return sinh(x?1:0)}if(x instanceof BigNumber){return bigSinh(x,BigNumber,true,false)}throw new math.error.UnsupportedTypeError("sinh",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math,config){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigTan=util.bignumber.tan_cot;math.tan=function tan(x){if(arguments.length!=1){throw new math.error.ArgumentsError("tan",arguments.length,1)}if(isNumber(x)){return Math.tan(x)}if(isComplex(x)){var den=Math.exp(-4*x.im)+2*Math.exp(-2*x.im)*Math.cos(2*x.re)+1;return new Complex(2*Math.exp(-2*x.im)*Math.sin(2*x.re)/den,(1-Math.exp(-4*x.im))/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function tan is no angle")}return Math.tan(x.value)}if(isCollection(x)){return collection.deepMap(x,tan,true)}if(isBoolean(x)||x===null){return Math.tan(x)}if(x instanceof BigNumber){return bigTan(x,BigNumber,false)}throw new math.error.UnsupportedTypeError("tan",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),BigNumber=math.type.BigNumber,Complex=__webpack_require__(131),Unit=__webpack_require__(135),collection=math.collection,isNumber=util.number.isNumber,isBoolean=util["boolean"].isBoolean,isComplex=Complex.isComplex,isUnit=Unit.isUnit,isCollection=collection.isCollection,bigTanh=util.bignumber.tanh_coth;math.tanh=function tanh(x){if(arguments.length!=1){throw new math.error.ArgumentsError("tanh",arguments.length,1)}if(isNumber(x)){var e=Math.exp(2*x);return(e-1)/(e+1)}if(isComplex(x)){var r=Math.exp(2*x.re);var re=r*Math.cos(2*x.im);var im=r*Math.sin(2*x.im);var den=(re+1)*(re+1)+im*im;return new Complex(((re-1)*(re+1)+im*im)/den,im*2/den)}if(isUnit(x)){if(!x.hasBase(Unit.BASE_UNITS.ANGLE)){throw new TypeError("Unit in function tanh is no angle")}return tanh(x.value)}if(isCollection(x)){return collection.deepMap(x,tanh,true)}if(isBoolean(x)||x===null){return tanh(x?1:0)}if(x instanceof BigNumber){return bigTanh(x,BigNumber,false)}throw new math.error.UnsupportedTypeError("tanh",math["typeof"](x))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),Unit=__webpack_require__(135),collection=math.collection,isString=util.string.isString,isUnit=Unit.isUnit,isCollection=collection.isCollection;math.to=function to(x,unit){if(arguments.length!=2){throw new math.error.ArgumentsError("to",arguments.length,2)}if(isUnit(x)){if(isUnit(unit)||isString(unit)){return x.to(unit)}}if(isCollection(x)||isCollection(unit)){return collection.deepMap2(x,unit,to)}throw new math.error.UnsupportedTypeError("to",math["typeof"](x),math["typeof"](unit))}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),object=util.object;math.clone=function clone(x){if(arguments.length!=1){throw new math.error.ArgumentsError("clone",arguments.length,1)}return object.clone(x)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;math.filter=function(x,test){if(arguments.length!==2){throw new math.error.ArgumentsError("filter",arguments.length,2)}if(x instanceof Matrix){var size=x.size();if(size.length>1){throw new Error("Only one dimensional matrices supported")}return math.matrix(_filter(x.toArray(),test))}else if(Array.isArray(x)){return _filter(x,test)}else{throw new math.error.UnsupportedTypeError("filter",math["typeof"](x),math["typeof"](compare))}};function _filter(x,test){if(typeof test==="function"){return x.filter(function(entry){return test(entry)})}else if(test instanceof RegExp){return x.filter(function(entry){return test.test(entry)})}else{throw new TypeError("Function or RegExp expected")}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),string=util.string;math.format=function format(value,options){var num=arguments.length;if(num!==1&&num!==2){throw new math.error.ArgumentsError("format",num,1,2)}return string.format(value,options)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),Complex=__webpack_require__(131),Unit=__webpack_require__(135),isNumber=util.number.isNumber,isString=util.string.isString,isComplex=Complex.isComplex,isUnit=Unit.isUnit;math["import"]=function math_import(object,options){var num=arguments.length;if(num!=1&&num!=2){throw new math.error.ArgumentsError("import",num,1,2)}var name;var opts={override:options&&options.override||false,wrap:options&&options.wrap||false};if(isString(object)){if(true){var _module=__webpack_require__(378)(object);math_import(_module,options)}else{throw new Error("Cannot load module: require not available.")}}else if(typeof object==="object"){for(name in object){if(object.hasOwnProperty(name)){var value=object[name];if(isSupportedType(value)){_import(name,value,opts)}else{math_import(value,options)}}}}else{throw new TypeError("Object or module name expected")}};function _import(name,value,options){if(options.override||math[name]===undefined){if(options.wrap&&typeof value==="function"){math[name]=function(){var args=[];for(var i=0,len=arguments.length;i<len;i++){var arg=arguments[i];args[i]=arg&&arg.valueOf()}return value.apply(math,args)};if(value&&value.transform){math[name].transform=value.transform}}else{math[name]=value}if(value&&value.transform){math.expression.transform[name]=value.transform}math.chaining.Chain.createProxy(name,value)}}function isSupportedType(object){return typeof object=="function"||isNumber(object)||isString(object)||isComplex(object)||isUnit(object)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;math.map=function(x,callback){if(arguments.length!=2){throw new math.error.ArgumentsError("map",arguments.length,2)}if(Array.isArray(x)){return _mapArray(x,callback)}else if(x instanceof Matrix){return x.map(callback)}else{throw new math.error.UnsupportedTypeError("map",math["typeof"](x))}};function _mapArray(arrayIn,callback){var recurse=function(value,index){if(Array.isArray(value)){return value.map(function(child,i){return recurse(child,index.concat(i))})}else{return callback(value,index,arrayIn)}};return recurse(arrayIn,[])}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var util=__webpack_require__(346),isString=util.string.isString;math.print=function print(template,values,precision){var num=arguments.length;if(num!=2&&num!=3){throw new math.error.ArgumentsError("print",num,2,3)}if(!isString(template)){throw new TypeError("String expected as first parameter in function format")}if(!(values instanceof Object)){throw new TypeError("Object expected as second parameter in function format")}return template.replace(/\$([\w\.]+)/g,function(original,key){var keys=key.split(".");var value=values[keys.shift()];while(keys.length&&value!==undefined){var k=keys.shift();value=k?value[k]:value+"."}if(value!==undefined){if(!isString(value)){return math.format(value,precision)}else{return value}}return original})}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;math.sort=function(x,compare){var _compare=null;if(arguments.length===1){_compare=math.compare}else if(arguments.length===2){if(typeof compare==="function"){_compare=compare}else if(compare==="asc"){_compare=math.compare}else if(compare==="desc"){_compare=function(a,b){return-math.compare(a,b)}}else{throw new math.error.UnsupportedTypeError("sort",math["typeof"](x),math["typeof"](compare))}}else{throw new math.error.ArgumentsError("sort",arguments.length,1,2)}if(x instanceof Matrix){var size=x.size();if(size.length>1){throw new Error("Only one dimensional matrices supported")}return math.matrix(x.toArray().sort(_compare))}else if(Array.isArray(x)){return x.sort(_compare)}else{throw new math.error.UnsupportedTypeError("sort",math["typeof"](x),math["typeof"](compare))}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var types=__webpack_require__(518),Complex=__webpack_require__(131),Matrix=math.type.Matrix,Unit=__webpack_require__(135),Index=__webpack_require__(133),Range=__webpack_require__(132),Help=__webpack_require__(136);math["typeof"]=function _typeof(x){if(arguments.length!=1){throw new math.error.ArgumentsError("typeof",arguments.length,1)}var type=types.type(x);if(type==="object"){if(x instanceof Complex)return"complex";if(x instanceof Matrix)return"matrix";if(x instanceof Unit)return"unit";if(x instanceof Index)return"index";if(x instanceof Range)return"range";if(x instanceof Help)return"help";if(x instanceof math.type.BigNumber)return"bignumber";if(x instanceof math.chaining.Chain)return"chain"}return type}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;math.forEach=function(x,callback){if(arguments.length!=2){throw new math.error.ArgumentsError("forEach",arguments.length,2)}if(Array.isArray(x)){return _forEachArray(x,callback)}else if(x instanceof Matrix){return x.forEach(callback)}else{throw new math.error.UnsupportedTypeError("forEach",math["typeof"](x))}};function _forEachArray(array,callback){var recurse=function(value,index){if(Array.isArray(value)){value.forEach(function(child,i){recurse(child,index.concat(i))})}else{callback(value,index,array)}};recurse(array,[])}}},function(module,exports,__webpack_require__){(function(setImmediate){var Route=__webpack_require__(162);var Layer=__webpack_require__(382);var methods=__webpack_require__(530);var mixin=__webpack_require__(533);var debug=__webpack_require__(574)("express:router");var deprecate=__webpack_require__(532)("express");var parseUrl=__webpack_require__(538);var utils=__webpack_require__(383);var objectRegExp=/^\[object (\S+)\]$/;var slice=Array.prototype.slice;var toString=Object.prototype.toString;var proto=module.exports=function(options){options=options||{};function router(req,res,next){router.handle(req,res,next)}router.__proto__=proto;router.params={};router._params=[];router.caseSensitive=options.caseSensitive;router.mergeParams=options.mergeParams;router.strict=options.strict;router.stack=[];return router};proto.param=function param(name,fn){if(typeof name==="function"){deprecate("router.param(fn): Refactor to use path params");this._params.push(name);return}var params=this._params;var len=params.length;var ret;if(name[0]===":"){deprecate("router.param("+JSON.stringify(name)+", fn): Use router.param("+JSON.stringify(name.substr(1))+", fn) instead");name=name.substr(1)}for(var i=0;i<len;++i){if(ret=params[i](name,fn)){fn=ret}}if("function"!=typeof fn){throw new Error("invalid param() call for "+name+", got "+fn)}(this.params[name]=this.params[name]||[]).push(fn);return this};proto.handle=function(req,res,done){var self=this;debug("dispatching %s %s",req.method,req.url);var search=1+req.url.indexOf("?");var pathlength=search?search-1:req.url.length;var fqdn=req.url[0]!=="/"&&1+req.url.substr(0,pathlength).indexOf("://");var protohost=fqdn?req.url.substr(0,req.url.indexOf("/",2+fqdn)):"";var idx=0;var removed="";var slashAdded=false;var paramcalled={};var options=[];var stack=self.stack;var parentParams=req.params;var parentUrl=req.baseUrl||"";done=restore(done,req,"baseUrl","next","params");req.next=next;if(req.method==="OPTIONS"){done=wrap(done,function(old,err){if(err||options.length===0)return old(err);sendOptionsResponse(res,options,old)})}req.baseUrl=parentUrl;req.originalUrl=req.originalUrl||req.url;next();function next(err){var layerError=err==="route"?null:err;if(slashAdded){req.url=req.url.substr(1);slashAdded=false}if(removed.length!==0){req.baseUrl=parentUrl;req.url=protohost+removed+req.url.substr(protohost.length);removed=""}if(idx>=stack.length){setImmediate(done,layerError);return}var path=getPathname(req);if(path==null){return done(layerError)}var layer;var match;var route;while(match!==true&&idx<stack.length){layer=stack[idx++];match=matchLayer(layer,path);route=layer.route;if(typeof match!=="boolean"){layerError=layerError||match}if(match!==true){continue}if(!route){continue}if(layerError){match=false;continue}var method=req.method;var has_method=route._handles_method(method);if(!has_method&&method==="OPTIONS"){appendMethods(options,route._options())}if(!has_method&&method!=="HEAD"){match=false;continue}}if(match!==true){return done(layerError)}if(route){req.route=route}req.params=self.mergeParams?mergeParams(layer.params,parentParams):layer.params;var layerPath=layer.path;self.process_params(layer,paramcalled,req,res,function(err){if(err){return next(layerError||err)}if(route){return layer.handle_request(req,res,next)}trim_prefix(layer,layerError,layerPath,path)})}function trim_prefix(layer,layerError,layerPath,path){var c=path[layerPath.length];if(c&&"/"!==c&&"."!==c)return next(layerError);if(layerPath.length!==0){debug("trim prefix (%s) from url %s",layerPath,req.url);removed=layerPath;req.url=protohost+req.url.substr(protohost.length+removed.length);if(!fqdn&&req.url[0]!=="/"){req.url="/"+req.url;slashAdded=true}req.baseUrl=parentUrl+(removed[removed.length-1]==="/"?removed.substring(0,removed.length-1):removed)}debug("%s %s : %s",layer.name,layerPath,req.originalUrl);if(layerError){layer.handle_error(layerError,req,res,next)}else{layer.handle_request(req,res,next)}}};proto.process_params=function(layer,called,req,res,done){var params=this.params;var keys=layer.keys;if(!keys||keys.length===0){return done()}var i=0;var name;var paramIndex=0;var key;var paramVal;var paramCallbacks;var paramCalled;function param(err){if(err){return done(err)}if(i>=keys.length){return done()}paramIndex=0;key=keys[i++];if(!key){return done()}name=key.name;paramVal=req.params[name];paramCallbacks=params[name];paramCalled=called[name];if(paramVal===undefined||!paramCallbacks){return param()}if(paramCalled&&(paramCalled.error||paramCalled.match===paramVal)){req.params[name]=paramCalled.value;return param(paramCalled.error)}called[name]=paramCalled={error:null,match:paramVal,value:paramVal};paramCallback()}function paramCallback(err){var fn=paramCallbacks[paramIndex++];paramCalled.value=req.params[key.name];if(err){paramCalled.error=err;param(err);return}if(!fn)return param();try{fn(req,res,paramCallback,paramVal,key.name)}catch(e){paramCallback(e)}}param()};proto.use=function use(fn){var offset=0;var path="/";if(typeof fn!=="function"){var arg=fn;while(Array.isArray(arg)&&arg.length!==0){arg=arg[0]}if(typeof arg!=="function"){offset=1;path=fn}}var callbacks=utils.flatten(slice.call(arguments,offset));if(callbacks.length===0){throw new TypeError("Router.use() requires middleware functions")}callbacks.forEach(function(fn){if(typeof fn!=="function"){throw new TypeError("Router.use() requires middleware function but got a "+gettype(fn))}debug("use %s %s",path,fn.name||"<anonymous>");var layer=new Layer(path,{sensitive:this.caseSensitive,strict:false,end:false},fn);layer.route=undefined;this.stack.push(layer)},this);return this};proto.route=function(path){var route=new Route(path);var layer=new Layer(path,{sensitive:this.caseSensitive,strict:this.strict,end:true},route.dispatch.bind(route));layer.route=route;this.stack.push(layer);return route};methods.concat("all").forEach(function(method){proto[method]=function(path){var route=this.route(path);route[method].apply(route,slice.call(arguments,1));return this}});function appendMethods(list,addition){for(var i=0;i<addition.length;i++){var method=addition[i];if(list.indexOf(method)===-1){list.push(method)}}}function getPathname(req){try{return parseUrl(req).pathname}catch(err){return undefined}}function gettype(obj){var type=typeof obj;if(type!=="object"){return type}return toString.call(obj).replace(objectRegExp,"$1")}function matchLayer(layer,path){try{return layer.match(path)}catch(err){return err}}function mergeParams(params,parent){if(typeof parent!=="object"||!parent){return params}var obj=mixin({},parent);if(!(0 in params)||!(0 in parent)){return mixin(obj,params)}var i=0;var o=0;while(i===o||o in parent){if(i in params)i++;if(o in parent)o++}for(i--;i>=0;i--){params[i+o]=params[i];if(i<o){delete params[i]}}return mixin(parent,params)}function restore(fn,obj){var props=new Array(arguments.length-2);var vals=new Array(arguments.length-2);for(var i=0;i<props.length;i++){props[i]=arguments[i+2];vals[i]=obj[props[i]]}return function(err){for(var i=0;i<props.length;i++){obj[props[i]]=vals[i]}return fn.apply(this,arguments)}}function sendOptionsResponse(res,options,next){try{var body=options.join(",");res.set("Allow",body);res.send(body)}catch(err){next(err)}}function wrap(old,fn){return function proxy(){var args=new Array(arguments.length+1);args[0]=old;for(var i=0,len=arguments.length;i<len;i++){args[i+1]=arguments[i]}fn.apply(this,args)}}}).call(exports,__webpack_require__(61).setImmediate)},function(module,exports,__webpack_require__){(function(global,Buffer){(function(){var g=("undefined"===typeof window?global:window)||{};_crypto=g.crypto||g.msCrypto||__webpack_require__(387);module.exports=function(size){if(_crypto.getRandomValues){var bytes=new Buffer(size);_crypto.getRandomValues(bytes);return bytes}else if(_crypto.randomBytes){return _crypto.randomBytes(size)}else throw new Error("secure random number generation not supported by this browser\n"+"use chrome, FireFox or Internet Explorer 11");

}})()}).call(exports,function(){return this}(),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var createHash=__webpack_require__(588);var md5=toConstructor(__webpack_require__(529));var rmd160=toConstructor(__webpack_require__(597));function toConstructor(fn){return function(){var buffers=[];var m={update:function(data,enc){if(!Buffer.isBuffer(data))data=new Buffer(data,enc);buffers.push(data);return this},digest:function(enc){var buf=Buffer.concat(buffers);var r=fn(buf);buffers=null;return enc?r.toString(enc):r}};return m}}module.exports=function(alg){if("md5"===alg)return new md5;if("rmd160"===alg)return new rmd160;return createHash(alg)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var createHash=__webpack_require__(306);var zeroBuffer=new Buffer(128);zeroBuffer.fill(0);module.exports=Hmac;function Hmac(alg,key){if(!(this instanceof Hmac))return new Hmac(alg,key);this._opad=opad;this._alg=alg;var blocksize=alg==="sha512"?128:64;key=this._key=!Buffer.isBuffer(key)?new Buffer(key):key;if(key.length>blocksize){key=createHash(alg).update(key).digest()}else if(key.length<blocksize){key=Buffer.concat([key,zeroBuffer],blocksize)}var ipad=this._ipad=new Buffer(blocksize);var opad=this._opad=new Buffer(blocksize);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^54;opad[i]=key[i]^92}this._hash=createHash(alg).update(ipad)}Hmac.prototype.update=function(data,enc){this._hash.update(data,enc);return this};Hmac.prototype.digest=function(enc){var h=this._hash.digest();return createHash(this._alg).update(this._opad).update(h).digest(enc)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var pbkdf2Export=__webpack_require__(596);module.exports=function(crypto,exports){exports=exports||{};var exported=pbkdf2Export(crypto);exports.pbkdf2=exported.pbkdf2;exports.pbkdf2Sync=exported.pbkdf2Sync;return exports}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(316);var util=__webpack_require__(52);var Response=module.exports=function(res){this.offset=0;this.readable=true};util.inherits(Response,Stream);var capable={streaming:true,status2:true};function parseHeaders(res){var lines=res.getAllResponseHeaders().split(/\r?\n/);var headers={};for(var i=0;i<lines.length;i++){var line=lines[i];if(line==="")continue;var m=line.match(/^([^:]+):\s*(.*)/);if(m){var key=m[1].toLowerCase(),value=m[2];if(headers[key]!==undefined){if(isArray(headers[key])){headers[key].push(value)}else{headers[key]=[headers[key],value]}}else{headers[key]=value}}else{headers[line]=true}}return headers}Response.prototype.getResponse=function(xhr){var respType=String(xhr.responseType).toLowerCase();if(respType==="blob")return xhr.responseBlob||xhr.response;if(respType==="arraybuffer")return xhr.response;return xhr.responseText};Response.prototype.getHeader=function(key){return this.headers[key.toLowerCase()]};Response.prototype.handle=function(res){if(res.readyState===2&&capable.status2){try{this.statusCode=res.status;this.headers=parseHeaders(res)}catch(err){capable.status2=false}if(capable.status2){this.emit("ready")}}else if(capable.streaming&&res.readyState===3){try{if(!this.statusCode){this.statusCode=res.status;this.headers=parseHeaders(res);this.emit("ready")}}catch(err){}try{this._emitData(res)}catch(err){capable.streaming=false}}else if(res.readyState===4){if(!this.statusCode){this.statusCode=res.status;this.emit("ready")}this._emitData(res);if(res.error){this.emit("error",this.getResponse(res))}else this.emit("end");this.emit("close")}};Response.prototype._emitData=function(res){var respBody=this.getResponse(res);if(respBody.toString().match(/ArrayBuffer/)){this.emit("data",new Uint8Array(respBody,this.offset));this.offset=respBody.byteLength;return}if(respBody.length>this.offset){this.emit("data",respBody.slice(this.offset));this.offset=respBody.length}};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){var util;try{util=__webpack_require__(52)}catch(err){util=__webpack_require__(52)}module.exports=util},function(module,exports,__webpack_require__){var to_array=__webpack_require__(312);function Queue(){this.tail=[];this.head=[];this.offset=0}Queue.prototype.shift=function(){if(this.offset===this.head.length){var tmp=this.head;tmp.length=0;this.head=this.tail;this.tail=tmp;this.offset=0;if(this.head.length===0){return}}return this.head[this.offset++]};Queue.prototype.push=function(item){return this.tail.push(item)};Queue.prototype.forEach=function(fn,thisv){var array=this.head.slice(this.offset),i,il;array.push.apply(array,this.tail);if(thisv){for(i=0,il=array.length;i<il;i+=1){fn.call(thisv,array[i],i,array)}}else{for(i=0,il=array.length;i<il;i+=1){fn(array[i],i,array)}}return array};Queue.prototype.getLength=function(){return this.head.length-this.offset+this.tail.length};Object.defineProperty(Queue.prototype,"length",{get:function(){return this.getLength()}});if(typeof module!=="undefined"&&module.exports){module.exports=Queue}},function(module,exports,__webpack_require__){function to_array(args){var len=args.length,arr=new Array(len),i;for(i=0;i<len;i+=1){arr[i]=args[i]}return arr}module.exports=to_array},function(module,exports,__webpack_require__){var events=__webpack_require__(120),util=__webpack_require__(310),hiredis=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "hiredis"');e.code="MODULE_NOT_FOUND";throw e}());exports.debug_mode=false;exports.name="hiredis";function HiredisReplyParser(options){this.name=exports.name;this.options=options||{};this.reset();events.EventEmitter.call(this)}util.inherits(HiredisReplyParser,events.EventEmitter);exports.Parser=HiredisReplyParser;HiredisReplyParser.prototype.reset=function(){this.reader=new hiredis.Reader({return_buffers:this.options.return_buffers||false})};HiredisReplyParser.prototype.execute=function(data){var reply;this.reader.feed(data);while(true){try{reply=this.reader.get()}catch(err){this.emit("error",err);break}if(reply===undefined)break;if(reply&&reply.constructor===Error){this.emit("reply error",reply)}else{this.emit("reply",reply)}}}},function(module,exports,__webpack_require__){(function(Buffer){var events=__webpack_require__(120),util=__webpack_require__(310);exports.debug_mode=false;exports.name="javascript";function RedisReplyParser(options){this.name=exports.name;this.options=options||{};this.reset();events.EventEmitter.call(this)}util.inherits(RedisReplyParser,events.EventEmitter);exports.Parser=RedisReplyParser;function small_toString(buf,len){var tmp="",i;for(i=0;i<len;i+=1){tmp+=String.fromCharCode(buf[i])}return tmp}RedisReplyParser.prototype.reset=function(){this.return_buffer=new Buffer(16384);this.return_string="";this.tmp_string="";this.multi_bulk_length=0;this.multi_bulk_replies=null;this.multi_bulk_pos=0;this.multi_bulk_nested_length=0;this.multi_bulk_nested_replies=null;this.states={TYPE:1,SINGLE_LINE:2,MULTI_BULK_COUNT:3,INTEGER_LINE:4,BULK_LENGTH:5,ERROR_LINE:6,BULK_DATA:7,UNKNOWN_TYPE:8,FINAL_CR:9,FINAL_LF:10,MULTI_BULK_COUNT_LF:11,BULK_LF:12};this.state=this.states.TYPE};RedisReplyParser.prototype.parser_error=function(message){this.emit("error",message);this.reset()};RedisReplyParser.prototype.execute=function(incoming_buf){var pos=0,bd_tmp,bd_str,i,il,states=this.states;while(pos<incoming_buf.length){switch(this.state){case 1:this.type=incoming_buf[pos];pos+=1;switch(this.type){case 43:this.state=states.SINGLE_LINE;this.return_buffer.end=0;this.return_string="";break;case 42:this.state=states.MULTI_BULK_COUNT;this.tmp_string="";break;case 58:this.state=states.INTEGER_LINE;this.return_buffer.end=0;this.return_string="";break;case 36:this.state=states.BULK_LENGTH;this.tmp_string="";break;case 45:this.state=states.ERROR_LINE;this.return_buffer.end=0;this.return_string="";break;default:this.state=states.UNKNOWN_TYPE}break;case 4:if(incoming_buf[pos]===13){this.send_reply(+small_toString(this.return_buffer,this.return_buffer.end));this.state=states.FINAL_LF}else{this.return_buffer[this.return_buffer.end]=incoming_buf[pos];this.return_buffer.end+=1}pos+=1;break;case 6:if(incoming_buf[pos]===13){this.send_error(this.return_buffer.toString("ascii",0,this.return_buffer.end));this.state=states.FINAL_LF}else{this.return_buffer[this.return_buffer.end]=incoming_buf[pos];this.return_buffer.end+=1}pos+=1;break;case 2:if(incoming_buf[pos]===13){this.send_reply(this.return_string);this.state=states.FINAL_LF}else{this.return_string+=String.fromCharCode(incoming_buf[pos])}pos+=1;break;case 3:if(incoming_buf[pos]===13){this.state=states.MULTI_BULK_COUNT_LF}else{this.tmp_string+=String.fromCharCode(incoming_buf[pos])}pos+=1;break;case 11:if(incoming_buf[pos]===10){if(this.multi_bulk_length){this.multi_bulk_nested_length=this.multi_bulk_length;this.multi_bulk_nested_replies=this.multi_bulk_replies;this.multi_bulk_nested_pos=this.multi_bulk_pos}this.multi_bulk_length=+this.tmp_string;this.multi_bulk_pos=0;this.state=states.TYPE;if(this.multi_bulk_length<0){this.send_reply(null);this.multi_bulk_length=0}else if(this.multi_bulk_length===0){this.multi_bulk_pos=0;this.multi_bulk_replies=null;this.send_reply([])}else{this.multi_bulk_replies=new Array(this.multi_bulk_length)}}else{this.parser_error(new Error("didn't see LF after NL reading multi bulk count"));return}pos+=1;break;case 5:if(incoming_buf[pos]===13){this.state=states.BULK_LF}else{this.tmp_string+=String.fromCharCode(incoming_buf[pos])}pos+=1;break;case 12:if(incoming_buf[pos]===10){this.bulk_length=+this.tmp_string;if(this.bulk_length===-1){this.send_reply(null);this.state=states.TYPE}else if(this.bulk_length===0){this.send_reply(new Buffer(""));this.state=states.FINAL_CR}else{this.state=states.BULK_DATA;if(this.bulk_length>this.return_buffer.length){if(exports.debug_mode){console.log("Growing return_buffer from "+this.return_buffer.length+" to "+this.bulk_length)}this.return_buffer=new Buffer(this.bulk_length)}this.return_buffer.end=0}}else{this.parser_error(new Error("didn't see LF after NL while reading bulk length"));return}pos+=1;break;case 7:this.return_buffer[this.return_buffer.end]=incoming_buf[pos];this.return_buffer.end+=1;pos+=1;if(this.return_buffer.end===this.bulk_length){bd_tmp=new Buffer(this.bulk_length);if(this.bulk_length>10){this.return_buffer.copy(bd_tmp,0,0,this.bulk_length)}else{for(i=0,il=this.bulk_length;i<il;i+=1){bd_tmp[i]=this.return_buffer[i]}}this.send_reply(bd_tmp);this.state=states.FINAL_CR}break;case 9:if(incoming_buf[pos]===13){this.state=states.FINAL_LF;pos+=1}else{this.parser_error(new Error("saw "+incoming_buf[pos]+" when expecting final CR"));return}break;case 10:if(incoming_buf[pos]===10){this.state=states.TYPE;pos+=1}else{this.parser_error(new Error("saw "+incoming_buf[pos]+" when expecting final LF"));return}break;default:this.parser_error(new Error("invalid state "+this.state))}}};RedisReplyParser.prototype.send_error=function(reply){if(this.multi_bulk_length>0||this.multi_bulk_nested_length>0){this.add_multi_bulk_reply(reply)}else{this.emit("reply error",reply)}};RedisReplyParser.prototype.send_reply=function(reply){if(this.multi_bulk_length>0||this.multi_bulk_nested_length>0){if(!this.options.return_buffers&&Buffer.isBuffer(reply)){this.add_multi_bulk_reply(reply.toString("utf8"))}else{this.add_multi_bulk_reply(reply)}}else{if(!this.options.return_buffers&&Buffer.isBuffer(reply)){this.emit("reply",reply.toString("utf8"))}else{this.emit("reply",reply)}}};RedisReplyParser.prototype.add_multi_bulk_reply=function(reply){if(this.multi_bulk_replies){this.multi_bulk_replies[this.multi_bulk_pos]=reply;this.multi_bulk_pos+=1;if(this.multi_bulk_pos<this.multi_bulk_length){return}}else{this.multi_bulk_replies=reply}if(this.multi_bulk_nested_length>0){this.multi_bulk_nested_replies[this.multi_bulk_nested_pos]=this.multi_bulk_replies;this.multi_bulk_nested_pos+=1;this.multi_bulk_length=0;this.multi_bulk_replies=null;this.multi_bulk_pos=0;if(this.multi_bulk_nested_length===this.multi_bulk_nested_pos){this.emit("reply",this.multi_bulk_nested_replies);this.multi_bulk_nested_length=0;this.multi_bulk_nested_pos=0;this.multi_bulk_nested_replies=null}}else{this.emit("reply",this.multi_bulk_replies);this.multi_bulk_length=0;this.multi_bulk_replies=null;this.multi_bulk_pos=0}}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){module.exports=["append","auth","bgrewriteaof","bgsave","bitcount","bitop","blpop","brpop","brpoplpush","client kill","client list","config get","config set","config resetstat","dbsize","debug object","debug segfault","decr","decrby","del","discard","dump","echo","eval","evalsha","exec","exists","expire","expireat","flushall","flushdb","get","getbit","getrange","getset","hdel","hexists","hget","hgetall","hincrby","hincrbyfloat","hkeys","hlen","hmget","hmset","hset","hsetnx","hvals","incr","incrby","incrbyfloat","info","keys","lastsave","lindex","linsert","llen","lpop","lpush","lpushx","lrange","lrem","lset","ltrim","mget","migrate","monitor","move","mset","msetnx","multi","object","persist","pexpire","pexpireat","ping","psetex","psubscribe","pttl","publish","punsubscribe","quit","randomkey","rename","renamenx","restore","rpop","rpoplpush","rpush","rpushx","sadd","save","scard","script exists","script flush","script kill","script load","sdiff","sdiffstore","select","set","setbit","setex","setnx","setrange","shutdown","sinter","sinterstore","sismember","slaveof","slowlog","smembers","smove","sort","spop","srandmember","srem","strlen","subscribe","sunion","sunionstore","sync","time","ttl","type","unsubscribe","unwatch","watch","zadd","zcard","zcount","zincrby","zinterstore","zrange","zrangebyscore","zrank","zrem","zremrangebyrank","zremrangebyscore","zrevrange","zrevrangebyscore","zrevrank","zscore","zunionstore"]},function(module,exports,__webpack_require__){module.exports=Stream;var EE=__webpack_require__(120).EventEmitter;var inherits=__webpack_require__(599);inherits(Stream,EE);Stream.Readable=__webpack_require__(590);Stream.Writable=__webpack_require__(591);Stream.Duplex=__webpack_require__(592);Stream.Transform=__webpack_require__(593);Stream.PassThrough=__webpack_require__(594);Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EE.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest}},function(module,exports,__webpack_require__){(function(process){module.exports=globSync;globSync.GlobSync=GlobSync;var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());var minimatch=__webpack_require__(548);var Minimatch=minimatch.Minimatch;var Glob=__webpack_require__(113).Glob;var util=__webpack_require__(52);var path=__webpack_require__(8);var assert=__webpack_require__(107);var common=__webpack_require__(318);var alphasort=common.alphasort;var alphasorti=common.alphasorti;var isAbsolute=common.isAbsolute;var setopts=common.setopts;var ownProp=common.ownProp;var childrenIgnored=common.childrenIgnored;function globSync(pattern,options){if(typeof options==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(pattern,options).found}function GlobSync(pattern,options){if(!pattern)throw new Error("must provide pattern");if(typeof options==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(pattern,options);setopts(this,pattern,options);if(this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false)}this._finish()}GlobSync.prototype._finish=function(){assert(this instanceof GlobSync);if(this.realpath){var self=this;this.matches.forEach(function(matchset,index){var set=self.matches[index]=Object.create(null);for(var p in matchset){try{p=self._makeAbs(p);var real=fs.realpathSync(p,this.realpathCache);set[real]=true}catch(er){if(er.syscall==="stat")set[self._makeAbs(p)]=true;else throw er}}})}common.finish(this)};GlobSync.prototype._process=function(pattern,index,inGlobStar){assert(this instanceof GlobSync);var n=0;while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join("/"),index);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/");break}var remain=pattern.slice(n);var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.join("/"))){if(!prefix||!isAbsolute(prefix))prefix="/"+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return;var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar)};GlobSync.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)===".";var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=="."||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return;if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix.slice(-1)!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}this.matches[index][e]=true}return}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix)newPattern=[prefix,e];else newPattern=[e];this._process(newPattern.concat(remain),index,inGlobStar)}};GlobSync.prototype._emitMatch=function(index,e){var abs=this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.matches[index][e])return;if(this.nodir){var c=this.cache[this._makeAbs(e)];if(c==="DIR"||Array.isArray(c))return}this.matches[index][e]=true;if(this.stat)this._stat(e)};GlobSync.prototype._readdirInGlobStar=function(abs){if(this.follow)return this._readdir(abs,false);var entries;var lstat;var stat;try{lstat=fs.lstatSync(abs)}catch(er){return null}var isSym=lstat.isSymbolicLink();this.symlinks[abs]=isSym;if(!isSym&&!lstat.isDirectory())this.cache[abs]="FILE";else entries=this._readdir(abs,false);return entries};GlobSync.prototype._readdir=function(abs,inGlobStar){var entries;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==="FILE")return null;if(Array.isArray(c))return c}try{return this._readdirEntries(abs,fs.readdirSync(abs))}catch(er){this._readdirError(abs,er);return null}};GlobSync.prototype._readdirEntries=function(abs,entries){if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==="/")e=abs+e;else e=abs+"/"+e;this.cache[e]=true}}this.cache[abs]=entries;return entries};GlobSync.prototype._readdirError=function(f,er){switch(er.code){case"ENOTDIR":this.cache[this._makeAbs(f)]="FILE";break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)throw er;if(!this.silent)console.error("glob error",er);break}};GlobSync.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false);var len=entries.length;var isSym=this.symlinks[abs];if(isSym&&inGlobStar)return;for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==="."&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true);var below=gspref.concat(entries[i],remain);this._process(below,index,true)}};GlobSync.prototype._processSimple=function(prefix,index){var exists=this._stat(prefix);if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return;if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+="/"}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this.matches[index][prefix]=true};GlobSync.prototype._stat=function(f){var abs=this._makeAbs(f);var needDir=f.slice(-1)==="/";if(f.length>this.maxLength)return false;if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c="DIR";if(!needDir||c==="DIR")return c;if(needDir&&c==="FILE")return false}var exists;var stat=this.statCache[abs];if(!stat){var lstat;try{lstat=fs.lstatSync(abs)}catch(er){return false}if(lstat.isSymbolicLink()){try{stat=fs.statSync(abs)}catch(er){stat=lstat}}else{stat=lstat}}this.statCache[abs]=stat;var c=stat.isDirectory()?"DIR":"FILE";this.cache[abs]=this.cache[abs]||c;if(needDir&&c!=="DIR")return false;return c};GlobSync.prototype._mark=function(p){return common.mark(this,p)};GlobSync.prototype._makeAbs=function(f){return common.makeAbs(this,f)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){exports.alphasort=alphasort;exports.alphasorti=alphasorti;exports.isAbsolute=process.platform==="win32"?absWin:absUnix;exports.setopts=setopts;exports.ownProp=ownProp;exports.makeAbs=makeAbs;exports.finish=finish;exports.mark=mark;exports.isIgnored=isIgnored;exports.childrenIgnored=childrenIgnored;function ownProp(obj,field){return Object.prototype.hasOwnProperty.call(obj,field)}var path=__webpack_require__(8);var minimatch=__webpack_require__(548);var Minimatch=minimatch.Minimatch;function absWin(p){if(absUnix(p))return true;var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var result=splitDeviceRe.exec(p);var device=result[1]||"";var isUnc=device&&device.charAt(1)!==":";var isAbsolute=!!result[2]||isUnc;return isAbsolute}function absUnix(p){return p.charAt(0)==="/"||p===""}function alphasorti(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}function alphasort(a,b){return a.localeCompare(b)}function setupIgnores(self,options){self.ignore=options.ignore||[];if(!Array.isArray(self.ignore))self.ignore=[self.ignore];if(self.ignore.length){self.ignore=self.ignore.map(ignoreMap)}}function ignoreMap(pattern){var gmatcher=null;if(pattern.slice(-3)==="/**"){var gpattern=pattern.replace(/(\/\*\*)+$/,"");gmatcher=new Minimatch(gpattern,{nonegate:true})}return{matcher:new Minimatch(pattern,{nonegate:true}),gmatcher:gmatcher}}function setopts(self,pattern,options){if(!options)options={};if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar){throw new Error("base matching requires globstar")}pattern="**/"+pattern}self.pattern=pattern;self.strict=options.strict!==false;self.realpath=!!options.realpath;self.realpathCache=options.realpathCache||Object.create(null);self.follow=!!options.follow;self.dot=!!options.dot;self.mark=!!options.mark;self.nodir=!!options.nodir;if(self.nodir)self.mark=true;self.sync=!!options.sync;self.nounique=!!options.nounique;self.nonull=!!options.nonull;self.nosort=!!options.nosort;self.nocase=!!options.nocase;self.stat=!!options.stat;self.noprocess=!!options.noprocess;self.maxLength=options.maxLength||Infinity;self.cache=options.cache||Object.create(null);self.statCache=options.statCache||Object.create(null);self.symlinks=options.symlinks||Object.create(null);setupIgnores(self,options);self.changedCwd=false;var cwd=process.cwd();if(!ownProp(options,"cwd"))self.cwd=cwd;else{self.cwd=options.cwd;self.changedCwd=path.resolve(options.cwd)!==cwd}self.root=options.root||path.resolve(self.cwd,"/");self.root=path.resolve(self.root);if(process.platform==="win32")self.root=self.root.replace(/\\/g,"/");self.nomount=!!options.nomount;self.minimatch=new Minimatch(pattern,options);self.options=self.minimatch.options}function finish(self){var nou=self.nounique;var all=nou?[]:Object.create(null);for(var i=0,l=self.matches.length;i<l;i++){var matches=self.matches[i];if(!matches||Object.keys(matches).length===0){if(self.nonull){var literal=self.minimatch.globSet[i];if(nou)all.push(literal);else all[literal]=true}}else{var m=Object.keys(matches);if(nou)all.push.apply(all,m);else m.forEach(function(m){all[m]=true})}}if(!nou)all=Object.keys(all);if(!self.nosort)all=all.sort(self.nocase?alphasorti:alphasort);if(self.mark){for(var i=0;i<all.length;i++){all[i]=self._mark(all[i])}if(self.nodir){all=all.filter(function(e){return!/\/$/.test(e)})}}if(self.ignore.length)all=all.filter(function(m){return!isIgnored(self,m)});self.found=all}function mark(self,p){var abs=makeAbs(self,p);var c=self.cache[abs];var m=p;if(c){var isDir=c==="DIR"||Array.isArray(c);var slash=p.slice(-1)==="/";if(isDir&&!slash)m+="/";else if(!isDir&&slash)m=m.slice(0,-1);if(m!==p){var mabs=makeAbs(self,m);self.statCache[mabs]=self.statCache[abs];self.cache[mabs]=self.cache[abs]}}return m}function makeAbs(self,f){var abs=f;if(f.charAt(0)==="/"){abs=path.join(self.root,f)}else if(exports.isAbsolute(f)){abs=f}else if(self.changedCwd){abs=path.resolve(self.cwd,f)}else if(self.realpath){abs=path.resolve(f)}return abs}function isIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return item.matcher.match(path)||!!(item.gmatcher&&item.gmatcher.match(path))})}function childrenIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return!!(item.gmatcher&&item.gmatcher.match(path))})}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function MongoError(message){this.name="MongoError";this.message=message;this.stack=(new Error).stack}MongoError.create=function(options){var err=null;if(options instanceof Error){err=new MongoError(options.message);err.stack=options.stack}else if(typeof options=="string"){err=new MongoError(options)}else{err=new MongoError(options.message||options.errmsg||"n/a");for(var name in options){err[name]=options[name]}}return err};MongoError.prototype=new Error;module.exports=MongoError},function(module,exports,__webpack_require__){(function(process){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,bindToCurrentDomain=__webpack_require__(554).bindToCurrentDomain,EventEmitter=__webpack_require__(120).EventEmitter,Pool=__webpack_require__(555),b=__webpack_require__(568),Query=__webpack_require__(326).Query,MongoError=__webpack_require__(319),ReadPreference=__webpack_require__(325),BasicCursor=__webpack_require__(324),CommandResult=__webpack_require__(556),getSingleProperty=__webpack_require__(554).getSingleProperty,getProperty=__webpack_require__(554).getProperty,debugOptions=__webpack_require__(554).debugOptions,BSON=__webpack_require__(568).native().BSON,PreTwoSixWireProtocolSupport=__webpack_require__(557),TwoSixWireProtocolSupport=__webpack_require__(558),Session=__webpack_require__(559),Logger=__webpack_require__(323),MongoCR=__webpack_require__(327),X509=__webpack_require__(328),Plain=__webpack_require__(329),GSSAPI=__webpack_require__(330),SSPI=__webpack_require__(560),ScramSHA1=__webpack_require__(561);var bsonTypes=[b.Long,b.ObjectID,b.Binary,b.Code,b.DBRef,b.Symbol,b.Double,b.Timestamp,b.MaxKey,b.MinKey];var bsonInstance=null;var serverId=0;var callbackId=0;var Callbacks=function(){var self=this;this.callbacks={};this.id=callbackId++;this.type="server"};Callbacks.prototype.flush=function(err){for(var id in this.callbacks){if(!isNaN(parseInt(id,10))){var callback=this.callbacks[id];delete this.callbacks[id];callback(err,null)}}};Callbacks.prototype.emit=function(id,err,value){var callback=this.callbacks[id];delete this.callbacks[id];callback(err,value)};Callbacks.prototype.raw=function(id){if(this.callbacks[id]==null)return false;return this.callbacks[id].raw==true?true:false};Callbacks.prototype.unregister=function(id){delete this.callbacks[id]};Callbacks.prototype.register=function(id,callback){this.callbacks[id]=bindToCurrentDomain(callback)};var bindToCurrentDomain=function(callback){var domain=process.domain;if(domain==null||callback==null)return callback;return domain.bind(callback)};var DISCONNECTED="disconnected";var CONNECTING="connecting";var CONNECTED="connected";var DESTROYED="destroyed";var supportsServer=function(_s){return _s.ismaster&&typeof _s.ismaster.minWireVersion=="number"};var createWireProtocolHandler=function(result){if(result&&result.maxWireVersion>=2){return new TwoSixWireProtocolSupport}return new PreTwoSixWireProtocolSupport};var reconnectServer=function(self,state){if(state.currentReconnectRetry==0){return self.destroy(true,true)}state.currentReconnectRetry=state.currentReconnectRetry-1;state.state=CONNECTING;state.pool=new Pool(state.options);var reconnectErrorHandler=function(err){state.state=DISCONNECTED;state.pool.destroy();state.currentReconnectRetry=state.currentReconnectRetry-1;if(state.currentReconnectRetry<=0){self.emit("error",f("failed to connect to %s:%s after %s retries",state.options.host,state.options.port,state.reconnectTries))}else{setTimeout(function(){reconnectServer(self,state)},state.reconnectInterval)}};state.pool.once("connect",function(){var events=["error","close","timeout","parseError"];events.forEach(function(e){state.pool.removeAllListeners(e)});state.state=CONNECTED;state.pool.once("error",reconnectErrorHandler);state.pool.once("close",closeHandler(self,state));state.pool.once("timeout",timeoutHandler(self,state));state.pool.once("parseError",fatalErrorHandler(self,state));var keys=Object.keys(state.authProviders);if(keys.length==0)return self.emit("reconnect",self);var count=keys.length;for(var i=0;i<keys.length;i++){state.authProviders[keys[i]].reauthenticate(self,state.pool,function(err,r){count=count-1;if(count==0){return self.emit("reconnect",self)}})}});state.pool.once("error",errorHandler(self,state));state.pool.once("close",errorHandler(self,state));state.pool.once("timeout",errorHandler(self,state));state.pool.once("parseError",errorHandler(self,state));state.pool.connect()};var messageHandler=function(self,state){return function(response,connection){try{response.parse({raw:state.callbacks.raw(response.responseTo)});if(state.logger.isDebug())state.logger.debug(f("message [%s] received from %s",response.raw.toString("hex"),self.name));state.callbacks.emit(response.responseTo,null,response)}catch(err){
state.callbacks.flush(new MongoError(err));self.destroy()}}};var errorHandler=function(self,state){return function(err,connection){if(state.state==DISCONNECTED||state.state==DESTROYED)return;state.state=DISCONNECTED;if(state.readPreferenceStrategies!=null)notifyStrategies(self,self.s,"error",[self]);if(state.logger.isInfo())state.logger.info(f("server %s errored out with %s",self.name,JSON.stringify(err)));if(state.callbacks)state.callbacks.flush(new MongoError(f("server %s received an error %s",self.name,JSON.stringify(err))));self.destroy();if(state.emitError&&self.listeners("error").length>0)self.emit("error",err,self);if(state.reconnect)setTimeout(function(){reconnectServer(self,state)},state.reconnectInterval)}};var fatalErrorHandler=function(self,state){return function(err,connection){if(state.state==DISCONNECTED||state.state==DESTROYED)return;state.state=DISCONNECTED;if(state.readPreferenceStrategies!=null)notifyStrategies(self,self.s,"error",[self]);if(state.logger.isInfo())state.logger.info(f("server %s errored out with %s",self.name,JSON.stringify(err)));if(state.callbacks)state.callbacks.flush(new MongoError(f("server %s received an error %s",self.name,JSON.stringify(err))));self.emit("error",err,self);if(state.reconnect)setTimeout(function(){reconnectServer(self,state)},state.reconnectInterval);self.destroy()}};var timeoutHandler=function(self,state){return function(err,connection){if(state.state==DISCONNECTED||state.state==DESTROYED)return;state.state=DISCONNECTED;if(state.readPreferenceStrategies!=null)notifyStrategies(self,self.s,"timeout",[self]);if(state.logger.isInfo())state.logger.info(f("server %s timed out",self.name));if(state.callbacks)state.callbacks.flush(new MongoError(f("server %s timed out",self.name)));self.emit("timeout",err,self);if(state.reconnect)setTimeout(function(){reconnectServer(self,state)},state.reconnectInterval);self.destroy()}};var closeHandler=function(self,state){return function(err,connection){if(state.state==DISCONNECTED||state.state==DESTROYED)return;state.state=DISCONNECTED;if(state.readPreferenceStrategies!=null)notifyStrategies(self,self.s,"close",[self]);if(state.logger.isInfo())state.logger.info(f("server %s closed",self.name));if(state.callbacks)state.callbacks.flush(new MongoError(f("server %s sockets closed",self.name)));self.emit("close",err,self);if(state.reconnect)setTimeout(function(){reconnectServer(self,state)},state.reconnectInterval);self.destroy()}};var connectHandler=function(self,state){state.currentReconnectRetry=state.reconnectTries;var applyAuthentications=function(callback){var keys=Object.keys(state.authProviders);if(keys.length==0)return callback(null,null);var count=keys.length;for(var i=0;i<keys.length;i++){state.authProviders[keys[i]].reauthenticate(self,state.pool,function(err,r){count=count-1;if(count==0){return callback(null,null)}})}};return function(connection){applyAuthentications(function(){self.command("system.$cmd",{ismaster:true},function(err,r){if(err){state.state=DISCONNECTED;return self.emit("close",err,self)}if(!err){state.ismaster=r.result}state.wireProtocolHandler=createWireProtocolHandler(state.ismaster);state.options.wireProtocolHandler=state.wireProtocolHandler;if(state.logger.isInfo())state.logger.info(f("server %s connected with ismaster [%s]",self.name,JSON.stringify(r.result)));if(!supportsServer(state)&&state.wireProtocolHandler==null){state.state=DISCONNECTED;return self.emit("error",new MongoError("non supported server version"),self)}if(state.ismaster&&state.ismaster.me)state.serverDetails.name=state.ismaster.me;if(state.readPreferenceStrategies==null){state.state=CONNECTED;return self.emit("connect",self)}notifyStrategies(self,self.s,"connect",[self],function(err,result){state.state=CONNECTED;return self.emit("connect",self)})})})}};var slaveOk=function(r){if(r)return r.slaveOk();return false};var notifyStrategies=function(self,state,op,params,callback){if(typeof callback!="function"){for(var name in state.readPreferenceStrategies){if(state.readPreferenceStrategies[name][op]){var strat=state.readPreferenceStrategies[name];strat[op].apply(strat,params)}}return}var nPreferences=Object.keys(state.readPreferenceStrategies).length;if(nPreferences==0)return callback(null,null);for(var name in state.readPreferenceStrategies){if(state.readPreferenceStrategies[name][op]){var strat=state.readPreferenceStrategies[name];var cParams=params.slice(0);cParams.push(function(err,r){nPreferences=nPreferences-1;if(nPreferences==0){callback(null,null)}});strat[op].apply(strat,cParams)}}};var debugFields=["reconnect","reconnectTries","reconnectInterval","emitError","cursorFactory","host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","socketTimeout","singleBufferSerializtion","ssl","ca","cert","key","rejectUnauthorized","promoteLongs"];var Server=function(options){var self=this;EventEmitter.call(this);if(bsonInstance==null){bsonInstance=new BSON(bsonTypes)}var reconnectTries=options.reconnectTries||30;this.s={options:options,callbacks:new Callbacks,logger:Logger("Server",options),state:DISCONNECTED,reconnect:typeof options.reconnect=="boolean"?options.reconnect:true,reconnectTries:reconnectTries,reconnectInterval:options.reconnectInterval||1e3,emitError:typeof options.emitError=="boolean"?options.emitError:false,currentReconnectRetry:reconnectTries,ismaster:null,readPreferenceStrategies:options.readPreferenceStrategies,authProviders:options.authProviders||{},id:serverId++,tag:options.tag,disconnectHandler:options.disconnectHandler,wireProtocolHandler:options.wireProtocolHandler||new PreTwoSixWireProtocolSupport,Cursor:options.cursorFactory||BasicCursor,bsonInstance:bsonInstance,bson:options.bson?options.bson:bsonInstance,pool:null,serverDetails:{host:options.host,port:options.port,name:options.port?f("%s:%s",options.host,options.port):options.host}};var s=this.s;options.bson=s.bson;getProperty(this,"name","name",s.serverDetails,{});getProperty(this,"bson","bson",s.options,{});getProperty(this,"wireProtocolHandler","wireProtocolHandler",s.options,{});getSingleProperty(this,"id",s.id);this.addAuthProvider("mongocr",new MongoCR);this.addAuthProvider("x509",new X509);this.addAuthProvider("plain",new Plain);this.addAuthProvider("gssapi",new GSSAPI);this.addAuthProvider("sspi",new SSPI);this.addAuthProvider("scram-sha-1",new ScramSHA1)};inherits(Server,EventEmitter);Server.prototype.setBSONParserType=function(type){var nBSON=null;if(type=="c++"){nBSON=__webpack_require__(568).native().BSON}else if(type=="js"){nBSON=__webpack_require__(568).pure().BSON}else{throw new MongoError(f("% parser not supported",type))}this.s.options.bson=new nBSON(bsonTypes)};Server.prototype.lastIsMaster=function(){return this.s.ismaster};Server.prototype.connect=function(_options){var self=this;_options=_options||{};if(typeof _options.promoteLongs=="boolean"){self.s.options.promoteLongs=_options.promoteLongs}if(self.s.pool){self.s.pool.destroy();self.s.pool=null}self.s.state=CONNECTING;if(!self.s.pool){self.s.options.messageHandler=messageHandler(self,self.s);self.s.pool=new Pool(self.s.options)}self.s.pool.once("timeout",timeoutHandler(self,self.s));self.s.pool.once("close",closeHandler(self,self.s));self.s.pool.once("error",errorHandler(self,self.s));self.s.pool.once("connect",connectHandler(self,self.s));self.s.pool.once("parseError",fatalErrorHandler(self,self.s));self.s.pool.connect()};Server.prototype.destroy=function(emitClose,emitDestroy){var self=this;if(self.s.logger.isDebug())self.s.logger.debug(f("destroy called on server %s",self.name));if(emitClose&&self.listeners("close").length>0)self.emit("close",self);if(emitDestroy)self.emit("destroy",self);self.s.state=DESTROYED;self.s.pool.destroy();if(self.s.callbacks)self.s.callbacks.flush(new MongoError(f("server %s sockets closed",self.name)))};Server.prototype.isConnected=function(){var self=this;if(self.s.pool)return self.s.pool.isConnected();return false};Server.prototype.command=function(ns,cmd,options,callback){var self=this;if(typeof options=="function")callback=options,options={};options=options||{};if(options.readPreference&&!(options.readPreference instanceof ReadPreference)){throw new Error("readPreference must be an instance of ReadPreference")}if(self.s.logger.isDebug())self.s.logger.debug(f("executing command [%s] against %s",JSON.stringify({ns:ns,cmd:cmd,options:debugOptions(debugFields,options)}),self.name));if(!self.isConnected()&&self.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return self.s.disconnectHandler.add("command",ns,cmd,options,callback)}if(!self.s.pool.isConnected())return callback(new MongoError(f("no connection available to server %s",self.name)));var onAll=typeof options.onAll=="boolean"?options.onAll:false;var checkKeys=typeof options.checkKeys=="boolean"?options.checkKeys:false;var serializeFunctions=typeof options.serializeFunctions=="boolean"?options.serializeFunctions:false;var queryOptions={numberToSkip:0,numberToReturn:-1,checkKeys:checkKeys};if(serializeFunctions)queryOptions.serializeFunctions=serializeFunctions;var query=new Query(self.s.bson,ns,cmd,queryOptions);query.slaveOk=slaveOk(options.readPreference);if(self.s.readPreferenceStrategies!=null)notifyStrategies(self,self.s,"startOperation",[self,query,new Date]);var connection=options.connection||self.s.pool.get();if(!connection.isConnected()){return callback(new MongoError(f("no connection available to server %s",self.name)))}if(self.s.logger.isDebug()){var json=connection.toJSON();self.s.logger.debug(f("cmd [%s] about to be executed on connection with id %s at %s:%s",JSON.stringify(cmd),json.id,json.host,json.port))}if(onAll){var connections=self.s.pool.getAll();var total=connections.length;var error=null;for(var i=0;i<connections.length;i++){try{query.incRequestId();connections[i].write(query.toBin())}catch(err){total=total-1;if(total==0)return callback(MongoError.create(err))}self.s.callbacks.register(query.requestId,function(err,result){if(err)error=err;total=total-1;if(total==0){notifyStrategies(self,self.s,"endOperation",[self,error,result,new Date]);if(error)return callback(MongoError.create(error));try{callback(null,new CommandResult(result.documents[0],connections))}catch(err){process.nextTick(function(){throw err})}}})}return}try{connection.write(query.toBin())}catch(err){return callback(MongoError.create(err))}self.s.callbacks.register(query.requestId,function(err,result){notifyStrategies(self,self.s,"endOperation",[self,err,result,new Date]);if(err)return callback(err);if(result.documents[0]["$err"]||result.documents[0]["errmsg"]||result.documents[0]["err"]||result.documents[0]["code"])return callback(MongoError.create(result.documents[0]));try{callback(null,new CommandResult(result.documents[0],connection))}catch(err){process.nextTick(function(){throw err})}})};Server.prototype.insert=function(ns,ops,options,callback){var self=this;if(!self.isConnected()&&self.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return self.s.disconnectHandler.add("insert",ns,ops,options,callback)}ops=Array.isArray(ops)?ops:[ops];return self.s.wireProtocolHandler.insert(self,self.s.ismaster,ns,self.s.bson,self.s.pool,self.s.callbacks,ops,options,callback)};Server.prototype.update=function(ns,ops,options,callback){var self=this;if(!self.isConnected()&&self.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return self.s.disconnectHandler.add("update",ns,ops,options,callback)}ops=Array.isArray(ops)?ops:[ops];return self.s.wireProtocolHandler.update(self,self.s.ismaster,ns,self.s.bson,self.s.pool,self.s.callbacks,ops,options,callback)};Server.prototype.remove=function(ns,ops,options,callback){var self=this;if(!self.isConnected()&&self.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return self.s.disconnectHandler.add("remove",ns,ops,options,callback)}ops=Array.isArray(ops)?ops:[ops];return self.s.wireProtocolHandler.remove(self,self.s.ismaster,ns,self.s.bson,self.s.pool,self.s.callbacks,ops,options,callback)};Server.prototype.auth=function(mechanism,db){var self=this;var args=Array.prototype.slice.call(arguments,2);var callback=args.pop();if(self.s.authProviders[mechanism]==null&&mechanism!="default")throw new MongoError(f("auth provider %s does not exist",mechanism));if(mechanism=="default"&&self.s.ismaster&&self.s.ismaster.maxWireVersion>=3){mechanism="scram-sha-1"}else if(mechanism=="default"){mechanism="mongocr"}var finalArguments=[self,self.s.pool,db].concat(args.slice(0)).concat([function(err,r){if(err)return callback(err);if(!r)return callback(new MongoError("could not authenticate"));callback(null,new Session({},self))}]);self.s.authProviders[mechanism].auth.apply(self.s.authProviders[mechanism],finalArguments)};Server.prototype.addReadPreferenceStrategy=function(name,strategy){var self=this;if(self.s.readPreferenceStrategies==null)self.s.readPreferenceStrategies={};self.s.readPreferenceStrategies[name]=strategy};Server.prototype.addAuthProvider=function(name,provider){var self=this;self.s.authProviders[name]=provider};Server.prototype.equals=function(server){if(typeof server=="string")return server==this.name;return server.name==this.name};Server.prototype.connections=function(){return this.s.pool.getAll()};Server.prototype.getServer=function(options){return this};Server.prototype.getConnection=function(options){return this.s.pool.get()};Server.prototype.getCallbacks=function(){return this.s.callbacks};Server.prototype.parserType=function(){var s=this.s;if(s.options.bson.serialize.toString().indexOf("[native code]")!=-1)return"c++";return"js"};Server.prototype.cursor=function(ns,cmd,cursorOptions){var s=this.s;cursorOptions=cursorOptions||{};var FinalCursor=cursorOptions.cursorFactory||s.Cursor;return new FinalCursor(s.bson,ns,cmd,cursorOptions,this,s.options)};module.exports=Server}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,b=__webpack_require__(568),bindToCurrentDomain=__webpack_require__(554).bindToCurrentDomain,debugOptions=__webpack_require__(554).debugOptions,EventEmitter=__webpack_require__(120).EventEmitter,Server=__webpack_require__(320),ReadPreference=__webpack_require__(325),MongoError=__webpack_require__(319),Ping=__webpack_require__(562),Session=__webpack_require__(559),BasicCursor=__webpack_require__(324),BSON=__webpack_require__(568).native().BSON,State=__webpack_require__(563),Logger=__webpack_require__(323);var DISCONNECTED="disconnected";var CONNECTING="connecting";var CONNECTED="connected";var DESTROYED="destroyed";var replSetId=1;var cloneOptions=function(options){var opts={};for(var name in options){opts[name]=options[name]}return opts};var bsonTypes=[b.Long,b.ObjectID,b.Binary,b.Code,b.DBRef,b.Symbol,b.Double,b.Timestamp,b.MaxKey,b.MinKey];var bsonInstance=null;var ReplSet=function(seedlist,options){var self=this;options=options||{};if(!Array.isArray(seedlist))throw new MongoError("seedlist must be an array");if(seedlist.length==0)throw new MongoError("seedlist must contain at least one entry");seedlist.forEach(function(e){if(typeof e.host!="string"||typeof e.port!="number")throw new MongoError("seedlist entry must contain a host and port")});EventEmitter.call(this);bsonInstance=bsonInstance==null?new BSON(bsonTypes):bsonInstance;this.s={options:options,logger:Logger("ReplSet",options),id:replSetId++,index:0,haId:0,credentials:[],Cursor:options.cursorFactory||BasicCursor,bsonInstance:bsonInstance,bson:options.bson?options.bson:bsonInstance,secondaryOnlyConnectionAllowed:typeof options.secondaryOnlyConnectionAllowed=="boolean"?options.secondaryOnlyConnectionAllowed:false,haInterval:options.haInterval||1e4,debug:typeof options.debug=="boolean"?options.debug:false,setName:options.setName,emitError:typeof options.emitError=="boolean"?options.emitError:false,tag:options.tag,disconnectHandler:options.disconnectHandler,connectingServers:{},readPreferenceStrategies:{},authProviders:{},disconnectedServers:[],initialConnectionServers:[],highAvailabilityProcessRunning:false,fullsetup:false,all:false,seedlist:seedlist,authInProgress:false,authInProgressServers:[],minHeartbeatFrequencyMS:500};options.bson=this.s.bson;options.connectionTimeout=options.connectionTimeout||1e4;var replState=new State(this,{id:this.s.id,setName:this.s.setName,connectingServers:this.s.connectingServers,secondaryOnlyConnectionAllowed:this.s.secondaryOnlyConnectionAllowed});this.s.replState=replState;Object.defineProperty(this,"bson",{enumerable:true,get:function(){var servers=self.s.replState.getAll();return servers.length>0?servers[0].bson:null}});Object.defineProperty(this,"id",{enumerable:true,get:function(){return self.s.id}});Object.defineProperty(this,"haInterval",{enumerable:true,get:function(){return self.s.haInterval}});Object.defineProperty(this,"state",{enumerable:true,get:function(){return self.s.replState}});if(self.s.debug){Object.defineProperty(this,"readPreferenceStrategies",{enumerable:true,get:function(){return self.s.readPreferenceStrategies}})}Object.defineProperty(this,"type",{enumerable:true,get:function(){return"replset"}});this.addReadPreferenceStrategy("nearest",new Ping(options))};inherits(ReplSet,EventEmitter);ReplSet.prototype.addReadPreferenceStrategy=function(name,func){this.s.readPreferenceStrategies[name]=func};ReplSet.prototype.addAuthProvider=function(name,provider){if(this.s.authProviders==null)this.s.authProviders={};this.s.authProviders[name]=provider};ReplSet.prototype.parserType=function(){if(this.s.bson.serialize.toString().indexOf("[native code]")!=-1)return"c++";return"js"};ReplSet.prototype.setBSONParserType=function(type){var nBSON=null;if(type=="c++"){nBSON=__webpack_require__(568).native().BSON}else if(type=="js"){nBSON=__webpack_require__(568).pure().BSON}else{throw new MongoError(f("% parser not supported",type))}this.s.options.bson=new nBSON(bsonTypes)};ReplSet.prototype.lastIsMaster=function(){return this.s.replState.lastIsMaster()};ReplSet.prototype.getConnection=function(options){options=options||{};var server=pickServer(this,this.s,options.readPreference);if(server==null)return null;return server.getConnection()};ReplSet.prototype.connections=function(){return this.s.replState.getAllConnections()};ReplSet.prototype.getServer=function(options){options=options||{};return pickServer(this,this.s,options.readPreference)};ReplSet.prototype.cursor=function(ns,cmd,cursorOptions){cursorOptions=cursorOptions||{};var FinalCursor=cursorOptions.cursorFactory||this.s.Cursor;return new FinalCursor(this.s.bson,ns,cmd,cursorOptions,this,this.s.options)};var executeWriteOperation=function(self,op,ns,ops,options,callback){if(typeof options=="function"){callback=options;options={}}var server=null;options=options||{};try{server=pickServer(self,self.s,ReadPreference.primary);if(self.s.debug)self.emit("pickedServer",ReadPreference.primary,server)}catch(err){return callback(err)}if(server==null)return callback(new MongoError("no server found"));server[op](ns,ops,options,function(err,r){if(notMasterError(r)||notMasterError(err))replicasetInquirer(self,self.s,true)();callback(err,r)})};ReplSet.prototype.command=function(ns,cmd,options,callback){if(typeof options=="function"){callback=options;options={}}var server=null;var self=this;options=options||{};if(!this.isConnected(options)&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("command",ns,cmd,options,callback)}if(options.onAll){var servers=this.s.replState.getAll();var count=servers.length;var cmdErr=null;for(var i=0;i<servers.length;i++){servers[i].command(ns,cmd,options,function(err,r){count=count-1;if(count==0){if(cmd.logout)clearCredentials(self.s,ns);if(notMasterError(r)||notMasterError(err))replicasetInquirer(self,self.s,true)();callback(err,r)}})}return}try{server=pickServer(self,self.s,options.writeConcern?ReadPreference.primary:options.readPreference);if(self.s.debug)self.emit("pickedServer",options.writeConcern?ReadPreference.primary:options.readPreference,server)}catch(err){return callback(err)}if(server==null)return callback(new MongoError("no server found"));server.command(ns,cmd,options,function(err,r){if(cmd.logout)clearCredentials(self.s,ns);if(notMasterError(r)||notMasterError(err)){replicasetInquirer(self,self.s,true)()}callback(err,r)})};ReplSet.prototype.remove=function(ns,ops,options,callback){if(!this.isConnected()&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("remove",ns,ops,options,callback)}executeWriteOperation(this,"remove",ns,ops,options,callback)};ReplSet.prototype.insert=function(ns,ops,options,callback){if(!this.isConnected()&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("insert",ns,ops,options,callback)}executeWriteOperation(this,"insert",ns,ops,options,callback)};ReplSet.prototype.update=function(ns,ops,options,callback){if(!this.isConnected()&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("update",ns,ops,options,callback)}executeWriteOperation(this,"update",ns,ops,options,callback)};ReplSet.prototype.auth=function(mechanism,db){var allArgs=Array.prototype.slice.call(arguments,0).slice(0);var self=this;var args=Array.prototype.slice.call(arguments,2);var callback=args.pop();if(this.s.authProviders[mechanism]==null&&mechanism!="default")throw new MongoError(f("auth provider %s does not exist",mechanism));var servers=this.s.replState.getAll().slice(0);var count=servers.length;var authenticated=true;var authErr=null;this.s.authInProgress=true;while(servers.length>0){var server=servers.shift();var argsWithoutCallback=[mechanism,db].concat(args.slice(0));var finalArguments=argsWithoutCallback.concat([function(err,r){count=count-1;if(err)authErr=err;if(!r)authenticated=false;if(count==0){if(self.s.authInProgressServers.length>0){self.s.authInProgressServers=[];return self.auth.apply(self,[mechanism,db].concat(args).concat([callback]))}self.s.authInProgress=false;if(authErr==null)addCredentials(self.s,db,argsWithoutCallback);if(authErr)return callback(authErr,false);callback(null,new Session({},self))}}]);server.auth.apply(server,finalArguments)}};ReplSet.prototype.state=function(){return this.s.replState.state};ReplSet.prototype.connect=function(_options){var self=this;setTimeout(replicasetInquirer(this,this.s,false),this.s.haInterval);if(_options)for(var name in _options)this.s.options[name]=_options[name];this.s.replState.state=CONNECTING;this.s.fullsetup=false;this.s.seedlist.forEach(function(e){var opts=cloneOptions(self.s.options);opts.host=e.host;opts.port=e.port;opts.reconnect=false;opts.readPreferenceStrategies=self.s.readPreferenceStrategies;opts.emitError=true;if(self.s.tag)opts.tag=self.s.tag;opts.authProviders=self.s.authProviders;var server=new Server(opts);self.s.disconnectedServers.push(server);self.s.initialConnectionServers.push(server)});while(this.s.disconnectedServers.length>0){var server=this.s.disconnectedServers.shift();server.once("error",errorHandlerTemp(this,this.s,"error"));server.once("close",errorHandlerTemp(this,this.s,"close"));server.once("timeout",errorHandlerTemp(this,this.s,"timeout"));server.once("connect",connectHandler(this,this.s));server.connect()}};ReplSet.prototype.isConnected=function(options){options=options||{};if(options.readPreference&&options.readPreference.equals(ReadPreference.secondary))return this.s.replState.isSecondaryConnected();if(options.readPreference&&options.readPreference.equals(ReadPreference.primary))return this.s.replState.isSecondaryConnected()||this.s.replState.isPrimaryConnected();if(this.s.secondaryOnlyConnectionAllowed)return this.s.replState.isSecondaryConnected();return this.s.replState.isPrimaryConnected()};ReplSet.prototype.destroy=function(emitClose){var self=this;if(this.s.logger.isInfo())this.s.logger.info(f("[%s] destroyed",this.s.id));this.s.replState.state=DESTROYED;if(emitClose&&self.listeners("close").length>0)self.emit("close",self);this.s.replState.destroy();var events=["timeout","error","close","joined","left"];events.forEach(function(e){self.removeAllListeners(e)})};var addCredentials=function(s,db,argsWithoutCallback){clearCredentials(s,db+".dummy");s.credentials.push(argsWithoutCallback)};var clearCredentials=function(s,ns){var db=ns.split(".")[0];var filteredCredentials=[];for(var i=0;i<s.credentials.length;i++){if(s.credentials[i][1]!=db)filteredCredentials.push(s.credentials[i])}s.credentials=filteredCredentials};var filterByTags=function(readPreference,servers){if(readPreference.tags==null)return servers;var filteredServers=[];var tags=readPreference.tags;for(var i=0;i<servers.length;i++){var serverTag=servers[i].lastIsMaster().tags||{};var found=true;for(var name in tags){if(serverTag[name]!=tags[name])found=false}if(found)filteredServers.push(servers[i])}return filteredServers};var pickServer=function(self,s,readPreference){readPreference=readPreference||ReadPreference.primary;if(s.readPreferenceStrategies!=null&&s.readPreferenceStrategies[readPreference.preference]!=null){if(s.readPreferenceStrategies[readPreference.preference]==null)throw new MongoError(f("cannot locate read preference handler for %s",readPreference.preference));var server=s.readPreferenceStrategies[readPreference.preference].pickServer(s.replState,readPreference);if(s.debug)self.emit("pickedServer",readPreference,server);return server}if(readPreference.equals(ReadPreference.secondary)&&s.replState.secondaries.length==0)throw new MongoError("no secondary server available");if(readPreference.equals(ReadPreference.secondaryPreferred)&&s.replState.secondaries.length==0&&s.replState.primary==null)throw new MongoError("no secondary or primary server available");if(readPreference.equals(ReadPreference.primary)&&s.replState.primary==null)throw new MongoError("no primary server available");if(readPreference.equals(ReadPreference.secondary)){s.index=(s.index+1)%s.replState.secondaries.length;return s.replState.secondaries[s.index]}if(readPreference.equals(ReadPreference.secondaryPreferred)){if(s.replState.secondaries.length>0){var servers=filterByTags(readPreference,s.replState.secondaries);if(servers.length>0){s.index=(s.index+1)%servers.length;return servers[s.index]}}return s.replState.primary}if(readPreference.equals(ReadPreference.primaryPreferred)){if(s.replState.primary)return s.replState.primary;if(s.replState.secondaries.length>0){var servers=filterByTags(readPreference,s.replState.secondaries);if(servers.length>0){s.index=(s.index+1)%servers.length;return servers[s.index]}throw new MongoError("no secondary or primary server available")}}return s.replState.primary};var replicasetInquirer=function(self,state,norepeat){return function(){if(state.replState.state==DESTROYED)return;if(state.highAvailabilityProcessRunning)return;state.highAvailabilityProcessRunning=true;if(state.logger.isInfo())state.logger.info(f("[%s] monitoring process running %s",state.id,JSON.stringify(state.replState)));var localHaId=state.haId++;state.connectingServers={};norepeat=typeof norepeat=="boolean"?norepeat:false;if(state.replState.isPrimaryConnected()&&state.replState.isSecondaryConnected()&&state.disconnectHandler){state.disconnectHandler.execute()}self.emit("ha","start",{norepeat:norepeat,id:localHaId,state:state.replState?state.replState.toJSON():{}});while(state.disconnectedServers.length>0){var server=state.disconnectedServers.shift();if(state.logger.isInfo())state.logger.info(f("[%s] monitoring attempting to connect to %s",state.id,server.lastIsMaster()?server.lastIsMaster().me:server.name));server.once("error",errorHandlerTemp(self,state,"error"));server.once("close",errorHandlerTemp(self,state,"close"));server.once("timeout",errorHandlerTemp(self,state,"timeout"));server.once("connect",connectHandler(self,state));server.connect()}state.replState.clean();var servers=state.replState.getAll();var serversLeft=servers.length;if(servers.length==0&&state.replState.state==CONNECTED){self.emit("ha","end",{norepeat:norepeat,id:localHaId,state:state.replState?state.replState.toJSON():{}});state.highAvailabilityProcessRunning=false;if(!norepeat)setTimeout(replicasetInquirer(self,state,false),state.haInterval);return}var primaryIsMaster=null;var inspectServer=function(server){if(state.replState.state==DESTROYED)return;if(server&&server.isConnected()){server.command("system.$cmd",{ismaster:true},function(err,r){if(state.replState.state==DESTROYED)return;serversLeft=serversLeft-1;if(err&&serversLeft>0)return;if(err&&serversLeft==0){self.emit("ha","end",{norepeat:norepeat,id:localHaId,state:state.replState?state.replState.toJSON():{}});state.highAvailabilityProcessRunning=false;if(!norepeat)setTimeout(replicasetInquirer(self,state,false),state.haInterval);return}var rPreferencesCount=Object.keys(state.readPreferenceStrategies).length;var ismaster=r.result;if(state.logger.isDebug())state.logger.debug(f("[%s] monitoring process ismaster %s",state.id,JSON.stringify(ismaster)));state.replState.update(ismaster,server);if(err==null&&ismaster.ismaster&&Array.isArray(ismaster.hosts)){var hosts=ismaster.hosts;if(Array.isArray(ismaster.arbiters))hosts=hosts.concat(ismaster.arbiters);if(Array.isArray(ismaster.passives))hosts=hosts.concat(ismaster.passives);processHosts(self,state,hosts)}if(rPreferencesCount==0){if(serversLeft>0)return;self.emit("ha","end",{norepeat:norepeat,id:localHaId,state:state.replState?state.replState.toJSON():{}});state.highAvailabilityProcessRunning=false;if(!norepeat)setTimeout(replicasetInquirer(self,state,false),state.haInterval);return}if(serversLeft==0){for(var name in state.readPreferenceStrategies){state.readPreferenceStrategies[name].ha(self,state.replState,function(){rPreferencesCount=rPreferencesCount-1;if(rPreferencesCount==0){if(err==null&&ismaster.ismaster&&Array.isArray(ismaster.hosts)){processHosts(self,state,ismaster.hosts)}self.emit("ha","end",{norepeat:norepeat,id:localHaId,state:state.replState?state.replState.toJSON():{}});state.highAvailabilityProcessRunning=false;if(!norepeat)setTimeout(replicasetInquirer(self,state,false),state.haInterval);return}})}}})}};for(var i=0;i<servers.length;i++){inspectServer(servers[i])}if(state.replState.secondaries.length>=1&&state.replState.primary!=null&&!state.fullsetup){state.fullsetup=true;self.emit("fullsetup",self)}if(state.replState.primary!=null&&self.lastIsMaster()&&Array.isArray(self.lastIsMaster().hosts)&&!state.all){var length=1+state.replState.secondaries.length;if(length==self.lastIsMaster().hosts.length){state.all=true;self.emit("all",self)}}}};var errorHandlerTemp=function(self,state,event){return function(err,server){if(state.logger.isInfo())state.logger.info(f("[%s] server %s disconnected",state.id,server.lastIsMaster()?server.lastIsMaster().me:server.name));state.initialConnectionServers=state.initialConnectionServers.filter(function(_server){return server.name!=_server.name});if(state.replState.state==DESTROYED)return;["error","close","timeout","connect"].forEach(function(e){server.removeAllListeners(e)});addToListIfNotExist(state.disconnectedServers,server);if(state.initialConnectionServers==0&&state.replState.state==CONNECTING){if(state.secondaryOnlyConnectionAllowed&&!state.replState.isSecondaryConnected()&&!state.replState.isPrimaryConnected()||!state.secondaryOnlyConnectionAllowed&&!state.replState.isPrimaryConnected()){if(state.logger.isInfo())state.logger.info(f("[%s] no valid seed servers in list",state.id));if(self.listeners("error").length>0)return self.emit("error",new MongoError("no valid seed servers in list"))}}if(state.disconnectedServers.length==state.seedlist.length&&state.replState.state==CONNECTING){if(state.emitError&&self.listeners("error").length>0){if(state.logger.isInfo())state.logger.info(f("[%s] no valid seed servers in list",state.id));if(self.listeners("error").length>0)self.emit("error",new MongoError("no valid seed servers in list"));

}}}};var connectHandler=function(self,state){return function(server){if(state.logger.isInfo())state.logger.info(f("[%s] connected to %s",state.id,server.name));if(state.replState.state==DESTROYED){server.destroy(false,false);return}state.initialConnectionServers=state.initialConnectionServers.filter(function(_server){return server.name!=_server.name});var processNewServer=function(){var ismaster=server.lastIsMaster();var events=["error","close","timeout","connect","message"];events.forEach(function(e){server.removeAllListeners(e)});delete state.connectingServers[server.name];if(!state.replState.update(ismaster,server)){return server.destroy()}if(server.isConnected()){server.on("error",errorHandler(self,state));server.on("close",closeHandler(self,state));server.on("timeout",timeoutHandler(self,state))}var hosts=ismaster.hosts;if(Array.isArray(ismaster.arbiters))hosts=hosts.concat(ismaster.arbiters);if(Array.isArray(ismaster.passives))hosts=hosts.concat(ismaster.passives);processHosts(self,state,hosts);if(state.initialConnectionServers.length==0&&Object.keys(state.connectingServers).length==0&&!state.replState.isPrimaryConnected()&&!state.secondaryOnlyConnectionAllowed&&state.replState.state==CONNECTING){if(state.logger.isInfo())state.logger.info(f("[%s] no primary found in replicaset",state.id));self.emit("error",new MongoError("no primary found in replicaset"));return self.destroy()}if(state.replState.secondaries.length>=1&&state.replState.primary!=null&&!state.fullsetup){state.fullsetup=true;self.emit("fullsetup",self)}};if(self.s.authInProgress){self.s.authInProgressServers.push(server)}if(state.credentials.length==0)return processNewServer();var count=state.credentials.length;for(var i=0;i<state.credentials.length;i++){server.auth.apply(server,state.credentials[i].concat([function(err,r){count=count-1;if(count==0)processNewServer()}]))}}};var processHosts=function(self,state,hosts){if(state.replState.state==DESTROYED)return;if(Array.isArray(hosts)){for(var i=0;i<hosts.length;i++){if(!state.replState.contains(hosts[i])){if(state.connectingServers[hosts[i]]==null&&!inInitialConnectingServers(self,state,hosts[i])){if(state.logger.isInfo())state.logger.info(f("[%s] scheduled server %s for connection",state.id,hosts[i]));state.connectingServers[hosts[i]]=hosts[i];connectToServer(self,state,hosts[i].split(":")[0],parseInt(hosts[i].split(":")[1],10))}}}}};var inInitialConnectingServers=function(self,state,address){for(var i=0;i<state.initialConnectionServers.length;i++){if(state.initialConnectionServers[i].name==address)return true}return false};var connectToServer=function(self,state,host,port){var opts=cloneOptions(state.options);opts.host=host;opts.port=port;opts.reconnect=false;opts.readPreferenceStrategies=state.readPreferenceStrategies;if(state.tag)opts.tag=state.tag;opts.authProviders=state.authProviders;opts.emitError=true;var server=new Server(opts);server.once("error",errorHandlerTemp(self,state,"error"));server.once("close",errorHandlerTemp(self,state,"close"));server.once("timeout",errorHandlerTemp(self,state,"timeout"));server.once("connect",connectHandler(self,state));server.connect()};var addToListIfNotExist=function(list,server){var found=false;["error","close","timeout","connect"].forEach(function(e){server.removeAllListeners(e)});for(var i=0;i<list.length;i++){if(list[i].equals(server))found=true}if(!found){list.push(server)}return found};var errorHandler=function(self,state){return function(err,server){if(state.replState.state==DESTROYED)return;if(state.logger.isInfo())state.logger.info(f("[%s] server %s errored out with %s",state.id,server.lastIsMaster()?server.lastIsMaster().me:server.name,JSON.stringify(err)));var found=addToListIfNotExist(state.disconnectedServers,server);if(!found)self.emit("left",state.replState.remove(server),server);if(found&&state.emitError&&self.listeners("error").length>0)self.emit("error",err,server);setTimeout(function(){replicasetInquirer(self,self.s,true)()},self.s.minHeartbeatFrequencyMS)}};var timeoutHandler=function(self,state){return function(err,server){if(state.replState.state==DESTROYED)return;if(state.logger.isInfo())state.logger.info(f("[%s] server %s timed out",state.id,server.lastIsMaster()?server.lastIsMaster().me:server.name));var found=addToListIfNotExist(state.disconnectedServers,server);if(!found)self.emit("left",state.replState.remove(server),server);setTimeout(function(){replicasetInquirer(self,self.s,true)()},self.s.minHeartbeatFrequencyMS)}};var closeHandler=function(self,state){return function(err,server){if(state.replState.state==DESTROYED)return;if(state.logger.isInfo())state.logger.info(f("[%s] server %s closed",state.id,server.lastIsMaster()?server.lastIsMaster().me:server.name));var found=addToListIfNotExist(state.disconnectedServers,server);if(!found)self.emit("left",state.replState.remove(server),server);setTimeout(function(){replicasetInquirer(self,self.s,true)()},self.s.minHeartbeatFrequencyMS)}};var notMasterError=function(r){var result=r&&r.result?r.result:r;if(result&&(result.err=="not master"||result.errmsg=="not master"||result["$err"]&&result["$err"].indexOf("not master or secondary")!=-1||result["$err"]&&result["$err"].indexOf("not master and slaveOk=false")!=-1||result.errmsg=="node is recovering")){return true}return false};module.exports=ReplSet},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,b=__webpack_require__(568),bindToCurrentDomain=__webpack_require__(554).bindToCurrentDomain,EventEmitter=__webpack_require__(120).EventEmitter,BasicCursor=__webpack_require__(324),BSON=__webpack_require__(568).native().BSON,BasicCursor=__webpack_require__(324),Server=__webpack_require__(320),Logger=__webpack_require__(323),ReadPreference=__webpack_require__(325),Session=__webpack_require__(559),MongoError=__webpack_require__(319);var DISCONNECTED="disconnected";var CONNECTING="connecting";var CONNECTED="connected";var DESTROYED="destroyed";var bsonTypes=[b.Long,b.ObjectID,b.Binary,b.Code,b.DBRef,b.Symbol,b.Double,b.Timestamp,b.MaxKey,b.MinKey];var bsonInstance=null;var mongosId=0;var cloneOptions=function(options){var opts={};for(var name in options){opts[name]=options[name]}return opts};var State=function(readPreferenceStrategies){this.s={connectedServers:[],disconnectedServers:[],readPreferenceStrategies:readPreferenceStrategies}};State.prototype.connected=function(server){this.s.disconnectedServers=this.s.disconnectedServers.filter(function(s){return!s.equals(server)});var found=false;this.s.connectedServers.forEach(function(s){if(s.equals(server))found=true});if(!found)this.s.connectedServers.push(server)};State.prototype.disconnected=function(server){this.s.connectedServers=this.s.connectedServers.filter(function(s){return!s.equals(server)});var found=false;this.s.disconnectedServers.forEach(function(s){if(s.equals(server))found=true});if(!found)this.s.disconnectedServers.push(server)};State.prototype.disconnectedServers=function(){return this.s.disconnectedServers.slice(0)};State.prototype.connectedServers=function(){return this.s.connectedServers.slice(0)};State.prototype.getAll=function(){return this.s.connectedServers.slice(0).concat(this.s.disconnectedServers)};State.prototype.getAllConnections=function(){var connections=[];this.s.connectedServers.forEach(function(e){connections=connections.concat(e.connections())});return connections};State.prototype.destroy=function(){while(this.s.connectedServers.length>0){var server=this.s.connectedServers.shift();["error","close","timeout","connect"].forEach(function(e){server.removeAllListeners(e)});server.destroy();this.s.disconnectedServers.push(server)}};State.prototype.isConnected=function(){return this.s.connectedServers.length>0};State.prototype.pickServer=function(readPreference){readPreference=readPreference||ReadPreference.primary;if(this.s.readPreferenceStrategies!=null&&this.s.readPreferenceStrategies[readPreference]!=null){return this.s.readPreferenceStrategies[readPreference].pickServer(connectedServers,readPreference)}if(this.s.connectedServers.length==0)throw new MongoError("no mongos proxy available");return this.s.connectedServers[0]};var Mongos=function(seedlist,options){var self=this;options=options||{};EventEmitter.call(this);if(!Array.isArray(seedlist))throw new MongoError("seedlist must be an array");if(seedlist.length==0)throw new MongoError("seedlist must contain at least one entry");seedlist.forEach(function(e){if(typeof e.host!="string"||typeof e.port!="number")throw new MongoError("seedlist entry must contain a host and port")});bsonInstance=bsonInstance==null?new BSON(bsonTypes):bsonInstance;var bson=options.bson?options.bson:bsonInstance;options.bson=bson;this.s={seedlist:seedlist,options:options,logger:Logger("Mongos",options),reconnectTries:options.reconnectTries||30,haInterval:options.haInterval||5e3,fullsetup:false,Cursor:options.cursorFactory||BasicCursor,credentials:[],bsonInstance:bsonInstance,bson:bson,state:DISCONNECTED,emitError:typeof options.emitError=="boolean"?options.emitError:false,readPreferenceStrategies:{},authProviders:{},id:mongosId++,retriesLeft:options.reconnectTries||30,disconnectHandler:options.disconnectHandler};options.connectionTimeout=options.connectionTimeout||1e3;this.s.mongosState=new State(this.s.readPreferenceStrategies);Object.defineProperty(this,"bson",{enumerable:true,get:function(){var servers=self.s.mongosState.getAll();return servers.length>0?servers[0].bson:null}});Object.defineProperty(this,"id",{enumerable:true,get:function(){return self.s.id}});Object.defineProperty(this,"type",{enumerable:true,get:function(){return"mongos"}});Object.defineProperty(this,"haInterval",{enumerable:true,get:function(){return self.s.haInterval}});Object.defineProperty(this,"state",{enumerable:true,get:function(){return self.s.mongosState}})};inherits(Mongos,EventEmitter);Mongos.prototype.setBSONParserType=function(type){var nBSON=null;if(type=="c++"){nBSON=__webpack_require__(568).native().BSON}else if(type=="js"){nBSON=__webpack_require__(568).pure().BSON}else{throw new MongoError(f("% parser not supported",type))}this.s.options.bson=new nBSON(bsonTypes)};Mongos.prototype.lastIsMaster=function(){var connectedServers=this.s.mongosState.connectedServers();if(connectedServers.length>0)return connectedServers[0].lastIsMaster();return null};Mongos.prototype.connect=function(_options){var self=this;setTimeout(mongosInquirer(self,self.s),self.s.haInterval);if(_options)for(var name in _options)self.s.options[name]=_options[name];self.s.seedlist.forEach(function(e){var opts=cloneOptions(self.s.options);opts.host=e.host;opts.port=e.port;opts.reconnect=false;opts.readPreferenceStrategies=self.s.readPreferenceStrategies;opts.authProviders=self.s.authProviders;opts.emitError=true;self.s.mongosState.disconnected(new Server(opts))});var servers=self.s.mongosState.disconnectedServers();while(servers.length>0){var server=servers.shift();["error","close","timeout","connect","message","parseError"].forEach(function(e){server.removeAllListeners(e)});server.once("error",errorHandlerTemp(self,self.s,server));server.once("close",errorHandlerTemp(self,self.s,server));server.once("timeout",errorHandlerTemp(self,self.s,server));server.once("parseError",errorHandlerTemp(self,self.s,server));server.once("connect",connectHandler(self,self.s,"connect"));if(self.s.logger.isInfo())self.s.logger.info(f("connecting to server %s",server.name));server.connect()}};Mongos.prototype.destroy=function(emitClose){this.s.state=DESTROYED;if(emitClose&&self.listeners("close").length>0)self.emit("close",self);this.s.mongosState.destroy()};Mongos.prototype.isConnected=function(){return this.s.mongosState.isConnected()};Mongos.prototype.insert=function(ns,ops,options,callback){if(!this.isConnected()&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("insert",ns,ops,options,callback)}executeWriteOperation(this.s,"insert",ns,ops,options,callback)};Mongos.prototype.update=function(ns,ops,options,callback){if(!this.isConnected()&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("update",ns,ops,options,callback)}executeWriteOperation(this.s,"update",ns,ops,options,callback)};Mongos.prototype.remove=function(ns,ops,options,callback){if(!this.isConnected()&&this.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return this.s.disconnectHandler.add("remove",ns,ops,options,callback)}executeWriteOperation(this.s,"remove",ns,ops,options,callback)};Mongos.prototype.command=function(ns,cmd,options,callback){var self=this;if(typeof options=="function"){callback=options;options={}}if(!self.isConnected()&&self.s.disconnectHandler!=null){callback=bindToCurrentDomain(callback);return self.s.disconnectHandler.add("command",ns,cmd,options,callback)}var server=null;options=options||{};if(options.onAll){var servers=self.s.mongosState.getAll();var count=servers.length;var cmdErr=null;for(var i=0;i<servers.length;i++){servers[i].command(ns,cmd,options,function(err,r){count=count-1;if(count==0){if(cmd.logout)clearCredentials(state,ns);callback(err,r)}})}return}try{server=self.s.mongosState.pickServer(options.writeConcern?ReadPreference.primary:options.readPreference)}catch(err){return callback(err)}if(server==null)return callback(new MongoError("no mongos found"));server.command(ns,cmd,options,function(err,r){if(cmd.logout)clearCredentials(self.s,ns);callback(err,r)})};Mongos.prototype.cursor=function(ns,cmd,cursorOptions){cursorOptions=cursorOptions||{};var FinalCursor=cursorOptions.cursorFactory||this.s.Cursor;return new FinalCursor(this.s.bson,ns,cmd,cursorOptions,this,this.s.options)};Mongos.prototype.auth=function(mechanism,db){var self=this;var args=Array.prototype.slice.call(arguments,2);var callback=args.pop();if(self.s.authProviders[mechanism]==null&&mechanism!="default")throw new MongoError(f("auth provider %s does not exist",mechanism));var servers=self.s.mongosState.connectedServers();var count=servers.length;var authenticated=true;var authErr=null;while(servers.length>0){var server=servers.shift();var finalArguments=[mechanism,db].concat(args.slice(0)).concat([function(err,r){count=count-1;if(err)authErr=err;if(!r)authenticated=false;if(count==0){if(authErr)return callback(authErr,false);callback(null,new Session({},self))}}]);server.auth.apply(server,finalArguments)}};Mongos.prototype.addReadPreferenceStrategy=function(name,strategy){if(this.s.readPreferenceStrategies==null)this.s.readPreferenceStrategies={};this.s.readPreferenceStrategies[name]=strategy};Mongos.prototype.addAuthProvider=function(name,provider){this.s.authProviders[name]=provider};Mongos.prototype.getConnection=function(options){options=options||{};var server=this.s.mongosState.pickServer(options.readPreference);if(server==null)return null;return server.getConnection()};Mongos.prototype.getServer=function(options){options=options||{};return this.s.mongosState.pickServer(options.readPreference)};Mongos.prototype.connections=function(){return this.s.mongosState.getAllConnections()};var mongosInquirer=function(self,state){return function(){if(state.state==DESTROYED)return;if(state.state==CONNECTED)state.retriesLeft=state.reconnectTries;if(state.state==DISCONNECTED&&state.retriesLeft==0){self.destroy();return self.emit("error",new MongoError(f("failed to reconnect after %s",state.reconnectTries)))}else if(state==DISCONNECTED){state.retriesLeft=state.retriesLeft-1}if(state.mongosState.isConnected()&&state.disconnectHandler){state.disconnectHandler.execute()}if(state.logger.isDebug())state.logger.debug(f("mongos ha proceess running"));var disconnectedServers=state.mongosState.disconnectedServers();if(disconnectedServers.length==0)return setTimeout(mongosInquirer(self,state),state.haInterval);var connectionCount=disconnectedServers.length;if(state.logger.isDebug())state.logger.debug(f("mongos ha proceess found %d disconnected proxies",connectionCount));while(disconnectedServers.length>0){var server=disconnectedServers.shift();if(state.logger.isDebug())state.logger.debug(f("attempting to connect to server %s",server.name));["error","close","timeout","connect","message","parseError"].forEach(function(e){server.removeAllListeners(e)});server.once("error",errorHandlerTemp(self,state,server));server.once("close",errorHandlerTemp(self,state,server));server.once("timeout",errorHandlerTemp(self,state,server));server.once("connect",connectHandler(self,state,"ha"));server.connect()}return setTimeout(mongosInquirer(self,state),state.options.connectionTimeout+state.haInterval)}};var errorHandlerTemp=function(self,state,server){return function(err,server){if(state.logger.isInfo())state.logger.info(f("server %s disconnected with error %s",server.name,JSON.stringify(err)));["error","close","timeout","connect"].forEach(function(e){server.removeAllListeners(e)});state.mongosState.disconnected(server)}};var errorHandler=function(self,state){return function(err,server){if(state.logger.isInfo())state.logger.info(f("server %s errored out with %s",server.name,JSON.stringify(err)));state.mongosState.disconnected(server);if(state.mongosState.connectedServers().length==0){state.state=DISCONNECTED}self.emit("left","mongos",server);if(state.emitError)self.emit("error",err,server)}};var timeoutHandler=function(self,state){return function(err,server){if(state.logger.isInfo())state.logger.info(f("server %s timed out",server.name));state.mongosState.disconnected(server);if(state.mongosState.connectedServers().length==0){state.state=DISCONNECTED}self.emit("left","mongos",server)}};var closeHandler=function(self,state){return function(err,server){if(state.logger.isInfo())state.logger.info(f("server %s closed",server.name));state.mongosState.disconnected(server);if(state.mongosState.connectedServers().length==0){state.state=DISCONNECTED}self.emit("left","mongos",server)}};var connectHandler=function(self,state,e){return function(server){if(state.logger.isInfo())state.logger.info(f("connected to %s",server.name));["error","close","timeout","connect","message","parseError"].forEach(function(e){server.removeAllListeners(e)});var processNewServer=function(_server){if(_server.isConnected()){_server.once("error",errorHandler(self,state));_server.once("close",closeHandler(self,state));_server.once("timeout",timeoutHandler(self,state));_server.once("parseError",timeoutHandler(self,state))}self.emit("joined","mongos",_server);state.mongosState.connected(_server);if("ha"==e&&state.mongosState.connectedServers().length==1){self.emit("reconnect",_server)}if(state.mongosState.disconnectedServers().length==0&&state.mongosState.connectedServers().length>0&&!state.fullsetup){state.fullsetup=true;self.emit("fullsetup")}if(state.state==DISCONNECTED){state.state=CONNECTED;self.emit("connect",self)}};if(state.credentials.length==0)return processNewServer(server);var count=state.credentials.length;for(var i=0;i<state.credentials.length;i++){server.auth.apply(server,state.credentials[i].concat([function(err,r){count=count-1;if(count==0)processNewServer(server)}]))}}};var addToListIfNotExist=function(list,server){var found=false;["error","close","timeout","connect"].forEach(function(e){server.removeAllListeners(e)});for(var i=0;i<list.length;i++){if(list[i].equals(server))found=true}if(!found){list.push(server)}};var addCredentials=function(state,db,argsWithoutCallback){clearCredentials(state,db+".dummy");state.credentials.push(argsWithoutCallback)};var clearCredentials=function(state,ns){var db=ns.split(".")[0];var filteredCredentials=[];for(var i=0;i<state.credentials.length;i++){if(state.credentials[i][1]!=db)filteredCredentials.push(state.credentials[i])}state.credentials=filteredCredentials};var processReadPreference=function(cmd,options){options=options||{};if(options.readPreference==null)return cmd};var executeWriteOperation=function(state,op,ns,ops,options,callback){if(typeof options=="function"){callback=options;options={}}var server=null;options=options||{};try{server=state.mongosState.pickServer()}catch(err){return callback(err)}if(server==null)return callback(new MongoError("no mongos found"));server[op](ns,ops,options,callback)};module.exports=Mongos},function(module,exports,__webpack_require__){(function(process){"use strict";var f=__webpack_require__(52).format,MongoError=__webpack_require__(319);var classFilters={};var filteredClasses={};var level=null;var pid=process.pid;var currentLogger=null;var Logger=function(className,options){if(!(this instanceof Logger))return new Logger(className,options);options=options||{};var self=this;this.className=className;if(currentLogger==null&&options.logger){currentLogger=options.logger}else if(currentLogger==null){currentLogger=console.log}if(level==null){level=options.loggerLevel||"error"}if(filteredClasses[this.className]==null)classFilters[this.className]=true};Logger.prototype.debug=function(message,object){if(this.isDebug()&&classFilters[this.className]&&(filteredClasses[this.className]||Object.keys(filteredClasses).length==0)){var dateTime=(new Date).getTime();var msg=f("[%s-%s:%s] %s %s","DEBUG",this.className,pid,dateTime,message);var state={type:"debug",message:message,className:this.className,pid:pid,date:dateTime};if(object)state.meta=object;currentLogger(msg,state)}};Logger.prototype.info=function(message,object){if(this.isInfo()&&classFilters[this.className]&&(filteredClasses[this.className]||Object.keys(filteredClasses).length==0)){var dateTime=(new Date).getTime();var msg=f("[%s-%s:%s] %s %s","INFO",this.className,pid,dateTime,message);var state={type:"info",message:message,className:this.className,pid:pid,date:dateTime};if(object)state.meta=object;currentLogger(msg,state)}},Logger.prototype.error=function(message,object){if(this.isError()&&classFilters[this.className]&&(filteredClasses[this.className]||Object.keys(filteredClasses).length==0)){var dateTime=(new Date).getTime();var msg=f("[%s-%s:%s] %s %s","ERROR",this.className,pid,dateTime,message);var state={type:"error",message:message,className:this.className,pid:pid,date:dateTime};if(object)state.meta=object;currentLogger(msg,state)}},Logger.prototype.isInfo=function(){return level=="info"||level=="debug"},Logger.prototype.isError=function(){return level=="error"||level=="info"||level=="debug"},Logger.prototype.isDebug=function(){return level=="debug"};Logger.reset=function(){level="error";filteredClasses={}};Logger.currentLogger=function(){return currentLogger};Logger.setCurrentLogger=function(logger){if(typeof logger!="function")throw new MongoError("current logger must be a function");currentLogger=logger};Logger.filter=function(type,values){if(type=="class"&&Array.isArray(values)){filteredClasses={};values.forEach(function(x){filteredClasses[x]=true})}};Logger.setLevel=function(_level){if(_level!="info"&&_level!="error"&&_level!="debug")throw new Error(f("%s is an illegal logging level",_level));level=_level};module.exports=Logger}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var Long=__webpack_require__(568).Long,Logger=__webpack_require__(323),MongoError=__webpack_require__(319),f=__webpack_require__(52).format;var Cursor=function(bson,ns,cmd,options,topology,topologyOptions){options=options||{};var self=this;var query=null;this.connection=null;this.server=null;this.disconnectHandler=options.disconnectHandler;this.bson=bson;this.ns=ns;this.cmd=cmd;this.options=options;this.topology=topology;this.cursorState={cursorId:null,documents:options.documents||[],cursorIndex:0,dead:false,killed:false,init:false,notified:false,limit:options.limit||cmd.limit||0,skip:options.skip||cmd.skip||0,batchSize:options.batchSize||cmd.batchSize||1e3,currentLimit:0,transforms:options.transforms};this.callbacks=null;this.logger=Logger("Cursor",options);if(typeof cmd=="number"){this.cursorState.cursorId=Long.fromNumber(cmd)}else if(cmd instanceof Long){this.cursorState.cursorId=cmd}};Cursor.prototype.setCursorBatchSize=function(value){this.cursorState.batchSize=value};Cursor.prototype.cursorBatchSize=function(){return this.cursorState.batchSize};Cursor.prototype.setCursorLimit=function(value){this.cursorState.limit=value};Cursor.prototype.cursorLimit=function(){return this.cursorState.limit};Cursor.prototype.setCursorSkip=function(value){this.cursorState.skip=value};Cursor.prototype.cursorSkip=function(){return this.cursorState.skip};var execGetMore=function(self,callback){if(self.logger.isDebug())self.logger.debug(f("schedule getMore call for query [%s]",JSON.stringify(self.query)));var raw=self.options.raw||self.cmd.raw;self.server.wireProtocolHandler.getMore(self.bson,self.ns,self.cursorState,self.cursorState.batchSize,raw,self.connection,self.callbacks,self.options,callback)};var execInitialQuery=function(self,query,cmd,options,cursorState,connection,logger,callbacks,callback){if(logger.isDebug()){logger.debug(f("issue initial query [%s] with flags [%s]",JSON.stringify(cmd),JSON.stringify(query)))}var queryCallback=function(err,result){if(err)return callback(err);if(result.queryFailure){return callback(MongoError.create(result.documents[0]),null)}if(Array.isArray(result.documents)&&result.documents.length==1&&!cmd.find){if(result.documents[0]["$err"]||result.documents[0]["errmsg"]){return callback(MongoError.create(result.documents[0]),null)}if(result.documents[0].cursor!=null&&typeof result.documents[0].cursor!="string"){var id=result.documents[0].cursor.id;if(result.documents[0].cursor.ns){self.ns=result.documents[0].cursor.ns}cursorState.cursorId=typeof id=="number"?Long.fromNumber(id):id;if(Array.isArray(result.documents[0].cursor.firstBatch)){cursorState.documents=result.documents[0].cursor.firstBatch}return callback(null,null)}if(Array.isArray(result.documents[0].result)){cursorState.documents=result.documents[0].result;cursorState.cursorId=Long.ZERO;return callback(null,null)}}cursorState.cursorId=result.cursorId;cursorState.documents=result.documents;if(cursorState.transforms&&typeof cursorState.transforms.query=="function"){cursorState.documents=cursorState.transforms.query(result)}callback(null,null)};if(options.raw||cmd.raw){queryCallback.raw=options.raw||cmd.raw}callbacks.register(query.requestId,queryCallback);connection.write(query.toBin())};var handleCallback=function(callback,err,result){try{callback(err,result)}catch(err){process.nextTick(function(){throw err})}};Cursor.prototype.clone=function(){return this.topology.cursor(this.ns,this.cmd,this.options)};Cursor.prototype.isDead=function(){return this.cursorState.dead==true};Cursor.prototype.isKilled=function(){return this.cursorState.killed==true};Cursor.prototype.isNotified=function(){return this.cursorState.notified==true};Cursor.prototype.bufferedCount=function(){return this.cursorState.documents.length-this.cursorState.cursorIndex};Cursor.prototype.readBufferedDocuments=function(number){var unreadDocumentsLength=this.cursorState.documents.length-this.cursorState.cursorIndex;var length=number<unreadDocumentsLength?number:unreadDocumentsLength;var elements=this.cursorState.documents.slice(this.cursorState.cursorIndex,this.cursorState.cursorIndex+length);this.cursorState.currentLimit=this.cursorState.currentLimit+length;this.cursorState.cursorIndex=this.cursorState.cursorIndex+length;if(this.cursorState.transforms&&typeof this.cursorState.transforms.doc=="function"){for(var i=0;i<elements.length;i++){elements[i]=this.cursorState.transforms.doc(elements[i])}}return elements};Cursor.prototype.kill=function(callback){this.cursorState.dead=true;this.cursorState.killed=true;this.cursorState.documents=[];if(this.cursorState.cursorId==null||this.cursorState.cursorId.isZero()||this.cursorState.init==false){if(callback)callback(null,null);return}this.server.wireProtocolHandler.killCursor(this.bson,this.cursorState.cursorId,this.connection,callback)};Cursor.prototype.rewind=function(){if(this.cursorState.init){if(!this.cursorState.dead){this.kill()}this.cursorState.currentLimit=0;this.cursorState.init=false;this.cursorState.dead=false;this.cursorState.killed=false;this.cursorState.notified=false;this.cursorState.documents=[];this.cursorState.cursorId=null;this.cursorState.cursorIndex=0}};var isConnectionDead=function(self,callback){if(self.connection&&!self.connection.isConnected()){self.cursorState.notified=true;self.cursorState.killed=true;self.cursorState.documents=[];self.cursorState.cursorIndex=0;callback(MongoError.create(f("connection to host %s:%s was destroyed",self.connection.host,self.connection.port)));return true}return false};var isCursorDeadButNotkilled=function(self,callback){if(self.cursorState.dead&&!self.cursorState.killed){self.cursorState.notified=true;self.cursorState.killed=true;self.cursorState.documents=[];self.cursorState.cursorIndex=0;handleCallback(callback,null,null);return true}return false};var isCursorDeadAndKilled=function(self,callback){if(self.cursorState.dead&&self.cursorState.killed){handleCallback(callback,MongoError.create("cursor is dead"));return true}return false};var isCursorKilled=function(self,callback){if(self.cursorState.killed){self.cursorState.notified=true;self.cursorState.documents=[];self.cursorState.cursorIndex=0;handleCallback(callback,null,null);return true}return false};var setCursorDeadAndNotified=function(self,callback){self.cursorState.dead=true;self.cursorState.notified=true;self.cursorState.documents=[];self.cursorState.cursorIndex=0;handleCallback(callback,null,null)};var setCursorNotified=function(self,callback){self.cursorState.notified=true;self.cursorState.documents=[];self.cursorState.cursorIndex=0;handleCallback(callback,null,null)};Cursor.prototype.next=function(callback){var self=this;if(self.cursorState.notified)return;if(isCursorKilled(self,callback))return;if(isCursorDeadButNotkilled(self,callback))return;if(isCursorDeadAndKilled(self,callback))return;if(!self.cursorState.init){if(!self.topology.isConnected(self.options)&&self.disconnectHandler!=null){return self.disconnectHandler.addObjectAndMethod("cursor",self,"next",[callback],callback)}try{self.server=self.topology.getServer(self.options);self.connection=self.server.getConnection();self.callbacks=self.server.getCallbacks()}catch(err){return callback(err)}self.cursorState.init=true;this.query=self.server.wireProtocolHandler.command(self.bson,self.ns,self.cmd,self.cursorState,self.topology,self.options)}var processExhaustMessages=function(err,result){if(err){self.cursorState.dead=true;self.callbacks.unregister(self.query.requestId);return callback(err)}self.cursorState.documents=self.cursorState.documents.concat(result.documents);if(Long.ZERO.equals(result.cursorId)){self.cursorState.cursorId=Long.ZERO;self.callbacks.unregister(self.query.requestId);return self.next(callback)}self.callbacks.register(result.requestId,processExhaustMessages);if(self.cursorState.cursorId==null){self.cursorState.cursorId=result.cursorId;self.next(callback)}};if(self.cmd.exhaust&&self.cursorState.cursorId==null){self.callbacks.register(self.query.requestId,processExhaustMessages);return self.connection.write(self.query.toBin())}else if(self.cmd.exhaust&&self.cursorState.cursorIndex<self.cursorState.documents.length){return handleCallback(callback,null,self.cursorState.documents[self.cursorState.cursorIndex++])}else if(self.cmd.exhaust&&Long.ZERO.equals(self.cursorState.cursorId)){self.callbacks.unregister(self.query.requestId);return setCursorNotified(self,callback)}else if(self.cmd.exhaust){return setTimeout(function(){if(Long.ZERO.equals(self.cursorState.cursorId))return;self.next(callback)},1)}if(self.cursorState.cursorId==null){if(isConnectionDead(self,callback))return;execInitialQuery(self,self.query,self.cmd,self.options,self.cursorState,self.connection,self.logger,self.callbacks,function(err,r){if(err)return handleCallback(callback,err,null);if(self.cursorState.documents.length==0&&!self.cmd.tailable&&!self.cmd.awaitData){
return setCursorNotified(self,callback)}self.next(callback)})}else if(self.cursorState.limit>0&&self.cursorState.currentLimit>=self.cursorState.limit){return setCursorDeadAndNotified(self,callback)}else if(self.cursorState.cursorIndex==self.cursorState.documents.length&&!Long.ZERO.equals(self.cursorState.cursorId)){self.cursorState.documents=[];self.cursorState.cursorIndex=0;if(isConnectionDead(self,callback))return;execGetMore(self,function(err,doc){if(err)return handleCallback(callback,err);if(self.cursorState.documents.length==0&&Long.ZERO.equals(self.cursorState.cursorId))self.cursorState.dead=true;if(self.cursorState.documents.length==0&&self.cmd.tailable){return handleCallback(callback,MongoError.create({message:"No more documents in tailed cursor",tailable:self.cmd.tailable,awaitData:self.cmd.awaitData}))}if(self.cursorState.limit>0&&self.cursorState.currentLimit>=self.cursorState.limit){return setCursorDeadAndNotified(self,callback)}self.next(callback)})}else if(self.cursorState.documents.length==self.cursorState.cursorIndex&&self.cmd.tailable){return handleCallback(callback,MongoError.create({message:"No more documents in tailed cursor",tailable:self.cmd.tailable,awaitData:self.cmd.awaitData}))}else if(self.cursorState.documents.length==self.cursorState.cursorIndex&&Long.ZERO.equals(self.cursorState.cursorId)){setCursorDeadAndNotified(self,callback)}else{if(self.cursorState.limit>0&&self.cursorState.currentLimit>=self.cursorState.limit){return setCursorDeadAndNotified(self,callback)}self.cursorState.currentLimit+=1;var doc=self.cursorState.documents[self.cursorState.cursorIndex++];if(self.cursorState.transforms&&typeof self.cursorState.transforms.doc=="function"){doc=self.cursorState.transforms.doc(doc)}handleCallback(callback,null,doc)}};module.exports=Cursor}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var needSlaveOk=["primaryPreferred","secondary","secondaryPreferred","nearest"];var ReadPreference=function(preference,tags,options){this.preference=preference;this.tags=tags;this.options=options};ReadPreference.prototype.slaveOk=function(){return needSlaveOk.indexOf(this.preference)!=-1};ReadPreference.prototype.equals=function(readPreference){return readPreference.preference==this.preference};ReadPreference.prototype.toJSON=function(){var readPreference={mode:this.preference};if(Array.isArray(this.tags))readPreference.tags=this.tags;return readPreference};ReadPreference.primary=new ReadPreference("primary");ReadPreference.primaryPreferred=new ReadPreference("primaryPreferred");ReadPreference.secondary=new ReadPreference("secondary");ReadPreference.secondaryPreferred=new ReadPreference("secondaryPreferred");ReadPreference.nearest=new ReadPreference("nearest");module.exports=ReadPreference},function(module,exports,__webpack_require__){(function(Buffer){"use strict";var f=__webpack_require__(52).format,Long=__webpack_require__(568).Long,setProperty=__webpack_require__(554).setProperty,getProperty=__webpack_require__(554).getProperty,getSingleProperty=__webpack_require__(554).getSingleProperty;var _requestId=0;var OP_QUERY=2004;var OP_GETMORE=2005;var OP_KILL_CURSORS=2007;var OPTS_NONE=0;var OPTS_TAILABLE_CURSOR=2;var OPTS_SLAVE=4;var OPTS_OPLOG_REPLAY=8;var OPTS_NO_CURSOR_TIMEOUT=16;var OPTS_AWAIT_DATA=32;var OPTS_EXHAUST=64;var OPTS_PARTIAL=128;var CURSOR_NOT_FOUND=0;var QUERY_FAILURE=2;var SHARD_CONFIG_STALE=4;var AWAIT_CAPABLE=8;var Query=function(bson,ns,query,options){var self=this;if(ns==null)throw new Error("ns must be specified for query");if(query==null)throw new Error("query must be specified for query");if(!!~ns.indexOf("\x00")){throw new Error("namespace cannot contain a null character")}this.bson=bson;this.ns=ns;this.query=query;this.options=options||{};this.numberToSkip=options.numberToSkip||0;this.numberToReturn=options.numberToReturn||0;this.returnFieldSelector=options.returnFieldSelector||null;this.requestId=_requestId++;this.serializeFunctions=typeof options.serializeFunctions=="boolean"?options.serializeFunctions:false;this.maxBsonSize=options.maxBsonSize||1024*1024*16;this.checkKeys=typeof options.checkKeys=="boolean"?options.checkKeys:true;this.batchSize=self.numberToReturn;this.tailable=false;this.slaveOk=false;this.oplogReply=false;this.noCursorTimeout=false;this.awaitData=false;this.exhaust=false;this.partial=false};Query.prototype.incRequestId=function(){this.requestId=_requestId++};Query.prototype.toBin=function(){var self=this;var length=4+Buffer.byteLength(self.ns)+1+4+4+self.bson.calculateObjectSize(self.query,self.serializeFunctions,true)+4*4;if(self.returnFieldSelector&&Object.keys(self.returnFieldSelector).length>0){length+=self.bson.calculateObjectSize(self.returnFieldSelector,self.serializeFunctions,true)}var _buffer=new Buffer(length);var flags=0;if(this.tailable)flags|=OPTS_TAILABLE_CURSOR;if(this.slaveOk)flags|=OPTS_SLAVE;if(this.oplogReply)flags|=OPTS_OPLOG_REPLAY;if(this.noCursorTimeout)flags|=OPTS_NO_CURSOR_TIMEOUT;if(this.awaitData)flags|=OPTS_AWAIT_DATA;if(this.exhaust)flags|=OPTS_EXHAUST;if(this.partial)flags|=OPTS_PARTIAL;if(self.batchSize!=self.numberToReturn)self.numberToReturn=self.batchSize;var index=4;_buffer[index+3]=this.requestId>>24&255;_buffer[index+2]=this.requestId>>16&255;_buffer[index+1]=this.requestId>>8&255;_buffer[index]=this.requestId&255;index=index+4;_buffer[index+3]=0>>24&255;_buffer[index+2]=0>>16&255;_buffer[index+1]=0>>8&255;_buffer[index]=0&255;index=index+4;_buffer[index+3]=OP_QUERY>>24&255;_buffer[index+2]=OP_QUERY>>16&255;_buffer[index+1]=OP_QUERY>>8&255;_buffer[index]=OP_QUERY&255;index=index+4;_buffer[index+3]=flags>>24&255;_buffer[index+2]=flags>>16&255;_buffer[index+1]=flags>>8&255;_buffer[index]=flags&255;index=index+4;index=index+_buffer.write(this.ns,index,"utf8")+1;_buffer[index-1]=0;_buffer[index+3]=this.numberToSkip>>24&255;_buffer[index+2]=this.numberToSkip>>16&255;_buffer[index+1]=this.numberToSkip>>8&255;_buffer[index]=this.numberToSkip&255;index=index+4;_buffer[index+3]=this.numberToReturn>>24&255;_buffer[index+2]=this.numberToReturn>>16&255;_buffer[index+1]=this.numberToReturn>>8&255;_buffer[index]=this.numberToReturn&255;index=index+4;var queryLength=this.bson.serializeWithBufferAndIndex(this.query,this.checkKeys,_buffer,index,this.serializeFunctions)-index+1;_buffer[index+3]=queryLength>>24&255;_buffer[index+2]=queryLength>>16&255;_buffer[index+1]=queryLength>>8&255;_buffer[index]=queryLength&255;index=index+4;index=index-4+queryLength;_buffer[index+1]=0;if(this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0){var fieldSelectorLength=this.bson.serializeWithBufferAndIndex(this.returnFieldSelector,this.checkKeys,_buffer,index,this.serializeFunctions)-index+1;_buffer[index+3]=fieldSelectorLength>>24&255;_buffer[index+2]=fieldSelectorLength>>16&255;_buffer[index+1]=fieldSelectorLength>>8&255;_buffer[index]=fieldSelectorLength&255;index=index+4;index=index-4+fieldSelectorLength;_buffer[index+1]=0}_buffer[3]=index>>24&255;_buffer[2]=index>>16&255;_buffer[1]=index>>8&255;_buffer[0]=index&255;return _buffer};Query.getRequestId=function(){return++_requestId};var GetMore=function(bson,ns,cursorId,opts){opts=opts||{};this.numberToReturn=opts.numberToReturn||0;this.requestId=_requestId++;this.bson=bson;this.ns=ns;this.cursorId=cursorId};GetMore.prototype.toBin=function(){var length=4+Buffer.byteLength(this.ns)+1+4+8+4*4;var index=0;var _buffer=new Buffer(length);_buffer[index+3]=length>>24&255;_buffer[index+2]=length>>16&255;_buffer[index+1]=length>>8&255;_buffer[index]=length&255;index=index+4;_buffer[index+3]=this.requestId>>24&255;_buffer[index+2]=this.requestId>>16&255;_buffer[index+1]=this.requestId>>8&255;_buffer[index]=this.requestId&255;index=index+4;_buffer[index+3]=0>>24&255;_buffer[index+2]=0>>16&255;_buffer[index+1]=0>>8&255;_buffer[index]=0&255;index=index+4;_buffer[index+3]=OP_GETMORE>>24&255;_buffer[index+2]=OP_GETMORE>>16&255;_buffer[index+1]=OP_GETMORE>>8&255;_buffer[index]=OP_GETMORE&255;index=index+4;_buffer[index+3]=0>>24&255;_buffer[index+2]=0>>16&255;_buffer[index+1]=0>>8&255;_buffer[index]=0&255;index=index+4;index=index+_buffer.write(this.ns,index,"utf8")+1;_buffer[index-1]=0;_buffer[index+3]=this.numberToReturn>>24&255;_buffer[index+2]=this.numberToReturn>>16&255;_buffer[index+1]=this.numberToReturn>>8&255;_buffer[index]=this.numberToReturn&255;index=index+4;_buffer[index+3]=this.cursorId.getLowBits()>>24&255;_buffer[index+2]=this.cursorId.getLowBits()>>16&255;_buffer[index+1]=this.cursorId.getLowBits()>>8&255;_buffer[index]=this.cursorId.getLowBits()&255;index=index+4;_buffer[index+3]=this.cursorId.getHighBits()>>24&255;_buffer[index+2]=this.cursorId.getHighBits()>>16&255;_buffer[index+1]=this.cursorId.getHighBits()>>8&255;_buffer[index]=this.cursorId.getHighBits()&255;index=index+4;return _buffer};var KillCursor=function(bson,cursorIds){this.requestId=_requestId++;this.cursorIds=cursorIds};KillCursor.prototype.toBin=function(){var length=4+4+4*4+this.cursorIds.length*8;var index=0;var _buffer=new Buffer(length);_buffer[index+3]=length>>24&255;_buffer[index+2]=length>>16&255;_buffer[index+1]=length>>8&255;_buffer[index]=length&255;index=index+4;_buffer[index+3]=this.requestId>>24&255;_buffer[index+2]=this.requestId>>16&255;_buffer[index+1]=this.requestId>>8&255;_buffer[index]=this.requestId&255;index=index+4;_buffer[index+3]=0>>24&255;_buffer[index+2]=0>>16&255;_buffer[index+1]=0>>8&255;_buffer[index]=0&255;index=index+4;_buffer[index+3]=OP_KILL_CURSORS>>24&255;_buffer[index+2]=OP_KILL_CURSORS>>16&255;_buffer[index+1]=OP_KILL_CURSORS>>8&255;_buffer[index]=OP_KILL_CURSORS&255;index=index+4;_buffer[index+3]=0>>24&255;_buffer[index+2]=0>>16&255;_buffer[index+1]=0>>8&255;_buffer[index]=0&255;index=index+4;_buffer[index+3]=this.cursorIds.length>>24&255;_buffer[index+2]=this.cursorIds.length>>16&255;_buffer[index+1]=this.cursorIds.length>>8&255;_buffer[index]=this.cursorIds.length&255;index=index+4;for(var i=0;i<this.cursorIds.length;i++){_buffer[index+3]=this.cursorIds[i].getLowBits()>>24&255;_buffer[index+2]=this.cursorIds[i].getLowBits()>>16&255;_buffer[index+1]=this.cursorIds[i].getLowBits()>>8&255;_buffer[index]=this.cursorIds[i].getLowBits()&255;index=index+4;_buffer[index+3]=this.cursorIds[i].getHighBits()>>24&255;_buffer[index+2]=this.cursorIds[i].getHighBits()>>16&255;_buffer[index+1]=this.cursorIds[i].getHighBits()>>8&255;_buffer[index]=this.cursorIds[i].getHighBits()&255;index=index+4}return _buffer};var Response=function(bson,data,opts){opts=opts||{promoteLongs:true};this.parsed=false;this.index=0;this.raw=data;this.data=data;this.bson=bson;this.opts=opts;this.length=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;this.requestId=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;this.responseTo=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;this.index=this.index+4;this.responseFlags=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;var lowBits=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;var highBits=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;this.cursorId=new Long(lowBits,highBits);this.startingFrom=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;this.numberReturned=data[this.index]|data[this.index+1]<<8|data[this.index+2]<<16|data[this.index+3]<<24;this.index=this.index+4;this.documents=new Array(this.numberReturned);this.cursorNotFound=(this.responseFlags&CURSOR_NOT_FOUND)!=0;this.queryFailure=(this.responseFlags&QUERY_FAILURE)!=0;this.shardConfigStale=(this.responseFlags&SHARD_CONFIG_STALE)!=0;this.awaitCapable=(this.responseFlags&AWAIT_CAPABLE)!=0;this.promoteLongs=typeof opts.promoteLongs=="boolean"?opts.promoteLongs:true};Response.prototype.isParsed=function(){return this.parsed};Response.prototype.parse=function(options){if(this.parsed)return;options=options||{};var raw=options.raw||false;for(var i=0;i<this.numberReturned;i++){var bsonSize=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24;var _options={promoteLongs:this.opts.promoteLongs};if(raw){this.documents[i]=this.data.slice(this.index,this.index+bsonSize)}else{this.documents[i]=this.bson.deserialize(this.data.slice(this.index,this.index+bsonSize),_options)}this.index=this.index+bsonSize}this.parsed=true};module.exports={Query:Query,GetMore:GetMore,Response:Response,KillCursor:KillCursor}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){"use strict";var f=__webpack_require__(52).format,crypto=__webpack_require__(110),MongoError=__webpack_require__(319);var AuthSession=function(db,username,password){this.db=db;this.username=username;this.password=password};AuthSession.prototype.equal=function(session){return session.db==this.db&&session.username==this.username&&session.password==this.password};var MongoCR=function(){this.authStore=[]};var addAuthSession=function(authStore,session){var found=false;for(var i=0;i<authStore.length;i++){if(authStore[i].equal(session)){found=true;break}}if(!found)authStore.push(session)};MongoCR.prototype.auth=function(server,pool,db,username,password,callback){var self=this;var connections=pool.getAll();var count=connections.length;if(count==0)return callback(null,null);var numberOfValidConnections=0;var credentialsValid=false;var errorObject=null;while(connections.length>0){var executeMongoCR=function(connection){server.command(f("%s.$cmd",db),{getnonce:1},{connection:connection},function(err,r){var nonce=null;var key=null;if(err==null){nonce=r.result.nonce;var md5=crypto.createHash("md5");md5.update(username+":mongo:"+password);var hash_password=md5.digest("hex");md5=crypto.createHash("md5");md5.update(nonce+username+hash_password);key=md5.digest("hex")}server.command(f("%s.$cmd",db),{authenticate:1,user:username,nonce:nonce,key:key},{connection:connection},function(err,r){count=count-1;if(err){errorObject=err}else if(r.result["$err"]){errorObject=r.result}else if(r.result["errmsg"]){errorObject=r.result}else{credentialsValid=true;numberOfValidConnections=numberOfValidConnections+1}if(count==0&&numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password));callback(null,true)}else if(count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using mongocr"));callback(errorObject,false)}})})};executeMongoCR(connections.shift())}};MongoCR.prototype.reauthenticate=function(server,pool,callback){var count=this.authStore.length;if(count==0)return callback(null,null);for(var i=0;i<this.authStore.length;i++){this.auth(server,pool,this.authStore[i].db,this.authStore[i].username,this.authStore[i].password,function(err,r){count=count-1;if(count==0){callback(null,null)}})}};module.exports=MongoCR},function(module,exports,__webpack_require__){"use strict";var f=__webpack_require__(52).format,crypto=__webpack_require__(110),MongoError=__webpack_require__(319);var AuthSession=function(db,username,password){this.db=db;this.username=username;this.password=password};AuthSession.prototype.equal=function(session){return session.db==this.db&&session.username==this.username&&session.password==this.password};var X509=function(){this.authStore=[]};X509.prototype.auth=function(server,pool,db,username,password,callback){var self=this;var connections=pool.getAll();var count=connections.length;if(count==0)return callback(null,null);var numberOfValidConnections=0;var credentialsValid=false;var errorObject=null;while(connections.length>0){var execute=function(connection){var command={authenticate:1,mechanism:"MONGODB-X509",user:username};server.command("$external.$cmd",command,{connection:connection},function(err,r){count=count-1;if(err){errorObject=err}else if(r.result["$err"]){errorObject=r.result}else if(r.result["errmsg"]){errorObject=r.result}else{credentialsValid=true;numberOfValidConnections=numberOfValidConnections+1}if(count==0&&numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password));callback(null,true)}else if(count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using mongocr"));callback(errorObject,false)}})};execute(connections.shift())}};var addAuthSession=function(authStore,session){var found=false;for(var i=0;i<authStore.length;i++){if(authStore[i].equal(session)){found=true;break}}if(!found)authStore.push(session)};X509.prototype.reauthenticate=function(server,pool,callback){var count=this.authStore.length;if(count==0)return callback(null,null);for(var i=0;i<this.authStore.length;i++){this.auth(server,pool,this.authStore[i].db,this.authStore[i].username,this.authStore[i].password,function(err,r){count=count-1;if(count==0){callback(null,null)}})}};module.exports=X509},function(module,exports,__webpack_require__){"use strict";var f=__webpack_require__(52).format,crypto=__webpack_require__(110),Binary=__webpack_require__(568).Binary,MongoError=__webpack_require__(319);var AuthSession=function(db,username,password){this.db=db;this.username=username;this.password=password};AuthSession.prototype.equal=function(session){return session.db==this.db&&session.username==this.username&&session.password==this.password};var Plain=function(){this.authStore=[]};Plain.prototype.auth=function(server,pool,db,username,password,callback){var self=this;var connections=pool.getAll();var count=connections.length;if(count==0)return callback(null,null);var numberOfValidConnections=0;var credentialsValid=false;var errorObject=null;while(connections.length>0){var execute=function(connection){var payload=new Binary(f("\x00%s\x00%s",username,password));var command={saslStart:1,mechanism:"PLAIN",payload:payload,autoAuthorize:1};server.command("$external.$cmd",command,{connection:connection},function(err,r){count=count-1;if(err){errorObject=err}else if(r.result["$err"]){errorObject=r.result}else if(r.result["errmsg"]){errorObject=r.result}else{credentialsValid=true;numberOfValidConnections=numberOfValidConnections+1}if(count==0&&numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password));callback(null,true)}else if(count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using mongocr"));callback(errorObject,false)}})};execute(connections.shift())}};var addAuthSession=function(authStore,session){var found=false;for(var i=0;i<authStore.length;i++){if(authStore[i].equal(session)){found=true;break}}if(!found)authStore.push(session)};Plain.prototype.reauthenticate=function(server,pool,callback){var count=this.authStore.length;if(count==0)return callback(null,null);for(var i=0;i<this.authStore.length;i++){this.auth(server,pool,this.authStore[i].db,this.authStore[i].username,this.authStore[i].password,function(err,r){count=count-1;if(count==0){callback(null,null)}})}};module.exports=Plain},function(module,exports,__webpack_require__){"use strict";var f=__webpack_require__(52).format,crypto=__webpack_require__(110),MongoError=__webpack_require__(319);var AuthSession=function(db,username,password,options){this.db=db;this.username=username;this.password=password;this.options=options};AuthSession.prototype.equal=function(session){return session.db==this.db&&session.username==this.username&&session.password==this.password};var Kerberos=null;var MongoAuthProcess=null;try{Kerberos=__webpack_require__(589).Kerberos;MongoAuthProcess=__webpack_require__(589).processes.MongoAuthProcess}catch(err){}var GSSAPI=function(){this.authStore=[]};GSSAPI.prototype.auth=function(server,pool,db,username,password,options,callback){var self=this;if(Kerberos==null)return callback(new Error("Kerberos library is not installed"));var gssapiServiceName=options["gssapiServiceName"]||"mongodb";var connections=pool.getAll();var count=connections.length;if(count==0)return callback(null,null);var numberOfValidConnections=0;var credentialsValid=false;var errorObject=null;while(connections.length>0){var execute=function(connection){GSSAPIInitialize(db,username,password,db,gssapiServiceName,server,connection,function(err,r){count=count-1;if(err){errorObject=err}else if(r.result["$err"]){errorObject=r.result}else if(r.result["errmsg"]){errorObject=r.result}else{credentialsValid=true;numberOfValidConnections=numberOfValidConnections+1}if(count==0&&numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password,options));callback(null,true)}else if(count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using mongocr"));callback(errorObject,false)}})};execute(connections.shift())}};var GSSAPIInitialize=function(db,username,password,authdb,gssapiServiceName,server,connection,callback){var mongo_auth_process=new MongoAuthProcess(connection.host,connection.port,gssapiServiceName);mongo_auth_process.init(username,password,function(err,context){if(err)return callback(err,false);mongo_auth_process.transition("",function(err,payload){if(err)return callback(err,false);MongoDBGSSAPIFirstStep(mongo_auth_process,payload,db,username,password,authdb,server,connection,callback)})})};var MongoDBGSSAPIFirstStep=function(mongo_auth_process,payload,db,username,password,authdb,server,connection,callback){var command={saslStart:1,mechanism:"GSSAPI",payload:payload,autoAuthorize:1};server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);var doc=r.result;mongo_auth_process.transition(r.result.payload,function(err,payload){if(err)return callback(err,false);MongoDBGSSAPISecondStep(mongo_auth_process,payload,doc,db,username,password,authdb,server,connection,callback)})})};var MongoDBGSSAPISecondStep=function(mongo_auth_process,payload,doc,db,username,password,authdb,server,connection,callback){var command={saslContinue:1,conversationId:doc.conversationId,payload:payload};server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);var doc=r.result;mongo_auth_process.transition(doc.payload,function(err,payload){if(err)return callback(err,false);MongoDBGSSAPIThirdStep(mongo_auth_process,payload,doc,db,username,password,authdb,server,connection,callback)})})};var MongoDBGSSAPIThirdStep=function(mongo_auth_process,payload,doc,db,username,password,authdb,server,connection,callback){var command={saslContinue:1,conversationId:doc.conversationId,payload:payload};server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);mongo_auth_process.transition(null,function(err,payload){if(err)return callback(err,null);callback(null,r)})})};var addAuthSession=function(authStore,session){var found=false;for(var i=0;i<authStore.length;i++){if(authStore[i].equal(session)){found=true;break}}if(!found)authStore.push(session)};GSSAPI.prototype.reauthenticate=function(server,pool,callback){var count=this.authStore.length;if(count==0)return callback(null,null);for(var i=0;i<this.authStore.length;i++){this.auth(server,pool,this.authStore[i].db,this.authStore[i].username,this.authStore[i].password,this.authStore[i].options,function(err,r){count=count-1;if(count==0){callback(null,null)}})}};module.exports=GSSAPI},function(module,exports,__webpack_require__){module.exports=merge;var hasOwnProperty=Object.prototype.hasOwnProperty;function merge(dest,src,redefine){if(!dest){throw new TypeError("argument dest is required")}if(!src){throw new TypeError("argument src is required")}if(redefine===undefined){redefine=true}Object.getOwnPropertyNames(src).forEach(function forEachOwnPropertyName(name){if(!redefine&&hasOwnProperty.call(dest,name)){return}var descriptor=Object.getOwnPropertyDescriptor(src,name);Object.defineProperty(dest,name,descriptor)});return dest}},function(module,exports,__webpack_require__){module.exports={7:__webpack_require__(565),8:__webpack_require__(565),13:__webpack_require__(566),"default":__webpack_require__(567)}},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(569);exports.Readable=exports;exports.Writable=__webpack_require__(570);exports.Duplex=__webpack_require__(571);exports.Transform=__webpack_require__(572);exports.PassThrough=__webpack_require__(573)},function(module,exports,__webpack_require__){(function(global){"use strict";function uniqNoSet(arr){var ret=[];for(var i=0;i<arr.length;i++){if(ret.indexOf(arr[i])===-1){ret.push(arr[i])}}return ret}function uniqSet(arr){var seen=new Set;return arr.filter(function(el){if(!seen.has(el)){seen.add(el);return true}})}function uniqSetWithForEach(arr){var ret=[];new Set(arr).forEach(function(el){ret.push(el)});return ret}function doesForEachActuallyWork(){var ret=false;new Set([true]).forEach(function(el){ret=el});return ret===true}if("Set"in global){if(typeof Set.prototype.forEach==="function"&&doesForEachActuallyWork()){module.exports=uniqSetWithForEach}else{module.exports=uniqSet}}else{module.exports=uniqNoSet}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(process){module.exports=globSync;globSync.GlobSync=GlobSync;var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());var minimatch=__webpack_require__(578);var Minimatch=minimatch.Minimatch;var Glob=__webpack_require__(119).Glob;var util=__webpack_require__(52);var path=__webpack_require__(8);var assert=__webpack_require__(107);var common=__webpack_require__(336);var alphasort=common.alphasort;var alphasorti=common.alphasorti;var isAbsolute=common.isAbsolute;var setopts=common.setopts;var ownProp=common.ownProp;var childrenIgnored=common.childrenIgnored;function globSync(pattern,options){if(typeof options==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(pattern,options).found}function GlobSync(pattern,options){if(!pattern)throw new Error("must provide pattern");if(typeof options==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(pattern,options);setopts(this,pattern,options);if(this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false)}this._finish()}GlobSync.prototype._finish=function(){assert(this instanceof GlobSync);if(this.realpath){var self=this;this.matches.forEach(function(matchset,index){var set=self.matches[index]=Object.create(null);for(var p in matchset){try{p=self._makeAbs(p);var real=fs.realpathSync(p,this.realpathCache);set[real]=true}catch(er){if(er.syscall==="stat")set[self._makeAbs(p)]=true;else throw er}}})}common.finish(this)};GlobSync.prototype._process=function(pattern,index,inGlobStar){assert(this instanceof GlobSync);var n=0;while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join("/"),index);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/");break}var remain=pattern.slice(n);var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.join("/"))){if(!prefix||!isAbsolute(prefix))prefix="/"+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return;var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar)};GlobSync.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)===".";var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=="."||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return;if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix.slice(-1)!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}this.matches[index][e]=true}return}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix)newPattern=[prefix,e];else newPattern=[e];this._process(newPattern.concat(remain),index,inGlobStar)}};GlobSync.prototype._emitMatch=function(index,e){var abs=this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.matches[index][e])return;if(this.nodir){var c=this.cache[this._makeAbs(e)];if(c==="DIR"||Array.isArray(c))return}this.matches[index][e]=true;if(this.stat)this._stat(e)};GlobSync.prototype._readdirInGlobStar=function(abs){if(this.follow)return this._readdir(abs,false);var entries;var lstat;var stat;try{lstat=fs.lstatSync(abs)}catch(er){return null}var isSym=lstat.isSymbolicLink();this.symlinks[abs]=isSym;if(!isSym&&!lstat.isDirectory())this.cache[abs]="FILE";else entries=this._readdir(abs,false);return entries};GlobSync.prototype._readdir=function(abs,inGlobStar){var entries;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==="FILE")return null;if(Array.isArray(c))return c}try{return this._readdirEntries(abs,fs.readdirSync(abs))}catch(er){this._readdirError(abs,er);return null}};GlobSync.prototype._readdirEntries=function(abs,entries){if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==="/")e=abs+e;else e=abs+"/"+e;this.cache[e]=true}}this.cache[abs]=entries;return entries};GlobSync.prototype._readdirError=function(f,er){switch(er.code){case"ENOTDIR":this.cache[this._makeAbs(f)]="FILE";break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)throw er;if(!this.silent)console.error("glob error",er);break}};GlobSync.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false);var len=entries.length;var isSym=this.symlinks[abs];if(isSym&&inGlobStar)return;for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==="."&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true);var below=gspref.concat(entries[i],remain);this._process(below,index,true)}};GlobSync.prototype._processSimple=function(prefix,index){var exists=this._stat(prefix);if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return;if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+="/"}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this.matches[index][prefix]=true};GlobSync.prototype._stat=function(f){var abs=this._makeAbs(f);var needDir=f.slice(-1)==="/";if(f.length>this.maxLength)return false;if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c="DIR";if(!needDir||c==="DIR")return c;if(needDir&&c==="FILE")return false}var exists;var stat=this.statCache[abs];if(!stat){var lstat;try{lstat=fs.lstatSync(abs);

}catch(er){return false}if(lstat.isSymbolicLink()){try{stat=fs.statSync(abs)}catch(er){stat=lstat}}else{stat=lstat}}this.statCache[abs]=stat;var c=stat.isDirectory()?"DIR":"FILE";this.cache[abs]=this.cache[abs]||c;if(needDir&&c!=="DIR")return false;return c};GlobSync.prototype._mark=function(p){return common.mark(this,p)};GlobSync.prototype._makeAbs=function(f){return common.makeAbs(this,f)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){exports.alphasort=alphasort;exports.alphasorti=alphasorti;exports.isAbsolute=process.platform==="win32"?absWin:absUnix;exports.setopts=setopts;exports.ownProp=ownProp;exports.makeAbs=makeAbs;exports.finish=finish;exports.mark=mark;exports.isIgnored=isIgnored;exports.childrenIgnored=childrenIgnored;function ownProp(obj,field){return Object.prototype.hasOwnProperty.call(obj,field)}var path=__webpack_require__(8);var minimatch=__webpack_require__(578);var Minimatch=minimatch.Minimatch;function absWin(p){if(absUnix(p))return true;var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var result=splitDeviceRe.exec(p);var device=result[1]||"";var isUnc=device&&device.charAt(1)!==":";var isAbsolute=!!result[2]||isUnc;return isAbsolute}function absUnix(p){return p.charAt(0)==="/"||p===""}function alphasorti(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}function alphasort(a,b){return a.localeCompare(b)}function setupIgnores(self,options){self.ignore=options.ignore||[];if(!Array.isArray(self.ignore))self.ignore=[self.ignore];if(self.ignore.length){self.ignore=self.ignore.map(ignoreMap)}}function ignoreMap(pattern){var gmatcher=null;if(pattern.slice(-3)==="/**"){var gpattern=pattern.replace(/(\/\*\*)+$/,"");gmatcher=new Minimatch(gpattern,{nonegate:true})}return{matcher:new Minimatch(pattern,{nonegate:true}),gmatcher:gmatcher}}function setopts(self,pattern,options){if(!options)options={};if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar){throw new Error("base matching requires globstar")}pattern="**/"+pattern}self.pattern=pattern;self.strict=options.strict!==false;self.realpath=!!options.realpath;self.realpathCache=options.realpathCache||Object.create(null);self.follow=!!options.follow;self.dot=!!options.dot;self.mark=!!options.mark;self.nodir=!!options.nodir;if(self.nodir)self.mark=true;self.sync=!!options.sync;self.nounique=!!options.nounique;self.nonull=!!options.nonull;self.nosort=!!options.nosort;self.nocase=!!options.nocase;self.stat=!!options.stat;self.noprocess=!!options.noprocess;self.maxLength=options.maxLength||Infinity;self.cache=options.cache||Object.create(null);self.statCache=options.statCache||Object.create(null);self.symlinks=options.symlinks||Object.create(null);setupIgnores(self,options);self.changedCwd=false;var cwd=process.cwd();if(!ownProp(options,"cwd"))self.cwd=cwd;else{self.cwd=options.cwd;self.changedCwd=path.resolve(options.cwd)!==cwd}self.root=options.root||path.resolve(self.cwd,"/");self.root=path.resolve(self.root);if(process.platform==="win32")self.root=self.root.replace(/\\/g,"/");self.nomount=!!options.nomount;self.minimatch=new Minimatch(pattern,options);self.options=self.minimatch.options}function finish(self){var nou=self.nounique;var all=nou?[]:Object.create(null);for(var i=0,l=self.matches.length;i<l;i++){var matches=self.matches[i];if(!matches||Object.keys(matches).length===0){if(self.nonull){var literal=self.minimatch.globSet[i];if(nou)all.push(literal);else all[literal]=true}}else{var m=Object.keys(matches);if(nou)all.push.apply(all,m);else m.forEach(function(m){all[m]=true})}}if(!nou)all=Object.keys(all);if(!self.nosort)all=all.sort(self.nocase?alphasorti:alphasort);if(self.mark){for(var i=0;i<all.length;i++){all[i]=self._mark(all[i])}if(self.nodir){all=all.filter(function(e){return!/\/$/.test(e)})}}if(self.ignore.length)all=all.filter(function(m){return!isIgnored(self,m)});self.found=all}function mark(self,p){var abs=makeAbs(self,p);var c=self.cache[abs];var m=p;if(c){var isDir=c==="DIR"||Array.isArray(c);var slash=p.slice(-1)==="/";if(isDir&&!slash)m+="/";else if(!isDir&&slash)m=m.slice(0,-1);if(m!==p){var mabs=makeAbs(self,m);self.statCache[mabs]=self.statCache[abs];self.cache[mabs]=self.cache[abs]}}return m}function makeAbs(self,f){var abs=f;if(f.charAt(0)==="/"){abs=path.join(self.root,f)}else if(exports.isAbsolute(f)){abs=f}else if(self.changedCwd){abs=path.resolve(self.cwd,f)}else if(self.realpath){abs=path.resolve(f)}return abs}function isIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return item.matcher.match(path)||!!(item.gmatcher&&item.gmatcher.match(path))})}function childrenIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return!!(item.gmatcher&&item.gmatcher.match(path))})}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(exports,__webpack_require__(55)(module),function(){return this}())},function(module,exports,__webpack_require__){"use strict";function NumberFormatter(value){var match=String(value).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!match){throw new SyntaxError("Invalid number")}var sign=match[1];var coefficients=match[2];var exponent=parseFloat(match[4]||"0");var dot=coefficients.indexOf(".");exponent+=dot!==-1?dot-1:coefficients.length-1;this.sign=sign;this.coefficients=coefficients.replace(".","").replace(/^0*/,function(zeros){exponent-=zeros.length;return""}).replace(/0*$/,"").split("").map(function(d){return parseInt(d)});if(this.coefficients.length===0){this.coefficients.push(0);exponent++}this.exponent=exponent}NumberFormatter.prototype.toFixed=function(precision){var rounded=this.roundDigits(this.exponent+1+(precision||0));var c=rounded.coefficients;var p=rounded.exponent+1;var pp=p+(precision||0);if(c.length<pp){c=c.concat(zeros(pp-c.length))}if(p<0){c=zeros(-p+1).concat(c);p=1}if(precision){c.splice(p,0,p===0?"0.":".")}return this.sign+c.join("")};NumberFormatter.prototype.toExponential=function(precision){var rounded=precision?this.roundDigits(precision):this.clone();var c=rounded.coefficients;var e=rounded.exponent;if(c.length<precision){c=c.concat(zeros(precision-c.length))}var first=c.shift();return this.sign+first+(c.length>0?"."+c.join(""):"")+"e"+(e>=0?"+":"")+e};NumberFormatter.prototype.toPrecision=function(precision,options){var lower=options&&options.lower!==undefined?options.lower:.001;var upper=options&&options.upper!==undefined?options.upper:1e5;var abs=Math.abs(Math.pow(10,this.exponent));if(abs<lower||abs>=upper){return this.toExponential(precision)}else{var rounded=precision?this.roundDigits(precision):this.clone();var c=rounded.coefficients;var e=rounded.exponent;if(c.length<precision){c=c.concat(zeros(precision-c.length))}c=c.concat(zeros(e-c.length+1+(c.length<precision?precision-c.length:0)));c=zeros(-e).concat(c);var dot=e>0?e:0;if(dot<c.length-1){c.splice(dot+1,0,".")}return this.sign+c.join("")}};NumberFormatter.prototype.clone=function(){var clone=new NumberFormatter("0");clone.sign=this.sign;clone.coefficients=this.coefficients.slice(0);clone.exponent=this.exponent;return clone};NumberFormatter.prototype.roundDigits=function(precision){var rounded=this.clone();var c=rounded.coefficients;while(precision<=0){c.unshift(0);rounded.exponent++;precision++}if(c.length>precision){var removed=c.splice(precision);if(removed[0]>=5){var i=precision-1;c[i]++;while(c[i]===10){c.pop();if(i===0){c.unshift(0);rounded.exponent++;i++}i--;c[i]++}}}return rounded};function zeros(length){var arr=[];for(var i=0;i<length;i++){arr.push(0)}return arr}module.exports=NumberFormatter},function(module,exports,__webpack_require__){"use strict";var BigNumber=__webpack_require__(129);var isNumber=__webpack_require__(127).isNumber;var digits=__webpack_require__(127).digits;var memoize=__webpack_require__(582).memoize;exports.isBigNumber=function(value){return value instanceof BigNumber};exports.e=memoize(function(precision){var Big=BigNumber.constructor({precision:precision});return new Big(1).exp()});exports.phi=memoize(function(precision){var Big=BigNumber.constructor({precision:precision});return new Big(1).plus(new Big(5).sqrt()).div(2)});exports.pi=memoize(function(precision){var Big=BigNumber.constructor({precision:precision+4});var pi4th=new Big(4).times(arctan_taylor(new Big(1).div(5))).minus(arctan_taylor(new Big(1).div(239)));Big.config({precision:precision});return new Big(4).times(pi4th)});exports.tau=memoize(function(precision){var pi=exports.pi(precision+2);var Big=BigNumber.constructor({precision:precision});return new Big(2).times(pi)});exports.and=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger()){throw new Error("Parameters in function bitAnd must be integer numbers")}var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()){return new BigNumber(NaN)}if(x.isZero()||y.eq(-1)||x.eq(y)){return x}if(y.isZero()||x.eq(-1)){return y}if(!x.isFinite()||!y.isFinite()){if(!x.isFinite()&&!y.isFinite()){if(x.isNegative()==y.isNegtive()){return x}return new BigNumber(0)}if(!x.isFinite()){if(y.isNegative()){return x}if(x.isNegative()){return new BigNumber(0)}return y}if(!y.isFinite()){if(x.isNegative()){return y}if(y.isNegative()){return new BigNumber(0)}return x}}return bitwise(x,y,function(a,b){return a&b})};exports.leftShift=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger()){throw new Error("Parameters in function leftShift must be integer numbers")}var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()||y.isNegative()&&!y.isZero()){return new BigNumber(NaN)}if(x.isZero()||y.isZero()){return x}if(!x.isFinite()&&!y.isFinite()){return new BigNumber(NaN)}if(y.lt(55)){return x.times(Math.pow(2,y.toNumber())+"")}return x.times(new BigNumber(2).pow(y))};exports.not=function(x){if(x.isFinite()&&!x.isInteger()){throw new Error("Parameter in function bitNot must be integer numbers")}var BigNumber=x.constructor;var prevPrec=BigNumber.precision;BigNumber.config({precision:1e9});var x=x.plus(BigNumber.ONE);x.s=-x.s||null;BigNumber.config({precision:prevPrec});return x};exports.or=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger()){throw new Error("Parameters in function bitOr must be integer numbers")}var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()){return new BigNumber(NaN)}var negOne=new BigNumber(-1);if(x.isZero()||y.eq(negOne)||x.eq(y)){return y}if(y.isZero()||x.eq(negOne)){return x}if(!x.isFinite()||!y.isFinite()){if(!x.isFinite()&&!x.isNegative()&&y.isNegative()||x.isNegative()&&!y.isNegative()&&!y.isFinite()){return negOne}if(x.isNegative()&&y.isNegative()){return x.isFinite()?x:y}return x.isFinite()?y:x}return bitwise(x,y,function(a,b){return a|b})};exports.rightShift=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger()){throw new Error("Parameters in function rightArithShift must be integer numbers")}var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()||y.isNegative()&&!y.isZero()){return new BigNumber(NaN)}if(x.isZero()||y.isZero()){return x}if(!y.isFinite()){if(x.isNegative()){return new BigNumber(-1)}if(!x.isFinite()){return new BigNumber(NaN)}return new BigNumber(0)}if(y.lt(55)){return x.div(Math.pow(2,y.toNumber())+"").floor()}return x.div(new BigNumber(2).pow(y)).floor()};exports.xor=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger()){throw new Error("Parameters in function bitXor must be integer numbers")}var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()){return new BigNumber(NaN)}if(x.isZero()){return y}if(y.isZero()){return x}if(x.eq(y)){return new BigNumber(0)}var negOne=new BigNumber(-1);if(x.eq(negOne)){return exports.not(y)}if(y.eq(negOne)){return exports.not(x)}if(!x.isFinite()||!y.isFinite()){if(!x.isFinite()&&!y.isFinite()){return negOne}return new BigNumber(x.isNegative()==y.isNegative()?Infinity:-Infinity)}return bitwise(x,y,function(a,b){return a^b})};function bitwise(x,y,func){var BigNumber=x.constructor;var xBits,yBits;var xSign=+(x.s<0);var ySign=+(y.s<0);if(xSign){xBits=decCoefficientToBinaryString(exports.not(x));for(var i=0;i<xBits.length;++i){xBits[i]^=1}}else{xBits=decCoefficientToBinaryString(x)}if(ySign){yBits=decCoefficientToBinaryString(exports.not(y));for(var i=0;i<yBits.length;++i){yBits[i]^=1}}else{yBits=decCoefficientToBinaryString(y)}var minBits,maxBits,minSign;if(xBits.length<=yBits.length){minBits=xBits;maxBits=yBits;minSign=xSign}else{minBits=yBits;maxBits=xBits;minSign=ySign}var shortLen=minBits.length;var longLen=maxBits.length;var expFuncVal=func(xSign,ySign)^1;var outVal=new BigNumber(expFuncVal^1);var twoPower=BigNumber.ONE;var two=new BigNumber(2);var prevPrec=BigNumber.precision;BigNumber.config({precision:1e9});while(shortLen>0){if(func(minBits[--shortLen],maxBits[--longLen])==expFuncVal){outVal=outVal.plus(twoPower)}twoPower=twoPower.times(two)}while(longLen>0){if(func(minSign,maxBits[--longLen])==expFuncVal){outVal=outVal.plus(twoPower)}twoPower=twoPower.times(two)}BigNumber.config({precision:prevPrec});if(expFuncVal==0){outVal.s=-outVal.s}return outVal}function decCoefficientToBinaryString(x){var a=x.c;var r=a[0]+"";for(var i=1;i<a.length;++i){var s=a[i]+"";for(var z=7-s.length;z--;){s="0"+s}r+=s}var j;for(j=r.length-1;r.charAt(j)=="0";--j);var xe=x.e;var str=r.slice(0,j+1||1);var strL=str.length;if(xe>0){if(++xe>strL){for(xe-=strL;xe--;str+="0");}else if(xe<strL){str=str.slice(0,xe)+"."+str.slice(xe)}}var arr=[0];for(var i=0;i<str.length;){for(var arrL=arr.length;arrL--;arr[arrL]*=10);arr[0]+=str.charAt(i++)<<0;for(var j=0;j<arr.length;++j){if(arr[j]>1){if(arr[j+1]==null){arr[j+1]=0}arr[j+1]+=arr[j]>>1;arr[j]&=1}}}return arr.reverse()}exports.arccos_arcsec=function(x,Big,reciprocal){var precision=Big.precision;if(reciprocal){if(x.abs().lt(Big.ONE)){throw new Error("asec() only has non-complex values for |x| >= 1.")}}else if(x.abs().gt(Big.ONE)){throw new Error("acos() only has non-complex values for |x| <= 1.")}if(x.eq(-1)){return exports.pi(precision)}Big.config({precision:precision+4});if(reciprocal){x=Big.ONE.div(x)}var acos=exports.arctan_arccot(Big.ONE.minus(x.times(x)).sqrt().div(x.plus(Big.ONE)),Big).times(2);Big.config({precision:precision});return acos.toDP(precision-1)};exports.arcsin_arccsc=function(x,Big,reciprocal){if(x.isNaN()){return new Big(NaN)}var precision=Big.precision;var absX=x.abs();if(reciprocal){if(absX.lt(Big.ONE)){throw new Error("acsc() only has non-complex values for |x| >= 1.")}Big.config({precision:precision+2});x=Big.ONE.div(x);Big.config({precision:precision});absX=x.abs()}else if(absX.gt(Big.ONE)){throw new Error("asin() only has non-complex values for |x| <= 1.")}if(absX.gt(.8)){Big.config({precision:precision+4});var sign=x.s;var halfPi=exports.pi(precision+4).div(2);x=halfPi.minus(exports.arcsin_arccsc(Big.ONE.minus(x.times(x)).sqrt(),Big));x.s=sign;x.constructor=Big;Big.config({precision:precision});return x.toDP(precision-1)}var wasReduced=absX.gt(.58);if(wasReduced){Big.config({precision:precision+8});x=x.div(new Big(2).sqrt().times(Big.ONE.minus(x.times(x)).sqrt().plus(Big.ONE).sqrt()));Big.config({precision:precision})}var ret=precision<=60||x.dp()<=Math.log(precision)&&x.lt(.05)?arcsin_taylor(x,precision):arcsin_newton(x,Big);if(wasReduced){return ret.times(2)}return ret};exports.arctan_arccot=function(x,Big,reciprocal){if(x.isNaN()){return new Big(NaN)}if(!reciprocal&&x.isZero()||reciprocal&&!x.isFinite()){return new Big(0)}var precision=Big.precision;if(!reciprocal&&!x.isFinite()||reciprocal&&x.isZero()){var halfPi=exports.pi(precision+2).div(2).toDP(precision-1);halfPi.constructor=Big;halfPi.s=x.s;return halfPi}Big.config({precision:precision+4});if(reciprocal){x=Big.ONE.div(x)}var absX=x.abs();if(absX.lte(.875)){var ret=arctan_taylor(x);ret.constructor=Big;Big.config({precision:precision});return ret.toDP(Big.precision-1)}if(absX.gte(1.143)){var halfPi=exports.pi(precision+4).div(2);var ret=halfPi.minus(arctan_taylor(Big.ONE.div(absX)));ret.s=x.s;ret.constructor=Big;Big.config({precision:precision});return ret.toDP(Big.precision-1)}x=x.div(x.times(x).plus(1).sqrt());Big.config({precision:precision});return exports.arcsin_arccsc(x,Big)};exports.arctan2=function(y,x,Big){var precision=Big.precision;if(x.isZero()){if(y.isZero()){return new Big(NaN)}var halfPi=exports.pi(precision+2).div(2).toDP(precision-1);halfPi.constructor=Big;halfPi.s=y.s;return halfPi}Big.config({precision:precision+2});var ret=exports.arctan_arccot(y.div(x),Big,false);if(x.isNegative()){var pi=exports.pi(precision+2);ret=y.isNegative()?ret.minus(pi):ret.plus(pi)}ret.constructor=Big;Big.config({precision:precision});return ret.toDP(precision-1)};exports.acosh_asinh_asech_acsch=function(x,Big,mode,reciprocal){if(x.isNaN()){return new Big(NaN)}if(reciprocal&&x.isZero()){return new Big(Infinity)}if(!mode){if(reciprocal){if(x.isNegative()||x.gt(Big.ONE)){throw new Error("asech() only has non-complex values for 0 <= x <= 1.")}}else if(x.lt(Big.ONE)){throw new Error("acosh() only has non-complex values for x >= 1.")}}var precision=Big.precision;Big.config({precision:precision+4});var y=new Big(x);y.constructor=Big;if(reciprocal){y=Big.ONE.div(y)}var x2PlusOrMinus=mode?y.times(y).plus(Big.ONE):y.times(y).minus(Big.ONE);var ret=y.plus(x2PlusOrMinus.sqrt()).ln();Big.config({precision:precision});return new Big(ret.toPrecision(precision))};exports.atanh_acoth=function(x,Big,reciprocal){if(x.isNaN()){return new Big(NaN)}var absX=x.abs();if(absX.eq(Big.ONE)){return new Big(x.isNegative()?-Infinity:Infinity)}if(absX.gt(Big.ONE)){if(!reciprocal){throw new Error("atanh() only has non-complex values for |x| <= 1.")}}else if(reciprocal){throw new Error("acoth() has complex values for |x| < 1.")}if(x.isZero()){return new Big(0)}var precision=Big.precision;Big.config({precision:precision+4});var y=new Big(x);y.constructor=Big;if(reciprocal){y=Big.ONE.div(y)}var ret=Big.ONE.plus(y).div(Big.ONE.minus(y)).ln().div(2);Big.config({precision:precision});return new Big(ret.toPrecision(precision))};exports.cos_sin_sec_csc=function(x,Big,mode,reciprocal){if(x.isNaN()||!x.isFinite()){return new Big(NaN)}var precision=Big.precision;var y=new Big(x);var isNeg=y.isNegative();if(isNeg){y.s=-y.s}var precPlusGuardDigits=precision+(Math.log(precision)|0)+3;Big.config({precision:precPlusGuardDigits});y=reduceToPeriod(y,precPlusGuardDigits,mode);y[0].constructor=Big;if(y[1]){y=y[0];if(reciprocal&&y.isZero()){y=new Big(Infinity)}Big.config({precision:precision});return y}var ret;y=y[0];if(mode){ret=cos_sin_taylor(y.div(3125),mode);Big.config({precision:Math.min(precPlusGuardDigits,precision+15)});var five=new Big(5);var sixteen=new Big(16);var twenty=new Big(20);for(var i=0;i<5;++i){var ret2=ret.times(ret);var ret3=ret2.times(ret);var ret5=ret3.times(ret2);ret=sixteen.times(ret5).minus(twenty.times(ret3)).plus(five.times(ret))}if(isNeg){ret.s=-ret.s}}else{var div_factor,loops;if(y.abs().lt(Big.ONE)){div_factor=64;loops=3}else{div_factor=256;loops=4}ret=cos_sin_taylor(y.div(div_factor),mode);Big.config({precision:Math.min(precPlusGuardDigits,precision+8)});var eight=new Big(8);for(;loops>0;--loops){var ret2=ret.times(ret);var ret4=ret2.times(ret2);ret=eight.times(ret4.minus(ret2)).plus(Big.ONE)}}if(reciprocal){ret=ret.e<=-precision?new Big(Infinity):Big.ONE.div(ret)}Big.config({precision:precision});return ret.toDP(precision-1)};exports.tan_cot=function(x,Big,reciprocal){if(x.isNaN()){return new Big(NaN)}var precision=Big.precision;var pi=exports.pi(precision+2);var halfPi=pi.div(2).toDP(precision-1);pi=pi.toDP(precision-1);var y=reduceToPeriod(x,precision,1)[0];if(y.abs().eq(pi)){return new Big(Infinity)}Big.config({precision:precision+4});var sin=exports.cos_sin_sec_csc(y,Big,1,false);var cos=sinToCos(sin);sin=sin.toDP(precision);cos=cos.toDP(precision);if(y.eq(x)){if(y.gt(halfPi)){cos.s=-cos.s}}else if(pi.minus(y.abs()).gt(halfPi)){cos.s=-cos.s}var tan=reciprocal?cos.div(sin):sin.div(cos);Big.config({precision:precision});return new Big(tan.toPrecision(precision))};exports.cosh_sinh_csch_sech=function(x,Big,mode,reciprocal){if(x.isNaN()){return new Big(NaN)}if(!x.isFinite()){if(reciprocal){return new Big(0)}return new Big(mode?x:Infinity)}var precision=Big.precision;Big.config({precision:precision+4});var y=new Big(x);y.constructor=Big;y=y.exp();y=mode?y.minus(Big.ONE.div(y)):y.plus(Big.ONE.div(y));y=reciprocal?new Big(2).div(y):y.div(2);Big.config({precision:precision});return new Big(y.toPrecision(precision))};exports.tanh_coth=function(x,Big,reciprocal){if(x.isNaN()){return new Big(NaN)}if(!x.isFinite()){return new Big(x.s)}var precision=Big.precision;Big.config({precision:precision+4});var y=new Big(x);y.constructor=Big;var posExp=y.exp();var negExp=Big.ONE.div(posExp);var ret=posExp.minus(negExp);ret=reciprocal?posExp.plus(negExp).div(ret):ret.div(posExp.plus(negExp));Big.config({precision:precision});return ret.toDP(precision-1)};function arcsin_newton(x,Big){var oldPrecision=Big.precision;var tolerance=-(oldPrecision+4);var maxp=oldPrecision+8-x.e;var localPrecision=25-x.e;var maxIter=Math.max(Math.log(oldPrecision+2)*1.442695|0+5,5);Big.config({precision:localPrecision});var i=0;var curr=new Big(Math.asin(x.toNumber())+"");do{var tmp0=exports.cos_sin_sec_csc(curr,Big,1,false);var tmp1=sinToCos(tmp0);if(!tmp0.isZero()){tmp0.s=curr.s}var tmp2=tmp0.minus(x).div(tmp1);curr=curr.minus(tmp2);localPrecision=Math.min(2*localPrecision,maxp);Big.config({precision:localPrecision})}while(2*tmp2.e>=tolerance&&!tmp2.isZero()&&++i<=maxIter);if(i==maxIter){throw new Error("asin() failed to converge to the requested accuracy."+"Try with a higher precision.")}Big.config({precision:oldPrecision});return curr.toDP(oldPrecision-1)}function arcsin_taylor(x,precision){var Big=x.constructor;Big.config({precision:precision+Math.log(precision)|0+4});var one=new Big(1);var y=x;var yPrev=NaN;var x2=x.times(x);var polyNum=x;var constNum=new Big(one);var constDen=new Big(one);var bigK=new Big(one);for(var k=3;!y.equals(yPrev);k+=2){polyNum=polyNum.times(x2);constNum=constNum.times(bigK);constDen=constDen.times(bigK.plus(one));yPrev=y;bigK=new Big(k);y=y.plus(polyNum.times(constNum).div(bigK.times(constDen)))}Big.config({precision:precision});return y.toDP(precision-1)}function arctan_taylor(x){var y=x;var yPrev=NaN;var x2=x.times(x);var num=x;var add=true;for(var k=3;!y.equals(yPrev);k+=2){num=num.times(x2);yPrev=y;add=!add;y=add?y.plus(num.div(k)):y.minus(num.div(k))}return y}function cos_sin_taylor(x,mode){var one=x.constructor.ONE;var y=x;var yPrev=NaN;var x2=x.times(x);var num=mode?y:y=one;var den=one;var add=true;for(var k=mode;!y.equals(yPrev);k+=2){num=num.times(x2);den=den.times(k+1).times(k+2);yPrev=y;add=!add;y=add?y.plus(num.div(den)):y.minus(num.div(den))}return y}function reduceToPeriod(x,precision,mode){var pi=exports.pi(precision+2);var tau=exports.tau(precision);if(x.abs().lte(pi.toDP(x.dp()))){return[x,false]}var Big=x.constructor;if(x.div(pi.toDP(x.dp())).toNumber()%2==0){return[new Big(mode^1),true]}var y=x.mod(tau);if(y.toDP(x.dp(),1).isZero()){return[new Big(mode^1),true]}if(y.gt(pi)){if(mode){y=y.minus(pi);y.s=-y.s}else{y=tau.minus(y)}}y.constructor=Big;return[y,false]}function sinToCos(sinVal){var Big=sinVal.constructor;var precision=Big.precision;Big.config({precision:precision+2});var ret=Big.ONE.minus(sinVal.times(sinVal)).sqrt();Big.config({precision:precision});return ret.toDP(precision-1)}exports.format=function(value,options){if(typeof options==="function"){return options(value)}if(!value.isFinite()){return value.isNaN()?"NaN":value.gt(0)?"Infinity":"-Infinity"}var notation="auto";var precision=undefined;if(options!==undefined){if(options.notation){notation=options.notation}if(isNumber(options)){precision=options}else if(options.precision){precision=options.precision}}switch(notation){case"fixed":return exports.toFixed(value,precision);case"exponential":return exports.toExponential(value,precision);case"auto":var lower=.001;var upper=1e5;if(options&&options.exponential){if(options.exponential.lower!==undefined){lower=options.exponential.lower}if(options.exponential.upper!==undefined){upper=options.exponential.upper}}var oldConfig={toExpNeg:value.constructor.toExpNeg,toExpPos:value.constructor.toExpPos};value.constructor.config({toExpNeg:Math.round(Math.log(lower)/Math.LN10),toExpPos:Math.round(Math.log(upper)/Math.LN10)});if(value.isZero())return"0";var str;var abs=value.abs();if(abs.gte(lower)&&abs.lt(upper)){str=value.toSignificantDigits(precision).toFixed()}else{str=exports.toExponential(value,precision)}return str.replace(/((\.\d*?)(0+))($|e)/,function(){var digits=arguments[2];var e=arguments[4];return digits!=="."?digits+e:e});default:throw new Error('Unknown notation "'+notation+'". '+'Choose "auto", "exponential", or "fixed".')}};exports.toExponential=function(value,precision){if(precision!==undefined){return value.toExponential(precision-1)}else{return value.toExponential()}};exports.toFixed=function(value,precision){return value.toFixed(precision||0)}},function(module,exports,__webpack_require__){"use strict";var number=__webpack_require__(127),string=__webpack_require__(347),object=__webpack_require__(126),types=__webpack_require__(518),DimensionError=__webpack_require__(343),IndexError=__webpack_require__(344),isArray=Array.isArray;function _size(x){var size=[];while(isArray(x)){size.push(x.length);x=x[0]}return size}exports.size=function(x){var s=_size(x);exports.validate(x,s);return s};function _validate(array,size,dim){var i;var len=array.length;if(len!=size[dim]){throw new DimensionError(len,size[dim])}if(dim<size.length-1){var dimNext=dim+1;for(i=0;i<len;i++){var child=array[i];if(!isArray(child)){throw new DimensionError(size.length-1,size.length,"<")}_validate(array[i],size,dimNext)}}else{for(i=0;i<len;i++){if(isArray(array[i])){throw new DimensionError(size.length+1,size.length,">")}}}}exports.validate=function(array,size){var isScalar=size.length==0;if(isScalar){if(isArray(array)){throw new DimensionError(array.length,0)}}else{_validate(array,size,0)}};exports.validateIndex=function(index,length){if(!number.isNumber(index)||!number.isInteger(index)){throw new TypeError("Index must be an integer (value: "+index+")")}if(index<0){throw new IndexError(index)}if(length!==undefined&&index>=length){throw new IndexError(index,length)}};exports.UNINITIALIZED={};exports.resize=function(array,size,defaultValue){if(!isArray(array)||!isArray(size)){throw new TypeError("Array expected")}if(size.length===0){throw new Error("Resizing to scalar is not supported")}size.forEach(function(value){if(!number.isNumber(value)||!number.isInteger(value)||value<0){
throw new TypeError("Invalid size, must contain positive integers "+"(size: "+string.format(size)+")")}});var _defaultValue=defaultValue!==undefined?defaultValue:0;_resize(array,size,0,_defaultValue);return array};function _resize(array,size,dim,defaultValue){var i;var elem;var oldLen=array.length;var newLen=size[dim];var minLen=Math.min(oldLen,newLen);array.length=newLen;if(dim<size.length-1){var dimNext=dim+1;for(i=0;i<minLen;i++){elem=array[i];if(!isArray(elem)){elem=[elem];array[i]=elem}_resize(elem,size,dimNext,defaultValue)}for(i=minLen;i<newLen;i++){elem=[];array[i]=elem;_resize(elem,size,dimNext,defaultValue)}}else{for(i=0;i<minLen;i++){while(isArray(array[i])){array[i]=array[i][0]}}if(defaultValue!==exports.UNINITIALIZED){for(i=minLen;i<newLen;i++){array[i]=object.clone(defaultValue)}}}}exports.squeeze=function(array,size){var s=size||exports.size(array);while(isArray(array)&&array.length===1){array=array[0];s.shift()}var dims=s.length;while(s[dims-1]===1){dims--}if(dims<s.length){array=_squeeze(array,dims,0);s.length=dims}return array};function _squeeze(array,dims,dim){var i,ii;if(dim<dims){var next=dim+1;for(i=0,ii=array.length;i<ii;i++){array[i]=_squeeze(array[i],dims,next)}}else{while(isArray(array)){array=array[0]}}return array}exports.unsqueeze=function(array,dims,outer,size){var s=size||exports.size(array);if(outer){for(var i=0;i<outer;i++){array=[array];s.unshift(1)}}array=_unsqueeze(array,dims,0);while(s.length<dims){s.push(1)}return array};function _unsqueeze(array,dims,dim){var i,ii;if(isArray(array)){var next=dim+1;for(i=0,ii=array.length;i<ii;i++){array[i]=_unsqueeze(array[i],dims,next)}}else{for(var d=dim;d<dims;d++){array=[array]}}return array}exports.flatten=function(array){var flat=array,isArray=Array.isArray;while(isArray(flat[0])){var next=[];for(var i=0,ii=flat.length;i<ii;i++){next=next.concat.apply(next,flat[i])}flat=next}return flat};exports.argsToArray=function(args){var array=[];for(var i=0,len=args.length;i<len;i++){array[i]=args[i]}return array};exports.isArray=isArray},function(module,exports,__webpack_require__){module.exports="1.6.0"},function(module,exports,__webpack_require__){"use strict";function ArgumentsError(fn,count,min,max){if(!(this instanceof ArgumentsError)){throw new SyntaxError("Constructor must be called with the new operator")}this.fn=fn;this.count=count;this.min=min;this.max=max;this.message="Wrong number of arguments in function "+fn+" ("+count+" provided, "+min+(max!=undefined?"-"+max:"")+" expected)";this.stack=(new Error).stack}ArgumentsError.prototype=new Error;ArgumentsError.prototype.constructor=Error;ArgumentsError.prototype.name="ArgumentsError";module.exports=ArgumentsError},function(module,exports,__webpack_require__){"use strict";function DimensionError(actual,expected,relation){if(!(this instanceof DimensionError)){throw new SyntaxError("Constructor must be called with the new operator")}this.actual=actual;this.expected=expected;this.relation=relation;this.message="Dimension mismatch ("+(Array.isArray(actual)?"["+actual.join(", ")+"]":actual)+" "+(this.relation||"!=")+" "+(Array.isArray(expected)?"["+expected.join(", ")+"]":expected)+")";this.stack=(new Error).stack}DimensionError.prototype=new RangeError;DimensionError.prototype.constructor=RangeError;DimensionError.prototype.name="DimensionError";module.exports=DimensionError},function(module,exports,__webpack_require__){"use strict";function IndexError(index,min,max){if(!(this instanceof IndexError)){throw new SyntaxError("Constructor must be called with the new operator")}this.index=index;if(arguments.length<3){this.min=0;this.max=min}else{this.min=min;this.max=max}if(this.min!==undefined&&this.index<this.min){this.message="Index out of range ("+this.index+" < "+this.min+")"}else if(this.max!==undefined&&this.index>=this.max){this.message="Index out of range ("+this.index+" > "+(this.max-1)+")"}else{this.message="Index out of range ("+this.index+")"}this.stack=(new Error).stack}IndexError.prototype=new RangeError;IndexError.prototype.constructor=RangeError;IndexError.prototype.name="IndexError";module.exports=IndexError},function(module,exports,__webpack_require__){"use strict";function UnsupportedTypeError(fn,types){if(!(this instanceof UnsupportedTypeError)){throw new SyntaxError("Constructor must be called with the new operator")}this.fn=fn;this.types=Array.prototype.splice.call(arguments,1);if(!fn){this.message="Unsupported type of argument"}else{if(this.types.length==0){this.message="Unsupported type of argument in function "+fn}else{this.message="Function "+fn+"("+this.types.join(", ")+") not supported"}}this.stack=(new Error).stack}UnsupportedTypeError.prototype=new TypeError;UnsupportedTypeError.prototype.constructor=TypeError;UnsupportedTypeError.prototype.name="UnsupportedTypeError";module.exports=UnsupportedTypeError},function(module,exports,__webpack_require__){"use strict";exports.array=__webpack_require__(340);exports["boolean"]=__webpack_require__(379);exports.number=__webpack_require__(127);exports.bignumber=__webpack_require__(339);exports.object=__webpack_require__(126);exports.string=__webpack_require__(347);exports.types=__webpack_require__(518)},function(module,exports,__webpack_require__){"use strict";var number=__webpack_require__(127);var bignumber=__webpack_require__(339);var BigNumber=__webpack_require__(129);exports.isString=function(value){return value instanceof String||typeof value=="string"};exports.endsWith=function(text,search){var start=text.length-search.length;var end=text.length;return text.substring(start,end)===search};exports.format=function(value,options){if(number.isNumber(value)){return number.format(value,options)}if(value instanceof BigNumber){return bignumber.format(value,options)}if(Array.isArray(value)){return formatArray(value,options)}if(exports.isString(value)){return'"'+value+'"'}if(typeof value==="function"){return value.syntax?value.syntax+"":"function"}if(value instanceof Object){if(typeof value.format==="function"){return value.format(options)}else{return value.toString()}}return String(value)};function formatArray(array,options){if(Array.isArray(array)){var str="[";var len=array.length;for(var i=0;i<len;i++){if(i!=0){str+=", "}str+=formatArray(array[i],options)}str+="]";return str}else{return exports.format(array,options)}}},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356),string=__webpack_require__(347),isArray=Array.isArray,isNode=Node.isNode;function ArrayNode(nodes){if(!(this instanceof ArrayNode)){throw new SyntaxError("Constructor must be called with the new operator")}this.nodes=nodes||[];if(!isArray(this.nodes)||!this.nodes.every(isNode)){throw new TypeError("Array containing Nodes expected")}}ArrayNode.prototype=new Node;ArrayNode.prototype.type="ArrayNode";ArrayNode.prototype._compile=function(defs){var asMatrix=defs.math.config().matrix!=="array";var nodes=this.nodes.map(function(node){return node._compile(defs)});return(asMatrix?"math.matrix([":"[")+nodes.join(",")+(asMatrix?"])":"]")};ArrayNode.prototype.forEach=function(callback){for(var i=0;i<this.nodes.length;i++){var node=this.nodes[i];callback(node,"nodes["+i+"]",this)}};ArrayNode.prototype.map=function(callback){var nodes=[];for(var i=0;i<this.nodes.length;i++){nodes[i]=this._ifNode(callback(this.nodes[i],"nodes["+i+"]",this))}return new ArrayNode(nodes)};ArrayNode.prototype.clone=function(){return new ArrayNode(this.nodes.slice(0))};ArrayNode.prototype.toString=function(){return string.format(this.nodes)};ArrayNode.prototype._toTex=function(callbacks){this.latexType=this.latexType||"bmatrix";var s="\\begin{"+this.latexType+"}";this.nodes.forEach(function(node){if(node.nodes){s+=node.nodes.map(function(childNode){return childNode.toTex(callbacks)}).join("&")}else{s+=node.toTex(callbacks)}s+="\\\\"});s+="\\end{"+this.latexType+"}";return s};module.exports=ArrayNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356),ArrayNode=__webpack_require__(348),keywords=__webpack_require__(583),operators=__webpack_require__(584),latex=__webpack_require__(585),isString=__webpack_require__(347).isString;function AssignmentNode(name,expr){if(!(this instanceof AssignmentNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!isString(name))throw new TypeError('String expected for parameter "name"');if(!(expr instanceof Node))throw new TypeError('Node expected for parameter "expr"');if(name in keywords)throw new Error('Illegal symbol name, "'+name+'" is a reserved keyword');this.name=name;this.expr=expr}AssignmentNode.prototype=new Node;AssignmentNode.prototype.type="AssignmentNode";AssignmentNode.prototype._compile=function(defs){return'scope["'+this.name+'"] = '+this.expr._compile(defs)+""};AssignmentNode.prototype.forEach=function(callback){callback(this.expr,"expr",this)};AssignmentNode.prototype.map=function(callback){return new AssignmentNode(this.name,this._ifNode(callback(this.expr,"expr",this)))};AssignmentNode.prototype.clone=function(){return new AssignmentNode(this.name,this.expr)};AssignmentNode.prototype.toString=function(){var precedence=operators.getPrecedence(this);var exprPrecedence=operators.getPrecedence(this.expr);var expr=this.expr.toString();if(exprPrecedence!==null&&exprPrecedence<=precedence){expr="("+expr+")"}return this.name+" = "+expr};AssignmentNode.prototype._toTex=function(callbacks){var precedence=operators.getPrecedence(this);var exprPrecedence=operators.getPrecedence(this.expr);var expr=this.expr.toTex(callbacks);if(exprPrecedence!==null&&exprPrecedence<=precedence){expr="\\left("+expr+"\\right)"}return latex.toSymbol(this.name)+":="+expr};module.exports=AssignmentNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var ResultSet=__webpack_require__(137);var isBoolean=__webpack_require__(379).isBoolean;function BlockNode(blocks){if(!(this instanceof BlockNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!Array.isArray(blocks))throw new Error("Array expected");this.blocks=blocks.map(function(block){var node=block&&block.node;var visible=block&&block.visible!==undefined?block.visible:true;if(!(node instanceof Node))throw new TypeError('Property "node" must be a Node');if(!isBoolean(visible))throw new TypeError('Property "visible" must be a boolean');return{node:node,visible:visible}})}BlockNode.prototype=new Node;BlockNode.prototype.type="BlockNode";BlockNode.prototype._compile=function(defs){defs.ResultSet=ResultSet;var blocks=this.blocks.map(function(param){var js=param.node._compile(defs);if(param.visible){return"results.push("+js+");"}else{return js+";"}});return"(function () {"+"var results = [];"+blocks.join("")+"return new ResultSet(results);"+"})()"};BlockNode.prototype.forEach=function(callback){for(var i=0;i<this.blocks.length;i++){callback(this.blocks[i].node,"blocks["+i+"].node",this)}};BlockNode.prototype.map=function(callback){var blocks=[];for(var i=0;i<this.blocks.length;i++){var block=this.blocks[i];var node=this._ifNode(callback(block.node,"blocks["+i+"].node",this));blocks[i]={node:node,visible:block.visible}}return new BlockNode(blocks)};BlockNode.prototype.clone=function(){var blocks=this.blocks.map(function(block){return{node:block.node,visible:block.visible}});return new BlockNode(blocks)};BlockNode.prototype.toString=function(){return this.blocks.map(function(param){return param.node.toString()+(param.visible?"":";")}).join("\n")};BlockNode.prototype._toTex=function(callbacks){return this.blocks.map(function(param){return param.node.toTex(callbacks)+(param.visible?"":";")}).join("\n")};module.exports=BlockNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var latex=__webpack_require__(585);var BigNumber=__webpack_require__(129);var Complex=__webpack_require__(131);var Unit=__webpack_require__(135);var util=__webpack_require__(346);var operators=__webpack_require__(584);var isString=util.string.isString;var isNumber=util.number.isNumber;var isBoolean=util["boolean"].isBoolean;function ConditionalNode(condition,trueExpr,falseExpr){if(!(this instanceof ConditionalNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!(condition instanceof Node))throw new TypeError("Parameter condition must be a Node");if(!(trueExpr instanceof Node))throw new TypeError("Parameter trueExpr must be a Node");if(!(falseExpr instanceof Node))throw new TypeError("Parameter falseExpr must be a Node");this.condition=condition;this.trueExpr=trueExpr;this.falseExpr=falseExpr}ConditionalNode.prototype=new Node;ConditionalNode.prototype.type="ConditionalNode";ConditionalNode.prototype._compile=function(defs){defs.testCondition=function(condition){if(isNumber(condition)||isBoolean(condition)||isString(condition)){return condition?true:false}if(condition instanceof BigNumber){return condition.isZero()?false:true}if(condition instanceof Complex){return condition.re||condition.im?true:false}if(condition instanceof Unit){return condition.value?true:false}if(condition===null||condition===undefined){return false}throw new TypeError('Unsupported type of condition "'+defs.math["typeof"](condition)+'"')};return"testCondition("+this.condition._compile(defs)+") ? "+"( "+this.trueExpr._compile(defs)+") : "+"( "+this.falseExpr._compile(defs)+")"};ConditionalNode.prototype.forEach=function(callback){callback(this.condition,"condition",this);callback(this.trueExpr,"trueExpr",this);callback(this.falseExpr,"falseExpr",this)};ConditionalNode.prototype.map=function(callback){return new ConditionalNode(this._ifNode(callback(this.condition,"condition",this)),this._ifNode(callback(this.trueExpr,"trueExpr",this)),this._ifNode(callback(this.falseExpr,"falseExpr",this)))};ConditionalNode.prototype.clone=function(){return new ConditionalNode(this.condition,this.trueExpr,this.falseExpr)};ConditionalNode.prototype.toString=function(){var precedence=operators.getPrecedence(this);var condition=this.condition.toString();var conditionPrecedence=operators.getPrecedence(this.condition);if(this.condition.type==="OperatorNode"||conditionPrecedence!==null&&conditionPrecedence<=precedence){condition="("+condition+")"}var trueExpr=this.trueExpr.toString();var truePrecedence=operators.getPrecedence(this.trueExpr);if(this.trueExpr.type==="OperatorNode"||truePrecedence!==null&&truePrecedence<=precedence){trueExpr="("+trueExpr+")"}var falseExpr=this.falseExpr.toString();var falsePrecedence=operators.getPrecedence(this.falseExpr);if(this.falseExpr.type==="OperatorNode"||falsePrecedence!==null&&falsePrecedence<=precedence){falseExpr="("+falseExpr+")"}return condition+" ? "+trueExpr+" : "+falseExpr};ConditionalNode.prototype._toTex=function(callbacks){return"\\left\\{\\begin{array}{l l}{"+this.trueExpr.toTex(callbacks)+"}, &\\quad{\\text{if}\\;"+this.condition.toTex(callbacks)+"}\\\\{"+this.falseExpr.toTex(callbacks)+"}, &\\quad{\\text{otherwise}}\\end{array}\\right."};module.exports=ConditionalNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var BigNumber=__webpack_require__(129);var type=__webpack_require__(518).type;var isString=__webpack_require__(347).isString;function ConstantNode(value,valueType){if(!(this instanceof ConstantNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(valueType){if(!isString(valueType)){throw new TypeError('String expected for parameter "valueType"')}if(!isString(value)){throw new TypeError('String expected for parameter "value"')}this.value=value;this.valueType=valueType}else{this.value=value+"";this.valueType=type(value)}if(!SUPPORTED_TYPES[this.valueType]){throw new TypeError('Unsupported type of value "'+this.valueType+'"')}}var SUPPORTED_TYPES={number:true,string:true,"boolean":true,undefined:true,"null":true};ConstantNode.prototype=new Node;ConstantNode.prototype.type="ConstantNode";ConstantNode.prototype._compile=function(defs){switch(this.valueType){case"number":if(defs.math.config().number==="bignumber"){return'math.bignumber("'+this.value+'")'}else{return this.value.replace(/^(0*)[0-9]/,function(match,zeros){return match.substring(zeros.length)})}case"string":return'"'+this.value+'"';case"boolean":return this.value;case"undefined":return this.value;case"null":return this.value;default:throw new TypeError('Unsupported type of constant "'+this.valueType+'"')}};ConstantNode.prototype.forEach=function(callback){};ConstantNode.prototype.map=function(callback){return this.clone()};ConstantNode.prototype.clone=function(){return new ConstantNode(this.value,this.valueType)};ConstantNode.prototype.toString=function(){switch(this.valueType){case"string":return'"'+this.value+'"';default:return this.value}};ConstantNode.prototype._toTex=function(callbacks){var value=this.value,index;switch(this.valueType){case"string":return"\\text{"+value+"}";case"number":index=value.toLowerCase().indexOf("e");if(index!==-1){return value.substring(0,index)+"\\cdot10^{"+value.substring(index+1)+"}"}return value;default:return value}};module.exports=ConstantNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var RangeNode=__webpack_require__(358);var SymbolNode=__webpack_require__(359);var BigNumber=__webpack_require__(129);var Range=__webpack_require__(132);var isNode=Node.isNode;var isArray=Array.isArray;function IndexNode(object,ranges){if(!(this instanceof IndexNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!(object instanceof Node))throw new TypeError('Node expected for parameter "object"');if(!isArray(ranges)||!ranges.every(isNode)){throw new TypeError('Array containing Nodes expected for parameter "ranges"')}this.object=object;this.ranges=ranges}IndexNode.prototype=new Node;IndexNode.prototype.type="IndexNode";IndexNode.prototype._compile=function(defs){return this.compileSubset(defs)};IndexNode.prototype.compileSubset=function(defs,replacement){function test(node){return node instanceof SymbolNode&&node.name=="end"}var someUseEnd=false;var rangesUseEnd=this.ranges.map(function(range){var useEnd=range.filter(test).length>0;someUseEnd=useEnd?useEnd:someUseEnd;return useEnd});defs.range=function(start,end,step){return new Range(start instanceof BigNumber?start.toNumber():start,end instanceof BigNumber?end.toNumber():end,step instanceof BigNumber?step.toNumber():step)};var ranges=this.ranges.map(function(range,i){var useEnd=rangesUseEnd[i];if(range instanceof RangeNode){if(useEnd){defs.args.end=true;return"(function () {"+"  var end = size["+i+"];"+"  return range("+"    "+range.start._compile(defs)+", "+"    "+range.end._compile(defs)+", "+"    "+(range.step?range.step._compile(defs):"1")+"  );"+"})()"}else{return"range("+range.start._compile(defs)+", "+range.end._compile(defs)+", "+(range.step?range.step._compile(defs):"1")+")"}}else{if(useEnd){defs.args.end=true;return"(function () {"+"  var end = size["+i+"];"+"  return "+range._compile(defs)+";"+"})()"}else{return range._compile(defs)}}});if(someUseEnd){return"(function () {"+"  var obj = "+this.object._compile(defs)+";"+"  var size = math.size(obj).valueOf();"+"  return math.subset("+"    obj, "+"    math.index("+ranges.join(", ")+")"+"    "+(replacement?", "+replacement:"")+"  );"+"})()"}else{return"math.subset("+this.object._compile(defs)+","+"math.index("+ranges.join(", ")+")"+(replacement?", "+replacement:"")+")"}};IndexNode.prototype.forEach=function(callback){callback(this.object,"object",this);for(var i=0;i<this.ranges.length;i++){callback(this.ranges[i],"ranges["+i+"]",this)}};IndexNode.prototype.map=function(callback){var object=this._ifNode(callback(this.object,"object",this));var ranges=[];for(var i=0;i<this.ranges.length;i++){ranges[i]=this._ifNode(callback(this.ranges[i],"ranges["+i+"]",this))}return new IndexNode(object,ranges)};IndexNode.prototype.objectName=function(){return this.object.name};IndexNode.prototype.clone=function(){return new IndexNode(this.object,this.ranges.slice(0))};IndexNode.prototype.toString=function(){return this.object.toString()+"["+this.ranges.join(", ")+"]"};IndexNode.prototype._toTex=function(callbacks){var ranges=this.ranges.map(function(range){return range.toTex(callbacks)});return this.object.toTex(callbacks)+"_{\\left["+ranges.join(",")+"\\right]}"};module.exports=IndexNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var keywords=__webpack_require__(583);var latex=__webpack_require__(585);var operators=__webpack_require__(584);var isString=__webpack_require__(347).isString;var isArray=Array.isArray;function FunctionAssignmentNode(name,params,expr){if(!(this instanceof FunctionAssignmentNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!isString(name))throw new TypeError('String expected for parameter "name"');if(!isArray(params)||!params.every(isString))throw new TypeError('Array containing strings expected for parameter "params"');if(!(expr instanceof Node))throw new TypeError('Node expected for parameter "expr"');if(name in keywords)throw new Error('Illegal function name, "'+name+'" is a reserved keyword');this.name=name;this.params=params;this.expr=expr}FunctionAssignmentNode.prototype=new Node;FunctionAssignmentNode.prototype.type="FunctionAssignmentNode";FunctionAssignmentNode.prototype._compile=function(defs){this.params.forEach(function(variable){defs.args[variable]=true});return'scope["'+this.name+'"] = '+"  (function () {"+"    var fn = function "+this.name+"("+this.params.join(",")+") {"+"      if (arguments.length != "+this.params.length+") {"+'        throw new SyntaxError("Wrong number of arguments in function '+this.name+' (" + arguments.length + " provided, '+this.params.length+' expected)");'+"      }"+"      return "+this.expr._compile(defs)+""+"    };"+'    fn.syntax = "'+this.name+"("+this.params.join(", ")+')";'+"    return fn;"+"  })();"};FunctionAssignmentNode.prototype.forEach=function(callback){callback(this.expr,"expr",this)};FunctionAssignmentNode.prototype.map=function(callback){var expr=this._ifNode(callback(this.expr,"expr",this));return new FunctionAssignmentNode(this.name,this.params.slice(0),expr)};FunctionAssignmentNode.prototype.clone=function(){return new FunctionAssignmentNode(this.name,this.params.slice(0),this.expr)};FunctionAssignmentNode.prototype.toString=function(){var precedence=operators.getPrecedence(this);var exprPrecedence=operators.getPrecedence(this.expr);var expr=this.expr.toString();if(exprPrecedence!==null&&exprPrecedence<=precedence){expr="("+expr+")"}return"function "+this.name+"("+this.params.join(", ")+") = "+expr};FunctionAssignmentNode.prototype._toTex=function(callbacks){var precedence=operators.getPrecedence(this);var exprPrecedence=operators.getPrecedence(this.expr);var expr=this.expr.toTex(callbacks);if(exprPrecedence!==null&&exprPrecedence<=precedence){expr="\\left("+expr+"\\right)"}return latex.toSymbol(this.name)+"\\left("+this.params.map(latex.toSymbol).join(",")+"\\right):="+expr};module.exports=FunctionAssignmentNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var SymbolNode=__webpack_require__(359);var latex=__webpack_require__(585);var isNode=Node.isNode;var isArray=Array.isArray;function FunctionNode(name,args){if(!(this instanceof FunctionNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(typeof name!=="string")throw new TypeError('string expected for parameter "name"');if(!isArray(args)||!args.every(isNode)){throw new TypeError('Array containing Nodes expected for parameter "args"')}this.name=name;this.args=args||[]}FunctionNode.prototype=new Node;FunctionNode.prototype.type="FunctionNode";FunctionNode.prototype._compile=function(defs){var fn=defs.math[this.name];var isRaw=typeof fn==="function"&&fn.rawArgs==true;var args=this.args.map(function(arg){return arg._compile(defs)});if(isRaw){var paramsName;do{paramsName="p"+Math.round(Math.random()*1e4)}while(paramsName in defs);defs[paramsName]=this.args;return'("'+this.name+'" in scope ? '+'scope["'+this.name+'"]('+args.join(", ")+") : "+'math["'+this.name+'"]'+"("+paramsName+", math, scope))"}else{var symbol=new SymbolNode(this.name);return symbol._compile(defs)+"("+args.join(", ")+")"}};FunctionNode.prototype.forEach=function(callback){for(var i=0;i<this.args.length;i++){callback(this.args[i],"args["+i+"]",this)}};FunctionNode.prototype.map=function(callback){var args=[];for(var i=0;i<this.args.length;i++){args[i]=this._ifNode(callback(this.args[i],"args["+i+"]",this))}return new FunctionNode(this.name,args)};FunctionNode.prototype.clone=function(){return new FunctionNode(this.name,this.args.slice(0))};FunctionNode.prototype.toString=function(){return this.name+"("+this.args.join(", ")+")"};FunctionNode.prototype._toTex=function(callbacks){return latex.toFunction(this,callbacks,this.name)};FunctionNode.prototype.getIdentifier=function(){return this.type+":"+this.name};module.exports=FunctionNode},function(module,exports,__webpack_require__){"use strict";var keywords=__webpack_require__(583);function Node(){if(!(this instanceof Node)){throw new SyntaxError("Constructor must be called with the new operator")}}Node.prototype.eval=function(){throw new Error("Node.eval is deprecated. "+"Use Node.compile(math).eval([scope]) instead.")};Node.prototype.type="Node";Node.prototype.compile=function(math){if(!(math instanceof Object)){throw new TypeError("Object expected for parameter math")}var defs={math:_transform(math),args:{},_validateScope:_validateScope};var code=this._compile(defs);var defsCode=Object.keys(defs).map(function(name){return"    var "+name+' = defs["'+name+'"];'});var factoryCode=defsCode.join(" ")+"return {"+'  "eval": function (scope) {'+"    if (scope) _validateScope(scope);"+"    scope = scope || {};"+"    return "+code+";"+"  }"+"};";var factory=new Function("defs",factoryCode);return factory(defs)};Node.prototype._compile=function(defs){throw new Error("Cannot compile a Node interface")};Node.prototype.forEach=function(callback){throw new Error("Cannot run forEach on a Node interface")};Node.prototype.map=function(callback){throw new Error("Cannot run map on a Node interface")};Node.prototype._ifNode=function(node){if(!(node instanceof Node)){throw new TypeError("Callback function must return a Node")}return node};Node.prototype.traverse=function(callback){callback(this,null,null);function _traverse(node,callback){node.forEach(function(child,path,parent){callback(child,path,parent);_traverse(child,callback)})}_traverse(this,callback)};Node.prototype.transform=function(callback){var replacement=callback(this,null,null);if(replacement!==this){return replacement}function _transform(node,callback){return node.map(function(child,path,parent){var replacement=callback(child,path,parent);return replacement!==child?replacement:_transform(child,callback)})}return _transform(this,callback)};Node.prototype.filter=function(callback){var nodes=[];this.traverse(function(node,path,parent){if(callback(node,path,parent)){nodes.push(node)}});return nodes};Node.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")};Node.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")};Node.prototype.clone=function(){throw new Error("Cannot clone a Node interface")};Node.prototype.toString=function(){return""};Node.prototype.toTex=function(callback){var customTex;if(this.type==="ArrayNode"){delete this.latexType}if(typeof callback==="object"){if(this.type==="FunctionNode"&&callback.hasOwnProperty(this.name)){customTex=callback[this.name](this,callback)}}else if(typeof callback==="function"){customTex=callback(this,callback)}else if(typeof callback==="string"&&this.type==="ArrayNode"){this.latexType=callback}else if(typeof callback!=="undefined"){throw new TypeError("Object or function expected as callback")}if(typeof customTex!=="undefined"){return customTex}return this._toTex(callback)};Node.prototype._toTex=function(){if(this.type==="Node"){return""}throw new Error("_toTex not implemented for this Node")};Node.prototype.getIdentifier=function(){return this.type};Node.isNode=function(object){return object instanceof Node};function _validateScope(scope){for(var symbol in scope){if(scope.hasOwnProperty(symbol)){if(symbol in keywords){throw new Error('Scope contains an illegal symbol, "'+symbol+'" is a reserved keyword')}}}}function _transform(math){var transformed=Object.create(math);if(math.expression&&math.expression.transform){for(var name in math.expression.transform){if(math.expression.transform.hasOwnProperty(name)){transformed[name]=math.expression.transform[name]}}}return transformed}module.exports=Node},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356),ConstantNode=__webpack_require__(352),SymbolNode=__webpack_require__(359),FunctionNode=__webpack_require__(355),latex=__webpack_require__(585),operators=__webpack_require__(584),isArray=Array.isArray,isNode=Node.isNode;function OperatorNode(op,fn,args){if(!(this instanceof OperatorNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(typeof op!=="string"){throw new TypeError('string expected for parameter "op"')}if(typeof fn!=="string"){throw new TypeError('string expected for parameter "fn"')}if(!isArray(args)||!args.every(isNode)){throw new TypeError('Array containing Nodes expected for parameter "args"')}this.op=op;this.fn=fn;this.args=args||[]}OperatorNode.prototype=new Node;OperatorNode.prototype.type="OperatorNode";OperatorNode.prototype._compile=function(defs){if(!(this.fn in defs.math)){throw new Error("Function "+this.fn+' missing in provided namespace "math"')}var args=this.args.map(function(arg){return arg._compile(defs)});return"math."+this.fn+"("+args.join(", ")+")"};OperatorNode.prototype.forEach=function(callback){for(var i=0;i<this.args.length;i++){callback(this.args[i],"args["+i+"]",this)}};OperatorNode.prototype.map=function(callback){var args=[];for(var i=0;i<this.args.length;i++){args[i]=this._ifNode(callback(this.args[i],"args["+i+"]",this))}return new OperatorNode(this.op,this.fn,args)};OperatorNode.prototype.clone=function(){return new OperatorNode(this.op,this.fn,this.args.slice(0))};function calculateNecessaryParentheses(root,args,latex){var precedence=operators.getPrecedence(root);var associativity=operators.getAssociativity(root);switch(args.length){case 1:var operandPrecedence=operators.getPrecedence(args[0]);if(latex&&operandPrecedence!==null){var operandIdentifier=args[0].getIdentifier();var rootIdentifier=root.getIdentifier();if(operators.properties[precedence][rootIdentifier].latexLeftParens===false){return[false]}if(operators.properties[operandPrecedence][operandIdentifier].latexParens===false){return[false]}}if(operandPrecedence===null){return[false]}if(operandPrecedence<=precedence){return[true]}return[false];case 2:var lhsParens;var lhsPrecedence=operators.getPrecedence(args[0]);var assocWithLhs=operators.isAssociativeWith(root,args[0]);if(lhsPrecedence===null){lhsParens=false}else if(lhsPrecedence===precedence&&associativity==="right"&&!assocWithLhs){lhsParens=true}else if(lhsPrecedence<precedence){lhsParens=true}else{lhsParens=false}var rhsParens;var rhsPrecedence=operators.getPrecedence(args[1]);var assocWithRhs=operators.isAssociativeWith(root,args[1]);if(rhsPrecedence===null){rhsParens=false}else if(rhsPrecedence===precedence&&associativity==="left"&&!assocWithRhs){rhsParens=true}else if(rhsPrecedence<precedence){rhsParens=true}else{rhsParens=false}if(latex){var rootIdentifier=root.getIdentifier();var lhsIdentifier=root.args[0].getIdentifier();var rhsIdentifier=root.args[1].getIdentifier();if(lhsPrecedence!==null){if(operators.properties[precedence][rootIdentifier].latexLeftParens===false){
lhsParens=false}if(operators.properties[lhsPrecedence][lhsIdentifier].latexParens===false){lhsParens=false}}if(rhsPrecedence!==null){if(operators.properties[precedence][rootIdentifier].latexRightParens===false){rhsParens=false}if(operators.properties[rhsPrecedence][rhsIdentifier].latexParens===false){rhsParens=false}}}return[lhsParens,rhsParens];default:var parens=[];args.forEach(function(){parens.push(true)});return parens}}OperatorNode.prototype.toString=function(){var args=this.args;var parens=calculateNecessaryParentheses(this,args,false);switch(args.length){case 1:var assoc=operators.getAssociativity(this);var operand=args[0].toString();if(parens[0]){operand="("+operand+")"}if(assoc==="right"){return this.op+operand}else if(assoc==="left"){return operand+this.op}return operand+this.op;case 2:var lhs=args[0].toString();var rhs=args[1].toString();if(parens[0]){lhs="("+lhs+")"}if(parens[1]){rhs="("+rhs+")"}return lhs+" "+this.op+" "+rhs;default:return this.fn+"("+this.args.join(", ")+")"}};OperatorNode.prototype._toTex=function(callbacks){var args=this.args;var parens=calculateNecessaryParentheses(this,args,true);var op=latex.operators[this.fn];op=typeof op==="undefined"?this.op:op;switch(args.length){case 1:var assoc=operators.getAssociativity(this);var operand=args[0].toTex(callbacks);if(parens[0]){operand="\\left("+operand+"\\right)"}if(assoc==="right"){return op+operand}else if(assoc==="left"){return operand+op}return operand+op;case 2:var lhs=args[0];var lhsTex=lhs.toTex(callbacks);if(parens[0]){lhsTex="\\left("+lhsTex+"\\right)"}var rhs=args[1];var rhsTex=rhs.toTex(callbacks);if(parens[1]){rhsTex="\\left("+rhsTex+"\\right)"}switch(this.getIdentifier()){case"OperatorNode:divide":return op+"{"+lhsTex+"}"+"{"+rhsTex+"}";case"OperatorNode:pow":lhsTex="{"+lhsTex+"}";rhsTex="{"+rhsTex+"}";switch(lhs.getIdentifier()){case"ConditionalNode":case"OperatorNode:divide":lhsTex="\\left("+lhsTex+"\\right)"}}return lhsTex+op+rhsTex;default:return"\\mathrm{"+this.fn+"}\\left("+args.map(function(arg){return arg.toTex(callbacks)}).join(",")+"\\right)"}};OperatorNode.prototype.getIdentifier=function(){return this.type+":"+this.fn};module.exports=OperatorNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356);var operators=__webpack_require__(584);var isNode=Node.isNode;function RangeNode(start,end,step){if(!(this instanceof RangeNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!isNode(start))throw new TypeError("Node expected");if(!isNode(end))throw new TypeError("Node expected");if(step&&!isNode(step))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=start;this.end=end;this.step=step||null}RangeNode.prototype=new Node;RangeNode.prototype.type="RangeNode";RangeNode.prototype._compile=function(defs){return"math.range("+this.start._compile(defs)+", "+this.end._compile(defs)+(this.step?", "+this.step._compile(defs):"")+")"};RangeNode.prototype.forEach=function(callback){callback(this.start,"start",this);callback(this.end,"end",this);if(this.step){callback(this.step,"step",this)}};RangeNode.prototype.map=function(callback){return new RangeNode(this._ifNode(callback(this.start,"start",this)),this._ifNode(callback(this.end,"end",this)),this.step&&this._ifNode(callback(this.step,"step",this)))};RangeNode.prototype.clone=function(){return new RangeNode(this.start,this.end,this.step&&this.step)};RangeNode.prototype.toString=function(){var precedence=operators.getPrecedence(this);var str;var start=this.start.toString();var startPrecedence=operators.getPrecedence(this.start);if(startPrecedence!==null&&startPrecedence<=precedence){start="("+start+")"}str=start;if(this.step){var step=this.step.toString();var stepPrecedence=operators.getPrecedence(this.step);if(stepPrecedence!==null&&stepPrecedence<=precedence){step="("+step+")"}str+=":"+step}var end=this.end.toString();var endPrecedence=operators.getPrecedence(this.end);if(endPrecedence!==null&&endPrecedence<=precedence){end="("+end+")"}str+=":"+end;return str};RangeNode.prototype._toTex=function(callbacks){var str=this.start.toTex(callbacks);if(this.step){str+=":"+this.step.toTex(callbacks)}str+=":"+this.end.toTex(callbacks);return str};module.exports=RangeNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356),Unit=__webpack_require__(135),latex=__webpack_require__(585),isString=__webpack_require__(347).isString;function SymbolNode(name){if(!(this instanceof SymbolNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!isString(name))throw new TypeError('String expected for parameter "name"');this.name=name}SymbolNode.prototype=new Node;SymbolNode.prototype.type="SymbolNode";SymbolNode.prototype._compile=function(defs){defs["undef"]=undef;defs["Unit"]=Unit;if(this.name in defs.args){return this.name}else if(this.name in defs.math){return'("'+this.name+'" in scope ? scope["'+this.name+'"] : math["'+this.name+'"])'}else{return"("+'"'+this.name+'" in scope ? scope["'+this.name+'"] : '+(Unit.isValuelessUnit(this.name)?'new Unit(null, "'+this.name+'")':'undef("'+this.name+'")')+")"}};SymbolNode.prototype.forEach=function(callback){};SymbolNode.prototype.map=function(callback){return this.clone()};function undef(name){throw new Error("Undefined symbol "+name)}SymbolNode.prototype.clone=function(){return new SymbolNode(this.name)};SymbolNode.prototype.toString=function(){return this.name};SymbolNode.prototype._toTex=function(callbacks){var symbol=latex.toSymbol(this.name);if(symbol[0]==="\\"){return symbol}return" "+symbol};module.exports=SymbolNode},function(module,exports,__webpack_require__){"use strict";var Node=__webpack_require__(356),IndexNode=__webpack_require__(353);function UpdateNode(index,expr){if(!(this instanceof UpdateNode)){throw new SyntaxError("Constructor must be called with the new operator")}if(!(index instanceof IndexNode)){throw new TypeError('Expected IndexNode for parameter "index"')}if(!(expr instanceof Node)){throw new TypeError('Expected Node for parameter "expr"')}this.index=index;this.expr=expr}UpdateNode.prototype=new Node;UpdateNode.prototype.type="UpdateNode";UpdateNode.prototype._compile=function(defs){var lhs=this.index.objectName()in defs.args?this.name+" = ":'scope["'+this.index.objectName()+'"]';var rhs=this.index.compileSubset(defs,this.expr._compile(defs));return lhs+" = "+rhs};UpdateNode.prototype.forEach=function(callback){callback(this.index,"index",this);callback(this.expr,"expr",this)};UpdateNode.prototype.map=function(callback){return new UpdateNode(this._ifNode(callback(this.index,"index",this)),this._ifNode(callback(this.expr,"expr",this)))};UpdateNode.prototype.clone=function(){return new UpdateNode(this.index,this.expr)};UpdateNode.prototype.toString=function(){return this.index.toString()+" = "+this.expr.toString()};UpdateNode.prototype._toTex=function(callbacks){return this.index.toTex(callbacks)+":="+this.expr.toTex(callbacks)};module.exports=UpdateNode},function(module,exports,__webpack_require__){module.exports={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]}},function(module,exports,__webpack_require__){module.exports={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]}},function(module,exports,__webpack_require__){module.exports={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]}},function(module,exports,__webpack_require__){module.exports={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]}},function(module,exports,__webpack_require__){module.exports={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["tau"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]}},function(module,exports,__webpack_require__){module.exports={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]}},function(module,exports,__webpack_require__){module.exports={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]}},function(module,exports,__webpack_require__){var map={"./clone":295,"./clone.js":295,"./filter":296,"./filter.js":296,"./forEach":303,"./forEach.js":303,"./format":297,"./format.js":297,"./import":298,"./import.js":298,"./map":299,"./map.js":299,"./print":300,"./print.js":300,"./sort":301,"./sort.js":301,"./typeof":302,"./typeof.js":302};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){return map[req]||function(){throw new Error("Cannot find module '"+req+"'.")}()}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=378},function(module,exports,__webpack_require__){"use strict";exports.isBoolean=function(value){return value instanceof Boolean||typeof value=="boolean"}},function(module,exports,__webpack_require__){var DimensionError=__webpack_require__(343);var IndexError=__webpack_require__(344);exports.transform=function(err){if(err instanceof IndexError){return new IndexError(err.index+1,err.min+1,err.max+1)}return err}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(122);var UNKNOWN_ERROR=8;var INVALID_BSON_ERROR=22;var WRITE_CONCERN_ERROR=64;var MULTIPLE_ERROR=65;var INSERT=1;var UPDATE=2;var REMOVE=3;var writeConcern=function(target,col,options){if(options.w!=null||options.j!=null||options.fsync!=null){target.writeConcern=options}else if(col.writeConcern.w!=null||col.writeConcern.j!=null||col.writeConcern.fsync!=null){target.writeConcern=col.writeConcern}return target};var defineReadOnlyProperty=function(self,name,value){Object.defineProperty(self,name,{enumerable:true,get:function(){return value}})};var Batch=function(batchType,originalZeroIndex){this.originalZeroIndex=originalZeroIndex;this.currentIndex=0;this.originalIndexes=[];this.batchType=batchType;this.operations=[];this.size=0;this.sizeBytes=0};var LegacyOp=function(batchType,operation,index){this.batchType=batchType;this.index=index;this.operation=operation};var BulkWriteResult=function(bulkResult){defineReadOnlyProperty(this,"ok",bulkResult.ok);defineReadOnlyProperty(this,"nInserted",bulkResult.nInserted);defineReadOnlyProperty(this,"nUpserted",bulkResult.nUpserted);defineReadOnlyProperty(this,"nMatched",bulkResult.nMatched);defineReadOnlyProperty(this,"nModified",bulkResult.nModified);defineReadOnlyProperty(this,"nRemoved",bulkResult.nRemoved);this.getInsertedIds=function(){return bulkResult.insertedIds};this.getUpsertedIds=function(){return bulkResult.upserted};this.getUpsertedIdAt=function(index){return bulkResult.upserted[index]};this.getRawResponse=function(){return bulkResult};this.hasWriteErrors=function(){return bulkResult.writeErrors.length>0};this.getWriteErrorCount=function(){return bulkResult.writeErrors.length};this.getWriteErrorAt=function(index){if(index<bulkResult.writeErrors.length){return bulkResult.writeErrors[index]}return null};this.getWriteErrors=function(){return bulkResult.writeErrors};this.getLastOp=function(){return bulkResult.lastOp};this.getWriteConcernError=function(){if(bulkResult.writeConcernErrors.length==0){return null}else if(bulkResult.writeConcernErrors.length==1){return bulkResult.writeConcernErrors[0]}else{var errmsg="";for(var i=0;i<bulkResult.writeConcernErrors.length;i++){var err=bulkResult.writeConcernErrors[i];errmsg=errmsg+err.errmsg;if(i==0)errmsg=errmsg+" and "}return new WriteConcernError({errmsg:errmsg,code:WRITE_CONCERN_ERROR})}};this.toJSON=function(){return bulkResult};this.toString=function(){return"BulkWriteResult("+this.toJSON(bulkResult)+")"};this.isOk=function(){return bulkResult.ok==1}};var WriteConcernError=function(err){if(!(this instanceof WriteConcernError))return new WriteConcernError(err);defineReadOnlyProperty(this,"code",err.code);defineReadOnlyProperty(this,"errmsg",err.errmsg);this.toJSON=function(){return{code:err.code,errmsg:err.errmsg}};this.toString=function(){return"WriteConcernError("+err.errmsg+")"}};var WriteError=function(err){if(!(this instanceof WriteError))return new WriteError(err);defineReadOnlyProperty(this,"code",err.code);defineReadOnlyProperty(this,"index",err.index);defineReadOnlyProperty(this,"errmsg",err.errmsg);this.getOperation=function(){return err.op};this.toJSON=function(){return{code:err.code,index:err.index,errmsg:err.errmsg,op:err.op}};this.toString=function(){return"WriteError("+JSON.stringify(this.toJSON())+")"}};var mergeBatchResults=function(ordered,batch,bulkResult,err,result){if(err){result=err}else if(result&&result.result){result=result.result}else if(result==null){return}if(result.ok==0&&bulkResult.ok==1){bulkResult.ok=0;var writeError={index:0,code:result.code||0,errmsg:result.message,op:batch.operations[0]};bulkResult.writeErrors.push(new WriteError(writeError));return}else if(result.ok==0&&bulkResult.ok==0){return}if(result.lastOp){bulkResult.lastOp=result.lastOp}if(batch.batchType==INSERT&&result.n){bulkResult.nInserted=bulkResult.nInserted+result.n}if(batch.batchType==REMOVE&&result.n){bulkResult.nRemoved=bulkResult.nRemoved+result.n}var nUpserted=0;if(Array.isArray(result.upserted)){nUpserted=result.upserted.length;for(var i=0;i<result.upserted.length;i++){bulkResult.upserted.push({index:result.upserted[i].index+batch.originalZeroIndex,_id:result.upserted[i]._id})}}else if(result.upserted){nUpserted=1;bulkResult.upserted.push({index:batch.originalZeroIndex,_id:result.upserted})}if(batch.batchType==UPDATE&&result.n){var nModified=result.nModified;bulkResult.nUpserted=bulkResult.nUpserted+nUpserted;bulkResult.nMatched=bulkResult.nMatched+(result.n-nUpserted);if(typeof nModified=="number"){bulkResult.nModified=bulkResult.nModified+nModified}else{bulkResult.nModified=null}}if(Array.isArray(result.writeErrors)){for(var i=0;i<result.writeErrors.length;i++){var writeError={index:batch.originalZeroIndex+result.writeErrors[i].index,code:result.writeErrors[i].code,errmsg:result.writeErrors[i].errmsg,op:batch.operations[result.writeErrors[i].index]};bulkResult.writeErrors.push(new WriteError(writeError))}}if(result.writeConcernError){bulkResult.writeConcernErrors.push(new WriteConcernError(result.writeConcernError))}};var cloneOptions=function(options){var clone={};var keys=Object.keys(options);for(var i=0;i<keys.length;i++){clone[keys[i]]=options[keys[i]]}return clone};exports.BulkWriteResult=BulkWriteResult;exports.WriteError=WriteError;exports.Batch=Batch;exports.LegacyOp=LegacyOp;exports.mergeBatchResults=mergeBatchResults;exports.cloneOptions=cloneOptions;exports.writeConcern=writeConcern;exports.INVALID_BSON_ERROR=INVALID_BSON_ERROR;exports.WRITE_CONCERN_ERROR=WRITE_CONCERN_ERROR;exports.MULTIPLE_ERROR=MULTIPLE_ERROR;exports.UNKNOWN_ERROR=UNKNOWN_ERROR;exports.INSERT=INSERT;exports.UPDATE=UPDATE;exports.REMOVE=REMOVE},function(module,exports,__webpack_require__){var pathRegexp=__webpack_require__(600);var debug=__webpack_require__(574)("express:router:layer");var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=Layer;function Layer(path,options,fn){if(!(this instanceof Layer)){return new Layer(path,options,fn)}debug("new %s",path);options=options||{};this.handle=fn;this.name=fn.name||"<anonymous>";this.params=undefined;this.path=undefined;this.regexp=pathRegexp(path,this.keys=[],options);if(path==="/"&&options.end===false){this.regexp.fast_slash=true}}Layer.prototype.handle_error=function handle_error(error,req,res,next){var fn=this.handle;if(fn.length!==4){return next(error)}try{fn(error,req,res,next)}catch(err){next(err)}};Layer.prototype.handle_request=function handle(req,res,next){var fn=this.handle;if(fn.length>3){return next()}try{fn(req,res,next)}catch(err){next(err)}};Layer.prototype.match=function match(path){if(path==null){this.params=undefined;this.path=undefined;return false}if(this.regexp.fast_slash){this.params={};this.path="";return true}var m=this.regexp.exec(path);if(!m){this.params=undefined;this.path=undefined;return false}this.params={};this.path=m[0];var keys=this.keys;var params=this.params;var prop;var n=0;var key;var val;for(var i=1,len=m.length;i<len;++i){key=keys[i-1];prop=key?key.name:n++;val=decode_param(m[i]);if(val!==undefined||!hasOwnProperty.call(params,prop)){params[prop]=val}}return true};function decode_param(val){if(typeof val!=="string"){return val}try{return decodeURIComponent(val)}catch(e){var err=new TypeError("Failed to decode param '"+val+"'");err.status=400;throw err}}},function(module,exports,__webpack_require__){(function(Buffer){var contentDisposition=__webpack_require__(541);var contentType=__webpack_require__(602);var deprecate=__webpack_require__(532)("express");var mime=__webpack_require__(546).mime;var basename=__webpack_require__(8).basename;var etag=__webpack_require__(601);var proxyaddr=__webpack_require__(539);var qs=__webpack_require__(540);var querystring=__webpack_require__(575);exports.etag=function(body,encoding){var buf=!Buffer.isBuffer(body)?new Buffer(body,encoding):body;return etag(buf,{weak:false})};exports.wetag=function wetag(body,encoding){var buf=!Buffer.isBuffer(body)?new Buffer(body,encoding):body;return etag(buf,{weak:true})};exports.isAbsolute=function(path){if("/"==path[0])return true;if(":"==path[1]&&"\\"==path[2])return true;if("\\\\"==path.substring(0,2))return true};exports.flatten=function(arr,ret){ret=ret||[];var len=arr.length;for(var i=0;i<len;++i){if(Array.isArray(arr[i])){exports.flatten(arr[i],ret)}else{ret.push(arr[i])}}return ret};exports.normalizeType=function(type){return~type.indexOf("/")?acceptParams(type):{value:mime.lookup(type),params:{}}};exports.normalizeTypes=function(types){var ret=[];for(var i=0;i<types.length;++i){ret.push(exports.normalizeType(types[i]))}return ret};exports.contentDisposition=deprecate.function(contentDisposition,"utils.contentDisposition: use content-disposition npm module instead");function acceptParams(str,index){var parts=str.split(/ *; */);var ret={value:parts[0],quality:1,params:{},originalIndex:index};for(var i=1;i<parts.length;++i){var pms=parts[i].split(/ *= */);if("q"==pms[0]){ret.quality=parseFloat(pms[1])}else{ret.params[pms[0]]=pms[1]}}return ret}exports.compileETag=function(val){var fn;if(typeof val==="function"){return val}switch(val){case true:fn=exports.wetag;break;case false:break;case"strong":fn=exports.etag;break;case"weak":fn=exports.wetag;break;default:throw new TypeError("unknown value for etag function: "+val)}return fn};exports.compileQueryParser=function compileQueryParser(val){var fn;if(typeof val==="function"){return val}switch(val){case true:fn=querystring.parse;break;case false:fn=newObject;break;case"extended":fn=qs.parse;break;case"simple":fn=querystring.parse;break;default:throw new TypeError("unknown value for query parser function: "+val)}return fn};exports.compileTrust=function(val){if(typeof val==="function")return val;if(val===true){return function(){return true}}if(typeof val==="number"){return function(a,i){return i<val}}if(typeof val==="string"){val=val.split(/ *, */)}return proxyaddr.compile(val||[])};exports.setCharset=function setCharset(type,charset){if(!type||!charset){return type}var parsed=contentType.parse(type);parsed.parameters.charset=charset;return contentType.format(parsed)};function newObject(){return{}}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){exports.init=function(app){return function expressInit(req,res,next){if(app.enabled("x-powered-by"))res.setHeader("X-Powered-By","Express");req.res=res;res.req=req;req.next=next;req.__proto__=app.request;res.__proto__=app.response;res.locals=res.locals||Object.create(null);next()}}},function(module,exports,__webpack_require__){var debug=__webpack_require__(574)("express:view");var path=__webpack_require__(8);var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());var utils=__webpack_require__(383);var dirname=path.dirname;var basename=path.basename;var extname=path.extname;var join=path.join;var resolve=path.resolve;module.exports=View;function View(name,options){options=options||{};this.name=name;this.root=options.root;var engines=options.engines;this.defaultEngine=options.defaultEngine;var ext=this.ext=extname(name);if(!ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");if(!ext)name+=ext=this.ext=("."!=this.defaultEngine[0]?".":"")+this.defaultEngine;this.engine=engines[ext]||(engines[ext]=__webpack_require__(576)(ext.slice(1)).__express);this.path=this.lookup(name)}View.prototype.lookup=function lookup(name){var path;var roots=[].concat(this.root);debug('lookup "%s"',name);for(var i=0;i<roots.length&&!path;i++){var root=roots[i];var loc=resolve(root,name);var dir=dirname(loc);var file=basename(loc);path=this.resolve(dir,file)}return path};View.prototype.render=function render(options,fn){debug('render "%s"',this.path);this.engine(this.path,options,fn)};View.prototype.resolve=function resolve(dir,file){var ext=this.ext;var path;var stat;path=join(dir,file);stat=tryStat(path);if(stat&&stat.isFile()){return path}path=join(dir,basename(file,ext),"index"+ext);stat=tryStat(path);if(stat&&stat.isFile()){return path}};function tryStat(path){debug('stat "%s"',path);try{return fs.statSync(path)}catch(e){return undefined}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(586);exports.encode=exports.stringify=__webpack_require__(587)},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){(function(Buffer){var Transport=__webpack_require__(64),parser=__webpack_require__(70),qs=__webpack_require__(575);exports=module.exports=HTTPTransport;function HTTPTransport(mng,data,req){Transport.call(this,mng,data,req)}HTTPTransport.prototype.__proto__=Transport.prototype;HTTPTransport.prototype.handleRequest=function(req){this.response=req.res;if(req.method=="POST"){var buffer="",res=req.res,origin=req.headers.origin,headers={"Content-Length":1,"Content-Type":"text/plain; charset=UTF-8"},self=this;req.on("data",function(data){buffer+=data;if(Buffer.byteLength(buffer)>=self.manager.get("destroy buffer size")){buffer="";req.connection.destroy()}});req.on("end",function(){res.writeHead(200,headers);res.end("1");self.onData(self.postEncoded?qs.parse(buffer).d:buffer)});req.on("close",function(){buffer="";self.onClose()});if(origin){headers["Access-Control-Allow-Origin"]=origin;headers["Access-Control-Allow-Credentials"]="true";headers["X-XSS-Protection"]="0"}}else{Transport.prototype.handleRequest.call(this,req)}};HTTPTransport.prototype.onData=function(data){var messages=parser.decodePayload(data);this.log.debug(this.name+" received data packet",data);for(var i=0,l=messages.length;i<l;i++){this.onMessage(messages[i])}};HTTPTransport.prototype.doClose=function(){this.response.end()};HTTPTransport.prototype.payload=function(msgs){this.write(parser.encodePayload(msgs))}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var HTTPTransport=__webpack_require__(388);exports=module.exports=HTTPPolling;function HTTPPolling(mng,data,req){HTTPTransport.call(this,mng,data,req)}HTTPPolling.prototype.__proto__=HTTPTransport.prototype;HTTPPolling.prototype.name="httppolling";HTTPPolling.prototype.setHandlers=function(){HTTPTransport.prototype.setHandlers.call(this);this.socket.removeListener("end",this.bound.end);this.socket.removeListener("close",this.bound.close)};HTTPPolling.prototype.setHeartbeatInterval=function(){return this};HTTPPolling.prototype.handleRequest=function(req){HTTPTransport.prototype.handleRequest.call(this,req);if(req.method=="GET"){var self=this;this.pollTimeout=setTimeout(function(){self.packet({type:"noop"});self.log.debug(self.name+" closed due to exceeded duration")},this.manager.get("polling duration")*1e3);this.log.debug("setting poll timeout")}};HTTPPolling.prototype.clearPollTimeout=function(){if(this.pollTimeout){clearTimeout(this.pollTimeout);this.pollTimeout=null;this.log.debug("clearing poll timeout")}return this};HTTPPolling.prototype.clearTimeouts=function(){HTTPTransport.prototype.clearTimeouts.call(this);this.clearPollTimeout()};HTTPPolling.prototype.doWrite=function(){this.clearPollTimeout()};HTTPPolling.prototype.write=function(data,close){this.doWrite(data);this.response.end();this.onClose()};HTTPPolling.prototype.end=function(reason){this.clearPollTimeout();return HTTPTransport.prototype.end.call(this,reason)}},function(module,exports,__webpack_require__){module.exports={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]}},function(module,exports,__webpack_require__){module.exports={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i",'"hello" + " world"',"3 cm + 2 inch"],seealso:["subtract"]}},function(module,exports,__webpack_require__){module.exports={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]}},function(module,exports,__webpack_require__){module.exports={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]}},function(module,exports,__webpack_require__){module.exports={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]}},function(module,exports,__webpack_require__){module.exports={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]}},function(module,exports,__webpack_require__){module.exports={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]}},function(module,exports,__webpack_require__){module.exports={name:"dotpow",category:"Operators",syntax:["x .^ y","dotpow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]}},function(module,exports,__webpack_require__){module.exports={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["pow","log"]}},function(module,exports,__webpack_require__){module.exports={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]}},function(module,exports,__webpack_require__){module.exports={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]}},function(module,exports,__webpack_require__){module.exports={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]}},function(module,exports,__webpack_require__){module.exports={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]}},function(module,exports,__webpack_require__){module.exports={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log10"]}},function(module,exports,__webpack_require__){module.exports={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",
examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]}},function(module,exports,__webpack_require__){module.exports={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","function isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]}},function(module,exports,__webpack_require__){module.exports={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]}},function(module,exports,__webpack_require__){module.exports={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i))","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)","norm([[1, 2], [3, 4]], 'inf')","norm([[1, 2], [3, 4]], 'fro')"]}},function(module,exports,__webpack_require__){module.exports={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:"Calculate the nth root of a value. "+"The principal nth root of a positive real number A, "+'is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["sqrt","pow"]}},function(module,exports,__webpack_require__){module.exports={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3 = 8","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply"]}},function(module,exports,__webpack_require__){module.exports={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]}},function(module,exports,__webpack_require__){module.exports={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]}},function(module,exports,__webpack_require__){module.exports={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","multiply"]}},function(module,exports,__webpack_require__){module.exports={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]}},function(module,exports,__webpack_require__){module.exports={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]}},function(module,exports,__webpack_require__){module.exports={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]}},function(module,exports,__webpack_require__){module.exports={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]}},function(module,exports,__webpack_require__){module.exports={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]}},function(module,exports,__webpack_require__){module.exports={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(module,exports,__webpack_require__){module.exports={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(module,exports,__webpack_require__){module.exports={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(module,exports,__webpack_require__){module.exports={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]}},function(module,exports,__webpack_require__){module.exports={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]}},function(module,exports,__webpack_require__){module.exports={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","leftShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]}},function(module,exports,__webpack_require__){module.exports={name:"rightLogShift",category:"Bitwise",syntax:["x >> y","leftShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]}},function(module,exports,__webpack_require__){module.exports={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]}},function(module,exports,__webpack_require__){module.exports={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]}},function(module,exports,__webpack_require__){module.exports={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]}},function(module,exports,__webpack_require__){module.exports={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]}},function(module,exports,__webpack_require__){module.exports={name:"bignumber",category:"Type",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","index","matrix","string","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"boolean",category:"Type",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"complex",category:"Type",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"index",category:"Type",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"matrix",category:"Type",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()","matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])"],seealso:["bignumber","boolean","complex","index","number","string","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"number",category:"Type",syntax:["x","number(x)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number("52cm", "m")'],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"string",category:"Type",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]}},function(module,exports,__webpack_require__){module.exports={name:"unit",category:"Type",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]}},function(module,exports,__webpack_require__){module.exports={name:"eval",category:"Expression",syntax:["eval(expression)","eval([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['eval("2 + 3")','eval("sqrt(" + 4 + ")")'],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]}},function(module,exports,__webpack_require__){module.exports={name:"not",category:"Logical",syntax:["!x","not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["!true","not false","!2","!0"],seealso:["and","or","xor"]}},function(module,exports,__webpack_require__){module.exports={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]}},function(module,exports,__webpack_require__){module.exports={name:"xor",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 or 4"],seealso:["not","and","or"]}},function(module,exports,__webpack_require__){module.exports={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]}},function(module,exports,__webpack_require__){module.exports={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"dot",category:"Matrix",syntax:["dot(A, B)"],description:"Calculate the dot product of two vectors. "+"The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] "+"is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]}},function(module,exports,__webpack_require__){module.exports={name:"eye",category:"Matrix",syntax:["eye(n)","eye(m, n)","eye([m, n])","eye"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["eye(3)","eye(3, 5)","a = [1, 2, 3; 4, 5, 6]","eye(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]}},function(module,exports,__webpack_require__){module.exports={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","eye","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])","ones"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","eye","inv","range","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","eye","inv","ones","size","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze"]}},function(module,exports,__webpack_require__){module.exports={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","eye","inv","ones","range","squeeze","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","eye","inv","ones","range","size","subset","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. "+"Indexes are one-based. "+"Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","trace","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","transpose","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","trace","zeros"]}},function(module,exports,__webpack_require__){module.exports={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])","zeros"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose"]}},function(module,exports,__webpack_require__){module.exports={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["permutations","factorial"]}},function(module,exports,__webpack_require__){module.exports={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","permutations","gamma"]}},function(module,exports,__webpack_require__){module.exports={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]}},function(module,exports,__webpack_require__){module.exports={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","factorial"]}},function(module,exports,__webpack_require__){module.exports={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])"],seealso:["random","randomInt"]}},function(module,exports,__webpack_require__){module.exports={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]}},function(module,exports,__webpack_require__){module.exports={name:"randInt",category:"Probability",syntax:["randInt()","randInt(max)","randInt(min, max)","randInt(size)","randInt(size, max)","randInt(size, min, max)"],description:"Return a random integer number",examples:["randInt()","randInt(10, 20)","randInt([2, 3], 10)"],seealso:["pickRandom","random"]}},function(module,exports,__webpack_require__){module.exports={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 if x is larger than y, -1 if x is smaller than y, and 0 if x and y are equal.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq"]}},function(module,exports,__webpack_require__){module.exports={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["[1,3,4] == [1,3,4]","[1,3,4] == [1,3]"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]}},function(module,exports,__webpack_require__){module.exports={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},function(module,exports,__webpack_require__){module.exports={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}},function(module,exports,__webpack_require__){module.exports={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 > 1+1","2 >= 1+1","a = 3.2","b = 6-2.8","(a > b)"],seealso:["equal","unequal","smallerEq","smaller","largerEq","compare"]}},function(module,exports,__webpack_require__){module.exports={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]}},function(module,exports,__webpack_require__){module.exports={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 1+1","2 <= 1+1","a = 3.2","b = 6-2.8","(a < b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]}},function(module,exports,__webpack_require__){module.exports={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},function(module,exports,__webpack_require__){module.exports={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(var(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","var"]}},function(module,exports,__webpack_require__){module.exports={name:"var",category:"Statistics",syntax:["var(a, b, c, ...)","var(A)","var(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["var(2, 4, 6)","var([2, 4, 6, 8])",'var([2, 4, 6, 8], "uncorrected")','var([2, 4, 6, 8], "biased")',"var([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]}},function(module,exports,__webpack_require__){module.exports={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]}},function(module,exports,__webpack_require__){module.exports={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]}},function(module,exports,__webpack_require__){module.exports={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]}},function(module,exports,__webpack_require__){module.exports={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(0.5)"],seealso:["acsch","asech"]}},function(module,exports,__webpack_require__){module.exports={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(0.5)","acsc(csc(0.5))","acsc(2)"],seealso:["csc","asin","asec"]}},function(module,exports,__webpack_require__){module.exports={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]}},function(module,exports,__webpack_require__){module.exports={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]}},function(module,exports,__webpack_require__){module.exports={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]}},function(module,exports,__webpack_require__){module.exports={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(2.3))"],seealso:["sin","acos","atan"]}},function(module,exports,__webpack_require__){module.exports={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]}},function(module,exports,__webpack_require__){module.exports={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(2.3))"],seealso:["tan","acos","asin"]}},function(module,exports,__webpack_require__){module.exports={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",
examples:["atanh(0.5)"],seealso:["acosh","asinh"]}},function(module,exports,__webpack_require__){module.exports={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]}},function(module,exports,__webpack_require__){module.exports={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]}},function(module,exports,__webpack_require__){module.exports={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]}},function(module,exports,__webpack_require__){module.exports={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]}},function(module,exports,__webpack_require__){module.exports={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]}},function(module,exports,__webpack_require__){module.exports={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]}},function(module,exports,__webpack_require__){module.exports={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]}},function(module,exports,__webpack_require__){module.exports={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]}},function(module,exports,__webpack_require__){module.exports={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]}},function(module,exports,__webpack_require__){module.exports={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]}},function(module,exports,__webpack_require__){module.exports={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]}},function(module,exports,__webpack_require__){module.exports={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]}},function(module,exports,__webpack_require__){module.exports={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]}},function(module,exports,__webpack_require__){module.exports={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"map",category:"Utils",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], function(val) { return value * value })"],seealso:["filter","forEach"]}},function(module,exports,__webpack_require__){module.exports={name:"filter",category:"Utils",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]}},function(module,exports,__webpack_require__){module.exports={name:"forEach",category:"Utils",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]}},function(module,exports,__webpack_require__){module.exports={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]}},function(module,exports,__webpack_require__){module.exports={name:"import",category:"Utils",syntax:["import(string)"],description:"Import functions from a file.",examples:['import("numbers")','import("./mylib.js")'],seealso:[]}},function(module,exports,__webpack_require__){module.exports={name:"sort",category:"Utils",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc" or "desc", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)'],seealso:["map","filter","forEach"]}},function(module,exports,__webpack_require__){module.exports={name:"typeof",category:"Utils",syntax:["typeof(x)"],description:"Get the type of a variable.",examples:["typeof(3.5)","typeof(2 - 4i)","typeof(45 deg)",'typeof("hello world")'],seealso:[]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(math){var Matrix=math.type.Matrix;var array=__webpack_require__(340);var collection=math.collection;var isCollection=collection.isCollection;function distribution(name){if(!distributions.hasOwnProperty(name))throw new Error("Unknown distribution "+name);var args=Array.prototype.slice.call(arguments,1),distribution=distributions[name].apply(this,args);return function(distribution){var randFunctions={random:function(arg1,arg2,arg3){var size,min,max;if(arguments.length>3){throw new math.error.ArgumentsError("random",arguments.length,0,3)}else if(arguments.length===1){if(isCollection(arg1)){size=arg1}else{max=arg1}}else if(arguments.length===2){if(isCollection(arg1)){size=arg1;max=arg2}else{min=arg1;max=arg2}}else{size=arg1;min=arg2;max=arg3}if(max===undefined)max=1;if(min===undefined)min=0;if(size!==undefined){var res=_randomDataForMatrix(size.valueOf(),min,max,_random);return size instanceof Matrix?math.matrix(res):res}else return _random(min,max)},randomInt:function(arg1,arg2,arg3){var size,min,max;if(arguments.length>3||arguments.length<1)throw new math.error.ArgumentsError("randomInt",arguments.length,1,3);else if(arguments.length===1)if(isCollection(arg1)){size=arg1}else{max=arg1}else if(arguments.length===2){if(isCollection(arg1)){size=arg1;max=arg2}else{min=arg1;max=arg2}}else{size=arg1;min=arg2;max=arg3}if(min===undefined)min=0;if(size!==undefined){var res=_randomDataForMatrix(size.valueOf(),min,max,_randomInt);return size instanceof Matrix?math.matrix(res):res}else return _randomInt(min,max)},pickRandom:function(possibles){if(arguments.length!==1){throw new math.error.ArgumentsError("pickRandom",arguments.length,1)}if(possibles instanceof Matrix){possibles=possibles.valueOf()}else if(!Array.isArray(possibles)){throw new math.error.UnsupportedTypeError("pickRandom",math["typeof"](possibles))}if(array.size(possibles).length>1){throw new Error("Only one dimensional vectors supported")}return possibles[Math.floor(Math.random()*possibles.length)]}};var _random=function(min,max){return min+distribution()*(max-min)};var _randomInt=function(min,max){return Math.floor(min+distribution()*(max-min))};var _randomDataForMatrix=function(size,min,max,randFunc){var data=[],length,i;size=size.slice(0);if(size.length>1){for(i=0,length=size.shift();i<length;i++)data.push(_randomDataForMatrix(size,min,max,randFunc))}else{for(i=0,length=size.shift();i<length;i++)data.push(randFunc(min,max))}return data};return randFunctions}(distribution)}var distributions={uniform:function(){return Math.random},normal:function(){return function(){var u1,u2,picked=-1;while(picked<0||picked>1){u1=Math.random();u2=Math.random();picked=1/6*Math.pow(-2*Math.log(u1),.5)*Math.cos(2*Math.PI*u2)+.5}return picked}}};return distribution}},function(module,exports,__webpack_require__){"use strict";exports.type=function(x){var type=typeof x;if(type==="object"){if(x===null)return"null";if(x instanceof Boolean)return"boolean";if(x instanceof Number)return"number";if(x instanceof String)return"string";if(Array.isArray(x))return"array";if(x instanceof Date)return"date";if(x instanceof Function)return"function";if(x instanceof RegExp)return"regexp"}return type}},function(module,exports,__webpack_require__){(function(process){"use strict";var path=__webpack_require__(8);module.exports=function(thePath,potentialParent){thePath=stripTrailingSep(thePath);potentialParent=stripTrailingSep(potentialParent);if(process.platform==="win32"){thePath=thePath.toLowerCase();potentialParent=potentialParent.toLowerCase()}return thePath.lastIndexOf(potentialParent,0)===0&&(thePath[potentialParent.length]===path.sep||thePath[potentialParent.length]===undefined)};function stripTrailingSep(thePath){if(thePath[thePath.length-1]===path.sep){return thePath.slice(0,-1)}return thePath}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(){var object=true?exports:this;var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(message){this.message=message}InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name="InvalidCharacterError";object.btoa||(object.btoa=function(input){for(var block,charCode,idx=0,map=chars,output="";input.charAt(idx|0)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=input.charCodeAt(idx+=3/4);if(charCode>255){throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}block=block<<8|charCode}return output});object.atob||(object.atob=function(input){input=input.replace(/=+$/,"");if(input.length%4==1){throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.")}for(var bc=0,bs,buffer,idx=0,output="";buffer=input.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer)}return output})})()},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){(function(process){var callSiteToString=__webpack_require__(603).callSiteToString;var EventEmitter=__webpack_require__(120).EventEmitter;var relative=__webpack_require__(8).relative;module.exports=depd;var basePath=process.cwd();var eventListenerCount=EventEmitter.listenerCount||function(emitter,type){return emitter.listeners(type).length};function containsNamespace(str,namespace){var val=str.split(/[ ,]+/);namespace=String(namespace).toLowerCase();for(var i=0;i<val.length;i++){if(!(str=val[i]))continue;if(str==="*"||str.toLowerCase()===namespace){return true}}return false}function convertDataDescriptorToAccessor(obj,prop,message){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);var value=descriptor.value;descriptor.get=function getter(){return value};if(descriptor.writable){descriptor.set=function setter(val){return value=val}}delete descriptor.value;delete descriptor.writable;Object.defineProperty(obj,prop,descriptor);return descriptor}function createArgumentsString(arity){var str="";for(var i=0;i<arity;i++){str+=", arg"+i}return str.substr(2)}function createStackString(stack){var str=this.name+": "+this.namespace;if(this.message){str+=" deprecated "+this.message}for(var i=0;i<stack.length;i++){str+="\n    at "+callSiteToString(stack[i])}return str}function depd(namespace){if(!namespace){throw new TypeError("argument namespace is required")}var stack=getStack();var site=callSiteLocation(stack[1]);var file=site[0];function deprecate(message){log.call(deprecate,message)}deprecate._file=file;deprecate._ignored=isignored(namespace);deprecate._namespace=namespace;deprecate._traced=istraced(namespace);deprecate._warned=Object.create(null);deprecate.function=wrapfunction;deprecate.property=wrapproperty;return deprecate}function isignored(namespace){if(process.noDeprecation){return true}var str=process.env.NO_DEPRECATION||"";return containsNamespace(str,namespace)}function istraced(namespace){if(process.traceDeprecation){return true}var str=process.env.TRACE_DEPRECATION||"";return containsNamespace(str,namespace)}function log(message,site){var haslisteners=eventListenerCount(process,"deprecation")!==0;if(!haslisteners&&this._ignored){return}var caller;var callFile;var callSite;var i=0;var seen=false;var stack=getStack();var file=this._file;if(site){callSite=callSiteLocation(stack[1]);callSite.name=site.name;file=callSite[0]}else{i=2;site=callSiteLocation(stack[i]);callSite=site}for(;i<stack.length;i++){caller=callSiteLocation(stack[i]);callFile=caller[0];if(callFile===file){seen=true}else if(callFile===this._file){file=this._file}else if(seen){break}}var key=caller?site.join(":")+"__"+caller.join(":"):undefined;if(key!==undefined&&key in this._warned){return}this._warned[key]=true;if(!message){message=callSite===site||!callSite.name?defaultMessage(site):defaultMessage(callSite)}if(haslisteners){var err=DeprecationError(this._namespace,message,stack.slice(i));process.emit("deprecation",err);return}var format=process.stderr.isTTY?formatColor:formatPlain;var msg=format.call(this,message,caller,stack.slice(i));process.stderr.write(msg+"\n","utf8");return}function callSiteLocation(callSite){var file=callSite.getFileName()||"<anonymous>";var line=callSite.getLineNumber();var colm=callSite.getColumnNumber();if(callSite.isEval()){file=callSite.getEvalOrigin()+", "+file}var site=[file,line,colm];site.callSite=callSite;site.name=callSite.getFunctionName();return site}function defaultMessage(site){var callSite=site.callSite;var funcName=site.name;if(!funcName){funcName="<anonymous@"+formatLocation(site)+">"}var context=callSite.getThis();var typeName=context&&callSite.getTypeName();if(typeName==="Object"){typeName=undefined}if(typeName==="Function"){typeName=context.name||typeName}return typeName&&callSite.getMethodName()?typeName+"."+funcName:funcName}function formatPlain(msg,caller,stack){var timestamp=(new Date).toUTCString();var formatted=timestamp+" "+this._namespace+" deprecated "+msg;if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    at "+callSiteToString(stack[i])}return formatted}if(caller){formatted+=" at "+formatLocation(caller)}return formatted}function formatColor(msg,caller,stack){var formatted="[36;1m"+this._namespace+"[22;39m"+" [33;1mdeprecated[22;39m"+" [0m"+msg+"[39m";if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    [36mat "+callSiteToString(stack[i])+"[39m"}return formatted}if(caller){formatted+=" [36m"+formatLocation(caller)+"[39m"}return formatted}function formatLocation(callSite){return relative(basePath,callSite[0])+":"+callSite[1]+":"+callSite[2]}function getStack(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=Math.max(10,limit);Error.captureStackTrace(obj);var stack=obj.stack.slice(1);Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack}function prepareObjectStackTrace(obj,stack){return stack}function wrapfunction(fn,message){if(typeof fn!=="function"){throw new TypeError("argument fn must be a function")}var args=createArgumentsString(fn.length);var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+") {\n"+'"use strict"\n'+"log.call(deprecate, message, site)\n"+"return fn.apply(this, arguments)\n"+"})");return deprecatedfn}function wrapproperty(obj,prop,message){if(!obj||typeof obj!=="object"&&typeof obj!=="function"){throw new TypeError("argument obj must be object")}var descriptor=Object.getOwnPropertyDescriptor(obj,prop);if(!descriptor){throw new TypeError("must call property on owner object")}if(!descriptor.configurable){throw new TypeError("property must be configurable")}var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=prop;if("value"in descriptor){descriptor=convertDataDescriptorToAccessor(obj,prop,message)}var get=descriptor.get;var set=descriptor.set;if(typeof get==="function"){descriptor.get=function getter(){log.call(deprecate,message,site);return get.apply(this,arguments)}}if(typeof set==="function"){descriptor.set=function setter(){log.call(deprecate,message,site);return set.apply(this,arguments)}}Object.defineProperty(obj,prop,descriptor)}function DeprecationError(namespace,message,stack){var error=new Error;var stackString;Object.defineProperty(error,"constructor",{value:DeprecationError});Object.defineProperty(error,"message",{configurable:true,enumerable:false,value:message,writable:true});Object.defineProperty(error,"name",{enumerable:false,configurable:true,value:"DeprecationError",writable:true});Object.defineProperty(error,"namespace",{configurable:true,enumerable:false,value:namespace,writable:true});Object.defineProperty(error,"stack",{configurable:true,enumerable:false,get:function(){if(stackString!==undefined){return stackString}return stackString=createStackString.call(this,stack)},set:function setter(val){stackString=val}});return error}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var ReadStream=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()).ReadStream;var Stream=__webpack_require__(316);module.exports=function destroy(stream){if(stream instanceof ReadStream){return destroyReadStream(stream)}if(!(stream instanceof Stream)){return stream}if(typeof stream.destroy==="function"){stream.destroy()}return stream};function destroyReadStream(stream){stream.destroy();if(typeof stream.close==="function"){stream.on("open",onopenClose)}return stream}function onopenClose(){if(typeof this.fd==="number"){this.close()}}},function(module,exports,__webpack_require__){module.exports=function(size,str){var valid=true;var i=str.indexOf("=");if(-1==i)return-2;var arr=str.slice(i+1).split(",").map(function(range){var range=range.split("-"),start=parseInt(range[0],10),end=parseInt(range[1],10);if(isNaN(start)){start=size-end;end=size-1}else if(isNaN(end)){end=size-1}if(end>size-1)end=size-1;if(isNaN(start)||isNaN(end)||start>end||start<0)valid=false;return{start:start,end:end}});arr.type=str.slice(0,i);return valid?arr:-1}},function(module,exports,__webpack_require__){module.exports=fresh;function fresh(req,res){var etagMatches=true;var notModified=true;var modifiedSince=req["if-modified-since"];var noneMatch=req["if-none-match"];var lastModified=res["last-modified"];var etag=res["etag"];var cc=req["cache-control"];if(!modifiedSince&&!noneMatch)return false;if(cc&&cc.indexOf("no-cache")!==-1)return false;if(noneMatch)noneMatch=noneMatch.split(/ *, */);if(noneMatch)etagMatches=~noneMatch.indexOf(etag)||"*"==noneMatch[0];if(modifiedSince){modifiedSince=new Date(modifiedSince);lastModified=new Date(lastModified);notModified=lastModified<=modifiedSince}return!!(etagMatches&&notModified)}},function(module,exports,__webpack_require__){(function(Buffer){module.exports=etag;var crc=__webpack_require__(647).crc32;var crypto=__webpack_require__(110);var Stats=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()).Stats;var crc32threshold=1e3;var NULL=new Buffer([0]);var toString=Object.prototype.toString;function etag(entity,options){if(entity==null){throw new TypeError("argument entity is required")}var isStats=isstats(entity);var weak=options&&typeof options.weak==="boolean"?options.weak:isStats;if(isStats){return stattag(entity,weak)}if(typeof entity!=="string"&&!Buffer.isBuffer(entity)){throw new TypeError("argument entity must be string, Buffer, or fs.Stats")}var hash=weak?weakhash(entity):stronghash(entity);return weak?'W/"'+hash+'"':'"'+hash+'"'}function isstats(obj){if(obj===null||typeof obj!=="object"){return false}if(obj instanceof Stats){return true}return"atime"in obj&&toString.call(obj.atime)==="[object Date]"&&"ctime"in obj&&toString.call(obj.ctime)==="[object Date]"&&"mtime"in obj&&toString.call(obj.mtime)==="[object Date]"&&"ino"in obj&&typeof obj.ino==="number"&&"size"in obj&&typeof obj.size==="number"}function stattag(stat,weak){var mtime=stat.mtime.toISOString();var size=stat.size.toString(16);if(weak){return'W/"'+size+"-"+crc(mtime)+'"'}var hash=crypto.createHash("md5").update("file","utf8").update(NULL).update(size,"utf8").update(NULL).update(mtime,"utf8").digest("base64");return'"'+hash+'"'}function stronghash(entity){if(entity.length===0){return"1B2M2Y8AsgTpgAmY7PhCfg=="}return crypto.createHash("md5").update(entity,"utf8").digest("base64")}function weakhash(entity){if(entity.length===0){return"0-0"}var len=typeof entity==="string"?Buffer.byteLength(entity,"utf8"):entity.length;if(len<=crc32threshold){return len.toString(16)+"-"+crc(entity).toString(16)}return crypto.createHash("md4").update(entity,"utf8").digest("base64")}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},function(module,exports,__webpack_require__){(function(setImmediate,process){module.exports=onFinished;module.exports.isFinished=isFinished;var first=__webpack_require__(626);var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};function onFinished(msg,listener){if(isFinished(msg)!==false){defer(listener,null,msg);return msg}attachListener(msg,listener);return msg}function isFinished(msg){var socket=msg.socket;if(typeof msg.finished==="boolean"){return Boolean(msg.finished||socket&&!socket.writable)}if(typeof msg.complete==="boolean"){return Boolean(!socket||!socket.readable||msg.complete&&!msg.readable)}return undefined}function attachFinishedListener(msg,callback){var eeMsg;var eeSocket;var finished=false;function onFinish(error){eeMsg.cancel();eeSocket.cancel();finished=true;callback(error)}eeMsg=eeSocket=first([[msg,"end","finish"]],onFinish);function onSocket(socket){msg.removeListener("socket",onSocket);if(finished)return;if(eeMsg!==eeSocket)return;eeSocket=first([[socket,"error","close"]],onFinish)}if(msg.socket){onSocket(msg.socket);return}msg.on("socket",onSocket);if(msg.socket===undefined){patchAssignSocket(msg,onSocket)}}function attachListener(msg,listener){var attached=msg.__onFinished;if(!attached||!attached.queue){attached=msg.__onFinished=createListener(msg);attachFinishedListener(msg,attached)}attached.queue.push(listener)}function createListener(msg){function listener(err){if(msg.__onFinished===listener)msg.__onFinished=null;if(!listener.queue)return;var queue=listener.queue;listener.queue=null;for(var i=0;i<queue.length;i++){queue[i](err,msg)}}listener.queue=[];return listener}function patchAssignSocket(res,callback){var assignSocket=res.assignSocket;if(typeof assignSocket!=="function")return;res.assignSocket=function _assignSocket(socket){assignSocket.call(this,socket);callback(socket)}}}).call(exports,__webpack_require__(61).setImmediate,__webpack_require__(9))},function(module,exports,__webpack_require__){var helpers=__webpack_require__(598);function core_md5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}module.exports=function md5(buf){return helpers.hash(buf,core_md5,16)}},function(module,exports,__webpack_require__){var http=__webpack_require__(595);if(http.METHODS){module.exports=http.METHODS.map(function(method){return method.toLowerCase()})}else{module.exports=["get","post","put","head","delete","options","trace","copy","lock","mkcol","move","purge","propfind","proppatch","unlock","report","mkactivity","checkout","merge","m-search","notify","subscribe","unsubscribe","patch","search","connect"]}},function(module,exports,__webpack_require__){(function(setImmediate,process,Buffer){var debug=__webpack_require__(574)("finalhandler");var escapeHtml=__webpack_require__(542);var http=__webpack_require__(79);var onFinished=__webpack_require__(543);var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};var isFinished=onFinished.isFinished;module.exports=finalhandler;function finalhandler(req,res,options){options=options||{};var env=options.env||process.env.NODE_ENV||"development";var onerror=options.onerror;return function(err){var msg;if(!err&&res._header){debug("cannot 404 after headers sent");return}if(err){if(!res.statusCode||res.statusCode<400){res.statusCode=500}if(err.status){res.statusCode=err.status}var msg=env==="production"?http.STATUS_CODES[res.statusCode]:err.stack||err.toString();msg=escapeHtml(msg).replace(/\n/g,"<br>").replace(/  /g," &nbsp;")+"\n"}else{res.statusCode=404;msg="Cannot "+escapeHtml(req.method)+" "+escapeHtml(req.originalUrl||req.url)+"\n"}debug("default %s",res.statusCode);if(err&&onerror){defer(onerror,err,req,res)}if(res._header){return req.socket.destroy()}send(req,res,res.statusCode,msg)}}function send(req,res,status,body){function write(){res.statusCode=status;res.setHeader("X-Content-Type-Options","nosniff");res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Content-Length",Buffer.byteLength(body,"utf8"));if(req.method==="HEAD"){res.end();return}res.end(body,"utf8")}if(isFinished(req)){write();return}unpipe(req);onFinished(req,write);req.resume()}function unpipe(stream){if(typeof stream.unpipe==="function"){stream.unpipe();return}var listener;var listeners=stream.listeners("close");for(var i=0;i<listeners.length;i++){listener=listeners[i];if(listener.name!=="cleanup"&&listener.name!=="onclose"){continue}listener.call(stream)}}}).call(exports,__webpack_require__(61).setImmediate,__webpack_require__(9),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process){var callSiteToString=__webpack_require__(608).callSiteToString;var EventEmitter=__webpack_require__(120).EventEmitter;

var relative=__webpack_require__(8).relative;module.exports=depd;var basePath=process.cwd();var eventListenerCount=EventEmitter.listenerCount||function(emitter,type){return emitter.listeners(type).length};function containsNamespace(str,namespace){var val=str.split(/[ ,]+/);namespace=String(namespace).toLowerCase();for(var i=0;i<val.length;i++){if(!(str=val[i]))continue;if(str==="*"||str.toLowerCase()===namespace){return true}}return false}function convertDataDescriptorToAccessor(obj,prop,message){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);var value=descriptor.value;descriptor.get=function getter(){return value};if(descriptor.writable){descriptor.set=function setter(val){return value=val}}delete descriptor.value;delete descriptor.writable;Object.defineProperty(obj,prop,descriptor);return descriptor}function createArgumentsString(arity){var str="";for(var i=0;i<arity;i++){str+=", arg"+i}return str.substr(2)}function createStackString(stack){var str=this.name+": "+this.namespace;if(this.message){str+=" deprecated "+this.message}for(var i=0;i<stack.length;i++){str+="\n    at "+callSiteToString(stack[i])}return str}function depd(namespace){if(!namespace){throw new TypeError("argument namespace is required")}var stack=getStack();var site=callSiteLocation(stack[1]);var file=site[0];function deprecate(message){log.call(deprecate,message)}deprecate._file=file;deprecate._ignored=isignored(namespace);deprecate._namespace=namespace;deprecate._traced=istraced(namespace);deprecate._warned=Object.create(null);deprecate.function=wrapfunction;deprecate.property=wrapproperty;return deprecate}function isignored(namespace){if(process.noDeprecation){return true}var str=process.env.NO_DEPRECATION||"";return containsNamespace(str,namespace)}function istraced(namespace){if(process.traceDeprecation){return true}var str=process.env.TRACE_DEPRECATION||"";return containsNamespace(str,namespace)}function log(message,site){var haslisteners=eventListenerCount(process,"deprecation")!==0;if(!haslisteners&&this._ignored){return}var caller;var callFile;var callSite;var i=0;var seen=false;var stack=getStack();var file=this._file;if(site){callSite=callSiteLocation(stack[1]);callSite.name=site.name;file=callSite[0]}else{i=2;site=callSiteLocation(stack[i]);callSite=site}for(;i<stack.length;i++){caller=callSiteLocation(stack[i]);callFile=caller[0];if(callFile===file){seen=true}else if(callFile===this._file){file=this._file}else if(seen){break}}var key=caller?site.join(":")+"__"+caller.join(":"):undefined;if(key!==undefined&&key in this._warned){return}this._warned[key]=true;if(!message){message=callSite===site||!callSite.name?defaultMessage(site):defaultMessage(callSite)}if(haslisteners){var err=DeprecationError(this._namespace,message,stack.slice(i));process.emit("deprecation",err);return}var format=process.stderr.isTTY?formatColor:formatPlain;var msg=format.call(this,message,caller,stack.slice(i));process.stderr.write(msg+"\n","utf8");return}function callSiteLocation(callSite){var file=callSite.getFileName()||"<anonymous>";var line=callSite.getLineNumber();var colm=callSite.getColumnNumber();if(callSite.isEval()){file=callSite.getEvalOrigin()+", "+file}var site=[file,line,colm];site.callSite=callSite;site.name=callSite.getFunctionName();return site}function defaultMessage(site){var callSite=site.callSite;var funcName=site.name;if(!funcName){funcName="<anonymous@"+formatLocation(site)+">"}var context=callSite.getThis();var typeName=context&&callSite.getTypeName();if(typeName==="Object"){typeName=undefined}if(typeName==="Function"){typeName=context.name||typeName}return typeName&&callSite.getMethodName()?typeName+"."+funcName:funcName}function formatPlain(msg,caller,stack){var timestamp=(new Date).toUTCString();var formatted=timestamp+" "+this._namespace+" deprecated "+msg;if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    at "+callSiteToString(stack[i])}return formatted}if(caller){formatted+=" at "+formatLocation(caller)}return formatted}function formatColor(msg,caller,stack){var formatted="[36;1m"+this._namespace+"[22;39m"+" [33;1mdeprecated[22;39m"+" [0m"+msg+"[39m";if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    [36mat "+callSiteToString(stack[i])+"[39m"}return formatted}if(caller){formatted+=" [36m"+formatLocation(caller)+"[39m"}return formatted}function formatLocation(callSite){return relative(basePath,callSite[0])+":"+callSite[1]+":"+callSite[2]}function getStack(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=Math.max(10,limit);Error.captureStackTrace(obj);var stack=obj.stack.slice(1);Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack}function prepareObjectStackTrace(obj,stack){return stack}function wrapfunction(fn,message){if(typeof fn!=="function"){throw new TypeError("argument fn must be a function")}var args=createArgumentsString(fn.length);var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+") {\n"+'"use strict"\n'+"log.call(deprecate, message, site)\n"+"return fn.apply(this, arguments)\n"+"})");return deprecatedfn}function wrapproperty(obj,prop,message){if(!obj||typeof obj!=="object"&&typeof obj!=="function"){throw new TypeError("argument obj must be object")}var descriptor=Object.getOwnPropertyDescriptor(obj,prop);if(!descriptor){throw new TypeError("must call property on owner object")}if(!descriptor.configurable){throw new TypeError("property must be configurable")}var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=prop;if("value"in descriptor){descriptor=convertDataDescriptorToAccessor(obj,prop,message)}var get=descriptor.get;var set=descriptor.set;if(typeof get==="function"){descriptor.get=function getter(){log.call(deprecate,message,site);return get.apply(this,arguments)}}if(typeof set==="function"){descriptor.set=function setter(){log.call(deprecate,message,site);return set.apply(this,arguments)}}Object.defineProperty(obj,prop,descriptor)}function DeprecationError(namespace,message,stack){var error=new Error;var stackString;Object.defineProperty(error,"constructor",{value:DeprecationError});Object.defineProperty(error,"message",{configurable:true,enumerable:false,value:message,writable:true});Object.defineProperty(error,"name",{enumerable:false,configurable:true,value:"DeprecationError",writable:true});Object.defineProperty(error,"namespace",{configurable:true,enumerable:false,value:namespace,writable:true});Object.defineProperty(error,"stack",{configurable:true,enumerable:false,get:function(){if(stackString!==undefined){return stackString}return stackString=createStackString.call(this,stack)},set:function setter(val){stackString=val}});return error}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){exports=module.exports=function(a,b){if(a&&b){for(var key in b){a[key]=b[key]}}return a}},function(module,exports,__webpack_require__){var Negotiator=__webpack_require__(638);var mime=__webpack_require__(639);var slice=[].slice;module.exports=Accepts;function Accepts(req){if(!(this instanceof Accepts))return new Accepts(req);this.headers=req.headers;this.negotiator=Negotiator(req)}Accepts.prototype.type=Accepts.prototype.types=function(types){if(!Array.isArray(types))types=slice.call(arguments);var n=this.negotiator;if(!types.length)return n.mediaTypes();if(!this.headers.accept)return types[0];var mimes=types.map(extToMime);var accepts=n.mediaTypes(mimes.filter(validMime));var first=accepts[0];if(!first)return false;return types[mimes.indexOf(first)]};Accepts.prototype.encoding=Accepts.prototype.encodings=function(encodings){if(!Array.isArray(encodings))encodings=slice.call(arguments);var n=this.negotiator;if(!encodings.length)return n.encodings();return n.encodings(encodings)[0]||false};Accepts.prototype.charset=Accepts.prototype.charsets=function(charsets){if(!Array.isArray(charsets))charsets=[].slice.call(arguments);var n=this.negotiator;if(!charsets.length)return n.charsets();if(!this.headers["accept-charset"])return charsets[0];return n.charsets(charsets)[0]||false};Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(langs){if(!Array.isArray(langs))langs=slice.call(arguments);var n=this.negotiator;if(!langs.length)return n.languages();if(!this.headers["accept-language"])return langs[0];return n.languages(langs)[0]||false};function extToMime(type){if(~type.indexOf("/"))return type;return mime.lookup(type)}function validMime(type){return typeof type==="string"}},function(module,exports,__webpack_require__){var typer=__webpack_require__(640);var mime=__webpack_require__(641);module.exports=typeofrequest;typeofrequest.is=typeis;typeofrequest.hasBody=hasbody;typeofrequest.normalize=normalize;typeofrequest.match=mimeMatch;function typeis(value,types_){var i;var types=types_;var val=typenormalize(value);if(!val){return false}if(types&&!Array.isArray(types)){types=new Array(arguments.length-1);for(i=0;i<types.length;i++){types[i]=arguments[i+1]}}if(!types||!types.length){return val}var type;for(i=0;i<types.length;i++){if(mimeMatch(normalize(type=types[i]),val)){return type[0]==="+"||~type.indexOf("*")?val:type}}return false}function hasbody(req){return req.headers["transfer-encoding"]!==undefined||!isNaN(req.headers["content-length"])}function typeofrequest(req,types_){var types=types_;if(!hasbody(req)){return null}if(arguments.length>2){types=new Array(arguments.length-1);for(var i=0;i<types.length;i++){types[i]=arguments[i+1]}}var value=req.headers["content-type"];return typeis(value,types)}function normalize(type){switch(type){case"urlencoded":type="application/x-www-form-urlencoded";break;case"multipart":type="multipart/*";break}if(type[0]==="+"){type="*/*"+type}return type.indexOf("/")===-1?mime.lookup(type):type}function mimeMatch(expected,actual){if(expected===false){return false}var actualParts=actual.split("/");var expectedParts=expected.split("/");if(actualParts.length!==2||expectedParts.length!==2){return false}if(expectedParts[0]!=="*"&&expectedParts[0]!==actualParts[0]){return false}if(expectedParts[1].substr(0,2)==="*+"){return expectedParts[1].length<=actualParts[1].length+1&&expectedParts[1].substr(1)===actualParts[1].substr(1-expectedParts[1].length)}if(expectedParts[1]!=="*"&&expectedParts[1]!==actualParts[1]){return false}return true}function typenormalize(value){try{var type=typer.parse(value);delete type.parameters;return typer.format(type)}catch(err){return null}}},function(module,exports,__webpack_require__){module.exports=fresh;function fresh(req,res){var etagMatches=true;var notModified=true;var modifiedSince=req["if-modified-since"];var noneMatch=req["if-none-match"];var lastModified=res["last-modified"];var etag=res["etag"];var cc=req["cache-control"];if(!modifiedSince&&!noneMatch)return false;if(cc&&cc.indexOf("no-cache")!==-1)return false;if(noneMatch)noneMatch=noneMatch.split(/ *, */);if(noneMatch)etagMatches=~noneMatch.indexOf(etag)||"*"==noneMatch[0];if(modifiedSince){modifiedSince=new Date(modifiedSince);lastModified=new Date(lastModified);notModified=lastModified<=modifiedSince}return!!(etagMatches&&notModified)}},function(module,exports,__webpack_require__){module.exports=function(size,str){var valid=true;var i=str.indexOf("=");if(-1==i)return-2;var arr=str.slice(i+1).split(",").map(function(range){var range=range.split("-"),start=parseInt(range[0],10),end=parseInt(range[1],10);if(isNaN(start)){start=size-end;end=size-1}else if(isNaN(end)){end=size-1}if(end>size-1)end=size-1;if(isNaN(start)||isNaN(end)||start>end||start<0)valid=false;return{start:start,end:end}});arr.type=str.slice(0,i);return valid?arr:-1}},function(module,exports,__webpack_require__){var url=__webpack_require__(109);var parse=url.parse;var Url=url.Url;var simplePathRegExp=/^(\/\/?(?!\/)[^\?#\s]*)(\?[^#\s]*)?$/;module.exports=parseurl;module.exports.original=originalurl;function parseurl(req){var url=req.url;if(url===undefined){return undefined}var parsed=req._parsedUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedUrl=parsed}function originalurl(req){var url=req.originalUrl;if(typeof url!=="string"){return parseurl(req)}var parsed=req._parsedOriginalUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedOriginalUrl=parsed}function fastparse(str){var simplePath=typeof str==="string"&&simplePathRegExp.exec(str);if(simplePath){var pathname=simplePath[1];var search=simplePath[2]||null;var url=Url!==undefined?new Url:{};url.path=str;url.href=str;url.pathname=pathname;url.search=search;url.query=search&&search.substr(1);return url}return parse(str)}function fresh(url,parsedUrl){return typeof parsedUrl==="object"&&parsedUrl!==null&&(Url===undefined||parsedUrl instanceof Url)&&parsedUrl._raw===url}},function(module,exports,__webpack_require__){module.exports=proxyaddr;module.exports.all=alladdrs;module.exports.compile=compile;var forwarded=__webpack_require__(642);var ipaddr=__webpack_require__(650);var digitre=/^[0-9]+$/;var isip=ipaddr.isValid;var parseip=ipaddr.parse;var ipranges={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function alladdrs(req,trust){var addrs=forwarded(req);if(!trust){return addrs}if(typeof trust!=="function"){trust=compile(trust)}for(var i=0;i<addrs.length-1;i++){if(trust(addrs[i],i))continue;addrs.length=i+1}return addrs}function compile(val){if(!val){throw new TypeError("argument is required")}var trust=typeof val==="string"?[val]:val;if(!Array.isArray(trust)){throw new TypeError("unsupported trust argument")}for(var i=0;i<trust.length;i++){val=trust[i];if(!ipranges.hasOwnProperty(val)){continue}val=ipranges[val];trust.splice.apply(trust,[i,1].concat(val));i+=val.length-1}return compileTrust(compileRangeSubnets(trust))}function compileRangeSubnets(arr){var rangeSubnets=new Array(arr.length);for(var i=0;i<arr.length;i++){rangeSubnets[i]=parseipNotation(arr[i])}return rangeSubnets}function compileTrust(rangeSubnets){var len=rangeSubnets.length;return len===0?trustNone:len===1?trustSingle(rangeSubnets[0]):trustMulti(rangeSubnets)}function parseipNotation(note){var ip;var kind;var max;var pos=note.lastIndexOf("/");var range;ip=pos!==-1?note.substring(0,pos):note;if(!isip(ip)){throw new TypeError("invalid IP address: "+ip)}ip=parseip(ip);kind=ip.kind();max=kind==="ipv6"?128:32;range=pos!==-1?note.substring(pos+1,note.length):max;if(typeof range!=="number"){range=digitre.test(range)?parseInt(range,10):isip(range)?parseNetmask(range):0}if(ip.kind()==="ipv6"&&ip.isIPv4MappedAddress()){ip=ip.toIPv4Address();range=range<=max?range-96:range}if(range<=0||range>max){throw new TypeError("invalid range on address: "+note)}return[ip,range]}function parseNetmask(netmask){var ip=parseip(netmask);var parts;var size;switch(ip.kind()){case"ipv4":parts=ip.octets;size=8;break;case"ipv6":parts=ip.parts;size=16;break}var max=Math.pow(2,size)-1;var part;var range=0;for(var i=0;i<parts.length;i++){part=parts[i]&max;if(part===max){range+=size;continue}while(part){part=part<<1&max;range+=1}break}return range}function proxyaddr(req,trust){if(!req){throw new TypeError("req argument is required")}if(!trust){throw new TypeError("trust argument is required")}var addrs=alladdrs(req,trust);var addr=addrs[addrs.length-1];return addr}function trustNone(){return false}function trustMulti(subnets){return function trust(addr){if(!isip(addr))return false;var ip=parseip(addr);var ipv4;var kind=ip.kind();var subnet;var subnetip;var subnetkind;var subnetrange;var trusted;for(var i=0;i<subnets.length;i++){subnet=subnets[i];subnetip=subnet[0];subnetkind=subnetip.kind();subnetrange=subnet[1];trusted=ip;if(kind!==subnetkind){if(kind!=="ipv6"||subnetkind!=="ipv4"||!ip.isIPv4MappedAddress()){continue}ipv4=ipv4||ip.toIPv4Address();trusted=ipv4}if(trusted.match(subnetip,subnetrange))return true}return false}}function trustSingle(subnet){var subnetip=subnet[0];var subnetkind=subnetip.kind();var subnetisipv4=subnetkind==="ipv4";var subnetrange=subnet[1];return function trust(addr){if(!isip(addr))return false;var ip=parseip(addr);var kind=ip.kind();return kind===subnetkind?ip.match(subnetip,subnetrange):subnetisipv4&&kind==="ipv6"&&ip.isIPv4MappedAddress()?ip.toIPv4Address().match(subnetip,subnetrange):false}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(609)},function(module,exports,__webpack_require__){(function(Buffer){module.exports=contentDisposition;module.exports.parse=parse;var basename=__webpack_require__(8).basename;var encodeUriAttrCharRegExp=/[\x00-\x20"'\(\)*,\/:;<=>?@\[\\\]\{\}\x7f]/g;var hexEscapeRegExp=/%[0-9A-Fa-f]{2}/;var hexEscapeReplaceRegExp=/%([0-9A-Fa-f]{2})/g;var nonLatin1RegExp=/[^\x20-\x7e\xa0-\xff]/g;var qescRegExp=/\\([\u0000-\u007f])/g;var quoteRegExp=/([\\"])/g;var paramRegExp=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g;var textRegExp=/^[\x20-\x7e\x80-\xff]+$/;var tokenRegExp=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/;var extValueRegExp=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+\-\.^_`|~])+)$/;var dispositionTypeRegExp=/^([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *(?:$|;)/;function contentDisposition(filename,options){var opts=options||{};var type=opts.type||"attachment";var params=createparams(filename,opts.fallback);return format(new ContentDisposition(type,params))}function createparams(filename,fallback){if(filename===undefined){return}var params={};if(typeof filename!=="string"){throw new TypeError("filename must be a string")}if(fallback===undefined){fallback=true}if(typeof fallback!=="string"&&typeof fallback!=="boolean"){throw new TypeError("fallback must be a string or boolean")}if(typeof fallback==="string"&&nonLatin1RegExp.test(fallback)){throw new TypeError("fallback must be ISO-8859-1 string")}var name=basename(filename);var isQuotedString=textRegExp.test(name);var fallbackName=typeof fallback!=="string"?fallback&&getlatin1(name):basename(fallback);var hasFallback=typeof fallbackName==="string"&&fallbackName!==name;if(hasFallback||!isQuotedString||hexEscapeRegExp.test(name)){params["filename*"]=name}if(isQuotedString||hasFallback){params.filename=hasFallback?fallbackName:name}return params}function format(obj){var parameters=obj.parameters;var type=obj.type;if(!type||typeof type!=="string"||!tokenRegExp.test(type)){throw new TypeError("invalid type")}var string=String(type).toLowerCase();if(parameters&&typeof parameters==="object"){var param;var params=Object.keys(parameters).sort();for(var i=0;i<params.length;i++){param=params[i];var val=param.substr(-1)==="*"?ustring(parameters[param]):qstring(parameters[param]);string+="; "+param+"="+val}}return string}function decodefield(str){var match=extValueRegExp.exec(str);if(!match){throw new TypeError("invalid extended field value")}var charset=match[1].toLowerCase();var encoded=match[2];var value;var binary=encoded.replace(hexEscapeReplaceRegExp,pdecode);switch(charset){case"iso-8859-1":value=getlatin1(binary);break;case"utf-8":value=new Buffer(binary,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return value}function getlatin1(val){return String(val).replace(nonLatin1RegExp,"?")}function parse(string){if(!string||typeof string!=="string"){throw new TypeError("argument string is required")}var match=dispositionTypeRegExp.exec(string);if(!match){throw new TypeError("invalid type format")}var index=match[0].length;var type=match[1].toLowerCase();var key;var names=[];var params={};var value;index=paramRegExp.lastIndex=match[0].substr(-1)===";"?index-1:index;while(match=paramRegExp.exec(string)){if(match.index!==index){throw new TypeError("invalid parameter format")}index+=match[0].length;key=match[1].toLowerCase();value=match[2];if(names.indexOf(key)!==-1){throw new TypeError("invalid duplicate parameter")}names.push(key);if(key.indexOf("*")+1===key.length){key=key.slice(0,-1);value=decodefield(value);params[key]=value;continue}if(typeof params[key]==="string"){continue}if(value[0]==='"'){value=value.substr(1,value.length-2).replace(qescRegExp,"$1")}params[key]=value}if(index!==-1&&index!==string.length){throw new TypeError("invalid parameter format")}return new ContentDisposition(type,params)}function pdecode(str,hex){return String.fromCharCode(parseInt(hex,16))}function pencode(char){var hex=String(char).charCodeAt(0).toString(16).toUpperCase();return hex.length===1?"%0"+hex:"%"+hex}function qstring(val){var str=String(val);return'"'+str.replace(quoteRegExp,"\\$1")+'"'}function ustring(val){var str=String(val);var encoded=encodeURIComponent(str).replace(encodeUriAttrCharRegExp,pencode);return"UTF-8''"+encoded}function ContentDisposition(type,parameters){this.type=type;this.parameters=parameters}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){module.exports=function(html){return String(html).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(module,exports,__webpack_require__){(function(setImmediate,process){module.exports=onFinished;module.exports.isFinished=isFinished;var first=__webpack_require__(643);var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};function onFinished(msg,listener){if(isFinished(msg)!==false){defer(listener,null,msg);return msg}attachListener(msg,listener);return msg}function isFinished(msg){var socket=msg.socket;if(typeof msg.finished==="boolean"){return Boolean(msg.finished||socket&&!socket.writable)}if(typeof msg.complete==="boolean"){return Boolean(!socket||!socket.readable||msg.complete&&!msg.readable)}return undefined}function attachFinishedListener(msg,callback){var eeMsg;var eeSocket;var finished=false;function onFinish(error){eeMsg.cancel();eeSocket.cancel();finished=true;callback(error)}eeMsg=eeSocket=first([[msg,"end","finish"]],onFinish);function onSocket(socket){msg.removeListener("socket",onSocket);if(finished)return;if(eeMsg!==eeSocket)return;eeSocket=first([[socket,"error","close"]],onFinish)}if(msg.socket){onSocket(msg.socket);return}msg.on("socket",onSocket);if(msg.socket===undefined){patchAssignSocket(msg,onSocket)}}function attachListener(msg,listener){var attached=msg.__onFinished;if(!attached||!attached.queue){attached=msg.__onFinished=createListener(msg);attachFinishedListener(msg,attached)}attached.queue.push(listener)}function createListener(msg){function listener(err){if(msg.__onFinished===listener)msg.__onFinished=null;if(!listener.queue)return;var queue=listener.queue;listener.queue=null;for(var i=0;i<queue.length;i++){queue[i](err,msg)}}listener.queue=[];return listener}function patchAssignSocket(res,callback){var assignSocket=res.assignSocket;if(typeof assignSocket!=="function")return;res.assignSocket=function _assignSocket(socket){assignSocket.call(this,socket);callback(socket)}}}).call(exports,__webpack_require__(61).setImmediate,__webpack_require__(9))},function(module,exports,__webpack_require__){var crypto=__webpack_require__(110);exports.sign=function(val,secret){if("string"!=typeof val)throw new TypeError("Cookie value must be provided as a string.");if("string"!=typeof secret)throw new TypeError("Secret string must be provided.");return val+"."+crypto.createHmac("sha256",secret).update(val).digest("base64").replace(/\=+$/,"")};exports.unsign=function(val,secret){if("string"!=typeof val)throw new TypeError("Signed cookie string must be provided.");if("string"!=typeof secret)throw new TypeError("Secret string must be provided.");var str=val.slice(0,val.lastIndexOf(".")),mac=exports.sign(str,secret);return sha1(mac)==sha1(val)?str:false};function sha1(str){return crypto.createHash("sha1").update(str).digest("hex")}},function(module,exports,__webpack_require__){var serialize=function(name,val,opt){opt=opt||{};var enc=opt.encode||encode;var pairs=[name+"="+enc(val)];if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge))throw new Error("maxAge should be a Number");pairs.push("Max-Age="+maxAge)}if(opt.domain)pairs.push("Domain="+opt.domain);if(opt.path)pairs.push("Path="+opt.path);if(opt.expires)pairs.push("Expires="+opt.expires.toUTCString());if(opt.httpOnly)pairs.push("HttpOnly");if(opt.secure)pairs.push("Secure");return pairs.join("; ")};var parse=function(str,opt){opt=opt||{};var obj={};var pairs=str.split(/; */);var dec=opt.decode||decode;pairs.forEach(function(pair){var eq_idx=pair.indexOf("=");if(eq_idx<0){return}var key=pair.substr(0,eq_idx).trim();var val=pair.substr(++eq_idx,pair.length).trim();if('"'==val[0]){val=val.slice(1,-1)}if(undefined==obj[key]){try{obj[key]=dec(val)}catch(e){obj[key]=val}}});return obj};var encode=encodeURIComponent;var decode=decodeURIComponent;module.exports.serialize=serialize;module.exports.parse=parse},function(module,exports,__webpack_require__){var debug=__webpack_require__(574)("send");var deprecate=__webpack_require__(532)("send");var destroy=__webpack_require__(644);var escapeHtml=__webpack_require__(542),parseRange=__webpack_require__(537),Stream=__webpack_require__(316),mime=__webpack_require__(552),fresh=__webpack_require__(536),path=__webpack_require__(8),http=__webpack_require__(79),fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()),normalize=path.normalize,join=path.join;var etag=__webpack_require__(601);var EventEmitter=__webpack_require__(120).EventEmitter;var ms=__webpack_require__(645);var onFinished=__webpack_require__(543);var extname=path.extname;var maxMaxAge=60*60*24*365*1e3;var resolve=path.resolve;var sep=path.sep;var toString=Object.prototype.toString;var upPathRegexp=/(?:^|[\\\/])\.\.(?:[\\\/]|$)/;exports=module.exports=send;exports.mime=mime;var listenerCount=EventEmitter.listenerCount||function(emitter,type){return emitter.listeners(type).length};function send(req,path,options){return new SendStream(req,path,options)}function SendStream(req,path,options){var opts=options||{};this.options=opts;this.path=path;this.req=req;this._etag=opts.etag!==undefined?Boolean(opts.etag):true;this._dotfiles=opts.dotfiles!==undefined?opts.dotfiles:"ignore";if(["allow","deny","ignore"].indexOf(this._dotfiles)===-1){throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"')}this._hidden=Boolean(opts.hidden);if(opts.hidden!==undefined){deprecate("hidden: use dotfiles: '"+(this._hidden?"allow":"ignore")+"' instead")}if(opts.dotfiles===undefined){this._dotfiles=undefined}this._extensions=opts.extensions!==undefined?normalizeList(opts.extensions,"extensions option"):[];this._index=opts.index!==undefined?normalizeList(opts.index,"index option"):["index.html"];this._lastModified=opts.lastModified!==undefined?Boolean(opts.lastModified):true;this._maxage=opts.maxAge||opts.maxage;this._maxage=typeof this._maxage==="string"?ms(this._maxage):Number(this._maxage);this._maxage=!isNaN(this._maxage)?Math.min(Math.max(0,this._maxage),maxMaxAge):0;this._root=opts.root?resolve(opts.root):null;if(!this._root&&opts.from){this.from(opts.from)}}SendStream.prototype.__proto__=Stream.prototype;SendStream.prototype.etag=deprecate.function(function etag(val){val=Boolean(val);debug("etag %s",val);this._etag=val;return this},"send.etag: pass etag as option");SendStream.prototype.hidden=deprecate.function(function hidden(val){val=Boolean(val);debug("hidden %s",val);this._hidden=val;this._dotfiles=undefined;return this},"send.hidden: use dotfiles option");SendStream.prototype.index=deprecate.function(function index(paths){var index=!paths?[]:normalizeList(paths,"paths argument");debug("index %o",paths);this._index=index;return this},"send.index: pass index as option");SendStream.prototype.root=function(path){path=String(path);this._root=resolve(path);return this};SendStream.prototype.from=deprecate.function(SendStream.prototype.root,"send.from: pass root as option");SendStream.prototype.root=deprecate.function(SendStream.prototype.root,"send.root: pass root as option");SendStream.prototype.maxage=deprecate.function(function maxage(maxAge){maxAge=typeof maxAge==="string"?ms(maxAge):Number(maxAge);if(isNaN(maxAge))maxAge=0;if(Infinity==maxAge)maxAge=60*60*24*365*1e3;debug("max-age %d",maxAge);this._maxage=maxAge;return this},"send.maxage: pass maxAge as option");SendStream.prototype.error=function(status,err){var res=this.res;var msg=http.STATUS_CODES[status];err=err||new Error(msg);err.status=status;if(listenerCount(this,"error")!==0){return this.emit("error",err)}res._headers=undefined;res.statusCode=err.status;res.end(msg)};SendStream.prototype.hasTrailingSlash=function(){return"/"==this.path[this.path.length-1]};SendStream.prototype.isConditionalGET=function(){return this.req.headers["if-none-match"]||this.req.headers["if-modified-since"]};SendStream.prototype.removeContentHeaderFields=function(){var res=this.res;Object.keys(res._headers).forEach(function(field){if(0==field.indexOf("content")){res.removeHeader(field)}})};SendStream.prototype.notModified=function(){var res=this.res;debug("not modified");this.removeContentHeaderFields();res.statusCode=304;res.end()};SendStream.prototype.headersAlreadySent=function headersAlreadySent(){var err=new Error("Can't set headers after they are sent.");debug("headers already sent");this.error(500,err)};SendStream.prototype.isCachable=function(){var res=this.res;return res.statusCode>=200&&res.statusCode<300||304==res.statusCode};SendStream.prototype.onStatError=function(err){var notfound=["ENOENT","ENAMETOOLONG","ENOTDIR"];if(~notfound.indexOf(err.code))return this.error(404,err);this.error(500,err)};SendStream.prototype.isFresh=function(){return fresh(this.req.headers,this.res._headers)};SendStream.prototype.isRangeFresh=function isRangeFresh(){var ifRange=this.req.headers["if-range"];if(!ifRange)return true;return~ifRange.indexOf('"')?~ifRange.indexOf(this.res._headers["etag"]):Date.parse(this.res._headers["last-modified"])<=Date.parse(ifRange)};SendStream.prototype.redirect=function(path){if(listenerCount(this,"directory")!==0){return this.emit("directory")}if(this.hasTrailingSlash())return this.error(403);var res=this.res;path+="/";res.statusCode=301;res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Location",path);res.end('Redirecting to <a href="'+escapeHtml(path)+'">'+escapeHtml(path)+"</a>\n")};SendStream.prototype.pipe=function(res){var self=this,args=arguments,root=this._root;this.res=res;var path=decode(this.path);if(path===-1)return this.error(400);if(~path.indexOf("\x00"))return this.error(400);var parts;if(root!==null){if(upPathRegexp.test(normalize("."+sep+path))){debug('malicious path "%s"',path);return this.error(403)}path=normalize(join(root,path));root=normalize(root+sep);parts=path.substr(root.length).split(sep)}else{if(upPathRegexp.test(path)){debug('malicious path "%s"',path);return this.error(403)}parts=normalize(path).split(sep);path=resolve(path)}if(containsDotFile(parts)){var access=this._dotfiles;if(access===undefined){access=parts[parts.length-1][0]==="."?this._hidden?"allow":"ignore":"allow"}debug('%s dotfile "%s"',access,path);switch(access){case"allow":break;case"deny":return this.error(403);case"ignore":default:return this.error(404)}}if(this._index.length&&this.path[this.path.length-1]==="/"){this.sendIndex(path);return res}this.sendFile(path);return res};SendStream.prototype.send=function(path,stat){var len=stat.size;var options=this.options;var opts={};var res=this.res;var req=this.req;var ranges=req.headers.range;var offset=options.start||0;if(res._header){return this.headersAlreadySent();

}debug('pipe "%s"',path);this.setHeader(path,stat);this.type(path);if(this.isConditionalGET()&&this.isCachable()&&this.isFresh()){return this.notModified()}len=Math.max(0,len-offset);if(options.end!==undefined){var bytes=options.end-offset+1;if(len>bytes)len=bytes}if(ranges){ranges=parseRange(len,ranges);if(!this.isRangeFresh()){debug("range stale");ranges=-2}if(-1==ranges){debug("range unsatisfiable");res.setHeader("Content-Range","bytes */"+stat.size);return this.error(416)}if(-2!=ranges&&ranges.length===1){debug("range %j",ranges);res.statusCode=206;res.setHeader("Content-Range","bytes "+ranges[0].start+"-"+ranges[0].end+"/"+len);offset+=ranges[0].start;len=ranges[0].end-ranges[0].start+1}}for(var prop in options){opts[prop]=options[prop]}opts.start=offset;opts.end=Math.max(offset,offset+len-1);res.setHeader("Content-Length",len);if("HEAD"==req.method)return res.end();this.stream(path,opts)};SendStream.prototype.sendFile=function sendFile(path){var i=0;var self=this;debug('stat "%s"',path);fs.stat(path,function onstat(err,stat){if(err&&err.code==="ENOENT"&&!extname(path)&&path[path.length-1]!==sep){return next(err)}if(err)return self.onStatError(err);if(stat.isDirectory())return self.redirect(self.path);self.emit("file",path,stat);self.send(path,stat)});function next(err){if(self._extensions.length<=i){return err?self.onStatError(err):self.error(404)}var p=path+"."+self._extensions[i++];debug('stat "%s"',p);fs.stat(p,function(err,stat){if(err)return next(err);if(stat.isDirectory())return next();self.emit("file",p,stat);self.send(p,stat)})}};SendStream.prototype.sendIndex=function sendIndex(path){var i=-1;var self=this;function next(err){if(++i>=self._index.length){if(err)return self.onStatError(err);return self.error(404)}var p=join(path,self._index[i]);debug('stat "%s"',p);fs.stat(p,function(err,stat){if(err)return next(err);if(stat.isDirectory())return next();self.emit("file",p,stat);self.send(p,stat)})}next()};SendStream.prototype.stream=function(path,options){var finished=false;var self=this;var res=this.res;var req=this.req;var stream=fs.createReadStream(path,options);this.emit("stream",stream);stream.pipe(res);onFinished(res,function onfinished(){finished=true;destroy(stream)});stream.on("error",function onerror(err){if(finished)return;finished=true;destroy(stream);self.onStatError(err)});stream.on("end",function onend(){self.emit("end")})};SendStream.prototype.type=function(path){var res=this.res;if(res.getHeader("Content-Type"))return;var type=mime.lookup(path);var charset=mime.charsets.lookup(type);debug("content-type %s",type);res.setHeader("Content-Type",type+(charset?"; charset="+charset:""))};SendStream.prototype.setHeader=function setHeader(path,stat){var res=this.res;this.emit("headers",res,path,stat);if(!res.getHeader("Accept-Ranges"))res.setHeader("Accept-Ranges","bytes");if(!res.getHeader("Date"))res.setHeader("Date",(new Date).toUTCString());if(!res.getHeader("Cache-Control"))res.setHeader("Cache-Control","public, max-age="+Math.floor(this._maxage/1e3));if(this._lastModified&&!res.getHeader("Last-Modified")){var modified=stat.mtime.toUTCString();debug("modified %s",modified);res.setHeader("Last-Modified",modified)}if(this._etag&&!res.getHeader("ETag")){var val=etag(stat);debug("etag %s",val);res.setHeader("ETag",val)}};function containsDotFile(parts){for(var i=0;i<parts.length;i++){if(parts[i][0]==="."){return true}}return false}function decode(path){try{return decodeURIComponent(path)}catch(err){return-1}}function normalizeList(val,name){var list=[].concat(val||[]);for(var i=0;i<list.length;i++){if(typeof list[i]!=="string"){throw new TypeError(name+" must be array of strings or false")}}return list}},function(module,exports,__webpack_require__){module.exports=vary;module.exports.append=append;var separators=/[\(\)<>@,;:\\"\/\[\]\?=\{\}\u0020\u0009]/;function append(header,field){if(typeof header!=="string"){throw new TypeError("header argument is required")}if(!field){throw new TypeError("field argument is required")}var fields=!Array.isArray(field)?parse(String(field)):field;for(var i=0;i<fields.length;i++){if(separators.test(fields[i])){throw new TypeError("field argument contains an invalid header")}}if(header==="*"){return header}var vals=parse(header.toLowerCase());if(fields.indexOf("*")!==-1||vals.indexOf("*")!==-1){return"*"}for(var i=0;i<fields.length;i++){field=fields[i].toLowerCase();if(vals.indexOf(field)===-1){vals.push(field);header=header?header+", "+fields[i]:fields[i]}}return header}function parse(header){return header.trim().split(/ *, */)}function vary(res,field){if(!res||!res.getHeader||!res.setHeader){throw new TypeError("res argument is required")}var val=res.getHeader("Vary")||"";var header=Array.isArray(val)?val.join(", "):String(val);res.setHeader("Vary",append(header,field))}},function(module,exports,__webpack_require__){(function(process){module.exports=minimatch;minimatch.Minimatch=Minimatch;var isWindows=false;if(typeof process!=="undefined"&&process.platform==="win32")isWindows=true;var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},expand=__webpack_require__(646),qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce(function(set,c){set[c]=true;return set},{})}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options)}}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach(function(k){t[k]=b[k]});Object.keys(a).forEach(function(k){t[k]=a[k]});return t}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};return m};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch};function minimatch(p,pattern,options){if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false}if(pattern.trim()==="")return p==="";return new Minimatch(pattern,options).match(p)}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options)}if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};pattern=pattern.trim();if(isWindows)pattern=pattern.split("\\").join("/");this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=console.error;this.debug(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit)});this.debug(this.pattern,set);set=set.map(function(s,si,set){return s.map(this.parse,this)},this);this.debug(this.pattern,set);set=set.filter(function(s){return-1===s.indexOf(false)});this.debug(this.pattern,set);this.set=set}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern,negate=false,options=this.options,negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch)options=this.options;else options={}}pattern=typeof pattern==="undefined"?this.pattern:pattern;if(typeof pattern==="undefined"){throw new Error("undefined pattern")}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern]}return expand(pattern)}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){var options=this.options;if(!options.noglobstar&&pattern==="**")return GLOBSTAR;if(pattern==="")return"";var re="",hasMagic=!!options.nocase,escaping=false,patternListStack=[],plType,stateChar,inClass=false,reClassStart=-1,classStart=-1,patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break}self.debug("clearStateChar %j %j",stateChar,re);stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug("%s	%s %s %j",pattern,i,re,c);if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue}SWITCH:switch(c){case"/":return false;case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",pattern,i,re,c);if(inClass){this.debug("  in class");if(c==="!"&&i===classStart+1)c="^";re+=c;continue}self.debug("call clearStateChar %j",stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}plType=stateChar;patternListStack.push({type:plType,start:i-1,reStart:re.length});re+=stateChar==="!"?"(?:(?!":"(?:";this.debug("plType %j %j",stateChar,re);stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar();hasMagic=true;re+=")";plType=patternListStack.pop().type;switch(plType){case"!":re+="[^/]*?)";break;case"?":case"+":case"*":re+=plType;case"@":break}continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue}clearStateChar();re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue}if(inClass){var cs=pattern.substring(classStart+1,i);try{new RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]";hasMagic=hasMagic||sp[1];inClass=false;continue}}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\"}re+=c}}if(inClass){var cs=pattern.substr(classStart+1),sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1]}var pl;while(pl=patternListStack.pop()){var tail=re.slice(pl.reStart+3);tail=tail.replace(/((?:\\{2})*)(\\?)\|/g,function(_,$1,$2){if(!$2){$2="\\"}return $1+$1+$2+"|"});this.debug("tail=%j\n   %s",tail,tail);var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar();if(escaping){re+="\\\\"}var addPatternStart=false;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=true}if(re!==""&&hasMagic)re="(?=.)"+re;if(addPatternStart)re=patternStart+re;if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?"i":"",regExp=new RegExp("^"+re+"$",flags);regExp._glob=pattern;regExp._src=re;return regExp}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length)return this.regexp=false;var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot,flags=options.nocase?"i":"";var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src}).join("\\/")}).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{return this.regexp=new RegExp(re,flags)}catch(ex){return this.regexp=false}}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f)});if(mm.options.nonull&&!list.length){list.push(pattern)}return list};Minimatch.prototype.match=match;function match(f,partial){this.debug("match",f,this.pattern);if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(isWindows)f=f.split("\\").join("/");f=f.split(slashSplit);this.debug(this.pattern,"split",f);var set=this.set;this.debug(this.pattern,"set",set);var filename;for(var i=f.length-1;i>=0;i--){filename=f[i];if(filename)break}for(var i=0,l=set.length;i<l;i++){var pattern=set[i],file=f;if(options.matchBase&&pattern.length===1){file=[filename]}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{"this":this,file:file,pattern:pattern});this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var p=pattern[pi],f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi,pr=pi+1;if(pr===pl){this.debug("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false}return true}WHILE:while(fr<fl){var swallowee=file[fr];this.debug("\nglobstar while",file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug("globstar found match!",fr,fl,swallowee);return true}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){this.debug("dot detected!",file,fr,pattern,pr);break WHILE}this.debug("globstar swallow a segment, and continue");fr++}}if(partial){this.debug("\n>>> no match, partial?",file,fr,pattern,pr);if(fr===fl)return true}return false}var hit;if(typeof p==="string"){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase()}else{hit=f===p}this.debug("string match",p,f,hit)}else{hit=f.match(p);this.debug("pattern match",p,f,hit)}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==="";return emptyFileEnd}throw new Error("wtf?")};function globUnescape(s){return s.replace(/\\(.)/g,"$1")}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){(function(process){var wrappy=__webpack_require__(651);var reqs=Object.create(null);var once=__webpack_require__(551);module.exports=wrappy(inflight);function inflight(key,cb){if(reqs[key]){reqs[key].push(cb);return null}else{reqs[key]=[cb];return makeres(key)}}function makeres(key){return once(function RES(){var cbs=reqs[key];var len=cbs.length;var args=slice(arguments);for(var i=0;i<len;i++){cbs[i].apply(null,args)}if(cbs.length>len){cbs.splice(0,len);process.nextTick(function(){RES.apply(null,args)})}else{delete reqs[key]}})}function slice(args){var length=args.length;var array=[];for(var i=0;i<length;i++)array[i]=args[i];return array}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var wrappy=__webpack_require__(652);module.exports=wrappy(once);once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true})});function once(fn){var f=function(){if(f.called)return f.value;f.called=true;return f.value=fn.apply(this,arguments)};f.called=false;return f}},function(module,exports,__webpack_require__){(function(process){var path=__webpack_require__(8);var fs=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}());function Mime(){this.types=Object.create(null);this.extensions=Object.create(null)}Mime.prototype.define=function(map){for(var type in map){var exts=map[type];for(var i=0;i<exts.length;i++){if(process.env.DEBUG_MIME&&this.types[exts]){console.warn(this._loading.replace(/.*\//,""),'changes "'+exts[i]+'" extension type from '+this.types[exts]+" to "+type)}this.types[exts[i]]=type}if(!this.extensions[type]){this.extensions[type]=exts[0]}}};Mime.prototype.load=function(file){this._loading=file;var map={},content=fs.readFileSync(file,"ascii"),lines=content.split(/[\r\n]+/);lines.forEach(function(line){var fields=line.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);map[fields.shift()]=fields});this.define(map);this._loading=null};Mime.prototype.lookup=function(path,fallback){var ext=path.replace(/.*[\.\/\\]/,"").toLowerCase();return this.types[ext]||fallback||this.default_type};Mime.prototype.extension=function(mimeType){var type=mimeType.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[type]};var mime=new Mime;mime.define(__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "./types.json"');e.code="MODULE_NOT_FOUND";throw e}()));mime.default_type=mime.lookup("bin");mime.Mime=Mime;mime.charsets={lookup:function(mimeType,fallback){return/^text\//.test(mimeType)?"UTF-8":fallback}};module.exports=mime}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(605)},function(module,exports,__webpack_require__){(function(process){"use strict";var setProperty=function(obj,prop,flag,values){Object.defineProperty(obj,prop.name,{enumerable:true,set:function(value){if(typeof value!="boolean")throw new Error(f("%s required a boolean",prop.name));if(value==true)values.flags|=flag;if(value==false&&(values.flags&flag)==flag)values.flags^=flag;prop.value=value},get:function(){return prop.value}})};var getProperty=function(obj,propName,fieldName,values,func){Object.defineProperty(obj,propName,{enumerable:true,get:function(){if(values[fieldName]==null&&obj.isParsed&&!obj.isParsed()){obj.parse()}if(typeof func=="function")return func(values[fieldName]);return values[fieldName]}})};var getSingleProperty=function(obj,name,value){Object.defineProperty(obj,name,{enumerable:true,get:function(){return value}})};var copy=function(fObj,tObj){tObj=tObj||{};for(var name in fObj)tObj[name]=fObj[name];return tObj};var debugOptions=function(debugFields,options){var finaloptions={};debugFields.forEach(function(n){finaloptions[n]=options[n]});return finaloptions};var bindToCurrentDomain=function(callback){var domain=process.domain;if(domain==null||callback==null)return callback;return domain.bind(callback)};exports.setProperty=setProperty;exports.getProperty=getProperty;exports.getSingleProperty=getSingleProperty;exports.copy=copy;exports.bindToCurrentDomain=bindToCurrentDomain;exports.debugOptions=debugOptions}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,EventEmitter=__webpack_require__(120).EventEmitter,Connection=__webpack_require__(606),Query=__webpack_require__(326).Query,Logger=__webpack_require__(323),f=__webpack_require__(52).format;var DISCONNECTED="disconnected";var CONNECTING="connecting";var CONNECTED="connected";var DESTROYED="destroyed";var _id=0;var Pool=function(options){var self=this;EventEmitter.call(this);this.options=options||{};this.size=typeof options.size=="number"?options.size:5;this.messageHandler=options.messageHandler;if(!options.bson)throw new Error("must pass in valid bson parser");this.connections=[];this.state=DISCONNECTED;this.index=0;this.dead=false;this.logger=Logger("Pool",options);this.id=_id++;this.tag=options.tag};inherits(Pool,EventEmitter);var errorHandler=function(self){return function(err,connection){if(self.logger.isDebug())self.logger.debug(f("pool [%s] errored out [%s] with connection [%s]",this.dead,JSON.stringify(err),JSON.stringify(connection)));if(!self.dead){self.state=DISCONNECTED;self.dead=true;self.destroy();self.emit("error",err,self)}}};var timeoutHandler=function(self){return function(err,connection){if(self.logger.isDebug())self.logger.debug(f("pool [%s] timedout out [%s] with connection [%s]",this.dead,JSON.stringify(err),JSON.stringify(connection)));if(!self.dead){self.state=DISCONNECTED;self.dead=true;self.destroy();self.emit("timeout",err,self)}}};var closeHandler=function(self){return function(err,connection){if(self.logger.isDebug())self.logger.debug(f("pool [%s] closed [%s] with connection [%s]",this.dead,JSON.stringify(err),JSON.stringify(connection)));if(!self.dead){self.state=DISCONNECTED;self.dead=true;self.destroy();self.emit("close",err,self)}}};var parseErrorHandler=function(self){return function(err,connection){if(self.logger.isDebug())self.logger.debug(f("pool [%s] errored out [%s] with connection [%s]",this.dead,JSON.stringify(err),JSON.stringify(connection)));if(!self.dead){self.state=DISCONNECTED;self.dead=true;self.destroy();self.emit("parseError",err,self)}}};var connectHandler=function(self){return function(connection){self.connections.push(connection);if(self.connections.length==self.size){self.state=CONNECTED;self.emit("connect",self)}}};Pool.prototype.destroy=function(){this.state=DESTROYED;this.dead=true;this.connections.forEach(function(c){["close","message","error","timeout","parseError","connect"].forEach(function(e){c.removeAllListeners(e)});c.destroy()})};Pool.prototype.connect=function(_options){var self=this;this.state=CONNECTING;this.dead=false;for(var i=0;i<this.size;i++){setTimeout(function(){self.options.messageHandler=self.messageHandler;var connection=new Connection(self.options);connection.once("close",closeHandler(self));connection.once("error",errorHandler(self));connection.once("timeout",timeoutHandler(self));connection.once("parseError",parseErrorHandler(self));connection.on("connect",connectHandler(self));connection.connect(_options)},100)}};Pool.prototype.get=function(){var connection=this.connections[this.index++];this.index=this.index%this.connections.length;return connection};Pool.prototype.getAll=function(){return this.connections.slice(0)};Pool.prototype.isConnected=function(){for(var i=0;i<this.connections.length;i++){if(!this.connections[i].isConnected())return false}return this.state==CONNECTED};Pool.prototype.isDestroyed=function(){return this.state==DESTROYED};module.exports=Pool},function(module,exports,__webpack_require__){"use strict";var setProperty=__webpack_require__(554).setProperty,getProperty=__webpack_require__(554).getProperty,getSingleProperty=__webpack_require__(554).getSingleProperty;var CommandResult=function(result,connection){this.result=result;this.connection=connection};CommandResult.prototype.toJSON=function(){return this.result};CommandResult.prototype.toString=function(){return JSON.stringify(this.toJSON())};module.exports=CommandResult},function(module,exports,__webpack_require__){(function(process){"use strict";var Insert=__webpack_require__(607).Insert,Update=__webpack_require__(607).Update,Remove=__webpack_require__(607).Remove,Query=__webpack_require__(326).Query,copy=__webpack_require__(554).copy,KillCursor=__webpack_require__(326).KillCursor,GetMore=__webpack_require__(326).GetMore,Query=__webpack_require__(326).Query,ReadPreference=__webpack_require__(325),f=__webpack_require__(52).format,CommandResult=__webpack_require__(556),MongoError=__webpack_require__(319),Long=__webpack_require__(568).Long;var writeConcernFields=["w","wtimeout","j","fsync"];var LegacySupport=function(){};LegacySupport.prototype.insert=function(topology,ismaster,ns,bson,pool,callbacks,ops,options,callback){options=options||{};var ordered=typeof options.ordered=="boolean"?options.ordered:true;var legacy=typeof options.legacy=="boolean"?options.legacy:false;ops=Array.isArray(ops)?ops:[ops];if(ops.length>1e3)return callback(new MongoError("exceeded maximum write batch size of 1000"));var writeConcern=options.writeConcern||{w:1};if(!ordered||writeConcern.w==0){return executeUnordered("insert",Insert,ismaster,ns,bson,pool,callbacks,ops,options,callback)}return executeOrdered("insert",Insert,ismaster,ns,bson,pool,callbacks,ops,options,callback)};LegacySupport.prototype.update=function(topology,ismaster,ns,bson,pool,callbacks,ops,options,callback){options=options||{};var ordered=typeof options.ordered=="boolean"?options.ordered:true;ops=Array.isArray(ops)?ops:[ops];var writeConcern=options.writeConcern||{w:1};if(!ordered||writeConcern.w==0){return executeUnordered("update",Update,ismaster,ns,bson,pool,callbacks,ops,options,callback)}return executeOrdered("update",Update,ismaster,ns,bson,pool,callbacks,ops,options,callback)};LegacySupport.prototype.remove=function(topology,ismaster,ns,bson,pool,callbacks,ops,options,callback){options=options||{};var ordered=typeof options.ordered=="boolean"?options.ordered:true;ops=Array.isArray(ops)?ops:[ops];var writeConcern=options.writeConcern||{w:1};if(!ordered||writeConcern.w==0){return executeUnordered("remove",Remove,ismaster,ns,bson,pool,callbacks,ops,options,callback)}return executeOrdered("remove",Remove,ismaster,ns,bson,pool,callbacks,ops,options,callback)};LegacySupport.prototype.killCursor=function(bson,cursorId,connection,callback){var killCursor=new KillCursor(bson,[cursorId]);if(connection&&connection.isConnected())connection.write(killCursor.toBin());cursorId=Long.ZERO;if(callback)callback(null,null)};LegacySupport.prototype.getMore=function(bson,ns,cursorState,batchSize,raw,connection,callbacks,options,callback){var getMore=new GetMore(bson,ns,cursorState.cursorId,{numberToReturn:batchSize});var queryCallback=function(err,r){if(err)return callback(err);if((r.responseFlags&1<<0)!=0){return callback(new MongoError("cursor killed or timed out"),null)}cursorState.documents=r.documents;cursorState.cursorId=r.cursorId;callback(null)};if(raw){queryCallback.raw=raw}callbacks.register(getMore.requestId,queryCallback);connection.write(getMore.toBin())};LegacySupport.prototype.command=function(bson,ns,cmd,cursorState,topology,options){if(cmd.find){return setupClassicFind(bson,ns,cmd,cursorState,topology,options)}else if(cursorState.cursorId!=null){}else if(cmd){return setupCommand(bson,ns,cmd,cursorState,topology,options)}else{throw new MongoError(f("command %s does not return a cursor",JSON.stringify(cmd)))}};var setupClassicFind=function(bson,ns,cmd,cursorState,topology,options){var readPreference=options.readPreference||new ReadPreference("primary");if(typeof readPreference=="string")readPreference=new ReadPreference(readPreference);if(!(readPreference instanceof ReadPreference))throw new MongoError("readPreference must be a ReadPreference instance");options=options||{};cursorState.batchSize=cmd.batchSize||cursorState.batchSize;var numberToReturn=0;if(cursorState.limit==0){numberToReturn=cursorState.batchSize}else if(cursorState.limit<0||cursorState.limit<cursorState.batchSize||cursorState.limit>0&&cursorState.batchSize==0){numberToReturn=cursorState.limit}else{numberToReturn=cursorState.batchSize}var numberToSkip=cursorState.skip||0;var findCmd={};var usesSpecialModifier=false;if(topology.type=="mongos"&&readPreference){findCmd["$readPreference"]=readPreference.toJSON();usesSpecialModifier=true}if(cmd.sort)findCmd["orderby"]=cmd.sort,usesSpecialModifier=true;if(cmd.hint)findCmd["$hint"]=cmd.hint,usesSpecialModifier=true;if(cmd.snapshot)findCmd["$snapshot"]=cmd.snapshot,usesSpecialModifier=true;if(cmd.returnKey)findCmd["$returnKey"]=cmd.returnKey,usesSpecialModifier=true;if(cmd.maxScan)findCmd["$maxScan"]=cmd.maxScan,usesSpecialModifier=true;if(cmd.min)findCmd["$min"]=cmd.min,usesSpecialModifier=true;if(cmd.max)findCmd["$max"]=cmd.max,usesSpecialModifier=true;if(cmd.showDiskLoc)findCmd["$showDiskLoc"]=cmd.showDiskLoc,usesSpecialModifier=true;if(cmd.comment)findCmd["$comment"]=cmd.comment,usesSpecialModifier=true;if(cmd.maxTimeMS)findCmd["$maxTimeMS"]=cmd.maxTimeMS,usesSpecialModifier=true;if(cmd.explain){numberToReturn=-1;usesSpecialModifier=true;findCmd["$explain"]=true}if(usesSpecialModifier){findCmd["$query"]=cmd.query}else{findCmd=cmd.query}var query=new Query(bson,ns,findCmd,{numberToSkip:numberToSkip,numberToReturn:numberToReturn,checkKeys:false,returnFieldSelector:cmd.fields});query.slaveOk=readPreference.slaveOk();if(typeof cmd.tailable=="boolean")query.tailable=cmd.tailable;if(typeof cmd.oplogReplay=="boolean")query.oplogReplay=cmd.oplogReplay;if(typeof cmd.noCursorTimeout=="boolean")query.noCursorTimeout=cmd.noCursorTimeout;if(typeof cmd.awaitData=="boolean")query.awaitData=cmd.awaitData;if(typeof cmd.exhaust=="boolean")query.exhaust=cmd.exhaust;if(typeof cmd.partial=="boolean")query.partial=cmd.partial;return query};var setupCommand=function(bson,ns,cmd,cursorState,topology,options){var readPreference=options.readPreference||new ReadPreference("primary");if(typeof readPreference=="string")readPreference=new ReadPreference(readPreference);if(!(readPreference instanceof ReadPreference))throw new MongoError("readPreference must be a ReadPreference instance");options=options||{};var finalCmd={};for(var name in cmd){finalCmd[name]=cmd[name]}var parts=ns.split(/\./);if(topology.type=="mongos"&&readPreference){finalCmd["$readPreference"]=readPreference.toJSON()}var query=new Query(bson,f("%s.$cmd",parts.shift()),finalCmd,{numberToSkip:0,numberToReturn:-1,checkKeys:false});query.slaveOk=readPreference.slaveOk();return query};var bindToCurrentDomain=function(callback){var domain=process.domain;if(domain==null||callback==null){return callback}else{return domain.bind(callback)}};var hasWriteConcern=function(writeConcern){if(writeConcern.w||writeConcern.wtimeout||writeConcern.j==true||writeConcern.fsync==true||Object.keys(writeConcern).length==0){return true}return false};var cloneWriteConcern=function(writeConcern){var wc={};if(writeConcern.w!=null)wc.w=writeConcern.w;if(writeConcern.wtimeout!=null)wc.wtimeout=writeConcern.wtimeout;if(writeConcern.j!=null)wc.j=writeConcern.j;if(writeConcern.fsync!=null)wc.fsync=writeConcern.fsync;return wc};var aggregateWriteOperationResults=function(opType,ops,results,connection){var finalResult={ok:1,n:0};for(var i=0;i<results.length;i++){var result=results[i];var op=ops[i];if((result.upserted||result.updatedExisting==false)&&finalResult.upserted==null){finalResult.upserted=[]}if(result.upserted){finalResult.upserted.push({index:i,_id:result.upserted})}if(result.updatedExisting==false&&result.n==1&&result.upserted==null){finalResult.upserted.push({index:i,_id:op.q._id})}if(result.ok==1&&opType=="insert"&&result.err==null){finalResult.n=finalResult.n+1}if(result!=null&&result.ok==0||result.err||result.errmsg){if(result.ok==0)finalResult.ok=0;finalResult.code=result.code;finalResult.errmsg=result.errmsg||result.err||result.errMsg;if(result.code==11e3||result.code==11001||result.code==12582||result.code==16544||result.code==16538||result.code==16542||result.code==14||result.code==13511){if(finalResult.writeErrors==null)finalResult.writeErrors=[];finalResult.writeErrors.push({index:i,code:result.code,errmsg:result.errmsg||result.err||result.errMsg})}else{finalResult.writeConcernError={code:result.code,errmsg:result.errmsg||result.err||result.errMsg
}}}else if(typeof result.n=="number"){finalResult.n+=result.n}else{finalResult.n+=1}if(result!=null&&result.lastOp)finalResult.lastOp=result.lastOp}return new CommandResult(finalResult,connection)};var executeOrdered=function(opType,command,ismaster,ns,bson,pool,callbacks,ops,options,callback){var _ops=ops.slice(0);callback=bindToCurrentDomain(callback);var getLastErrors=[];var executeOp=function(list,_callback){var connection=pool.get();if(list.length==0)return _callback(null,aggregateWriteOperationResults(opType,ops,getLastErrors,connection));var doc=list.shift();var op=new command(Query.getRequestId(),ismaster,bson,ns,[doc],options);var optionWriteConcern=options.writeConcern||{w:1};var writeConcern=cloneWriteConcern(optionWriteConcern);var db=ns.split(".").shift();if(connection==null)return _callback(new MongoError("no connection available"));try{connection.write(op.toBin());if(hasWriteConcern(writeConcern)){var getLastErrorCmd={getlasterror:1};for(var i=0;i<writeConcernFields.length;i++){if(writeConcern[writeConcernFields[i]]!=null)getLastErrorCmd[writeConcernFields[i]]=writeConcern[writeConcernFields[i]]}var getLastErrorOp=new Query(bson,f("%s.$cmd",db),getLastErrorCmd,{numberToReturn:-1});connection.write(getLastErrorOp.toBin());callbacks.register(getLastErrorOp.requestId,function(err,result){if(err)return callback(err);var doc=result.documents[0];getLastErrors.push(doc);if(doc.ok==0||doc.err||doc.errmsg)return callback(null,aggregateWriteOperationResults(opType,ops,getLastErrors,connection));executeOp(list,callback)})}}catch(err){if(typeof err=="string")err=new MongoError(err);getLastErrors.push({ok:1,errmsg:err.message,code:14});return callback(null,aggregateWriteOperationResults(opType,ops,getLastErrors,connection))}};executeOp(_ops,callback)};var executeUnordered=function(opType,command,ismaster,ns,bson,pool,callbacks,ops,options,callback){callback=bindToCurrentDomain(callback);var totalOps=ops.length;var getLastErrors=[];var optionWriteConcern=options.writeConcern||{w:1};var writeConcern=cloneWriteConcern(optionWriteConcern);for(var i=0;i<ops.length;i++){var op=new command(Query.getRequestId(),ismaster,bson,ns,[ops[i]],options);var db=ns.split(".").shift();var connection=pool.get();if(connection==null)return _callback(new MongoError("no connection available"));try{connection.write(op.toBin());if(hasWriteConcern(writeConcern)){var getLastErrorCmd={getlasterror:1};for(var j=0;j<writeConcernFields.length;j++){if(writeConcern[writeConcernFields[j]]!=null)getLastErrorCmd[writeConcernFields[j]]=writeConcern[writeConcernFields[j]]}var getLastErrorOp=new Query(bson,f("%s.$cmd",db),getLastErrorCmd,{numberToReturn:-1});connection.write(getLastErrorOp.toBin());var callbackOp=function(_index){return function(err,result){totalOps=totalOps-1;getLastErrors[_index]=result.documents[0];if(totalOps==0){callback(null,aggregateWriteOperationResults(opType,ops,getLastErrors,connection))}}};callbacks.register(getLastErrorOp.requestId,callbackOp(i))}}catch(err){if(typeof err=="string")err=new MongoError(err);totalOps=totalOps-1;getLastErrors[i]={ok:1,errmsg:err.message,code:14};if(totalOps==0){callback(null,aggregateWriteOperationResults(opType,ops,getLastErrors,connection))}}}if(writeConcern&&writeConcern.w==0&&callback){callback(null,null)}};module.exports=LegacySupport}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";var Insert=__webpack_require__(607).Insert,Update=__webpack_require__(607).Update,Remove=__webpack_require__(607).Remove,Query=__webpack_require__(326).Query,copy=__webpack_require__(554).copy,KillCursor=__webpack_require__(326).KillCursor,GetMore=__webpack_require__(326).GetMore,Query=__webpack_require__(326).Query,ReadPreference=__webpack_require__(325),f=__webpack_require__(52).format,CommandResult=__webpack_require__(556),MongoError=__webpack_require__(319),Long=__webpack_require__(568).Long;var LegacySupport=function(){};var executeWrite=function(topology,type,opsField,ns,ops,options,callback){if(ops.length==0)throw new MongoError("insert must contain at least one document");if(typeof options=="function"){callback=options;options={}}var p=ns.split(".");var d=p.shift();var ordered=typeof options.ordered=="boolean"?options.ordered:true;var writeConcern=options.writeConcern||{};var writeCommand={};writeCommand[type]=p.join(".");writeCommand[opsField]=ops;writeCommand.ordered=ordered;writeCommand.writeConcern=writeConcern;var opts={};if(type=="insert")opts.checkKeys=true;if(options.serializeFunctions)opts.serializeFunctions=options.serializeFunctions;topology.command(f("%s.$cmd",d),writeCommand,opts,callback)};LegacySupport.prototype.insert=function(topology,ismaster,ns,bson,pool,callbacks,ops,options,callback){executeWrite(topology,"insert","documents",ns,ops,options,callback)};LegacySupport.prototype.update=function(topology,ismaster,ns,bson,pool,callbacks,ops,options,callback){executeWrite(topology,"update","updates",ns,ops,options,callback)};LegacySupport.prototype.remove=function(topology,ismaster,ns,bson,pool,callbacks,ops,options,callback){executeWrite(topology,"delete","deletes",ns,ops,options,callback)};LegacySupport.prototype.killCursor=function(bson,cursorId,connection,callback){var killCursor=new KillCursor(bson,[cursorId]);if(connection&&connection.isConnected())connection.write(killCursor.toBin());cursorId=Long.ZERO;if(callback)callback(null,null)};LegacySupport.prototype.getMore=function(bson,ns,cursorState,batchSize,raw,connection,callbacks,options,callback){var getMore=new GetMore(bson,ns,cursorState.cursorId,{numberToReturn:batchSize});var queryCallback=function(err,r){if(err)return callback(err);if((r.responseFlags&1<<0)!=0){return callback(new MongoError("cursor killed or timed out"),null)}cursorState.documents=r.documents;cursorState.cursorId=r.cursorId;callback(null)};if(raw){queryCallback.raw=raw}callbacks.register(getMore.requestId,queryCallback);connection.write(getMore.toBin())};LegacySupport.prototype.command=function(bson,ns,cmd,cursorState,topology,options){if(cmd.find){return setupClassicFind(bson,ns,cmd,cursorState,topology,options)}else if(cursorState.cursorId!=null){}else if(cmd){return setupCommand(bson,ns,cmd,cursorState,topology,options)}else{throw new MongoError(f("command %s does not return a cursor",JSON.stringify(cmd)))}};var setupClassicFind=function(bson,ns,cmd,cursorState,topology,options){var readPreference=options.readPreference||new ReadPreference("primary");if(typeof readPreference=="string")readPreference=new ReadPreference(readPreference);if(!(readPreference instanceof ReadPreference))throw new MongoError("readPreference must be a ReadPreference instance");options=options||{};cursorState.batchSize=cmd.batchSize||cursorState.batchSize;var numberToReturn=0;if(cursorState.limit==0){numberToReturn=cursorState.batchSize}else if(cursorState.limit<0||cursorState.limit<cursorState.batchSize||cursorState.limit>0&&cursorState.batchSize==0){numberToReturn=cursorState.limit}else{numberToReturn=cursorState.batchSize}var numberToSkip=cursorState.skip||0;var findCmd={};var usesSpecialModifier=false;if(topology.type=="mongos"&&readPreference){findCmd["$readPreference"]=readPreference.toJSON();usesSpecialModifier=true}if(cmd.sort)findCmd["orderby"]=cmd.sort,usesSpecialModifier=true;if(cmd.hint)findCmd["$hint"]=cmd.hint,usesSpecialModifier=true;if(cmd.snapshot)findCmd["$snapshot"]=cmd.snapshot,usesSpecialModifier=true;if(cmd.returnKey)findCmd["$returnKey"]=cmd.returnKey,usesSpecialModifier=true;if(cmd.maxScan)findCmd["$maxScan"]=cmd.maxScan,usesSpecialModifier=true;if(cmd.min)findCmd["$min"]=cmd.min,usesSpecialModifier=true;if(cmd.max)findCmd["$max"]=cmd.max,usesSpecialModifier=true;if(cmd.showDiskLoc)findCmd["$showDiskLoc"]=cmd.showDiskLoc,usesSpecialModifier=true;if(cmd.comment)findCmd["$comment"]=cmd.comment,usesSpecialModifier=true;if(cmd.maxTimeMS)findCmd["$maxTimeMS"]=cmd.maxTimeMS,usesSpecialModifier=true;if(cmd.explain){numberToReturn=-1;usesSpecialModifier=true;findCmd["$explain"]=true}if(usesSpecialModifier){findCmd["$query"]=cmd.query}else{findCmd=cmd.query}var query=new Query(bson,ns,findCmd,{numberToSkip:numberToSkip,numberToReturn:numberToReturn,checkKeys:false,returnFieldSelector:cmd.fields});query.slaveOk=readPreference.slaveOk();if(typeof cmd.tailable=="boolean")query.tailable=cmd.tailable;if(typeof cmd.oplogReplay=="boolean")query.oplogReplay=cmd.oplogReplay;if(typeof cmd.noCursorTimeout=="boolean")query.noCursorTimeout=cmd.noCursorTimeout;if(typeof cmd.awaitData=="boolean")query.awaitData=cmd.awaitData;if(typeof cmd.exhaust=="boolean")query.exhaust=cmd.exhaust;if(typeof cmd.partial=="boolean")query.partial=cmd.partial;return query};var setupCommand=function(bson,ns,cmd,cursorState,topology,options){var readPreference=options.readPreference||new ReadPreference("primary");if(typeof readPreference=="string")readPreference=new ReadPreference(readPreference);if(!(readPreference instanceof ReadPreference))throw new MongoError("readPreference must be a ReadPreference instance");options=options||{};var finalCmd={};for(var name in cmd){finalCmd[name]=cmd[name]}var parts=ns.split(/\./);if(topology.type=="mongos"&&readPreference){finalCmd["$readPreference"]=readPreference.toJSON()}var query=new Query(bson,f("%s.$cmd",parts.shift()),finalCmd,{numberToSkip:0,numberToReturn:-1,checkKeys:false});query.slaveOk=readPreference.slaveOk();return query};var bindToCurrentDomain=function(callback){var domain=process.domain;if(domain==null||callback==null){return callback}else{return domain.bind(callback)}};module.exports=LegacySupport}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format,EventEmitter=__webpack_require__(120).EventEmitter;var Session=function(options,topology){this.options=options;this.topology=topology;EventEmitter.call(this)};inherits(Session,EventEmitter);Session.prototype.command=function(ns,cmd,options,callback){this.topology.command(ns,cmd,options,callback)};Session.prototype.insert=function(ns,ops,options,callback){this.topology.insert(ns,ops,options,callback)};Session.prototype.update=function(ns,ops,options,callback){this.topology.update(ns,ops,options,callback)};Session.prototype.remove=function(ns,ops,options,callback){this.topology.remove(ns,ops,options,callback)};Session.prototype.cursor=function(ns,cmd,options){return this.topology.cursor(ns,cmd,options)};module.exports=Session},function(module,exports,__webpack_require__){"use strict";var f=__webpack_require__(52).format,crypto=__webpack_require__(110),MongoError=__webpack_require__(319);var AuthSession=function(db,username,password,options){this.db=db;this.username=username;this.password=password;this.options=options};AuthSession.prototype.equal=function(session){return session.db==this.db&&session.username==this.username&&session.password==this.password};var Kerberos=null;var MongoAuthProcess=null;try{Kerberos=__webpack_require__(589).Kerberos;MongoAuthProcess=__webpack_require__(589).processes.MongoAuthProcess}catch(err){}var SSPI=function(){this.authStore=[]};SSPI.prototype.auth=function(server,pool,db,username,password,options,callback){var self=this;if(Kerberos==null)return callback(new Error("Kerberos library is not installed"));var gssapiServiceName=options["gssapiServiceName"]||"mongodb";var connections=pool.getAll();var count=connections.length;if(count==0)return callback(null,null);var numberOfValidConnections=0;var credentialsValid=false;var errorObject=null;while(connections.length>0){var execute=function(connection){SSIPAuthenticate(username,password,gssapiServiceName,server,connection,function(err,r){count=count-1;if(err){errorObject=err}else if(r&&typeof r=="object"&&r.result["$err"]){errorObject=r.result}else if(r&&typeof r=="object"&&r.result["errmsg"]){errorObject=r.result}else{credentialsValid=true;numberOfValidConnections=numberOfValidConnections+1}if(count==0&&numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password,options));callback(null,true)}else if(count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using mongocr"));callback(errorObject,false)}})};execute(connections.shift())}};var SSIPAuthenticate=function(username,password,gssapiServiceName,server,connection,callback){var command={saslStart:1,mechanism:"GSSAPI",payload:"",autoAuthorize:1};var mongo_auth_process=new MongoAuthProcess(connection.host,connection.port,gssapiServiceName);server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);var doc=r.result;mongo_auth_process.init(username,password,function(err){if(err)return callback(err);mongo_auth_process.transition(doc.payload,function(err,payload){if(err)return callback(err);var command={saslContinue:1,conversationId:doc.conversationId,payload:payload};server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);var doc=r.result;mongo_auth_process.transition(doc.payload,function(err,payload){if(err)return callback(err);var command={saslContinue:1,conversationId:doc.conversationId,payload:payload};server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);var doc=r.result;mongo_auth_process.transition(doc.payload,function(err,payload){var command={saslContinue:1,conversationId:doc.conversationId,payload:payload};server.command("$external.$cmd",command,{connection:connection},function(err,r){if(err)return callback(err,false);var doc=r.result;if(doc.done)return callback(null,true);callback(new Error("Authentication failed"),false)})})})})})})})})};var addAuthSession=function(authStore,session){var found=false;for(var i=0;i<authStore.length;i++){if(authStore[i].equal(session)){found=true;break}}if(!found)authStore.push(session)};SSPI.prototype.reauthenticate=function(server,pool,callback){var count=this.authStore.length;if(count==0)return callback(null,null);for(var i=0;i<this.authStore.length;i++){this.auth(server,pool,this.authStore[i].db,this.authStore[i].username,this.authStore[i].password,this.authStore[i].options,function(err,r){count=count-1;if(count==0){callback(null,null)}})}};module.exports=SSPI},function(module,exports,__webpack_require__){(function(Buffer){"use strict";var f=__webpack_require__(52).format,crypto=__webpack_require__(110),Binary=__webpack_require__(568).Binary,MongoError=__webpack_require__(319);var AuthSession=function(db,username,password){this.db=db;this.username=username;this.password=password};AuthSession.prototype.equal=function(session){return session.db==this.db&&session.username==this.username&&session.password==this.password};var ScramSHA1=function(){this.authStore=[]};var parsePayload=function(payload){var dict={};var parts=payload.split(",");for(var i=0;i<parts.length;i++){var valueParts=parts[i].split("=");dict[valueParts[0]]=valueParts[1]}return dict};var passwordDigest=function(username,password){if(typeof username!="string")throw new MongoError("username must be a string");if(typeof password!="string")throw new MongoError("password must be a string");if(password.length==0)throw new MongoError("password cannot be empty");var md5=crypto.createHash("md5");md5.update(username+":mongo:"+password);return md5.digest("hex")};var xor=function(a,b){if(!Buffer.isBuffer(a))a=new Buffer(a);if(!Buffer.isBuffer(b))b=new Buffer(b);var res=[];if(a.length>b.length){for(var i=0;i<b.length;i++){res.push(a[i]^b[i])}}else{for(var i=0;i<a.length;i++){res.push(a[i]^b[i])}}return new Buffer(res)};var hi=function(data,salt,iterations){var digest=function(msg){var hmac=crypto.createHmac("sha1",data);hmac.update(msg);var result=hmac.digest();return result};salt=Buffer.concat([salt,new Buffer("\x00\x00\x00")]);var ui=digest(salt);var u1=ui;for(var i=0;i<iterations-1;i++){u1=digest(u1);ui=xor(ui,u1)}return ui};ScramSHA1.prototype.auth=function(server,pool,db,username,password,callback){var self=this;var connections=pool.getAll();var count=connections.length;if(count==0)return callback(null,null);var numberOfValidConnections=0;var credentialsValid=false;var errorObject=null;while(connections.length>0){var executeScram=function(connection){username=username.replace("=","=3D").replace(",","=2C");var nonce=crypto.randomBytes(24).toString("base64");var firstBare=f("n=%s,r=%s",username,nonce);var cmd={saslStart:1,mechanism:"SCRAM-SHA-1",payload:new Binary(f("n,,%s",firstBare)),autoAuthorize:1};var handleError=function(err,r){if(err){errorObject=err;return false}else if(r.result["$err"]){errorObject=r.result;return false}else if(r.result["errmsg"]){errorObject=r.result;return false}else{credentialsValid=true;numberOfValidConnections=numberOfValidConnections+1}return true};var finish=function(_count,_numberOfValidConnections){if(_count==0&&_numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password));return callback(null,true)}else if(_count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using scram"));return callback(errorObject,false)}};var handleEnd=function(_err,_r){handleError(_err,_r);count=count-1;finish(count,numberOfValidConnections)};server.command(f("%s.$cmd",db),cmd,{connection:connection},function(err,r){if(handleError(err,r)==false){count=count-1;if(count==0&&numberOfValidConnections>0){addAuthSession(self.authStore,new AuthSession(db,username,password));return callback(null,true)}else if(count==0){if(errorObject==null)errorObject=new MongoError(f("failed to authenticate using scram"));return callback(errorObject,false)}return}var dict=parsePayload(r.result.payload.value());var iterations=parseInt(dict.i,10);var salt=dict.s;var rnonce=dict.r;var withoutProof=f("c=biws,r=%s",rnonce);var passwordDig=passwordDigest(username,password);var saltedPassword=hi(passwordDig,new Buffer(salt,"base64"),iterations);var hmac=crypto.createHmac("sha1",saltedPassword);hmac.update(new Buffer("Client Key"));var clientKey=hmac.digest();var hash=crypto.createHash("sha1");hash.update(clientKey);var storedKey=hash.digest();var authMsg=[firstBare,r.result.payload.value().toString("base64"),withoutProof].join(",");var hmac=crypto.createHmac("sha1",storedKey);hmac.update(new Buffer(authMsg));var clientSig=hmac.digest();var clientProof=f("p=%s",new Buffer(xor(clientKey,clientSig)).toString("base64"));var clientFinal=[withoutProof,clientProof].join(",");var hmac=crypto.createHmac("sha1",saltedPassword);hmac.update(new Buffer("Server Key"));var serverKey=hmac.digest();var hmac=crypto.createHmac("sha1",serverKey);hmac.update(new Buffer(authMsg));var serverSig=hmac.digest();var cmd={saslContinue:1,conversationId:r.result.conversationId,payload:new Binary(new Buffer(clientFinal))};server.command(f("%s.$cmd",db),cmd,{connection:connection},function(err,r){if(r&&r.result.done==false){var cmd={saslContinue:1,conversationId:r.result.conversationId,payload:new Buffer(0)};server.command(f("%s.$cmd",db),cmd,{connection:connection},function(err,r){handleEnd(err,r)})}else{handleEnd(err,r)}})})};executeScram(connections.shift())}};var addAuthSession=function(authStore,session){var found=false;for(var i=0;i<authStore.length;i++){if(authStore[i].equal(session)){found=true;break}}if(!found)authStore.push(session)};ScramSHA1.prototype.reauthenticate=function(server,pool,callback){var count=this.authStore.length;if(count==0)return callback(null,null);for(var i=0;i<this.authStore.length;i++){this.auth(server,pool,this.authStore[i].db,this.authStore[i].username,this.authStore[i].password,function(err,r){count=count-1;if(count==0){callback(null,null)}})}};module.exports=ScramSHA1}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){"use strict";var Logger=__webpack_require__(323),EventEmitter=__webpack_require__(120).EventEmitter,inherits=__webpack_require__(52).inherits,f=__webpack_require__(52).format;var Ping=function(options){EventEmitter.call(this);this.s={pings:{},options:options||{},logger:Logger("Ping",options),pingInterval:options.pingInterval||1e4,acceptableLatency:options.acceptableLatency||15,debug:typeof options.debug=="boolean"?options.debug:false,index:0,lastPing:null};if(this.s.logger.isDebug())this.s.logger.debug(f("ping strategy interval [%s], acceptableLatency [%s]",this.s.pingInterval,this.s.acceptableLatency));if(this.s.debug){Object.defineProperty(this,"data",{enumerable:true,get:function(){return this.s.pings}})}};inherits(Ping,EventEmitter);var filterByTags=function(readPreference,servers){if(readPreference.tags==null)return servers;var filteredServers=[];var tags=readPreference.tags;for(var i=0;i<servers.length;i++){var serverTag=servers[i].lastIsMaster().tags||{};var found=true;for(var name in tags){if(serverTag[name]!=tags[name])found=false}if(found)filteredServers.push(servers[i])}return filteredServers};Ping.prototype.pickServer=function(set,readPreference){var self=this;var seeds={};var servers=[];if(set.primary){servers.push(set.primary)}for(var i=0;i<set.secondaries.length;i++){servers.push(set.secondaries[i])}servers=filterByTags(readPreference,servers);var serverList=[];for(var i=0;i<servers.length;i++){serverList.push({name:servers[i].name,time:self.s.pings[servers[i].name]||0})}serverList.sort(function(a,b){return a.time>b.time});var lowest=serverList.length>0?serverList[0].time:0;serverList=serverList.filter(function(s){return s.time<=lowest+self.s.acceptableLatency});if(serverList.length==0&&set.primary){if(self.s.logger.isInfo())self.s.logger.info(f("picked primary server [%s]",set.primary.name));return set.primary}else if(serverList.length==0){return null}if(self.s.logger.isInfo())self.s.logger.info(f("picked server [%s] with ping latency [%s]",serverList[0].name,serverList[0].time));self.s.index=self.s.index+1;self.s.index=self.s.index%serverList.length;return set.get(serverList[self.s.index].name)};Ping.prototype.startOperation=function(server,query,date){};Ping.prototype.endOperation=function(server,err,result,date){};Ping.prototype.ha=function(topology,state,callback){var self=this;var servers=state.getAll();var count=servers.length;if(servers.length==0)return callback(null,null);if(self.s.lastPing!=null){var diff=(new Date).getTime()-self.s.lastPing.getTime();if(diff<self.s.pingInterval)return callback(null,null)}var operation=function(_server){var start=new Date;_server.command("system.$cmd",{ismaster:1},function(err,r){count=count-1;var time=(new Date).getTime()-start.getTime();self.s.pings[_server.name]=time;if(self.s.logger.isDebug())self.s.logger.debug(f("ha latency for server [%s] is [%s] ms",_server.name,time));if(count==0){topology.emit("ping",err,r?r.result:null);self.s.lastPing=new Date;callback(null,null)}})};while(servers.length>0){operation(servers.shift())}};var removeServer=function(self,server){delete self.s.pings[server.name]};Ping.prototype.close=function(server){removeServer(this,server)};Ping.prototype.error=function(server){removeServer(this,server)};Ping.prototype.timeout=function(server){removeServer(this,server)};Ping.prototype.connect=function(server,callback){var self=this;var start=new Date;server.command("system.$cmd",{ismaster:1},function(err,r){var time=(new Date).getTime()-start.getTime();self.s.pings[server.name]=time;if(self.s.logger.isDebug())self.s.logger.debug(f("connect latency for server [%s] is [%s] ms",server.name,time));self.s.lastPing=new Date;callback(null,null)})};module.exports=Ping},function(module,exports,__webpack_require__){"use strict";var Logger=__webpack_require__(323),f=__webpack_require__(52).format,MongoError=__webpack_require__(319);var DISCONNECTED="disconnected";var CONNECTING="connecting";var CONNECTED="connected";var DESTROYED="destroyed";var State=function(replSet,options){this.replSet=replSet;this.options=options;this.secondaries=[];this.arbiters=[];this.passives=[];this.primary=null;this.state=DISCONNECTED;this.logger=Logger("ReplSet",options);this.id=options.id;this.setName=options.setName;this.connectingServers=options.connectingServers;this.secondaryOnlyConnectionAllowed=options.secondaryOnlyConnectionAllowed};State.prototype.isSecondaryConnected=function(){for(var i=0;i<this.secondaries.length;i++){if(this.secondaries[i].isConnected())return true}return false};State.prototype.isPrimaryConnected=function(){return this.primary!=null&&this.primary.isConnected()};State.prototype.isPrimary=function(address){if(this.primary==null)return false;return this.primary&&this.primary.equals(address)};State.prototype.isSecondary=function(address){for(var i=0;i<this.secondaries.length;i++){if(this.secondaries[i].equals(address)){return true}}return false};State.prototype.isPassive=function(address){for(var i=0;i<this.passives.length;i++){if(this.passives[i].equals(address)){return true}}return false};State.prototype.contains=function(address){if(this.primary&&this.primary.equals(address))return true;for(var i=0;i<this.secondaries.length;i++){if(this.secondaries[i].equals(address))return true}for(var i=0;i<this.arbiters.length;i++){if(this.arbiters[i].equals(address))return true}for(var i=0;i<this.passives.length;i++){if(this.passives[i].equals(address))return true}return false};State.prototype.clean=function(){if(this.primary!=null&&!this.primary.isConnected()){this.primary=null}this.secondaries=this.secondaries.filter(function(s){return s.isConnected()});this.arbiters=this.arbiters.filter(function(s){return s.isConnected()})};State.prototype.destroy=function(){this.state=DESTROYED;if(this.primary)this.primary.destroy();this.secondaries.forEach(function(s){s.destroy()})};State.prototype.remove=function(server){if(this.primary&&this.primary.equals(server)){this.primary=null;return"primary"}var length=this.arbiters.length;this.arbiters=this.arbiters.filter(function(s){return!s.equals(server)});if(this.arbiters.length<length)return"arbiter";var length=this.passives.length;this.passives=this.passives.filter(function(s){return!s.equals(server)});if(this.passives.length<length){this.secondaries=this.secondaries.filter(function(s){return!s.equals(server)});return"passive"}this.secondaries=this.secondaries.filter(function(s){return!s.equals(server)});return"secondary"};State.prototype.get=function(server){var found=false;var servers=this.primary?[this.primary]:[];servers=servers.concat(this.secondaries);for(var i=0;i<servers.length;i++){if(servers[i].equals(server)){return servers[i]}}};State.prototype.getAll=function(){var servers=[];if(this.primary)servers.push(this.primary);return servers.concat(this.secondaries)};State.prototype.getAllConnections=function(){var connections=[];if(this.primary)connections=connections.concat(this.primary.connections());this.secondaries.forEach(function(s){connections=connections.concat(s.connections())});return connections};State.prototype.toJSON=function(){return{primary:this.primary?this.primary.lastIsMaster().me:null,secondaries:this.secondaries.map(function(s){return s.lastIsMaster().me})}};State.prototype.lastIsMaster=function(){if(this.primary)return this.primary.lastIsMaster();if(this.secondaries.length>0)return this.secondaries[0].lastIsMaster();return{}};State.prototype.promotePrimary=function(server){var currentServer=this.get(server);if(currentServer==null){this.primary=server;return}this.remove(currentServer);this.primary=currentServer};var add=function(list,server){for(var i=0;i<list.length;i++){if(list[i].equals(server))return false}list.push(server);return true};State.prototype.addSecondary=function(server){return add(this.secondaries,server)};State.prototype.addArbiter=function(server){return add(this.arbiters,server)};State.prototype.addPassive=function(server){return add(this.passives,server)};State.prototype.update=function(ismaster,server){var self=this;if(!ismaster.ismaster&&!ismaster.secondary&&!ismaster.arbiterOnly){var result=self.remove(server);if(self.state==CONNECTED){if(self.logger.isInfo())self.logger.info(f("[%s] removing %s from set",self.id,ismaster.me));self.replSet.emit("left",self.remove(server),server)}return false}if(self.setName==null&&ismaster.setName){if(self.logger.isInfo())self.logger.info(f("[%s] setting setName to %s",self.id,ismaster.setName));self.setName=ismaster.setName}if(ismaster.setName&&self.setName!=ismaster.setName){if(self.logger.isError())self.logger.error(f("[%s] server in replset %s is not part of the specified setName %s",self.id,ismaster.setName,self.setName));self.remove(server);self.replSet.emit("error",new MongoError("provided setName for Replicaset Connection does not match setName found in server seedlist"));return false}if(self.logger.isInfo())self.logger.info(f("[%s] updating replicaset state %s",self.id,JSON.stringify(this)));if(ismaster.ismaster&&self.setName==ismaster.setName&&!self.isPrimary(ismaster.me)){self.promotePrimary(server);if(self.logger.isInfo())self.logger.info(f("[%s] promoting %s to primary",self.id,ismaster.me));self.replSet.emit("joined","primary",this.primary);if(self.state==CONNECTING){self.state=CONNECTED;self.replSet.emit("connect",self.replSet)}else{self.state=CONNECTED;self.replSet.emit("reconnect",server)}}else if(!ismaster.ismaster&&self.setName==ismaster.setName&&ismaster.arbiterOnly){if(self.addArbiter(server)){if(self.logger.isInfo())self.logger.info(f("[%s] promoting %s to arbiter",self.id,ismaster.me));self.replSet.emit("joined","arbiter",server);return true}return false}else if(!ismaster.ismaster&&self.setName==ismaster.setName&&ismaster.secondary&&ismaster.passive){if(self.addPassive(server)&&self.addSecondary(server)){if(self.logger.isInfo())self.logger.info(f("[%s] promoting %s to passive",self.id,ismaster.me));self.replSet.emit("joined","passive",server);return true}return false}else if(!ismaster.ismaster&&self.setName==ismaster.setName&&ismaster.secondary){if(self.addSecondary(server)){if(self.logger.isInfo())self.logger.info(f("[%s] promoting %s to passive",self.id,ismaster.me));self.replSet.emit("joined","secondary",server);if(self.secondaryOnlyConnectionAllowed&&self.state==CONNECTING){self.state=CONNECTED;self.replSet.emit("connect",self.replSet)}return true}return false}return true};module.exports=State},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(610);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;var storage;if(typeof chrome!=="undefined"&&typeof chrome.storage!=="undefined")storage=chrome.storage.local;else storage=localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){storage.removeItem("debug")}else{storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},function(module,exports,__webpack_require__){(function(process,Buffer){var Transport=__webpack_require__(64),EventEmitter=process.EventEmitter,crypto=__webpack_require__(110),url=__webpack_require__(109),parser=__webpack_require__(70),util=__webpack_require__(85);

exports=module.exports=WebSocket;exports.Parser=Parser;function WebSocket(mng,data,req){var self=this;this.manager=mng;this.parser=new Parser({maxBuffer:mng.get("destroy buffer size")});this.parser.on("data",function(packet){self.onMessage(parser.decodePacket(packet))});this.parser.on("ping",function(){try{self.socket.write("\x00")}catch(e){self.end();return}});this.parser.on("close",function(){self.end()});this.parser.on("error",function(reason){self.log.warn(self.name+" parser error: "+reason);self.end()});this.parser.on("kick",function(reason){self.log.warn(self.name+" parser forced user kick: "+reason);self.onMessage({type:"disconnect",endpoint:""});self.end()});Transport.call(this,mng,data,req)}WebSocket.prototype.__proto__=Transport.prototype;WebSocket.prototype.name="websocket";WebSocket.prototype.protocolVersion="07-12";WebSocket.prototype.onSocketConnect=function(){var self=this;if(typeof this.req.headers.upgrade==="undefined"||this.req.headers.upgrade.toLowerCase()!=="websocket"){this.log.warn(this.name+" connection invalid");this.end();return}var origin=this.req.headers["sec-websocket-origin"],location=((this.manager.settings["match origin protocol"]?origin.match(/^https/):this.socket.encrypted)?"wss":"ws")+"://"+this.req.headers.host+this.req.url;if(!this.verifyOrigin(origin)){this.log.warn(this.name+" connection invalid: origin mismatch");this.end();return}if(!this.req.headers["sec-websocket-key"]){this.log.warn(this.name+" connection invalid: received no key");this.end();return}var key=this.req.headers["sec-websocket-key"];var shasum=crypto.createHash("sha1");shasum.update(key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");key=shasum.digest("base64");var headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+key];try{this.socket.write(headers.concat("","").join("\r\n"));this.socket.setTimeout(0);this.socket.setNoDelay(true)}catch(e){this.end();return}this.socket.on("data",function(data){self.parser.add(data)})};WebSocket.prototype.verifyOrigin=function(origin){var origins=this.manager.get("origins");if(origin==="null")origin="*";if(origins.indexOf("*:*")!==-1){return true}if(origin){try{var parts=url.parse(origin);parts.port=parts.port||80;var ok=~origins.indexOf(parts.hostname+":"+parts.port)||~origins.indexOf(parts.hostname+":*")||~origins.indexOf("*:"+parts.port);if(!ok)this.log.warn("illegal origin: "+origin);return ok}catch(ex){this.log.warn("error parsing origin")}}else{this.log.warn("origin missing from websocket call, yet required by config")}return false};WebSocket.prototype.write=function(data){if(this.open){var buf=this.frame(129,data);try{this.socket.write(buf,"binary")}catch(e){this.end();return}this.log.debug(this.name+" writing",data)}};WebSocket.prototype.payload=function(msgs){for(var i=0,l=msgs.length;i<l;i++){this.write(msgs[i])}return this};WebSocket.prototype.frame=function(opcode,str){var dataBuffer=new Buffer(str),dataLength=dataBuffer.length,startOffset=2,secondByte=dataLength;if(dataLength>65536){startOffset=10;secondByte=127}else if(dataLength>125){startOffset=4;secondByte=126}var outputBuffer=new Buffer(dataLength+startOffset);outputBuffer[0]=opcode;outputBuffer[1]=secondByte;dataBuffer.copy(outputBuffer,startOffset);switch(secondByte){case 126:outputBuffer[2]=dataLength>>>8;outputBuffer[3]=dataLength%256;break;case 127:var l=dataLength;for(var i=1;i<=8;++i){outputBuffer[startOffset-i]=l&255;l>>>=8}}return outputBuffer};WebSocket.prototype.doClose=function(){this.socket.end()};function Parser(opts){this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0};this.overflow=null;this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.currentMessage="";this._maxBuffer=opts&&opts.maxBuffer||1e8;this._dataLength=0;var self=this;this.opcodeHandlers={1:function(data){var finish=function(mask,data){self.currentMessage+=self.unmask(mask,data);if(self.state.lastFragment){self.emit("data",self.currentMessage);self.currentMessage=""}self.endPacket()};var expectData=function(length){if(self.state.masked){self.expect("Mask",4,function(data){var mask=data;self.expect("Data",length,function(data){finish(mask,data)})})}else{self.expect("Data",length,function(data){finish(null,data)})}};var firstLength=data[1]&127;if(firstLength<126){expectData(firstLength)}else if(firstLength==126){self.expect("Length",2,function(data){expectData(util.unpack(data))})}else if(firstLength==127){self.expect("Length",8,function(data){if(util.unpack(data.slice(0,4))!=0){self.error("packets with length spanning more than 32 bit is currently not supported");return}var lengthBytes=data.slice(4);expectData(util.unpack(data))})}},2:function(data){var finish=function(mask,data){if(typeof self.currentMessage=="string")self.currentMessage=[];self.currentMessage.push(self.unmask(mask,data,true));if(self.state.lastFragment){self.emit("binary",self.concatBuffers(self.currentMessage));self.currentMessage=""}self.endPacket()};var expectData=function(length){if(self.state.masked){self.expect("Mask",4,function(data){var mask=data;self.expect("Data",length,function(data){finish(mask,data)})})}else{self.expect("Data",length,function(data){finish(null,data)})}};var firstLength=data[1]&127;if(firstLength<126){expectData(firstLength)}else if(firstLength==126){self.expect("Length",2,function(data){expectData(util.unpack(data))})}else if(firstLength==127){self.expect("Length",8,function(data){if(util.unpack(data.slice(0,4))!=0){self.error("packets with length spanning more than 32 bit is currently not supported");return}var lengthBytes=data.slice(4);expectData(util.unpack(data))})}},8:function(data){self.emit("close");self.reset()},9:function(data){if(self.state.lastFragment==false){self.error("fragmented ping is not supported");return}var finish=function(mask,data){self.emit("ping",self.unmask(mask,data));self.endPacket()};var expectData=function(length){if(self.state.masked){self.expect("Mask",4,function(data){var mask=data;self.expect("Data",length,function(data){finish(mask,data)})})}else{self.expect("Data",length,function(data){finish(null,data)})}};var firstLength=data[1]&127;if(firstLength==0){finish(null,null)}else if(firstLength<126){expectData(firstLength)}else if(firstLength==126){self.expect("Length",2,function(data){expectData(util.unpack(data))})}else if(firstLength==127){self.expect("Length",8,function(data){expectData(util.unpack(data))})}}};this.expect("Opcode",2,this.processPacket)}Parser.prototype.__proto__=EventEmitter.prototype;Parser.prototype.add=function(data){this._dataLength+=data.length;if(this._dataLength>this._maxBuffer){this.overflow=null;this.expectBuffer=null;this.emit("kick","max buffer size reached");return}if(this.expectBuffer==null){this.addToOverflow(data);return}var toRead=Math.min(data.length,this.expectBuffer.length-this.expectOffset);data.copy(this.expectBuffer,this.expectOffset,0,toRead);this.expectOffset+=toRead;if(toRead<data.length){this.overflow=new Buffer(data.length-toRead);data.copy(this.overflow,0,toRead,toRead+this.overflow.length)}if(this.expectOffset==this.expectBuffer.length){var bufferForHandler=this.expectBuffer;this.expectBuffer=null;this.expectOffset=0;this.expectHandler.call(this,bufferForHandler)}};Parser.prototype.addToOverflow=function(data){if(this.overflow==null)this.overflow=data;else{var prevOverflow=this.overflow;this.overflow=new Buffer(this.overflow.length+data.length);prevOverflow.copy(this.overflow,0);data.copy(this.overflow,prevOverflow.length)}};Parser.prototype.expect=function(what,length,handler){if(length>this._maxBuffer){this.emit("kick","expected input larger than max buffer");return}this.expectBuffer=new Buffer(length);this.expectOffset=0;this.expectHandler=handler;if(this.overflow!=null){var toOverflow=this.overflow;this.overflow=null;this.add(toOverflow)}};Parser.prototype.processPacket=function(data){if((data[0]&112)!=0){this.error("reserved fields must be empty")}this.state.lastFragment=(data[0]&128)==128;this.state.masked=(data[1]&128)==128;var opcode=data[0]&15;if(opcode==0){this.state.opcode=this.state.activeFragmentedOperation;if(!(this.state.opcode==1||this.state.opcode==2)){this.error("continuation frame cannot follow current opcode");return}}else{this.state.opcode=opcode;if(this.state.lastFragment===false){this.state.activeFragmentedOperation=opcode}}var handler=this.opcodeHandlers[this.state.opcode];if(typeof handler=="undefined")this.error("no handler for opcode "+this.state.opcode);else handler(data)};Parser.prototype.endPacket=function(){this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;if(this.state.lastFragment&&this.state.opcode==this.state.activeFragmentedOperation){this.state.activeFragmentedOperation=null}this.state.lastFragment=false;this.state.opcode=this.state.activeFragmentedOperation!=null?this.state.activeFragmentedOperation:0;this.state.masked=false;this.expect("Opcode",2,this.processPacket)};Parser.prototype.reset=function(){this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0};this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.overflow=null;this.currentMessage=""};Parser.prototype.unmask=function(mask,buf,binary){if(mask!=null){for(var i=0,ll=buf.length;i<ll;i++){buf[i]^=mask[i%4]}}if(binary)return buf;return buf!=null?buf.toString("utf8"):""};Parser.prototype.concatBuffers=function(buffers){var length=0;for(var i=0,l=buffers.length;i<l;++i){length+=buffers[i].length}var mergedBuffer=new Buffer(length);var offset=0;for(var i=0,l=buffers.length;i<l;++i){buffers[i].copy(mergedBuffer,offset);offset+=buffers[i].length}return mergedBuffer};Parser.prototype.error=function(reason){this.reset();this.emit("error",reason);return this}}).call(exports,__webpack_require__(9),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process,Buffer){var Transport=__webpack_require__(64),EventEmitter=process.EventEmitter,crypto=__webpack_require__(110),url=__webpack_require__(109),parser=__webpack_require__(70),util=__webpack_require__(85);exports=module.exports=WebSocket;exports.Parser=Parser;function WebSocket(mng,data,req){var self=this;this.manager=mng;this.parser=new Parser({maxBuffer:mng.get("destroy buffer size")});this.parser.on("data",function(packet){self.onMessage(parser.decodePacket(packet))});this.parser.on("ping",function(){try{self.socket.write("\x00")}catch(e){self.end();return}});this.parser.on("close",function(){self.end()});this.parser.on("error",function(reason){self.log.warn(self.name+" parser error: "+reason);self.end()});this.parser.on("kick",function(reason){self.log.warn(self.name+" parser forced user kick: "+reason);self.onMessage({type:"disconnect",endpoint:""});self.end()});Transport.call(this,mng,data,req)}WebSocket.prototype.__proto__=Transport.prototype;WebSocket.prototype.name="websocket";WebSocket.prototype.protocolVersion="16";WebSocket.prototype.onSocketConnect=function(){var self=this;if(typeof this.req.headers.upgrade==="undefined"||this.req.headers.upgrade.toLowerCase()!=="websocket"){this.log.warn(this.name+" connection invalid");this.end();return}var origin=this.req.headers["origin"]||"",location=((this.manager.settings["match origin protocol"]?origin.match(/^https/):this.socket.encrypted)?"wss":"ws")+"://"+this.req.headers.host+this.req.url;if(!this.verifyOrigin(origin)){this.log.warn(this.name+" connection invalid: origin mismatch");this.end();return}if(!this.req.headers["sec-websocket-key"]){this.log.warn(this.name+" connection invalid: received no key");this.end();return}var key=this.req.headers["sec-websocket-key"];var shasum=crypto.createHash("sha1");shasum.update(key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");key=shasum.digest("base64");var headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+key];try{this.socket.write(headers.concat("","").join("\r\n"));this.socket.setTimeout(0);this.socket.setNoDelay(true)}catch(e){this.end();return}this.socket.on("data",function(data){self.parser.add(data)})};WebSocket.prototype.verifyOrigin=function(origin){var origins=this.manager.get("origins");if(origin==="null")origin="*";if(origins.indexOf("*:*")!==-1){return true}if(origin){try{var parts=url.parse(origin);parts.port=parts.port||80;var ok=~origins.indexOf(parts.hostname+":"+parts.port)||~origins.indexOf(parts.hostname+":*")||~origins.indexOf("*:"+parts.port);if(!ok)this.log.warn("illegal origin: "+origin);return ok}catch(ex){this.log.warn("error parsing origin")}}else{this.log.warn("origin missing from websocket call, yet required by config")}return false};WebSocket.prototype.write=function(data){if(this.open){var buf=this.frame(129,data);try{this.socket.write(buf,"binary")}catch(e){this.end();return}this.log.debug(this.name+" writing",data)}};WebSocket.prototype.payload=function(msgs){for(var i=0,l=msgs.length;i<l;i++){this.write(msgs[i])}return this};WebSocket.prototype.frame=function(opcode,str){var dataBuffer=new Buffer(str),dataLength=dataBuffer.length,startOffset=2,secondByte=dataLength;if(dataLength>65536){startOffset=10;secondByte=127}else if(dataLength>125){startOffset=4;secondByte=126}var outputBuffer=new Buffer(dataLength+startOffset);outputBuffer[0]=opcode;outputBuffer[1]=secondByte;dataBuffer.copy(outputBuffer,startOffset);switch(secondByte){case 126:outputBuffer[2]=dataLength>>>8;outputBuffer[3]=dataLength%256;break;case 127:var l=dataLength;for(var i=1;i<=8;++i){outputBuffer[startOffset-i]=l&255;l>>>=8}}return outputBuffer};WebSocket.prototype.doClose=function(){this.socket.end()};function Parser(opts){this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0};this.overflow=null;this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.currentMessage="";this._maxBuffer=opts&&opts.maxBuffer||1e8;this._dataLength=0;var self=this;this.opcodeHandlers={1:function(data){var finish=function(mask,data){self.currentMessage+=self.unmask(mask,data);if(self.state.lastFragment){self.emit("data",self.currentMessage);self.currentMessage=""}self.endPacket()};var expectData=function(length){if(self.state.masked){self.expect("Mask",4,function(data){var mask=data;self.expect("Data",length,function(data){finish(mask,data)})})}else{self.expect("Data",length,function(data){finish(null,data)})}};var firstLength=data[1]&127;if(firstLength<126){expectData(firstLength)}else if(firstLength==126){self.expect("Length",2,function(data){expectData(util.unpack(data))})}else if(firstLength==127){self.expect("Length",8,function(data){if(util.unpack(data.slice(0,4))!=0){self.error("packets with length spanning more than 32 bit is currently not supported");return}var lengthBytes=data.slice(4);expectData(util.unpack(data))})}},2:function(data){var finish=function(mask,data){if(typeof self.currentMessage=="string")self.currentMessage=[];self.currentMessage.push(self.unmask(mask,data,true));if(self.state.lastFragment){self.emit("binary",self.concatBuffers(self.currentMessage));self.currentMessage=""}self.endPacket()};var expectData=function(length){if(self.state.masked){self.expect("Mask",4,function(data){var mask=data;self.expect("Data",length,function(data){finish(mask,data)})})}else{self.expect("Data",length,function(data){finish(null,data)})}};var firstLength=data[1]&127;if(firstLength<126){expectData(firstLength)}else if(firstLength==126){self.expect("Length",2,function(data){expectData(util.unpack(data))})}else if(firstLength==127){self.expect("Length",8,function(data){if(util.unpack(data.slice(0,4))!=0){self.error("packets with length spanning more than 32 bit is currently not supported");return}var lengthBytes=data.slice(4);expectData(util.unpack(data))})}},8:function(data){self.emit("close");self.reset()},9:function(data){if(self.state.lastFragment==false){self.error("fragmented ping is not supported");return}var finish=function(mask,data){self.emit("ping",self.unmask(mask,data));self.endPacket()};var expectData=function(length){if(self.state.masked){self.expect("Mask",4,function(data){var mask=data;self.expect("Data",length,function(data){finish(mask,data)})})}else{self.expect("Data",length,function(data){finish(null,data)})}};var firstLength=data[1]&127;if(firstLength==0){finish(null,null)}else if(firstLength<126){expectData(firstLength)}else if(firstLength==126){self.expect("Length",2,function(data){expectData(util.unpack(data))})}else if(firstLength==127){self.expect("Length",8,function(data){expectData(util.unpack(data))})}}};this.expect("Opcode",2,this.processPacket)}Parser.prototype.__proto__=EventEmitter.prototype;Parser.prototype.add=function(data){this._dataLength+=data.length;if(this._dataLength>this._maxBuffer){this.overflow=null;this.expectBuffer=null;this.emit("kick","max buffer size reached");return}if(this.expectBuffer==null){this.addToOverflow(data);return}var toRead=Math.min(data.length,this.expectBuffer.length-this.expectOffset);data.copy(this.expectBuffer,this.expectOffset,0,toRead);this.expectOffset+=toRead;if(toRead<data.length){this.overflow=new Buffer(data.length-toRead);data.copy(this.overflow,0,toRead,toRead+this.overflow.length)}if(this.expectOffset==this.expectBuffer.length){var bufferForHandler=this.expectBuffer;this.expectBuffer=null;this.expectOffset=0;this.expectHandler.call(this,bufferForHandler)}};Parser.prototype.addToOverflow=function(data){if(this.overflow==null)this.overflow=data;else{var prevOverflow=this.overflow;this.overflow=new Buffer(this.overflow.length+data.length);prevOverflow.copy(this.overflow,0);data.copy(this.overflow,prevOverflow.length)}};Parser.prototype.expect=function(what,length,handler){if(length>this._maxBuffer){this.emit("kick","expected input larger than max buffer");return}this.expectBuffer=new Buffer(length);this.expectOffset=0;this.expectHandler=handler;if(this.overflow!=null){var toOverflow=this.overflow;this.overflow=null;this.add(toOverflow)}};Parser.prototype.processPacket=function(data){if((data[0]&112)!=0){this.error("reserved fields must be empty");return}this.state.lastFragment=(data[0]&128)==128;this.state.masked=(data[1]&128)==128;var opcode=data[0]&15;if(opcode==0){this.state.opcode=this.state.activeFragmentedOperation;if(!(this.state.opcode==1||this.state.opcode==2)){this.error("continuation frame cannot follow current opcode");return}}else{this.state.opcode=opcode;if(this.state.lastFragment===false){this.state.activeFragmentedOperation=opcode}}var handler=this.opcodeHandlers[this.state.opcode];if(typeof handler=="undefined")this.error("no handler for opcode "+this.state.opcode);else handler(data)};Parser.prototype.endPacket=function(){this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;if(this.state.lastFragment&&this.state.opcode==this.state.activeFragmentedOperation){this.state.activeFragmentedOperation=null}this.state.lastFragment=false;this.state.opcode=this.state.activeFragmentedOperation!=null?this.state.activeFragmentedOperation:0;this.state.masked=false;this.expect("Opcode",2,this.processPacket)};Parser.prototype.reset=function(){this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0};this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.overflow=null;this.currentMessage=""};Parser.prototype.unmask=function(mask,buf,binary){if(mask!=null){for(var i=0,ll=buf.length;i<ll;i++){buf[i]^=mask[i%4]}}if(binary)return buf;return buf!=null?buf.toString("utf8"):""};Parser.prototype.concatBuffers=function(buffers){var length=0;for(var i=0,l=buffers.length;i<l;++i){length+=buffers[i].length}var mergedBuffer=new Buffer(length);var offset=0;for(var i=0,l=buffers.length;i<l;++i){buffers[i].copy(mergedBuffer,offset);offset+=buffers[i].length}return mergedBuffer};Parser.prototype.error=function(reason){this.reset();this.emit("error",reason);return this}}).call(exports,__webpack_require__(9),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process,Buffer){var Transport=__webpack_require__(64),EventEmitter=process.EventEmitter,crypto=__webpack_require__(110),parser=__webpack_require__(70);exports=module.exports=WebSocket;function WebSocket(mng,data,req){var self=this;this.parser=new Parser({maxBuffer:mng.get("destroy buffer size")});this.parser.on("data",function(packet){self.log.debug(self.name+" received data packet",packet);self.onMessage(parser.decodePacket(packet))});this.parser.on("close",function(){self.end()});this.parser.on("error",function(){self.end()});this.parser.on("kick",function(reason){self.log.warn(self.name+" parser forced user kick: "+reason);self.onMessage({type:"disconnect",endpoint:""});self.end()});Transport.call(this,mng,data,req)}WebSocket.prototype.__proto__=Transport.prototype;WebSocket.prototype.name="websocket";WebSocket.prototype.protocolVersion="hixie-76";WebSocket.prototype.onSocketConnect=function(){var self=this;this.socket.setNoDelay(true);this.buffer=true;this.buffered=[];if(this.req.headers.upgrade!=="WebSocket"){this.log.warn(this.name+" connection invalid");this.end();return}var origin=this.req.headers["origin"],waitingForNonce=false;if(this.manager.settings["match origin protocol"]){location=(origin.indexOf("https")>-1?"wss":"ws")+"://"+this.req.headers.host+this.req.url}else if(this.socket.encrypted){location="wss://"+this.req.headers.host+this.req.url}else{location="ws://"+this.req.headers.host+this.req.url}if(this.req.headers["sec-websocket-key1"]){if(!(this.req.head&&this.req.head.length>=8)){waitingForNonce=true}var headers=["HTTP/1.1 101 WebSocket Protocol Handshake","Upgrade: WebSocket","Connection: Upgrade","Sec-WebSocket-Origin: "+origin,"Sec-WebSocket-Location: "+location];if(this.req.headers["sec-websocket-protocol"]){headers.push("Sec-WebSocket-Protocol: "+this.req.headers["sec-websocket-protocol"])}}else{var headers=["HTTP/1.1 101 Web Socket Protocol Handshake","Upgrade: WebSocket","Connection: Upgrade","WebSocket-Origin: "+origin,"WebSocket-Location: "+location]}try{this.socket.write(headers.concat("","").join("\r\n"));this.socket.setTimeout(0);this.socket.setNoDelay(true);this.socket.setEncoding("utf8")}catch(e){this.end();return}if(waitingForNonce){this.socket.setEncoding("binary")}else if(this.proveReception(headers)){self.flush()}var headBuffer="";this.socket.on("data",function(data){if(waitingForNonce){headBuffer+=data;if(headBuffer.length<8){return}self.socket.setEncoding("utf8");waitingForNonce=false;self.req.head=headBuffer.substr(0,8);headBuffer="";if(self.proveReception(headers)){self.flush()}return}self.parser.add(data)})};WebSocket.prototype.write=function(data){if(this.open){this.drained=false;if(this.buffer){this.buffered.push(data);return this}var length=Buffer.byteLength(data),buffer=new Buffer(2+length);buffer.write("\x00","binary");buffer.write(data,1,"utf8");buffer.write("ÿ",1+length,"binary");try{if(this.socket.write(buffer)){this.drained=true}}catch(e){this.end()}this.log.debug(this.name+" writing",data)}};WebSocket.prototype.flush=function(){this.buffer=false;for(var i=0,l=this.buffered.length;i<l;i++){this.write(this.buffered.splice(0,1)[0])}};WebSocket.prototype.proveReception=function(headers){var self=this,k1=this.req.headers["sec-websocket-key1"],k2=this.req.headers["sec-websocket-key2"];if(k1&&k2){var md5=crypto.createHash("md5");[k1,k2].forEach(function(k){var n=parseInt(k.replace(/[^\d]/g,"")),spaces=k.replace(/[^ ]/g,"").length;if(spaces===0||n%spaces!==0){self.log.warn("Invalid "+self.name+' key: "'+k+'".');self.end();return false}n/=spaces;md5.update(String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255))});md5.update(this.req.head.toString("binary"));try{this.socket.write(md5.digest("binary"),"binary")}catch(e){this.end()}}return true};WebSocket.prototype.payload=function(msgs){for(var i=0,l=msgs.length;i<l;i++){this.write(msgs[i])}return this};WebSocket.prototype.doClose=function(){this.socket.end()};function Parser(opts){this._maxBuffer=opts&&opts.maxBuffer||1e8;this._dataLength=0;this.buffer="";this.i=0}Parser.prototype.__proto__=EventEmitter.prototype;Parser.prototype.add=function(data){this._dataLength+=data.length;if(this._dataLength>this._maxBuffer){this.buffer="";this.emit("kick","max buffer size reached");return}this.buffer+=data;this.parse()};Parser.prototype.parse=function(){for(var i=this.i,chr,l=this.buffer.length;i<l;i++){chr=this.buffer[i];if(this.buffer.length==2&&this.buffer[1]=="\x00"){this.emit("close");this.buffer="";this.i=0;return}if(i===0){if(chr!="\x00")this.error("Bad framing. Expected null byte as first frame");else continue}if(chr=="�"){this.emit("data",this.buffer.substr(1,i-1));this.buffer=this.buffer.substr(i+1);this.i=0;return this.parse()}}};Parser.prototype.error=function(reason){this.buffer="";this.i=0;this.emit("error",reason);return this}}).call(exports,__webpack_require__(9),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var Long=__webpack_require__(611).Long,Double=__webpack_require__(612).Double,Timestamp=__webpack_require__(613).Timestamp,ObjectID=__webpack_require__(614).ObjectID,Symbol=__webpack_require__(615).Symbol,Code=__webpack_require__(616).Code,MinKey=__webpack_require__(617).MinKey,MaxKey=__webpack_require__(618).MaxKey,DBRef=__webpack_require__(619).DBRef,Binary=__webpack_require__(620).Binary,BinaryParser=__webpack_require__(621).BinaryParser,writeIEEE754=__webpack_require__(622).writeIEEE754,readIEEE754=__webpack_require__(622).readIEEE754;var isDate=function isDate(d){return typeof d==="object"&&Object.prototype.toString.call(d)==="[object Date]"};function BSON(){}BSON.BSON_INT32_MAX=2147483647;BSON.BSON_INT32_MIN=-2147483648;BSON.BSON_INT64_MAX=Math.pow(2,63)-1;BSON.BSON_INT64_MIN=-Math.pow(2,63);BSON.JS_INT_MAX=9007199254740992;BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long.fromNumber(9007199254740992);var JS_INT_MIN_LONG=Long.fromNumber(-9007199254740992);BSON.BSON_DATA_NUMBER=1;BSON.BSON_DATA_STRING=2;BSON.BSON_DATA_OBJECT=3;BSON.BSON_DATA_ARRAY=4;BSON.BSON_DATA_BINARY=5;BSON.BSON_DATA_UNDEFINED=6;BSON.BSON_DATA_OID=7;BSON.BSON_DATA_BOOLEAN=8;BSON.BSON_DATA_DATE=9;BSON.BSON_DATA_NULL=10;BSON.BSON_DATA_REGEXP=11;BSON.BSON_DATA_CODE=13;BSON.BSON_DATA_SYMBOL=14;BSON.BSON_DATA_CODE_W_SCOPE=15;BSON.BSON_DATA_INT=16;BSON.BSON_DATA_TIMESTAMP=17;BSON.BSON_DATA_LONG=18;BSON.BSON_DATA_MIN_KEY=255;BSON.BSON_DATA_MAX_KEY=127;BSON.BSON_BINARY_SUBTYPE_DEFAULT=0;BSON.BSON_BINARY_SUBTYPE_FUNCTION=1;BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;BSON.BSON_BINARY_SUBTYPE_UUID=3;BSON.BSON_BINARY_SUBTYPE_MD5=4;BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128;BSON.calculateObjectSize=function calculateObjectSize(object,serializeFunctions){var totalLength=4+1;if(Array.isArray(object)){for(var i=0;i<object.length;i++){totalLength+=calculateElement(i.toString(),object[i],serializeFunctions)}}else{if(object.toBSON){object=object.toBSON()}for(var key in object){totalLength+=calculateElement(key,object[key],serializeFunctions)}}return totalLength};function calculateElement(name,value,serializeFunctions){var isBuffer=typeof Buffer!=="undefined";if(value&&value.toBSON){value=value.toBSON()}switch(typeof value){case"string":return 1+(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1+4+(!isBuffer?numberOfBytes(value):Buffer.byteLength(value,"utf8"))+1;case"number":if(Math.floor(value)===value&&value>=BSON.JS_INT_MIN&&value<=BSON.JS_INT_MAX){if(value>=BSON.BSON_INT32_MIN&&value<=BSON.BSON_INT32_MAX){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(4+1)}else{return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(8+1)}}else{return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(8+1)}case"undefined":return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1;case"boolean":return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(1+1);case"object":if(value==null||value instanceof MinKey||value instanceof MaxKey||value["_bsontype"]=="MinKey"||value["_bsontype"]=="MaxKey"){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1}else if(value instanceof ObjectID||value["_bsontype"]=="ObjectID"){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(12+1)}else if(value instanceof Date||isDate(value)){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(8+1)}else if(typeof Buffer!=="undefined"&&Buffer.isBuffer(value)){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(1+4+1)+value.length}else if(value instanceof Long||value instanceof Double||value instanceof Timestamp||value["_bsontype"]=="Long"||value["_bsontype"]=="Double"||value["_bsontype"]=="Timestamp"){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(8+1)}else if(value instanceof Code||value["_bsontype"]=="Code"){if(value.scope!=null&&Object.keys(value.scope).length>0){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+4+4+(!isBuffer?numberOfBytes(value.code.toString()):Buffer.byteLength(value.code.toString(),"utf8"))+1+BSON.calculateObjectSize(value.scope,serializeFunctions)}else{return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+4+(!isBuffer?numberOfBytes(value.code.toString()):Buffer.byteLength(value.code.toString(),"utf8"))+1}}else if(value instanceof Binary||value["_bsontype"]=="Binary"){if(value.sub_type==Binary.SUBTYPE_BYTE_ARRAY){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(value.position+1+4+1+4)}else{return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+(value.position+1+4+1)}}else if(value instanceof Symbol||value["_bsontype"]=="Symbol"){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+((!isBuffer?numberOfBytes(value.value):Buffer.byteLength(value.value,"utf8"))+4+1+1)}else if(value instanceof DBRef||value["_bsontype"]=="DBRef"){var ordered_values={$ref:value.namespace,$id:value.oid};if(null!=value.db){ordered_values["$db"]=value.db}return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+BSON.calculateObjectSize(ordered_values,serializeFunctions)}else if(value instanceof RegExp||Object.prototype.toString.call(value)==="[object RegExp]"){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+(!isBuffer?numberOfBytes(value.source):Buffer.byteLength(value.source,"utf8"))+1+(value.global?1:0)+(value.ignoreCase?1:0)+(value.multiline?1:0)+1}else{return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+BSON.calculateObjectSize(value,serializeFunctions)+1}case"function":if(value instanceof RegExp||Object.prototype.toString.call(value)==="[object RegExp]"||String.call(value)=="[object RegExp]"){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+(!isBuffer?numberOfBytes(value.source):Buffer.byteLength(value.source,"utf8"))+1+(value.global?1:0)+(value.ignoreCase?1:0)+(value.multiline?1:0)+1}else{if(serializeFunctions&&value.scope!=null&&Object.keys(value.scope).length>0){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+4+4+(!isBuffer?numberOfBytes(value.toString()):Buffer.byteLength(value.toString(),"utf8"))+1+BSON.calculateObjectSize(value.scope,serializeFunctions)}else if(serializeFunctions){return(name!=null?(!isBuffer?numberOfBytes(name):Buffer.byteLength(name,"utf8"))+1:0)+1+4+(!isBuffer?numberOfBytes(value.toString()):Buffer.byteLength(value.toString(),"utf8"))+1}}}return 0}BSON.serializeWithBufferAndIndex=function serializeWithBufferAndIndex(object,checkKeys,buffer,index,serializeFunctions){serializeFunctions=serializeFunctions==null?false:serializeFunctions;var size=buffer.length;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;

buffer[index++]=size>>24&255;return serializeObject(object,checkKeys,buffer,index,serializeFunctions)-1};var serializeObject=function(object,checkKeys,buffer,index,serializeFunctions){if(object.toBSON){if(typeof object.toBSON!="function")throw new Error("toBSON is not a function");object=object.toBSON();if(object!=null&&typeof object!="object")throw new Error("toBSON function did not return an object")}if(Array.isArray(object)){for(var i=0;i<object.length;i++){index=packElement(i.toString(),object[i],checkKeys,buffer,index,serializeFunctions)}}else{if(object.toBSON){object=object.toBSON()}for(var key in object){if(key!="$db"&&key!="$ref"&&key!="$id"){BSON.checkKey(key,!checkKeys)}index=packElement(key,object[key],checkKeys,buffer,index,serializeFunctions)}}buffer[index++]=0;return index};var stringToBytes=function(str){var ch,st,re=[];for(var i=0;i<str.length;i++){ch=str.charCodeAt(i);st=[];do{st.push(ch&255);ch=ch>>8}while(ch);re=re.concat(st.reverse())}return re};var numberOfBytes=function(str){var ch,st,re=0;for(var i=0;i<str.length;i++){ch=str.charCodeAt(i);st=[];do{st.push(ch&255);ch=ch>>8}while(ch);re=re+st.length}return re};var writeToTypedArray=function(buffer,string,index){var bytes=stringToBytes(string);for(var i=0;i<bytes.length;i++){buffer[index+i]=bytes[i]}return bytes.length};var supportsBuffer=typeof Buffer!="undefined";var packElement=function(name,value,checkKeys,buffer,index,serializeFunctions){if(value&&value.toBSON){value=value.toBSON()}var startIndex=index;switch(typeof value){case"string":buffer[index++]=BSON.BSON_DATA_STRING;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var size=supportsBuffer?Buffer.byteLength(value)+1:numberOfBytes(value)+1;buffer[index+3]=size>>24&255;buffer[index+2]=size>>16&255;buffer[index+1]=size>>8&255;buffer[index]=size&255;index=index+4;supportsBuffer?buffer.write(value,index,"utf8"):writeToTypedArray(buffer,value,index);index=index+size-1;buffer[index++]=0;return index;case"number":if(Math.floor(value)===value&&value>=BSON.JS_INT_MIN&&value<=BSON.JS_INT_MAX){if(value>=BSON.BSON_INT32_MIN&&value<=BSON.BSON_INT32_MAX){buffer[index++]=BSON.BSON_DATA_INT;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;buffer[index++]=value&255;buffer[index++]=value>>8&255;buffer[index++]=value>>16&255;buffer[index++]=value>>24&255}else if(value>=BSON.JS_INT_MIN&&value<=BSON.JS_INT_MAX){buffer[index++]=BSON.BSON_DATA_NUMBER;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;writeIEEE754(buffer,value,index,"little",52,8);index=index+8}else{buffer[index++]=BSON.BSON_DATA_LONG;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var longVal=Long.fromNumber(value);var lowBits=longVal.getLowBits();var highBits=longVal.getHighBits();buffer[index++]=lowBits&255;buffer[index++]=lowBits>>8&255;buffer[index++]=lowBits>>16&255;buffer[index++]=lowBits>>24&255;buffer[index++]=highBits&255;buffer[index++]=highBits>>8&255;buffer[index++]=highBits>>16&255;buffer[index++]=highBits>>24&255}}else{buffer[index++]=BSON.BSON_DATA_NUMBER;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;writeIEEE754(buffer,value,index,"little",52,8);index=index+8}return index;case"undefined":buffer[index++]=BSON.BSON_DATA_NULL;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;return index;case"boolean":buffer[index++]=BSON.BSON_DATA_BOOLEAN;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;buffer[index++]=value?1:0;return index;case"object":if(value===null||value instanceof MinKey||value instanceof MaxKey||value["_bsontype"]=="MinKey"||value["_bsontype"]=="MaxKey"){if(value===null){buffer[index++]=BSON.BSON_DATA_NULL}else if(value instanceof MinKey){buffer[index++]=BSON.BSON_DATA_MIN_KEY}else{buffer[index++]=BSON.BSON_DATA_MAX_KEY}var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;return index}else if(value instanceof ObjectID||value["_bsontype"]=="ObjectID"){buffer[index++]=BSON.BSON_DATA_OID;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;supportsBuffer?buffer.write(value.id,index,"binary"):writeToTypedArray(buffer,value.id,index);index=index+12;return index}else if(value instanceof Date||isDate(value)){buffer[index++]=BSON.BSON_DATA_DATE;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var dateInMilis=Long.fromNumber(value.getTime());var lowBits=dateInMilis.getLowBits();var highBits=dateInMilis.getHighBits();buffer[index++]=lowBits&255;buffer[index++]=lowBits>>8&255;buffer[index++]=lowBits>>16&255;buffer[index++]=lowBits>>24&255;buffer[index++]=highBits&255;buffer[index++]=highBits>>8&255;buffer[index++]=highBits>>16&255;buffer[index++]=highBits>>24&255;return index}else if(typeof Buffer!=="undefined"&&Buffer.isBuffer(value)){buffer[index++]=BSON.BSON_DATA_BINARY;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var size=value.length;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;buffer[index++]=BSON.BSON_BINARY_SUBTYPE_DEFAULT;value.copy(buffer,index,0,size);index=index+size;return index}else if(value instanceof Long||value instanceof Timestamp||value["_bsontype"]=="Long"||value["_bsontype"]=="Timestamp"){buffer[index++]=value instanceof Long||value["_bsontype"]=="Long"?BSON.BSON_DATA_LONG:BSON.BSON_DATA_TIMESTAMP;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var lowBits=value.getLowBits();var highBits=value.getHighBits();buffer[index++]=lowBits&255;buffer[index++]=lowBits>>8&255;buffer[index++]=lowBits>>16&255;buffer[index++]=lowBits>>24&255;buffer[index++]=highBits&255;buffer[index++]=highBits>>8&255;buffer[index++]=highBits>>16&255;buffer[index++]=highBits>>24&255;return index}else if(value instanceof Double||value["_bsontype"]=="Double"){buffer[index++]=BSON.BSON_DATA_NUMBER;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;writeIEEE754(buffer,value,index,"little",52,8);index=index+8;return index}else if(value instanceof Code||value["_bsontype"]=="Code"){if(value.scope!=null&&Object.keys(value.scope).length>0){buffer[index++]=BSON.BSON_DATA_CODE_W_SCOPE;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var scopeSize=BSON.calculateObjectSize(value.scope,serializeFunctions);var functionString=value.code.toString();var codeSize=supportsBuffer?Buffer.byteLength(functionString)+1:numberOfBytes(functionString)+1;var totalSize=4+codeSize+scopeSize+4;buffer[index++]=totalSize&255;buffer[index++]=totalSize>>8&255;buffer[index++]=totalSize>>16&255;buffer[index++]=totalSize>>24&255;buffer[index++]=codeSize&255;buffer[index++]=codeSize>>8&255;buffer[index++]=codeSize>>16&255;buffer[index++]=codeSize>>24&255;supportsBuffer?buffer.write(functionString,index,"utf8"):writeToTypedArray(buffer,functionString,index);index=index+codeSize-1;buffer[index++]=0;var scopeObjectBuffer=supportsBuffer?new Buffer(scopeSize):new Uint8Array(new ArrayBuffer(scopeSize));serializeObject(value.scope,checkKeys,scopeObjectBuffer,0,serializeFunctions);var scopeDocSize=scopeSize;buffer[index++]=scopeDocSize&255;buffer[index++]=scopeDocSize>>8&255;buffer[index++]=scopeDocSize>>16&255;buffer[index++]=scopeDocSize>>24&255;supportsBuffer?scopeObjectBuffer.copy(buffer,index,0,scopeSize):buffer.set(scopeObjectBuffer,index);index=index+scopeDocSize-5;buffer[index++]=0;return index}else{buffer[index++]=BSON.BSON_DATA_CODE;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var functionString=value.code.toString();var size=supportsBuffer?Buffer.byteLength(functionString)+1:numberOfBytes(functionString)+1;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;supportsBuffer?buffer.write(functionString,index,"utf8"):writeToTypedArray(buffer,functionString,index);index=index+size-1;buffer[index++]=0;return index}}else if(value instanceof Binary||value["_bsontype"]=="Binary"){buffer[index++]=BSON.BSON_DATA_BINARY;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var data=value.value(true);var size=value.position;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;buffer[index++]=value.sub_type;if(value.sub_type==Binary.SUBTYPE_BYTE_ARRAY){buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255}supportsBuffer?data.copy(buffer,index,0,value.position):buffer.set(data,index);index=index+value.position;return index}else if(value instanceof Symbol||value["_bsontype"]=="Symbol"){buffer[index++]=BSON.BSON_DATA_SYMBOL;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var size=supportsBuffer?Buffer.byteLength(value.value)+1:numberOfBytes(value.value)+1;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;buffer.write(value.value,index,"utf8");index=index+size-1;buffer[index++]=0;return index}else if(value instanceof DBRef||value["_bsontype"]=="DBRef"){buffer[index++]=BSON.BSON_DATA_OBJECT;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var ordered_values={$ref:value.namespace,$id:value.oid};if(null!=value.db){ordered_values["$db"]=value.db}var size=BSON.calculateObjectSize(ordered_values,serializeFunctions);var endIndex=BSON.serializeWithBufferAndIndex(ordered_values,checkKeys,buffer,index,serializeFunctions);buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;buffer[endIndex++]=0;return endIndex}else if(value instanceof RegExp||Object.prototype.toString.call(value)==="[object RegExp]"){buffer[index++]=BSON.BSON_DATA_REGEXP;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;supportsBuffer?buffer.write(value.source,index,"utf8"):writeToTypedArray(buffer,value.source,index);index=index+(supportsBuffer?Buffer.byteLength(value.source):numberOfBytes(value.source));buffer[index++]=0;if(value.global)buffer[index++]=115;if(value.ignoreCase)buffer[index++]=105;if(value.multiline)buffer[index++]=109;buffer[index++]=0;return index}else{buffer[index++]=Array.isArray(value)?BSON.BSON_DATA_ARRAY:BSON.BSON_DATA_OBJECT;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var endIndex=serializeObject(value,checkKeys,buffer,index+4,serializeFunctions);var size=endIndex-index;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;return endIndex}case"function":if(value instanceof RegExp||Object.prototype.toString.call(value)==="[object RegExp]"||String.call(value)=="[object RegExp]"){buffer[index++]=BSON.BSON_DATA_REGEXP;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;buffer.write(value.source,index,"utf8");index=index+(supportsBuffer?Buffer.byteLength(value.source):numberOfBytes(value.source));buffer[index++]=0;if(value.global)buffer[index++]=115;if(value.ignoreCase)buffer[index++]=105;if(value.multiline)buffer[index++]=109;buffer[index++]=0;return index}else{if(serializeFunctions&&value.scope!=null&&Object.keys(value.scope).length>0){buffer[index++]=BSON.BSON_DATA_CODE_W_SCOPE;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var scopeSize=BSON.calculateObjectSize(value.scope,serializeFunctions);var functionString=value.toString();var codeSize=supportsBuffer?Buffer.byteLength(functionString)+1:numberOfBytes(functionString)+1;var totalSize=4+codeSize+scopeSize;buffer[index++]=totalSize&255;buffer[index++]=totalSize>>8&255;buffer[index++]=totalSize>>16&255;buffer[index++]=totalSize>>24&255;buffer[index++]=codeSize&255;buffer[index++]=codeSize>>8&255;buffer[index++]=codeSize>>16&255;buffer[index++]=codeSize>>24&255;supportsBuffer?buffer.write(functionString,index,"utf8"):writeToTypedArray(buffer,functionString,index);index=index+codeSize-1;buffer[index++]=0;var scopeObjectBuffer=new Buffer(scopeSize);serializeObject(value.scope,checkKeys,scopeObjectBuffer,0,serializeFunctions);var scopeDocSize=scopeSize-4;buffer[index++]=scopeDocSize&255;buffer[index++]=scopeDocSize>>8&255;buffer[index++]=scopeDocSize>>16&255;buffer[index++]=scopeDocSize>>24&255;scopeObjectBuffer.copy(buffer,index,0,scopeSize);index=index+scopeDocSize-5;buffer[index++]=0;return index}else if(serializeFunctions){buffer[index++]=BSON.BSON_DATA_CODE;var numberOfWrittenBytes=supportsBuffer?buffer.write(name,index,"utf8"):writeToTypedArray(buffer,name,index);index=index+numberOfWrittenBytes+1;buffer[index-1]=0;var functionString=value.toString();var size=supportsBuffer?Buffer.byteLength(functionString)+1:numberOfBytes(functionString)+1;buffer[index++]=size&255;buffer[index++]=size>>8&255;buffer[index++]=size>>16&255;buffer[index++]=size>>24&255;supportsBuffer?buffer.write(functionString,index,"utf8"):writeToTypedArray(buffer,functionString,index);index=index+size-1;buffer[index++]=0;return index}}}return index};BSON.serialize=function(object,checkKeys,asBuffer,serializeFunctions){if(object==null||typeof object!="object"||Array.isArray(object))throw new Error("Only javascript objects supported");var buffer=null;var size=BSON.calculateObjectSize(object,serializeFunctions);if(buffer=typeof Buffer!="undefined"){buffer=new Buffer(size);asBuffer=true}else if(typeof Uint8Array!="undefined"){buffer=new Uint8Array(new ArrayBuffer(size))}else{buffer=new Array(size)}BSON.serializeWithBufferAndIndex(object,checkKeys,buffer,0,serializeFunctions);return buffer};var functionCache=BSON.functionCache={};var table=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var crc32=function(string,start,end){var crc=0;var x=0;var y=0;crc=crc^-1;for(var i=start,iTop=end;i<iTop;i++){y=(crc^string[i])&255;x=table[y];crc=crc>>>8^x}return crc^-1};BSON.deserializeStream=function(data,startIndex,numberOfDocuments,documents,docStartIndex,options){options=options!=null?options:{};var index=startIndex;for(var i=0;i<numberOfDocuments;i++){var size=data[index]|data[index+1]<<8|data[index+2]<<16|data[index+3]<<24;options["index"]=index;documents[docStartIndex+i]=BSON.deserialize(data,options);index=index+size}return index};var isolateEvalWithHash=function(functionCache,hash,functionString,object){var value=null;if(functionCache[hash]==null){eval("value = "+functionString);functionCache[hash]=value}return functionCache[hash].bind(object)};var isolateEval=function(functionString){var value=null;eval("value = "+functionString);return value};var convertUint8ArrayToUtf8String=function(byteArray,startIndex,endIndex){return BinaryParser.decode_utf8(convertArraytoUtf8BinaryString(byteArray,startIndex,endIndex))};var convertArraytoUtf8BinaryString=function(byteArray,startIndex,endIndex){var result="";for(var i=startIndex;i<endIndex;i++){result=result+String.fromCharCode(byteArray[i])}return result};BSON.deserialize=function(buffer,options,isArray){options=options==null?{}:options;var evalFunctions=options["evalFunctions"]==null?false:options["evalFunctions"];var cacheFunctions=options["cacheFunctions"]==null?false:options["cacheFunctions"];var cacheFunctionsCrc32=options["cacheFunctionsCrc32"]==null?false:options["cacheFunctionsCrc32"];var promoteLongs=options["promoteLongs"]==null?true:options["promoteLongs"];if(buffer.length<5)throw new Error("corrupt bson message < 5 bytes long");var index=typeof options["index"]=="number"?options["index"]:0;var readCStyleString=function(){var i=index;while(buffer[i]!==0&&i<buffer.length){i++}if(i>=buffer.length)throw new Error("Bad BSON Document: illegal CString");var string=supportsBuffer&&Buffer.isBuffer(buffer)?buffer.toString("utf8",index,i):convertUint8ArrayToUtf8String(buffer,index,i);index=i+1;return string};var object=isArray?[]:{};var size=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(size<5||size>buffer.length)throw new Error("corrupt bson message");while(true){var elementType=buffer[index++];if(elementType==0)break;var name=readCStyleString();switch(elementType){case BSON.BSON_DATA_OID:var string=supportsBuffer&&Buffer.isBuffer(buffer)?buffer.toString("binary",index,index+12):convertArraytoUtf8BinaryString(buffer,index,index+12);object[name]=new ObjectID(string);index=index+12;break;case BSON.BSON_DATA_STRING:var stringSize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;object[name]=supportsBuffer&&Buffer.isBuffer(buffer)?buffer.toString("utf8",index,index+stringSize-1):convertUint8ArrayToUtf8String(buffer,index,index+stringSize-1);index=index+stringSize;break;case BSON.BSON_DATA_INT:object[name]=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;break;case BSON.BSON_DATA_NUMBER:object[name]=readIEEE754(buffer,index,"little",52,8);index=index+8;break;case BSON.BSON_DATA_DATE:var lowBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var highBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;object[name]=new Date(new Long(lowBits,highBits).toNumber());break;case BSON.BSON_DATA_BOOLEAN:object[name]=buffer[index++]==1;break;case BSON.BSON_DATA_UNDEFINED:case BSON.BSON_DATA_NULL:object[name]=null;break;case BSON.BSON_DATA_BINARY:var binarySize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var subType=buffer[index++];if(buffer["slice"]!=null){if(subType==Binary.SUBTYPE_BYTE_ARRAY){binarySize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24}object[name]=new Binary(buffer.slice(index,index+binarySize),subType)}else{var _buffer=typeof Uint8Array!="undefined"?new Uint8Array(new ArrayBuffer(binarySize)):new Array(binarySize);if(subType==Binary.SUBTYPE_BYTE_ARRAY){binarySize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24}for(var i=0;i<binarySize;i++){_buffer[i]=buffer[index+i]}object[name]=new Binary(_buffer,subType)}index=index+binarySize;break;case BSON.BSON_DATA_ARRAY:options["index"]=index;var objectSize=buffer[index]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24;object[name]=BSON.deserialize(buffer,options,true);index=index+objectSize;break;case BSON.BSON_DATA_OBJECT:options["index"]=index;var objectSize=buffer[index]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24;object[name]=BSON.deserialize(buffer,options,false);index=index+objectSize;break;case BSON.BSON_DATA_REGEXP:var source=readCStyleString();var regExpOptions=readCStyleString();var optionsArray=new Array(regExpOptions.length);for(var i=0;i<regExpOptions.length;i++){switch(regExpOptions[i]){case"m":optionsArray[i]="m";break;case"s":optionsArray[i]="g";break;case"i":optionsArray[i]="i";break}}object[name]=new RegExp(source,optionsArray.join(""));break;case BSON.BSON_DATA_LONG:var lowBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var highBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var long=new Long(lowBits,highBits);if(promoteLongs){object[name]=long.lessThanOrEqual(JS_INT_MAX_LONG)&&long.greaterThanOrEqual(JS_INT_MIN_LONG)?long.toNumber():long}else{object[name]=long}break;case BSON.BSON_DATA_SYMBOL:var stringSize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;object[name]=new Symbol(buffer.toString("utf8",index,index+stringSize-1));index=index+stringSize;break;case BSON.BSON_DATA_TIMESTAMP:var lowBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var highBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;object[name]=new Timestamp(lowBits,highBits);break;case BSON.BSON_DATA_MIN_KEY:object[name]=new MinKey;break;case BSON.BSON_DATA_MAX_KEY:object[name]=new MaxKey;break;case BSON.BSON_DATA_CODE:var stringSize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var functionString=supportsBuffer&&Buffer.isBuffer(buffer)?buffer.toString("utf8",index,index+stringSize-1):convertUint8ArrayToUtf8String(buffer,index,index+stringSize-1);if(evalFunctions){var value=null;if(cacheFunctions){var hash=cacheFunctionsCrc32?crc32(functionString):functionString;object[name]=isolateEvalWithHash(functionCache,hash,functionString,object)}else{object[name]=isolateEval(functionString)}}else{object[name]=new Code(functionString,{})}index=index+stringSize;break;case BSON.BSON_DATA_CODE_W_SCOPE:var totalSize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var stringSize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;var functionString=supportsBuffer&&Buffer.isBuffer(buffer)?buffer.toString("utf8",index,index+stringSize-1):convertUint8ArrayToUtf8String(buffer,index,index+stringSize-1);index=index+stringSize;options["index"]=index;var objectSize=buffer[index]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24;var scopeObject=BSON.deserialize(buffer,options,false);index=index+objectSize;if(evalFunctions){var value=null;if(cacheFunctions){var hash=cacheFunctionsCrc32?crc32(functionString):functionString;object[name]=isolateEvalWithHash(functionCache,hash,functionString,object)}else{object[name]=isolateEval(functionString)}object[name].scope=scopeObject}else{object[name]=new Code(functionString,scopeObject)}break}}if(object["$id"]!=null)object=new DBRef(object["$ref"],object["$id"],object["$db"]);return object};BSON.checkKey=function checkKey(key,dollarsAndDotsOk){if(!key.length)return;if(!!~key.indexOf("\x00")){throw Error("key "+key+" must not contain null bytes")}if(!dollarsAndDotsOk){if("$"==key[0]){throw Error("key "+key+" must not start with '$'")}else if(!!~key.indexOf(".")){throw Error("key "+key+" must not contain '.'")}}};BSON.prototype.deserialize=function(data,options){return BSON.deserialize(data,options)};BSON.prototype.deserializeStream=function(data,startIndex,numberOfDocuments,documents,docStartIndex,options){return BSON.deserializeStream(data,startIndex,numberOfDocuments,documents,docStartIndex,options)};BSON.prototype.serialize=function(object,checkKeys,asBuffer,serializeFunctions){return BSON.serialize(object,checkKeys,asBuffer,serializeFunctions)};BSON.prototype.calculateObjectSize=function(object,serializeFunctions){return BSON.calculateObjectSize(object,serializeFunctions)};BSON.prototype.serializeWithBufferAndIndex=function(object,checkKeys,buffer,startIndex,serializeFunctions){return BSON.serializeWithBufferAndIndex(object,checkKeys,buffer,startIndex,serializeFunctions)};exports.Code=Code;exports.Symbol=Symbol;exports.BSON=BSON;exports.DBRef=DBRef;exports.Binary=Binary;exports.ObjectID=ObjectID;exports.Long=Long;exports.Timestamp=Timestamp;exports.Double=Double;exports.MinKey=MinKey;exports.MaxKey=MaxKey}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process){module.exports=Readable;var isArray=__webpack_require__(648);var Buffer=__webpack_require__(53).Buffer;Readable.ReadableState=ReadableState;var EE=__webpack_require__(120).EventEmitter;if(!EE.listenerCount)EE.listenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=__webpack_require__(316);var util=__webpack_require__(661);util.inherits=__webpack_require__(662);var StringDecoder;util.inherits(Readable,Stream);function ReadableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=false;this.ended=false;this.endEmitted=false;this.reading=false;this.calledRead=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.objectMode=!!options.objectMode;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(649).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;Stream.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(typeof chunk==="string"&&!state.objectMode){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=new Buffer(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(chunk===null||chunk===undefined){state.reading=false;if(!state.ended)onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{if(state.decoder&&!addToFront&&!encoding)chunk=state.decoder.write(chunk);state.length+=state.objectMode?1:chunk.length;if(addToFront){state.buffer.unshift(chunk)}else{state.reading=false;state.buffer.push(chunk)}if(state.needReadable)emitReadable(stream);maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(649).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc};var MAX_HWM=8388608;function roundUpToNextPowerOf2(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(n===null||isNaN(n)){if(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length}if(n<=0)return 0;if(n>state.highWaterMark)state.highWaterMark=roundUpToNextPowerOf2(n);if(n>state.length){if(!state.ended){state.needReadable=true;return 0}else return state.length}return n}Readable.prototype.read=function(n){var state=this._readableState;state.calledRead=true;var nOrig=n;var ret;if(typeof n!=="number"||n>0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){ret=null;if(state.length>0&&state.decoder){ret=fromList(n,state);state.length-=ret.length}if(state.length===0)endReadable(this);return ret}var doRead=state.needReadable;if(state.length-n<=state.highWaterMark)doRead=true;if(state.ended||state.reading)doRead=false;if(doRead){state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false}if(doRead&&!state.reading)n=howMuchToRead(nOrig,state);if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}state.length-=n;if(state.length===0&&!state.ended)state.needReadable=true;

if(state.ended&&!state.endEmitted&&state.length===0)endReadable(this);return ret};function chunkInvalid(state,chunk){var er=null;if(!Buffer.isBuffer(chunk)&&"string"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;if(state.length>0)emitReadable(stream);else endReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(state.emittedReadable)return;state.emittedReadable=true;if(state.sync)process.nextTick(function(){emitReadable_(stream)});else emitReadable_(stream)}function emitReadable_(stream){stream.emit("readable")}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(function(){maybeReadMore_(stream,state)})}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){if(readable!==src)return;cleanup()}function onend(){dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);function cleanup(){dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);if(!dest._writableState||dest._writableState.needDrain)ondrain()}function onerror(er){unpipe();dest.removeListener("error",onerror);if(EE.listenerCount(dest,"error")===0)dest.emit("error",er)}if(!dest._events||!dest._events.error)dest.on("error",onerror);else if(isArray(dest._events.error))dest._events.error.unshift(onerror);else dest._events.error=[onerror,dest._events.error];function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){this.on("readable",pipeOnReadable);state.flowing=true;process.nextTick(function(){flow(src)})}return dest};function pipeOnDrain(src){return function(){var dest=this;var state=src._readableState;state.awaitDrain--;if(state.awaitDrain===0)flow(src)}}function flow(src){var state=src._readableState;var chunk;state.awaitDrain=0;function write(dest,i,list){var written=dest.write(chunk);if(false===written){state.awaitDrain++}}while(state.pipesCount&&null!==(chunk=src.read())){if(state.pipesCount===1)write(state.pipes,0,null);else forEach(state.pipes,write);src.emit("data",chunk);if(state.awaitDrain>0)return}if(state.pipesCount===0){state.flowing=false;if(EE.listenerCount(src,"data")>0)emitDataEvents(src);return}state.ranOut=true}function pipeOnReadable(){if(this._readableState.ranOut){this._readableState.ranOut=false;flow(this)}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;this.removeListener("readable",pipeOnReadable);state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;this.removeListener("readable",pipeOnReadable);state.flowing=false;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"&&!this._readableState.flowing)emitDataEvents(this);if(ev==="readable"&&this.readable){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){this.read(0)}else if(state.length){emitReadable(this,state)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.resume=function(){emitDataEvents(this);this.read(0);this.emit("resume")};Readable.prototype.pause=function(){emitDataEvents(this,true);this.emit("pause")};function emitDataEvents(stream,startPaused){var state=stream._readableState;if(state.flowing){throw new Error("Cannot switch to old mode now.")}var paused=startPaused||false;var readable=false;stream.readable=true;stream.pipe=Stream.prototype.pipe;stream.on=stream.addListener=Stream.prototype.on;stream.on("readable",function(){readable=true;var c;while(!paused&&null!==(c=stream.read()))stream.emit("data",c);if(c===null){readable=false;stream._readableState.needReadable=true}});stream.pause=function(){paused=true;this.emit("pause")};stream.resume=function(){paused=false;if(readable)process.nextTick(function(){stream.emit("readable")});else this.read(0);this.emit("resume")};stream.emit("readable")}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(typeof stream[i]==="function"&&typeof this[i]==="undefined"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){if(stringMode)ret=list.join("");else ret=Buffer.concat(list,length);list.length=0}else{if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n)}else if(n===list[0].length){ret=list.shift()}else{if(stringMode)ret="";else ret=new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=Math.min(n-c,buf.length);if(stringMode)ret+=buf.slice(0,cpy);else buf.copy(ret,c,0,cpy);if(cpy<buf.length)list[0]=buf.slice(cpy);else list.shift();c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");if(!state.endEmitted&&state.calledRead){state.ended=true;process.nextTick(function(){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}})}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){module.exports=Writable;var Buffer=__webpack_require__(53).Buffer;Writable.WritableState=WritableState;var util=__webpack_require__(661);util.inherits=__webpack_require__(662);var Stream=__webpack_require__(316);util.inherits(Writable,Stream);function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb}function WritableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024;this.objectMode=!!options.objectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.buffer=[];this.errorEmitted=false}function Writable(options){var Duplex=__webpack_require__(571);if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function writeAfterEnd(stream,state,cb){var er=new Error("write after end");stream.emit("error",er);process.nextTick(function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=true;if(!Buffer.isBuffer(chunk)&&"string"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er);process.nextTick(function(){cb(er)});valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(typeof encoding==="function"){cb=encoding;encoding=null}if(Buffer.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=function(){};if(state.ended)writeAfterEnd(this,state,cb);else if(validChunk(this,state,chunk,cb))ret=writeOrBuffer(this,state,chunk,encoding,cb);return ret};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=new Buffer(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing)state.buffer.push(new WriteReq(chunk,encoding,cb));else doWrite(stream,state,len,chunk,encoding,cb);return ret}function doWrite(stream,state,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){if(sync)process.nextTick(function(){cb(er)});else cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);if(!finished&&!state.bufferProcessing&&state.buffer.length)clearBuffer(stream,state);if(sync){process.nextTick(function(){afterWrite(stream,state,finished,cb)})}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);cb();if(finished)finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;for(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c];var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,len,chunk,encoding,cb);if(state.writing){c++;break}}state.bufferProcessing=false;if(c<state.buffer.length)state.buffer=state.buffer.slice(c);else state.buffer.length=0}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(typeof chunk!=="undefined"&&chunk!==null)this.write(chunk,encoding);if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(stream,state){return state.ending&&state.length===0&&!state.finished&&!state.writing}function finishMaybe(stream,state){var need=needFinish(stream,state);if(need){state.finished=true;stream.emit("finish")}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var util=__webpack_require__(661);util.inherits=__webpack_require__(662);var Readable=__webpack_require__(569);var Writable=__webpack_require__(570);util.inherits(Duplex,Readable);forEach(objectKeys(Writable.prototype),function(method){if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]});function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;process.nextTick(this.end.bind(this))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){module.exports=Transform;var Duplex=__webpack_require__(571);var util=__webpack_require__(661);util.inherits=__webpack_require__(662);util.inherits(Transform,Duplex);function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(data!==null&&data!==undefined)stream.push(data);if(cb)cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);var ts=this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;this.once("finish",function(){if("function"===typeof this._flush)this._flush(function(er){done(stream,er)});else done(stream)})}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var rs=stream._readableState;var ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}},function(module,exports,__webpack_require__){module.exports=PassThrough;var Transform=__webpack_require__(572);var util=__webpack_require__(661);util.inherits=__webpack_require__(662);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(623);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;var storage;if(typeof chrome!=="undefined"&&typeof chrome.storage!=="undefined")storage=chrome.storage.local;else storage=localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){storage.removeItem("debug")}else{storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(624);exports.encode=exports.stringify=__webpack_require__(625)},function(module,exports,__webpack_require__){var map={"./application":161,"./application.js":161,"./express":99,"./express.js":99,"./middleware/init":384,"./middleware/init.js":384,"./middleware/query":165,"./middleware/query.js":165,"./request":163,"./request.js":163,"./response":164,"./response.js":164,"./router/index":304,"./router/index.js":304,"./router/layer":382,"./router/layer.js":382,"./router/route":162,"./router/route.js":162,"./utils":383,"./utils.js":383,"./view":385,"./view.js":385};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){return map[req]||function(){throw new Error("Cannot find module '"+req+"'.")}()}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=576},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){(function(process){module.exports=minimatch;minimatch.Minimatch=Minimatch;var isWindows=false;if(typeof process!=="undefined"&&process.platform==="win32")isWindows=true;var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},expand=__webpack_require__(655),qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce(function(set,c){set[c]=true;return set},{})}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options)}}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach(function(k){t[k]=b[k]});Object.keys(a).forEach(function(k){t[k]=a[k]});return t}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};return m};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch};function minimatch(p,pattern,options){if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false}if(pattern.trim()==="")return p==="";return new Minimatch(pattern,options).match(p)}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options)}if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};pattern=pattern.trim();if(isWindows)pattern=pattern.split("\\").join("/");this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=console.error;this.debug(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit)});this.debug(this.pattern,set);set=set.map(function(s,si,set){return s.map(this.parse,this)},this);this.debug(this.pattern,set);set=set.filter(function(s){return-1===s.indexOf(false)});this.debug(this.pattern,set);this.set=set}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern,negate=false,options=this.options,negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch)options=this.options;else options={}}pattern=typeof pattern==="undefined"?this.pattern:pattern;if(typeof pattern==="undefined"){throw new Error("undefined pattern")}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern]}return expand(pattern)}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){var options=this.options;if(!options.noglobstar&&pattern==="**")return GLOBSTAR;if(pattern==="")return"";var re="",hasMagic=!!options.nocase,escaping=false,patternListStack=[],plType,stateChar,inClass=false,reClassStart=-1,classStart=-1,patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break}self.debug("clearStateChar %j %j",stateChar,re);stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug("%s	%s %s %j",pattern,i,re,c);if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue}SWITCH:switch(c){case"/":return false;case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",pattern,i,re,c);if(inClass){this.debug("  in class");if(c==="!"&&i===classStart+1)c="^";re+=c;continue}self.debug("call clearStateChar %j",stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}plType=stateChar;patternListStack.push({type:plType,start:i-1,reStart:re.length});re+=stateChar==="!"?"(?:(?!":"(?:";this.debug("plType %j %j",stateChar,re);stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar();hasMagic=true;re+=")";plType=patternListStack.pop().type;switch(plType){case"!":re+="[^/]*?)";break;case"?":case"+":case"*":re+=plType;case"@":break}continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue}clearStateChar();re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue}if(inClass){var cs=pattern.substring(classStart+1,i);try{new RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]";hasMagic=hasMagic||sp[1];inClass=false;continue}}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\"}re+=c}}if(inClass){var cs=pattern.substr(classStart+1),sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1]}var pl;while(pl=patternListStack.pop()){var tail=re.slice(pl.reStart+3);tail=tail.replace(/((?:\\{2})*)(\\?)\|/g,function(_,$1,$2){if(!$2){$2="\\"}return $1+$1+$2+"|"});this.debug("tail=%j\n   %s",tail,tail);var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar();if(escaping){re+="\\\\"}var addPatternStart=false;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=true}if(re!==""&&hasMagic)re="(?=.)"+re;if(addPatternStart)re=patternStart+re;if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?"i":"",regExp=new RegExp("^"+re+"$",flags);regExp._glob=pattern;regExp._src=re;return regExp}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length)return this.regexp=false;var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot,flags=options.nocase?"i":"";var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src}).join("\\/")}).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{return this.regexp=new RegExp(re,flags)}catch(ex){return this.regexp=false}}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f)});if(mm.options.nonull&&!list.length){list.push(pattern)}return list};Minimatch.prototype.match=match;function match(f,partial){this.debug("match",f,this.pattern);if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(isWindows)f=f.split("\\").join("/");f=f.split(slashSplit);this.debug(this.pattern,"split",f);var set=this.set;this.debug(this.pattern,"set",set);var filename;for(var i=f.length-1;i>=0;i--){filename=f[i];if(filename)break}for(var i=0,l=set.length;i<l;i++){var pattern=set[i],file=f;if(options.matchBase&&pattern.length===1){file=[filename]}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{"this":this,file:file,pattern:pattern});this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var p=pattern[pi],f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi,pr=pi+1;if(pr===pl){this.debug("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false}return true}WHILE:while(fr<fl){var swallowee=file[fr];this.debug("\nglobstar while",file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug("globstar found match!",fr,fl,swallowee);return true}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){this.debug("dot detected!",file,fr,pattern,pr);break WHILE}this.debug("globstar swallow a segment, and continue");fr++}}if(partial){this.debug("\n>>> no match, partial?",file,fr,pattern,pr);if(fr===fl)return true}return false}var hit;if(typeof p==="string"){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase()}else{hit=f===p}this.debug("string match",p,f,hit)}else{hit=f.match(p);this.debug("pattern match",p,f,hit)}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==="";return emptyFileEnd}throw new Error("wtf?")};function globUnescape(s){return s.replace(/\\(.)/g,"$1")}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){var wrappy=__webpack_require__(663);var reqs=Object.create(null);var once=__webpack_require__(580);module.exports=wrappy(inflight);function inflight(key,cb){if(reqs[key]){reqs[key].push(cb);return null}else{reqs[key]=[cb];return makeres(key)}}function makeres(key){return once(function RES(){var cbs=reqs[key];var len=cbs.length;var args=slice(arguments);for(var i=0;i<len;i++){cbs[i].apply(null,args)}if(cbs.length>len){cbs.splice(0,len);process.nextTick(function(){RES.apply(null,args)})}else{delete reqs[key]}})}function slice(args){var length=args.length;var array=[];for(var i=0;i<length;i++)array[i]=args[i];return array}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var wrappy=__webpack_require__(664);module.exports=wrappy(once);once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true})});function once(fn){var f=function(){if(f.called)return f.value;f.called=true;return f.value=fn.apply(this,arguments)};f.called=false;return f}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global){"use strict";var convertBase,decimal,noConflict,crypto=global["crypto"],external=true,id=0,mathfloor=Math.floor,mathpow=Math.pow,outOfRange,toString=Object.prototype.toString,BASE=1e7,LOGBASE=7,NUMERALS="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",P={},EXP_LIMIT=9e15,MAX_DIGITS=1e9,INT_POW_LIMIT=3e3,LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058";

P["absoluteValue"]=P["abs"]=function(){var x=new this["constructor"](this);if(x["s"]<0){x["s"]=1}return rnd(x)};P["ceil"]=function(){return rnd(new this["constructor"](this),this["e"]+1,2)};P["comparedTo"]=P["cmp"]=function(y,b){var a,x=this,xc=x["c"],yc=(id=-id,y=new x["constructor"](y,b),y["c"]),i=x["s"],j=y["s"],k=x["e"],l=y["e"];if(!i||!j){return null}a=xc&&!xc[0];b=yc&&!yc[0];if(a||b){return a?b?0:-j:i}if(i!=j){return i}a=i<0;if(!xc||!yc){return k==l?0:!xc^a?1:-1}if(k!=l){return k>l^a?1:-1}for(i=-1,j=(k=xc.length)<(l=yc.length)?k:l;++i<j;){if(xc[i]!=yc[i]){return xc[i]>yc[i]^a?1:-1}}return k==l?0:k>l^a?1:-1};P["decimalPlaces"]=P["dp"]=function(){var c,v,n=null;if(c=this["c"]){n=((v=c.length-1)-mathfloor(this["e"]/LOGBASE))*LOGBASE;if(v=c[v]){for(;v%10==0;v/=10,n--);}if(n<0){n=0}}return n};P["dividedBy"]=P["div"]=function(y,b){id=2;return div(this,new this["constructor"](y,b))};P["dividedToIntegerBy"]=P["divToInt"]=function(y,b){var x=this,Decimal=x["constructor"];id=18;return rnd(div(x,new Decimal(y,b),0,1,1),Decimal["precision"],Decimal["rounding"])};P["equals"]=P["eq"]=function(n,b){id=3;return this["cmp"](n,b)===0};P["exponential"]=P["exp"]=function(){return exp(this)};P["floor"]=function(){return rnd(new this["constructor"](this),this["e"]+1,3)};P["greaterThan"]=P["gt"]=function(n,b){id=4;return this["cmp"](n,b)>0};P["greaterThanOrEqualTo"]=P["gte"]=function(n,b){id=5;b=this["cmp"](n,b);return b==1||b===0};P["isFinite"]=function(){return!!this["c"]};P["isInteger"]=P["isInt"]=function(){return!!this["c"]&&mathfloor(this["e"]/LOGBASE)>this["c"].length-2};P["isNaN"]=function(){return!this["s"]};P["isNegative"]=P["isNeg"]=function(){return this["s"]<0};P["isZero"]=function(){return!!this["c"]&&this["c"][0]==0};P["lessThan"]=P["lt"]=function(n,b){id=6;return this["cmp"](n,b)<0};P["lessThanOrEqualTo"]=P["lte"]=function(n,b){id=7;b=this["cmp"](n,b);return b==-1||b===0};P["logarithm"]=P["log"]=function(base,b){var base10,c,denom,i,inf,num,sd,sd10,r,arg=this,Decimal=arg["constructor"],pr=Decimal["precision"],rm=Decimal["rounding"],guard=5;if(base==null){base=new Decimal(10);base10=true}else{id=15;base=new Decimal(base,b);c=base["c"];if(base["s"]<0||!c||!c[0]||!base["e"]&&c[0]==1&&c.length==1){return new Decimal(NaN)}base10=base["eq"](10)}c=arg["c"];if(arg["s"]<0||!c||!c[0]||!arg["e"]&&c[0]==1&&c.length==1){return new Decimal(c&&!c[0]?-1/0:arg["s"]!=1?NaN:c?0:1/0)}inf=base10&&(i=c[0],c.length>1||i!=1&&i!=10&&i!=100&&i!=1e3&&i!=1e4&&i!=1e5&&i!=1e6);external=false;sd=pr+guard;sd10=sd+10;num=ln(arg,sd);if(base10){if(sd10>LN10.length){ifExceptionsThrow(Decimal,1,sd10,"log")}denom=new Decimal(LN10.slice(0,sd10))}else{denom=ln(base,sd)}r=div(num,denom,sd,1);if(checkRoundingDigits(r["c"],i=pr,rm)){do{sd+=10;num=ln(arg,sd);if(base10){sd10=sd+10;if(sd10>LN10.length){ifExceptionsThrow(Decimal,1,sd10,"log")}denom=new Decimal(LN10.slice(0,sd10))}else{denom=ln(base,sd)}r=div(num,denom,sd,1);if(!inf){if(+coefficientToString(r["c"]).slice(i+1,i+15)+1==1e14){r=rnd(r,pr+1,0)}break}}while(checkRoundingDigits(r["c"],i+=10,rm))}external=true;return rnd(r,pr,rm)};P["minus"]=function(y,b){var t,i,j,xLTy,x=this,Decimal=x["constructor"],a=x["s"];id=8;y=new Decimal(y,b);b=y["s"];if(!a||!b){return new Decimal(NaN)}if(a!=b){y["s"]=-b;return x["plus"](y)}var xc=x["c"],yc=y["c"],e=mathfloor(y["e"]/LOGBASE),k=mathfloor(x["e"]/LOGBASE),pr=Decimal["precision"],rm=Decimal["rounding"];if(!k||!e){if(!xc||!yc){return xc?(y["s"]=-b,y):new Decimal(yc?x:NaN)}if(!xc[0]||!yc[0]){x=yc[0]?(y["s"]=-b,y):new Decimal(xc[0]?x:rm==3?-0:0);return external?rnd(x,pr,rm):x}}xc=xc.slice();i=xc.length;if(a=k-e){if(xLTy=a<0){a=-a;t=xc;i=yc.length}else{e=k;t=yc}if((k=Math.ceil(pr/LOGBASE))>i){i=k}if(a>(i+=2)){a=i;t.length=1}t.reverse();for(b=a;b--;t.push(0));t.reverse()}else{if(xLTy=i<(j=yc.length)){j=i}for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}}if(xLTy){t=xc,xc=yc,yc=t;y["s"]=-y["s"]}if((b=-((j=xc.length)-yc.length))>0){for(;b--;xc[j++]=0);}for(k=BASE-1,b=yc.length;b>a;){if(xc[--b]<yc[b]){for(i=b;i&&!xc[--i];xc[i]=k);--xc[i];xc[b]+=BASE}xc[b]-=yc[b]}for(;xc[--j]==0;xc.pop());for(;xc[0]==0;xc.shift(),--e);if(!xc[0]){xc=[e=0];y["s"]=rm==3?-1:1}y["c"]=xc;for(a=1,b=xc[0];b>=10;b/=10,a++);y["e"]=a+e*LOGBASE-1;return external?rnd(y,pr,rm):y};P["modulo"]=P["mod"]=function(y,b){var n,q,x=this,Decimal=x["constructor"],m=Decimal["modulo"];id=9;y=new Decimal(y,b);b=y["s"];n=!x["c"]||!b||y["c"]&&!y["c"][0];if(n||!y["c"]||x["c"]&&!x["c"][0]){return n?new Decimal(NaN):rnd(new Decimal(x),Decimal["precision"],Decimal["rounding"])}external=false;if(m==9){y["s"]=1;q=div(x,y,0,3,1);y["s"]=b;q["s"]*=b}else{q=div(x,y,0,m,1)}q=q["times"](y);external=true;return x["minus"](q)};P["naturalLogarithm"]=P["ln"]=function(){return ln(this)};P["negated"]=P["neg"]=function(){var x=new this["constructor"](this);x["s"]=-x["s"]||null;return rnd(x)};P["plus"]=function(y,b){var t,x=this,Decimal=x["constructor"],a=x["s"];id=10;y=new Decimal(y,b);b=y["s"];if(!a||!b){return new Decimal(NaN)}if(a!=b){y["s"]=-b;return x["minus"](y)}var xc=x["c"],yc=y["c"],e=mathfloor(y["e"]/LOGBASE),k=mathfloor(x["e"]/LOGBASE),pr=Decimal["precision"],rm=Decimal["rounding"];if(!k||!e){if(!xc||!yc){return new Decimal(a/0)}if(!xc[0]||!yc[0]){x=yc[0]?y:new Decimal(xc[0]?x:a*0);return external?rnd(x,pr,rm):x}}xc=xc.slice();if(a=k-e){if(a<0){a=-a;t=xc;b=yc.length}else{e=k;t=yc;b=xc.length}if((k=Math.ceil(pr/LOGBASE))>b){b=k}if(a>++b){a=b;t.length=1}for(t.reverse();a--;t.push(0));t.reverse()}if(xc.length-yc.length<0){t=yc,yc=xc,xc=t}for(a=yc.length,b=0,k=BASE;a;xc[a]%=k){b=(xc[--a]=xc[a]+yc[a]+b)/k|0}if(b){xc.unshift(b);++e}for(a=xc.length;xc[--a]==0;xc.pop());y["c"]=xc;for(a=1,b=xc[0];b>=10;b/=10,a++);y["e"]=a+e*LOGBASE-1;return external?rnd(y,pr,rm):y};P["precision"]=P["sd"]=function(z){var n=null,x=this;if(z!=n&&z!==!!z&&z!==1&&z!==0){ifExceptionsThrow(x["constructor"],"argument",z,"precision",1)}if(x["c"]){n=getCoeffLength(x["c"]);if(z&&x["e"]+1>n){n=x["e"]+1}}return n};P["round"]=function(){var x=this,Decimal=x["constructor"];return rnd(new Decimal(x),x["e"]+1,Decimal["rounding"])};P["squareRoot"]=P["sqrt"]=function(){var m,n,sd,r,rep,t,x=this,c=x["c"],s=x["s"],e=x["e"],Decimal=x["constructor"],half=new Decimal(.5);if(s!==1||!c||!c[0]){return new Decimal(!s||s<0&&(!c||c[0])?NaN:c?x:1/0)}external=false;s=Math.sqrt(+x);if(s==0||s==1/0){n=coefficientToString(c);if((n.length+e)%2==0){n+="0"}s=Math.sqrt(n);e=mathfloor((e+1)/2)-(e<0||e%2);if(s==1/0){n="1e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new Decimal(n)}else{r=new Decimal(s.toString())}sd=(e=Decimal["precision"])+3;for(;;){t=r;r=half["times"](t["plus"](div(x,t,sd+2,1)));if(coefficientToString(t["c"]).slice(0,sd)===(n=coefficientToString(r["c"])).slice(0,sd)){n=n.slice(sd-3,sd+1);if(n=="9999"||!rep&&n=="4999"){if(!rep){rnd(t,e+1,0);if(t["times"](t)["eq"](x)){r=t;break}}sd+=4;rep=1}else{if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){rnd(r,e+1,1);m=!r["times"](r)["eq"](x)}break}}}external=true;return rnd(r,e,Decimal["rounding"],m)};P["times"]=function(y,b){var c,e,x=this,Decimal=x["constructor"],xc=x["c"],yc=(id=11,y=new Decimal(y,b),y["c"]),i=mathfloor(x["e"]/LOGBASE),j=mathfloor(y["e"]/LOGBASE),a=x["s"];b=y["s"];y["s"]=a==b?1:-1;if(!i&&(!xc||!xc[0])||!j&&(!yc||!yc[0])){return new Decimal(!a||!b||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc?NaN:!xc||!yc?y["s"]/0:y["s"]*0)}e=i+j;a=xc.length;b=yc.length;if(a<b){c=xc,xc=yc,yc=c;j=a,a=b,b=j}for(j=a+b,c=[];j--;c.push(0));for(i=b-1;i>-1;i--){b=0;for(j=a+i;j>i;){b=c[j]+yc[i]*xc[j-i-1]+b;c[j--]=b%BASE|0;b=b/BASE|0}c[j]=(c[j]+b)%BASE|0}if(b){++e}else if(!c[0]){c.shift()}for(j=c.length;!c[--j];c.pop());y["c"]=c;for(a=1,b=c[0];b>=10;b/=10,a++);y["e"]=a+e*LOGBASE-1;return external?rnd(y,Decimal["precision"],Decimal["rounding"]):y};P["toDecimalPlaces"]=P["toDP"]=function(dp,rm){var x=this;x=new x["constructor"](x);return dp==null||!checkArg(x,dp,"toDP")?x:rnd(x,(dp|0)+x["e"]+1,checkRM(x,rm,"toDP"))};P["toExponential"]=function(dp,rm){var x=this;return x["c"]?format(x,dp!=null&&checkArg(x,dp,"toExponential")?dp|0:null,dp!=null&&checkRM(x,rm,"toExponential"),1):x.toString()};P["toFixed"]=function(dp,rm){var str,x=this,Decimal=x["constructor"],neg=Decimal["toExpNeg"],pos=Decimal["toExpPos"];if(dp!=null){dp=checkArg(x,dp,str="toFixed")?x["e"]+(dp|0):null;rm=checkRM(x,rm,str)}Decimal["toExpNeg"]=-(Decimal["toExpPos"]=1/0);if(dp==null||!x["c"]){str=x.toString()}else{str=format(x,dp,rm);if(x["s"]<0&&x["c"]){if(!x["c"][0]){str=str.replace("-","")}else if(str.indexOf("-")<0){str="-"+str}}}Decimal["toExpNeg"]=neg;Decimal["toExpPos"]=pos;return str};P["toFormat"]=function(dp,rm){var x=this;if(!x["c"]){return x.toString()}var i,isNeg=x["s"]<0,f=x["constructor"]["format"],groupSeparator=f["groupSeparator"],g1=+f["groupSize"],g2=+f["secondaryGroupSize"],arr=x.toFixed(dp,rm).split("."),intPart=arr[0],fractionPart=arr[1],intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2){len-=(i=g1,g1=g2,g2=i)}if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1){intPart+=groupSeparator+intDigits.substr(i,g1)}if(g2>0){intPart+=groupSeparator+intDigits.slice(i)}if(isNeg){intPart="-"+intPart}}return fractionPart?intPart+f["decimalSeparator"]+((g2=+f["fractionGroupSize"])?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+f["fractionGroupSeparator"]):fractionPart):intPart};P["toFraction"]=function(maxD){var d0,d2,e,frac,n,n0,p,q,x=this,Decimal=x["constructor"],n1=d0=new Decimal(Decimal["ONE"]),d1=n0=new Decimal(0),xc=x["c"],d=new Decimal(d1);if(!xc){return x.toString()}e=d["e"]=getCoeffLength(xc)-x["e"]-1;d["c"][0]=mathpow(10,(p=e%LOGBASE)<0?LOGBASE+p:p);if(maxD==null||(!(id=12,n=new Decimal(maxD))["s"]||(outOfRange=n["cmp"](n1)<0||!n["c"])||Decimal["errors"]&&mathfloor(n["e"]/LOGBASE)<n["c"].length-1)&&!ifExceptionsThrow(Decimal,"max denominator",maxD,"toFraction",0)||(maxD=n)["cmp"](d)>0){maxD=e>0?d:n1}external=false;n=new Decimal(coefficientToString(xc));p=Decimal["precision"];Decimal["precision"]=e=xc.length*LOGBASE*2;for(;;){q=div(n,d,0,1,1);d2=d0["plus"](q["times"](d1));if(d2["cmp"](maxD)==1){break}d0=d1;d1=d2;n1=n0["plus"](q["times"](d2=n1));n0=d2;d=n["minus"](q["times"](d2=d));n=d2}d2=div(maxD["minus"](d0),d1,0,1,1);n0=n0["plus"](d2["times"](n1));d0=d0["plus"](d2["times"](d1));n0["s"]=n1["s"]=x["s"];frac=div(n1,d1,e,1)["minus"](x)["abs"]()["cmp"](div(n0,d0,e,1)["minus"](x)["abs"]())<1?[n1+"",d1+""]:[n0+"",d0+""];external=true;Decimal["precision"]=p;return frac};P["toNearest"]=function(n,rm){var x=this,Decimal=x["constructor"];x=new Decimal(x);if(n==null){n=new Decimal(Decimal["ONE"]);rm=Decimal["rounding"]}else{id=17;n=new Decimal(n);rm=checkRM(x,rm,"toNearest")}if(n["c"]){if(x["c"]){if(n["c"][0]){external=false;x=div(x,n,0,rm<4?[4,5,7,8][rm]:rm,1)["times"](n);external=true;rnd(x)}else{x["c"]=[x["e"]=0]}}}else if(x["s"]){if(n["s"]){n["s"]=x["s"]}x=n}return x};P["toNumber"]=function(){var x=this;return+x||(x["s"]?0*x["s"]:NaN)};P["toPower"]=P["pow"]=function(y,b){var a,e,n,r,x=this,Decimal=x["constructor"],s=x["s"],yN=+(id=13,y=new Decimal(y,b)),i=yN<0?-yN:yN,pr=Decimal["precision"],rm=Decimal["rounding"];if(!x["c"]||!y["c"]||(n=!x["c"][0])||!y["c"][0]){return new Decimal(mathpow(n?s*0:+x,yN))}x=new Decimal(x);a=x["c"].length;if(!x["e"]&&x["c"][0]==x["s"]&&a==1){return x}b=y["c"].length-1;if(!y["e"]&&y["c"][0]==y["s"]&&!b){r=rnd(x,pr,rm)}else{e=mathfloor(y["e"]/LOGBASE);n=e>=b;if(!n&&s<0){r=new Decimal(NaN)}else{if(n&&a*LOGBASE*i<INT_POW_LIMIT){r=intPow(Decimal,x,i);if(y["s"]<0){return Decimal["ONE"]["div"](r)}}else{s=s<0&&y["c"][Math.max(e,b)]&1?-1:1;b=mathpow(+x,yN);e=b==0||!isFinite(b)?mathfloor(yN*(Math.log("0."+coefficientToString(x["c"]))/Math.LN10+x["e"]+1)):new Decimal(b+"")["e"];if(e>Decimal["maxE"]+1||e<Decimal["minE"]-1){return new Decimal(e>0?s/0:0)}external=false;Decimal["rounding"]=x["s"]=1;i=Math.min(12,(e+"").length);r=exp(y["times"](ln(x,pr+i)),pr);r=rnd(r,pr+5,1);if(checkRoundingDigits(r["c"],pr,rm)){e=pr+10;r=rnd(exp(y["times"](ln(x,e+i)),e),e+5,1);if(+coefficientToString(r["c"]).slice(pr+1,pr+15)+1==1e14){r=rnd(r,pr+1,0)}}r["s"]=s;external=true;Decimal["rounding"]=rm}r=rnd(r,pr,rm)}}return r};P["toPrecision"]=function(sd,rm){var x=this;return sd!=null&&checkArg(x,sd,"toPrecision",1)&&x["c"]?format(x,--sd|0,checkRM(x,rm,"toPrecision"),2):x.toString()};P["toSignificantDigits"]=P["toSD"]=function(d,rm){var x=this,Decimal=x["constructor"];x=new Decimal(x);return d==null||!checkArg(x,d,"toSD",1)?rnd(x,Decimal["precision"],Decimal["rounding"]):rnd(x,d|0,checkRM(x,rm,"toSD"))};P["toString"]=function(b){var u,str,strL,x=this,Decimal=x["constructor"],xe=x["e"];if(xe===null){str=x["s"]?"Infinity":"NaN"}else if(b===u&&(xe<=Decimal["toExpNeg"]||xe>=Decimal["toExpPos"])){return format(x,null,Decimal["rounding"],1)}else{str=coefficientToString(x["c"]);if(xe<0){for(;++xe;str="0"+str);str="0."+str}else if(strL=str.length,xe>0){if(++xe>strL){for(xe-=strL;xe--;str+="0");}else if(xe<strL){str=str.slice(0,xe)+"."+str.slice(xe)}}else{u=str.charAt(0);if(strL>1){str=u+"."+str.slice(1)}else if(u=="0"){return u}}if(b!=null){if(!(outOfRange=!(b>=2&&b<65))&&(b==(b|0)||!Decimal["errors"])){str=convertBase(Decimal,str,b|0,10,x["s"]);if(str=="0"){return str}}else{ifExceptionsThrow(Decimal,"base",b,"toString",0)}}}return x["s"]<0?"-"+str:str};P["truncated"]=P["trunc"]=function(){return rnd(new this["constructor"](this),this["e"]+1,1)};P["valueOf"]=P["toJSON"]=function(){return this.toString()};function coefficientToString(a){var s,z,i=1,j=a.length,r=a[0]+"";for(;i<j;i++){s=a[i]+"";for(z=LOGBASE-s.length;z--;){s="0"+s}r+=s}for(j=r.length;r.charCodeAt(--j)===48;);return r.slice(0,j+1||1)}function checkRoundingDigits(c,i,rm,repeating){var ci,k,n,r,rd;for(k=1,n=c[0];n>=10;n/=10,k++);n=i-k;if(n<0){n+=LOGBASE;ci=0}else{ci=Math.ceil((n+1)/LOGBASE);n%=LOGBASE}k=mathpow(10,LOGBASE-n);rd=c[ci]%k|0;if(repeating==null){if(n<3){if(n==0){rd=rd/100|0}else if(n==1){rd=rd/10|0}r=rm<4&&rd==99999||rm>3&&rd==49999||rd==5e4||rd==0}else{r=(rm<4&&rd+1==k||rm>3&&rd+1==k/2)&&(c[ci+1]/k/100|0)==mathpow(10,n-2)-1||(rd==k/2||rd==0)&&(c[ci+1]/k/100|0)==0}}else{if(n<4){if(n==0){rd=rd/1e3|0}else if(n==1){rd=rd/100|0}else if(n==2){rd=rd/10|0}r=(repeating||rm<4)&&rd==9999||!repeating&&rm>3&&rd==4999}else{r=((repeating||rm<4)&&rd+1==k||!repeating&&rm>3&&rd+1==k/2)&&(c[ci+1]/k/1e3|0)==mathpow(10,n-3)-1}}return r}function checkRM(x,rm,method){var Decimal=x["constructor"];return rm==null||((outOfRange=rm<0||rm>8)||rm!==0&&(Decimal["errors"]?parseInt:parseFloat)(rm)!=rm)&&!ifExceptionsThrow(Decimal,"rounding mode",rm,method,0)?Decimal["rounding"]:rm|0}function checkArg(x,n,method,min){var Decimal=x["constructor"];return!(outOfRange=n<(min||0)||n>=MAX_DIGITS+1)&&(n===0||(Decimal["errors"]?parseInt:parseFloat)(n)==n)||ifExceptionsThrow(Decimal,"argument",n,method,0)}convertBase=function(){function toBaseOut(str,baseIn,baseOut){var j,arr=[0],arrL,i=0,strL=str.length;for(;i<strL;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);arr[j=0]+=NUMERALS.indexOf(str.charAt(i++));for(;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null){arr[j+1]=0}arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut}}}return arr.reverse()}return function(Decimal,str,baseOut,baseIn,sign){var e,j,r,x,xc,y,i=str.indexOf("."),pr=Decimal["precision"],rm=Decimal["rounding"];if(baseIn<37){str=str.toLowerCase()}if(i>=0){str=str.replace(".","");y=new Decimal(baseIn);x=intPow(Decimal,y,str.length-i);y["c"]=toBaseOut(x.toFixed(),10,baseOut);y["e"]=y["c"].length}xc=toBaseOut(str,baseIn,baseOut);e=j=xc.length;for(;xc[--j]==0;xc.pop());if(!xc[0]){return"0"}if(i<0){e--}else{x["c"]=xc;x["e"]=e;x["s"]=sign;x=div(x,y,pr,rm,0,baseOut);xc=x["c"];r=x["r"];e=x["e"]}i=xc[pr];j=baseOut/2;r=r||xc[pr+1]!=null;if(rm<4?(i!=null||r)&&(rm==0||rm==(x["s"]<0?3:2)):i>j||i==j&&(rm==4||r||rm==6&&xc[pr-1]&1||rm==(x["s"]<0?8:7))){xc.length=pr;for(--baseOut;++xc[--pr]>baseOut;){xc[pr]=0;if(!pr){++e;xc.unshift(1)}}}else{xc.length=pr}for(j=xc.length;!xc[--j];);for(i=0,str="";i<=j;str+=NUMERALS.charAt(xc[i++]));if(e<0){for(;++e;str="0"+str);str="0."+str}else{i=str.length;if(++e>i){for(e-=i;e--;str+="0");}else if(e<i){str=str.slice(0,e)+"."+str.slice(e)}}return str}}();var div=function(){function multiplyInteger(x,k,base){var temp,carry=0,i=x.length;for(x=x.slice();i--;){temp=x[i]*k+carry;x[i]=temp%base|0;carry=temp/base|0}if(carry){x.unshift(carry)}return x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}}}return cmp}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL]}for(;!a[0]&&a.length>1;a.shift());}return function(x,y,pr,rm,dp,base){var cmp,e,i,logbase,more,n,prod,prodL,q,qc,rem,remL,rem0,t,xi,xL,yc0,yL,yz,Decimal=x["constructor"],s=x["s"]==y["s"]?1:-1,xc=x["c"],yc=y["c"];if(!xc||!xc[0]||!yc||!yc[0]){return new Decimal(!x["s"]||!y["s"]||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0)}if(base){logbase=1;e=x["e"]-y["e"]}else{base=BASE;logbase=LOGBASE;e=mathfloor(x["e"]/logbase)-mathfloor(y["e"]/logbase)}yL=yc.length;xL=xc.length;q=new Decimal(s);qc=q["c"]=[];for(i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0)){e--}if(pr==null){s=pr=Decimal["precision"];rm=Decimal["rounding"]}else if(dp){s=pr+(x["e"]-y["e"])+1}else{s=pr}if(s<0){qc.push(1);more=true}else{s=s/logbase+2|0;i=0;if(yL==1){n=0;yc=yc[0];s++;for(;(i<xL||n)&&s--;i++){t=n*base+(xc[i]||0);qc[i]=t/yc|0;n=t%yc|0}more=n||i<xL}else{n=base/(yc[0]+1)|0;if(n>1){yc=multiplyInteger(yc,n,base);xc=multiplyInteger(xc,n,base);yL=yc.length;xL=xc.length}xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0);yz=yc.slice();yz.unshift(0);yc0=yc[0];if(yc[1]>=base/2){yc0++}do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL){rem0=rem0*base+(rem[1]||0)}n=rem0/yc0|0;if(n>1){if(n>=base){n=base-1}prod=multiplyInteger(yc,n,base);prodL=prod.length;remL=rem.length;cmp=compare(prod,rem,prodL,remL);if(cmp==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base)}}else{if(n==0){cmp=n=1}prod=yc.slice()}prodL=prod.length;if(prodL<remL){prod.unshift(0)}subtract(rem,prod,remL,base);if(cmp==-1){remL=rem.length;cmp=compare(yc,rem,yL,remL);if(cmp<1){n++;subtract(rem,yL<remL?yz:yc,remL,base)}}remL=rem.length}else if(cmp===0){n++;rem=[0]}qc[i++]=n;if(cmp&&rem[0]){rem[remL++]=xc[xi]||0}else{rem=[xc[xi]];remL=1}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null}if(!qc[0]){qc.shift()}}if(logbase==1){q["e"]=e;q["r"]=+more}else{for(i=1,s=qc[0];s>=10;s/=10,i++);q["e"]=i+e*logbase-1;rnd(q,dp?pr+q["e"]+1:pr,rm,more)}return q}}();function exp(x,pr){var denom,guard,j,pow,sd,sum,t,rep=0,i=0,k=0,Decimal=x["constructor"],one=Decimal["ONE"],rm=Decimal["rounding"],precision=Decimal["precision"];if(!x["c"]||!x["c"][0]||x["e"]>17){return new Decimal(x["c"]?!x["c"][0]?one:x["s"]<0?0:1/0:x["s"]?x["s"]<0?0:x:NaN)}if(pr==null){external=false;sd=precision}else{sd=pr}t=new Decimal(.03125);while(x["e"]>-2){x=x["times"](t);k+=5}guard=Math.log(mathpow(2,k))/Math.LN10*2+5|0;sd+=guard;denom=pow=sum=new Decimal(one);Decimal["precision"]=sd;for(;;){pow=rnd(pow["times"](x),sd,1);denom=denom["times"](++i);t=sum["plus"](div(pow,denom,sd,1));if(coefficientToString(t["c"]).slice(0,sd)===coefficientToString(sum["c"]).slice(0,sd)){j=k;while(j--){sum=rnd(sum["times"](sum),sd,1)}if(pr==null){if(rep<3&&checkRoundingDigits(sum["c"],sd-guard,rm,rep)){Decimal["precision"]=sd+=10;denom=pow=t=new Decimal(one);i=0;rep++}else{return rnd(sum,Decimal["precision"]=precision,rm,external=true)}}else{Decimal["precision"]=precision;return sum}}sum=t}}function format(n,i,j,k){var s,z,Decimal=n["constructor"],e=(n=new Decimal(n))["e"];if(i==null){j=0}else{rnd(n,++i,j);j=k?i:i+n["e"]-e}e=n["e"];s=coefficientToString(n["c"]);if(k==1||k==2&&(i<=e||e<=Decimal["toExpNeg"])){for(;s.length<j;s+="0");if(s.length>1){s=s.charAt(0)+"."+s.slice(1)}s+=(e<0?"e":"e+")+e}else{k=s.length;if(e<0){z=j-k;for(;++e;s="0"+s);s="0."+s}else{if(++e>k){z=j-e;for(e-=k;e--;s+="0");if(z>0){s+="."}}else{z=j-k;if(e<k){s=s.slice(0,e)+"."+s.slice(e)}else if(z>0){s+="."}}}if(z>0){for(;z--;s+="0");}}return n["s"]<0&&n["c"][0]?"-"+s:s}function getCoeffLength(c){var v=c.length-1,n=v*LOGBASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}return n}function ifExceptionsThrow(Decimal,message,arg,method,more){if(Decimal["errors"]){var error=new Error((method||["new Decimal","cmp","div","eq","gt","gte","lt","lte","minus","mod","plus","times","toFraction","pow","random","log","sqrt","toNearest","divToInt"][id?id<0?-id:id:1/id<0?1:0])+"() "+(["number type has more than 15 significant digits","LN10 out of digits"][message]||message+([outOfRange?" out of range":" not an integer"," not a boolean or binary digit"][more]||""))+": "+arg);error["name"]="Decimal Error";outOfRange=id=0;throw error}}function intPow(Decimal,x,i){var r=new Decimal(Decimal["ONE"]);for(external=false;;){if(i&1){r=r["times"](x)}i>>=1;if(!i){break}x=x["times"](x)}external=true;return r}function ln(y,pr){var c,c0,denom,e,num,rep,sd,sum,t,x1,x2,n=1,guard=10,x=y,xc=x["c"],Decimal=x["constructor"],one=Decimal["ONE"],rm=Decimal["rounding"],precision=Decimal["precision"];if(x["s"]<0||!xc||!xc[0]||!x["e"]&&xc[0]==1&&xc.length==1){return new Decimal(xc&&!xc[0]?-1/0:x["s"]!=1?NaN:xc?0:x)}if(pr==null){external=false;sd=precision}else{sd=pr}Decimal["precision"]=sd+=guard;c=coefficientToString(xc);c0=c.charAt(0);if(Math.abs(e=x["e"])<15e14){while(c0<7&&c0!=1||c0==1&&c.charAt(1)>3){x=x["times"](y);c=coefficientToString(x["c"]);c0=c.charAt(0);n++}e=x["e"];if(c0>1){x=new Decimal("0."+c);e++}else{x=new Decimal(c0+"."+c.slice(1))}}else{x=new Decimal(c0+"."+c.slice(1));if(sd+2>LN10.length){ifExceptionsThrow(Decimal,1,sd+2,"ln")}x=ln(x,sd-guard)["plus"](new Decimal(LN10.slice(0,sd+2))["times"](e+""));Decimal["precision"]=precision;return pr==null?rnd(x,precision,rm,external=true):x}x1=x;sum=num=x=div(x["minus"](one),x["plus"](one),sd,1);x2=rnd(x["times"](x),sd,1);denom=3;for(;;){num=rnd(num["times"](x2),sd,1);t=sum["plus"](div(num,new Decimal(denom),sd,1));if(coefficientToString(t["c"]).slice(0,sd)===coefficientToString(sum["c"]).slice(0,sd)){sum=sum["times"](2);if(e!==0){if(sd+2>LN10.length){ifExceptionsThrow(Decimal,1,sd+2,"ln")}sum=sum["plus"](new Decimal(LN10.slice(0,sd+2))["times"](e+""))}sum=div(sum,new Decimal(n),sd,1);if(pr==null){if(checkRoundingDigits(sum["c"],sd-guard,rm,rep)){Decimal["precision"]=sd+=guard;t=num=x=div(x1["minus"](one),x1["plus"](one),sd,1);x2=rnd(x["times"](x),sd,1);denom=rep=1}else{return rnd(sum,Decimal["precision"]=precision,rm,external=true)}}else{Decimal["precision"]=precision;return sum}}sum=t;denom+=2}}function rnd(x,sd,rm,r){var digits,i,j,k,n,rd,xc,xci,Decimal=x["constructor"];out:if(sd!=null){if(!(xc=x["c"])){return x}for(digits=1,k=xc[0];k>=10;k/=10,digits++);i=sd-digits;if(i<0){i+=LOGBASE;j=sd;n=xc[xci=0];rd=n/mathpow(10,digits-j-1)%10|0}else{xci=Math.ceil((i+1)/LOGBASE);if(xci>=xc.length){if(r){for(;xc.length<=xci;xc.push(0));n=rd=0;digits=1;i%=LOGBASE;j=i-LOGBASE+1}else{break out}}else{n=k=xc[xci];for(digits=1;k>=10;k/=10,digits++);i%=LOGBASE;j=i-LOGBASE+digits;rd=j<0?0:mathfloor(n/mathpow(10,digits-j-1)%10)}}r=r||sd<0||xc[xci+1]!=null||(j<0?n:n%mathpow(10,digits-j-1));r=rm<4?(rd||r)&&(rm==0||rm==(x["s"]<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&(i>0?j>0?n/mathpow(10,digits-j):0:xc[xci-1])%10&1||rm==(x["s"]<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x["e"]+1;xc[0]=mathpow(10,sd%LOGBASE);x["e"]=-sd||0}else{xc[0]=x["e"]=0}return x}if(i==0){xc.length=xci;k=1;xci--}else{xc.length=xci+1;k=mathpow(10,LOGBASE-i);xc[xci]=j>0?(n/mathpow(10,digits-j)%mathpow(10,j)|0)*k:0}if(r){for(;;){if(xci==0){for(i=1,j=xc[0];j>=10;j/=10,i++);j=xc[0]+=k;for(k=1;j>=10;j/=10,k++);if(i!=k){x["e"]++;if(xc[0]==BASE){xc[0]=1}}break}else{xc[xci]+=k;if(xc[xci]!=BASE){break}xc[xci--]=0;k=1}}}for(i=xc.length;xc[--i]===0;xc.pop());}if(external){if(x["e"]>Decimal["maxE"]){x["c"]=x["e"]=null}else if(x["e"]<Decimal["minE"]){x["c"]=[x["e"]=0]}}return x}decimal=function(){function config(obj){var p,u,v,Decimal=this,c="config",parse=Decimal["errors"]?parseInt:parseFloat;if(obj==u||typeof obj!="object"&&!ifExceptionsThrow(Decimal,"object expected",obj,c)){return Decimal}if((v=obj[p="precision"])!=u){if(!(outOfRange=v<1||v>MAX_DIGITS)&&parse(v)==v){Decimal[p]=v|0}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((v=obj[p="rounding"])!=u){if(!(outOfRange=v<0||v>8)&&parse(v)==v){Decimal[p]=v|0}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((v=obj[p="toExpNeg"])!=u){if(!(outOfRange=v<-EXP_LIMIT||v>0)&&parse(v)==v){Decimal[p]=mathfloor(v)}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((v=obj[p="toExpPos"])!=u){if(!(outOfRange=v<0||v>EXP_LIMIT)&&parse(v)==v){Decimal[p]=mathfloor(v)}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((v=obj[p="minE"])!=u){if(!(outOfRange=v<-EXP_LIMIT||v>0)&&parse(v)==v){Decimal[p]=mathfloor(v)}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((v=obj[p="maxE"])!=u){if(!(outOfRange=v<0||v>EXP_LIMIT)&&parse(v)==v){Decimal[p]=mathfloor(v)}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((v=obj[p="errors"])!=u){if(v===!!v||v===1||v===0){outOfRange=id=0;Decimal[p]=!!v}else{ifExceptionsThrow(Decimal,p,v,c,1)}}if((v=obj[p="crypto"])!=u){if(v===!!v||v===1||v===0){Decimal[p]=!!(v&&crypto&&typeof crypto=="object")}else{ifExceptionsThrow(Decimal,p,v,c,1)}}if((v=obj[p="modulo"])!=u){if(!(outOfRange=v<0||v>9)&&parse(v)==v){Decimal[p]=v|0}else{ifExceptionsThrow(Decimal,p,v,c,0)}}if((obj=obj[p="format"])!=u){if(typeof obj=="object"){Decimal[p]=obj}else{ifExceptionsThrow(Decimal,"format object expected",obj,c)}}return Decimal}function exp(n){return new this(n)["exp"]()}function ln(n){return new this(n)["ln"]()}function log(x,y){return new this(x)["log"](y)}function maxOrMin(Decimal,args,ltgt){var m,n,i=0;if(toString.call(args[0])=="[object Array]"){args=args[0]}m=new Decimal(args[0]);for(;++i<args.length;){n=new Decimal(args[i]);if(!n["s"]){m=n;break}else if(m[ltgt](n)){m=n}}return m}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}var parseDecimal=function(){var isValid=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return function(Decimal,x,n,b){var d,e,i,isNum,orig,valid;if(typeof n!="string"){n=(isNum=typeof n=="number"||toString.call(n)=="[object Number]")&&n===0&&1/n<0?"-0":n+""}orig=n;if(b==null&&isValid.test(n)){x["s"]=n.charCodeAt(0)===45?(n=n.slice(1),-1):1}else{if(b==10){return rnd(new Decimal(n),Decimal["precision"],Decimal["rounding"])}n=trim.call(n).replace(/^\+(?!-)/,"");x["s"]=n.charCodeAt(0)===45?(n=n.replace(/^-(?!-)/,""),-1):1;if(b!=null){if((b==(b|0)||!Decimal["errors"])&&!(outOfRange=!(b>=2&&b<65))){d="["+NUMERALS.slice(0,b=b|0)+"]+";n=n.replace(/\.$/,"").replace(/^\./,"0.");if(valid=new RegExp("^"+d+"(?:\\."+d+")?$",b<37?"i":"").test(n)){if(isNum){if(n.replace(/^0\.0*|\./,"").length>15){ifExceptionsThrow(Decimal,0,orig)}isNum=!isNum}n=convertBase(Decimal,n,10,b,x["s"])}else if(n!="Infinity"&&n!="NaN"){ifExceptionsThrow(Decimal,"not a base "+b+" number",orig);n="NaN"}}else{ifExceptionsThrow(Decimal,"base",b,0,0);valid=isValid.test(n)}}else{valid=isValid.test(n)}if(!valid){x["c"]=x["e"]=null;if(n!="Infinity"){if(n!="NaN"){ifExceptionsThrow(Decimal,"not a number",orig)}x["s"]=null}id=0;return x}}if((e=n.indexOf("."))>-1){n=n.replace(".","")}if((i=n.search(/e/i))>0){if(e<0){e=i}e+=+n.slice(i+1);n=n.substring(0,i)}else if(e<0){e=n.length}for(i=0;n.charCodeAt(i)===48;i++);for(b=n.length;n.charCodeAt(--b)===48;);n=n.slice(i,b+1);if(n){b=n.length;if(isNum&&b>15){ifExceptionsThrow(Decimal,0,orig)}x["e"]=e=e-i-1;x["c"]=[];i=(e+1)%LOGBASE;if(e<0){i+=LOGBASE}if(i<b){if(i){x["c"].push(+n.slice(0,i))}for(b-=LOGBASE;i<b;){x["c"].push(+n.slice(i,i+=LOGBASE))}n=n.slice(i);i=LOGBASE-n.length}else{i-=b}for(;i--;n+="0");x["c"].push(+n);if(external){if(x["e"]>Decimal["maxE"]){x["c"]=x["e"]=null}else if(x["e"]<Decimal["minE"]){x["c"]=[x["e"]=0]}}}else{x["c"]=[x["e"]=0]}id=0;return x}}();function pow(x,y){return new this(x)["pow"](y)}function random(dp){var a,n,v,i=0,r=[],Decimal=this,rand=new Decimal(Decimal["ONE"]);if(dp==null||!checkArg(rand,dp,"random")){dp=Decimal["precision"]}else{dp|=0}n=Math.ceil(dp/LOGBASE);if(Decimal["crypto"]){if(crypto&&crypto["getRandomValues"]){a=crypto["getRandomValues"](new Uint32Array(n));for(;i<n;){v=a[i];if(v>=429e7){a[i]=crypto["getRandomValues"](new Uint32Array(1))[0]}else{r[i++]=v%1e7}}}else if(crypto&&crypto["randomBytes"]){a=crypto["randomBytes"](n*=4);for(;i<n;){v=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+((a[i+3]&127)<<24);if(v>=214e7){crypto["randomBytes"](4).copy(a,i)}else{r.push(v%1e7);i+=4}}i=n/4}else{ifExceptionsThrow(Decimal,"crypto unavailable",crypto,"random")}}if(!i){for(;i<n;){r[i++]=Math.random()*1e7|0}}n=r[--i];dp%=LOGBASE;if(n&&dp){v=mathpow(10,LOGBASE-dp);r[i]=(n/v|0)*v}for(;r[i]===0;i--){r.pop()}if(i<0){r=[n=0]}else{n=-1;for(;r[0]===0;){r.shift();n-=LOGBASE}for(i=1,v=r[0];v>=10;){v/=10;i++}if(i<LOGBASE){n-=LOGBASE-i}}rand["e"]=n;rand["c"]=r;return rand}function sqrt(n){return new this(n)["sqrt"]()}function decimalFactory(obj){function Decimal(n,b){var x=this;if(!(x instanceof Decimal)){ifExceptionsThrow(Decimal,"Decimal called without new",n);return new Decimal(n,b)}x["constructor"]=Decimal;if(n instanceof Decimal){if(b==null){id=0;x["s"]=n["s"];x["e"]=n["e"];x["c"]=(n=n["c"])?n.slice():n;return x}else if(b==10){return rnd(new Decimal(n),Decimal["precision"],Decimal["rounding"])}else{n+=""}}return parseDecimal(Decimal,x,n,b)}Decimal["precision"]=20;Decimal["rounding"]=4;Decimal["modulo"]=1;Decimal["toExpNeg"]=-7;Decimal["toExpPos"]=21;Decimal["minE"]=-EXP_LIMIT;Decimal["maxE"]=EXP_LIMIT;Decimal["errors"]=true;Decimal["crypto"]=false;Decimal.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0};Decimal.prototype=P;Decimal["ONE"]=new Decimal(1);Decimal["ROUND_UP"]=0;Decimal["ROUND_DOWN"]=1;Decimal["ROUND_CEIL"]=2;Decimal["ROUND_FLOOR"]=3;Decimal["ROUND_HALF_UP"]=4;Decimal["ROUND_HALF_DOWN"]=5;Decimal["ROUND_HALF_EVEN"]=6;Decimal["ROUND_HALF_CEIL"]=7;Decimal["ROUND_HALF_FLOOR"]=8;Decimal["EUCLID"]=9;Decimal["config"]=config;Decimal["constructor"]=decimalFactory;Decimal["exp"]=exp;Decimal["ln"]=ln;Decimal["log"]=log;Decimal["max"]=max;Decimal["min"]=min;Decimal["pow"]=pow;Decimal["sqrt"]=sqrt;Decimal["random"]=random;if(obj!=null){Decimal["config"](obj)}return Decimal}return decimalFactory()}();if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return decimal}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof module!="undefined"&&module.exports){module.exports=decimal;if(!crypto){try{crypto=require("crypto")}catch(e){}}}else{noConflict=global["Decimal"];decimal["noConflict"]=function(){global["Decimal"]=noConflict;return decimal};global["Decimal"]=decimal}})(this)},function(module,exports,__webpack_require__){exports.memoize=function(fn){return function memoize(){if(typeof memoize.cache!=="object"){memoize.cache={}}var hash=JSON.stringify(arguments);if(!(hash in memoize.cache)){return memoize.cache[hash]=fn.apply(fn,arguments)}return memoize.cache[hash]}}},function(module,exports,__webpack_require__){"use strict";module.exports={end:true}},function(module,exports,__webpack_require__){"use strict";var properties=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:false,latexRightParens:false,latexParens:false}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",
associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:false,latexRightParens:false,latexParens:false},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:false},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function getPrecedence(node){var identifier=node.getIdentifier();for(var i=0;i<properties.length;i++){if(identifier in properties[i]){return i}}return null}function getAssociativity(node){var identifier=node.getIdentifier();var index=getPrecedence(node);if(index===null){return null}var property=properties[index][identifier];if(property.hasOwnProperty("associativity")){if(property.associativity==="left"){return"left"}if(property.associativity==="right"){return"right"}throw Error("'"+identifier+"' has the invalid associativity '"+property.associativity+"'.")}return null}function isAssociativeWith(nodeA,nodeB){var identifierA=nodeA.getIdentifier();var identifierB=nodeB.getIdentifier();var index=getPrecedence(nodeA);if(index===null){return null}var property=properties[index][identifierA];if(property.hasOwnProperty("associativeWith")&&property.associativeWith instanceof Array){for(var i=0;i<property.associativeWith.length;i++){if(property.associativeWith[i]===identifierB){return true}}return false}return null}module.exports.properties=properties;module.exports.getPrecedence=getPrecedence;module.exports.getAssociativity=getAssociativity;module.exports.isAssociativeWith=isAssociativeWith},function(module,exports,__webpack_require__){"use strict";exports.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega","true":"\\mathrm{True}","false":"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"};exports.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"};function functionArgs(args,callbacks){return args.map(function(arg){return arg.toTex(callbacks)}).join(",")}var defaultTemplate="\\mathrm{%name%}\\left(%*%\\right)";function expandTemplate(template,name,args){template=template.replace(/%name%/g,name);args.forEach(function(arg,index){template=template.replace(RegExp("%"+index+"%","g"),arg)});template=template.replace("%*%",args.map(function(arg){return arg}).join(","));template=template.replace("%%","%");return template}var functions={abs:"\\left|%0%\\right|",add:"\\left(%0%+%1%\\right)",ceil:"\\left\\lceil%0%\\right\\rceil",cube:"\\left(%0%\\right)^3",divide:"\\frac{%0%}{%1%}",dotDivide:"\\left(%0%"+exports.operators["dotDivide"]+"%1%\\right)",dotMultiply:"\\left(%0%"+exports.operators["dotMultiply"]+"%1%\\right)",dotPow:"\\left(%0%"+exports.operators["dotPow"]+"%1%\\right)",exp:"\\exp\\left(%0%\\right)",fix:defaultTemplate,floor:"\\left\\lfloor%0%\\right\\rfloor",gcd:"\\gcd\\left(%*%\\right)",lcm:defaultTemplate,log10:"\\log_{10}\\left(%0%\\right)",log:{1:"\\ln\\left(%0%\\right)",2:"\\log_{%1%}\\left(%0%\\right)"},mod:"\\left(%0%"+exports.operators["mod"]+"%1%\\right)",multiply:"\\left(%0%"+exports.operators["multiply"]+"%1%\\right)",norm:{1:"\\left\\|%0%\\right\\|",2:defaultTemplate},nthRoot:"\\sqrt[%1%]{%0%}",pow:"\\left(%0%\\right)"+exports.operators["pow"]+"{%1%}",round:{1:"\\left\\lfloor%0%\\right\\rceil",2:defaultTemplate},sign:defaultTemplate,sqrt:"\\sqrt{%0%}",square:"\\left(%0%\\right)^2",subtract:"\\left(%0%"+exports.operators["subtract"]+"%1%\\right)",unaryMinus:exports.operators["unaryMinus"]+"\\left(%0%\\right)",unaryPlus:exports.operators["unaryPlus"]+"\\left(%0%\\right)",xgcd:defaultTemplate,bitAnd:"\\left(%0%"+exports.operators["bitAnd"]+"%1%\\right)",bitOr:"\\left(%0%"+exports.operators["bitOr"]+"%1%\\right)",bitXor:"\\left(%0%"+exports.operators["bitXor"]+"%1%\\right)",bitNot:exports.operators["bitNot"]+"\\left(%0%\\right)",leftShift:"\\left(%0%"+exports.operators["leftShift"]+"%1%\\right)",rightArithShift:"\\left(%0%"+exports.operators["rightArithShift"]+"%1%\\right)",rightLogShift:"\\left(%0%"+exports.operators["rightLogShift"]+"%1%\\right)",arg:"\\arg\\left(%0%\\right)",conj:"\\left(%0%\\right)^*",im:"\\Im\\left\\lbrace%0%\\right\\rbrace",re:"\\Re\\left\\lbrace%0%\\right\\rbrace",bignumber:{0:"0",1:"\\left(%0%\\right)"},"boolean":defaultTemplate,chain:defaultTemplate,complex:{0:"0",1:"\\left(%0%\\right)",2:"\\left(\\left(%0%\\right)+"+exports.symbols["i"]+"\\cdot\\left(%1%\\right)\\right)"},index:defaultTemplate,matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(%0%\\right)",2:"\\left(%0%\\right)"},number:{0:"0",1:"\\left(%0%\\right)",2:"\\left(\\left(%0%\\right)%1%\\right)"},parser:defaultTemplate,string:{0:'""',1:function(node){return'"'+node.args[0].toString()+'"'}},unit:{1:"\\left(%0%\\right)",2:"\\left(\\left(%0%\\right)%1%\\right)"},compile:defaultTemplate,eval:defaultTemplate,help:defaultTemplate,parse:defaultTemplate,and:"\\left(%0%"+exports.operators["and"]+"%1%\\right)",not:exports.operators["not"]+"\\left(%0%\\right)",or:"\\left(%0%"+exports.operators["or"]+"%1%\\right)",xor:"\\left(%0%"+exports.operators["xor"]+"%1%\\right)",concat:defaultTemplate,cross:"\\left(%0%\\right)\\times\\left(%1%\\right)",det:"\\det\\left(%0%\\right)",diag:defaultTemplate,dot:"\\left(%0%\\cdot%1%\\right)",eye:defaultTemplate,flatten:defaultTemplate,inv:"\\left(%0%\\right)^{-1}",ones:defaultTemplate,range:defaultTemplate,resize:defaultTemplate,size:defaultTemplate,squeeze:defaultTemplate,subset:defaultTemplate,trace:"\\mathrm{tr}\\left(%0%\\right)",transpose:"\\left(%0%\\right)"+exports.operators["transpose"],zeros:defaultTemplate,combinations:"\\binom{%0%}{%1%}",distribution:defaultTemplate,factorial:"\\left(%0%\\right)"+exports.operators["factorial"],gamma:"\\Gamma\\left(%0%\\right)",permutations:defaultTemplate,pickRandom:defaultTemplate,randomInt:defaultTemplate,random:defaultTemplate,compare:defaultTemplate,deepEqual:defaultTemplate,equal:"\\left(%0%"+exports.operators["equal"]+"%1%\\right)",largerEq:"\\left(%0%"+exports.operators["largerEq"]+"%1%\\right)",larger:"\\left(%0%"+exports.operators["larger"]+"%1%\\right)",smallerEq:"\\left(%0%"+exports.operators["smallerEq"]+"%1%\\right)",smaller:"\\left(%0%"+exports.operators["smaller"]+"%1%\\right)",unequal:"\\left(%0%"+exports.operators["unequal"]+"%1%\\right)",max:"\\max\\left(%*%\\right)",mean:defaultTemplate,median:defaultTemplate,min:"\\min\\left(%*%\\right)",prod:defaultTemplate,std:defaultTemplate,sum:defaultTemplate,"var":"\\mathrm{Var}\\left(%*%\\right)",acosh:"\\cosh^{-1}\\left(%0%\\right)",acos:"\\cos^{-1}\\left(%0%\\right)",acoth:"\\coth^{-1}\\left(%0%\\right)",acot:"\\cot^{-1}\\left(%0%\\right)",acsch:"\\mathrm{csch}^{-1}\\left(%0%\\right)",acsc:"\\csc^{-1}\\left(%0%\\right)",asech:"\\mathrm{sech}^{-1}\\left(%0%\\right)",asec:"\\sec^{-1}\\left(%0%\\right)",asinh:"\\sinh^{-1}\\left(%0%\\right)",asin:"\\sin^{-1}\\left(%0%\\right)",atan2:"\\mathrm{atan2}\\left(%*%\\right)",atanh:"\\tanh^{-1}\\left(%0%\\right)",atan:"\\tan^{-1}\\left(%0%\\right)",cosh:"\\cosh\\left(%0%\\right)",cos:"\\cos\\left(%0%\\right)",coth:"\\coth\\left(%0%\\right)",cot:"\\cot\\left(%0%\\right)",csch:"\\mathrm{csch}\\left(%0%\\right)",csc:"\\csc\\left(%0%\\right)",sech:"\\mathrm{sech}\\left(%0%\\right)",sec:"\\sec\\left(%0%\\right)",sinh:"\\sinh\\left(%0%\\right)",sin:"\\sin\\left(%0%\\right)",tanh:"\\tanh\\left(%0%\\right)",tan:"\\tan\\left(%0%\\right)",to:"\\left(%0%"+exports.operators["to"]+"%1%\\right)",clone:defaultTemplate,filter:defaultTemplate,forEach:defaultTemplate,format:defaultTemplate,"import":defaultTemplate,map:defaultTemplate,print:defaultTemplate,sort:defaultTemplate,"typeof":defaultTemplate};var units={deg:"^\\circ"};exports.toSymbol=function(name){if(units.hasOwnProperty(name)){return units[name]}if(exports.symbols.hasOwnProperty(name)){return exports.symbols[name]}else if(name.indexOf("_")!==-1){var index=name.indexOf("_");return exports.toSymbol(name.substring(0,index))+"_{"+exports.toSymbol(name.substring(index+1))+"}"}return"\\mathrm{"+name+"}"};exports.toFunction=function(node,callbacks,name){var latexConverter=functions[name];var args=node.args.map(function(arg){return arg.toTex(callbacks)});switch(typeof latexConverter){case"function":return latexConverter(node,callbacks);case"string":return expandTemplate(latexConverter,name,args);case"object":switch(typeof latexConverter[args.length]){case"function":return latexConverter[args.length](node,callbacks);case"string":return expandTemplate(latexConverter[args.length],name,args)}default:return expandTemplate(defaultTemplate,name,args)}}},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(Array.isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return Object.keys(obj).map(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(Array.isArray(obj[k])){return obj[k].map(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))}},function(module,exports,__webpack_require__){var exports=module.exports=function(alg){var Alg=exports[alg];if(!Alg)throw new Error(alg+" is not supported (we accept pull requests)");return new Alg};var Buffer=__webpack_require__(53).Buffer;var Hash=__webpack_require__(627)(Buffer);exports.sha1=__webpack_require__(628)(Buffer,Hash);exports.sha256=__webpack_require__(629)(Buffer,Hash);exports.sha512=__webpack_require__(630)(Buffer,Hash)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(631);module.exports["processes"]={MongoAuthProcess:__webpack_require__(632).MongoAuthProcess}},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(633);exports.Stream=__webpack_require__(316);exports.Readable=exports;exports.Writable=__webpack_require__(634);exports.Duplex=__webpack_require__(635);exports.Transform=__webpack_require__(636);exports.PassThrough=__webpack_require__(637)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(634)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(635)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(636)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(637)},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){(function(Buffer){module.exports=function(crypto){function pbkdf2(password,salt,iterations,keylen,digest,callback){if("function"===typeof digest){callback=digest;digest=undefined}if("function"!==typeof callback)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var result;try{result=pbkdf2Sync(password,salt,iterations,keylen,digest)}catch(e){return callback(e)}callback(undefined,result)})}function pbkdf2Sync(password,salt,iterations,keylen,digest){if("number"!==typeof iterations)throw new TypeError("Iterations not a number");if(iterations<0)throw new TypeError("Bad iterations");if("number"!==typeof keylen)throw new TypeError("Key length not a number");if(keylen<0)throw new TypeError("Bad key length");digest=digest||"sha1";if(!Buffer.isBuffer(password))password=new Buffer(password);if(!Buffer.isBuffer(salt))salt=new Buffer(salt);var hLen,l=1,r,T;var DK=new Buffer(keylen);var block1=new Buffer(salt.length+4);salt.copy(block1,0,0,salt.length);for(var i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);var U=crypto.createHmac(digest,password).update(block1).digest();if(!hLen){hLen=U.length;T=new Buffer(hLen);l=Math.ceil(keylen/hLen);r=keylen-(l-1)*hLen;if(keylen>(Math.pow(2,32)-1)*hLen)throw new TypeError("keylen exceeds maximum length")}U.copy(T,0,0,hLen);for(var j=1;j<iterations;j++){U=crypto.createHmac(digest,password).update(U).digest();for(var k=0;k<hLen;k++){T[k]^=U[k]}}var destPos=(i-1)*hLen;var len=i==l?r:hLen;T.copy(DK,destPos,0,len)}return DK}return{pbkdf2:pbkdf2,pbkdf2Sync:pbkdf2Sync}}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){module.exports=ripemd160;var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var hl=[0,1518500249,1859775393,2400959708,2840853838];var hr=[1352829926,1548603684,1836072691,2053994217,0];var bytesToWords=function(bytes){var words=[];for(var i=0,b=0;i<bytes.length;i++,b+=8){words[b>>>5]|=bytes[i]<<24-b%32}return words};var wordsToBytes=function(words){var bytes=[];for(var b=0;b<words.length*32;b+=8){bytes.push(words[b>>>5]>>>24-b%32&255)}return bytes};var processBlock=function(H,M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var al,bl,cl,dl,el;var ar,br,cr,dr,er;ar=al=H[0];br=bl=H[1];cr=cl=H[2];dr=dl=H[3];er=el=H[4];var t;for(var i=0;i<80;i+=1){t=al+M[offset+zl[i]]|0;if(i<16){t+=f1(bl,cl,dl)+hl[0]}else if(i<32){t+=f2(bl,cl,dl)+hl[1]}else if(i<48){t+=f3(bl,cl,dl)+hl[2]}else if(i<64){t+=f4(bl,cl,dl)+hl[3]}else{t+=f5(bl,cl,dl)+hl[4]}t=t|0;t=rotl(t,sl[i]);t=t+el|0;al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=t;t=ar+M[offset+zr[i]]|0;if(i<16){t+=f5(br,cr,dr)+hr[0]}else if(i<32){t+=f4(br,cr,dr)+hr[1]}else if(i<48){t+=f3(br,cr,dr)+hr[2]}else if(i<64){t+=f2(br,cr,dr)+hr[3]}else{t+=f1(br,cr,dr)+hr[4]}t=t|0;t=rotl(t,sr[i]);t=t+er|0;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=t}t=H[1]+cl+dr|0;H[1]=H[2]+dl+er|0;H[2]=H[3]+el+ar|0;H[3]=H[4]+al+br|0;H[4]=H[0]+bl+cr|0;H[0]=t};function f1(x,y,z){return x^y^z}function f2(x,y,z){return x&y|~x&z}function f3(x,y,z){return(x|~y)^z}function f4(x,y,z){return x&z|y&~z}function f5(x,y,z){return x^(y|~z)}function rotl(x,n){return x<<n|x>>>32-n}function ripemd160(message){var H=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof message=="string")message=new Buffer(message,"utf8");var m=bytesToWords(message);var nBitsLeft=message.length*8;var nBitsTotal=message.length*8;m[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;m[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&16711935|(nBitsTotal<<24|nBitsTotal>>>8)&4278255360;for(var i=0;i<m.length;i+=16){processBlock(H,m,i)}for(var i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}var digestbytes=wordsToBytes(H);return new Buffer(digestbytes)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var intSize=4;var zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;function toArray(buf,bigEndian){if(buf.length%intSize!==0){var len=buf.length+(intSize-buf.length%intSize);buf=Buffer.concat([buf,zeroBuffer],len)}var arr=[];var fn=bigEndian?buf.readInt32BE:buf.readInt32LE;for(var i=0;i<buf.length;i+=intSize){arr.push(fn.call(buf,i))}return arr}function toBuffer(arr,size,bigEndian){var buf=new Buffer(size);var fn=bigEndian?buf.writeInt32BE:buf.writeInt32LE;for(var i=0;i<arr.length;i++){fn.call(buf,arr[i],i*4,true)}return buf}function hash(buf,fn,hashSize,bigEndian){if(!Buffer.isBuffer(buf))buf=new Buffer(buf);var arr=fn(toArray(buf,bigEndian),buf.length*chrsz);return toBuffer(arr,hashSize,bigEndian)}module.exports={hash:hash}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){module.exports=pathtoRegexp;function pathtoRegexp(path,keys,options){options=options||{};var strict=options.strict;var end=options.end!==false;var flags=options.sensitive?"":"i";keys=keys||[];if(path instanceof RegExp){return path}if(Array.isArray(path)){path=path.map(function(value){return pathtoRegexp(value,keys,options).source});return new RegExp("(?:"+path.join("|")+")",flags)}path=("^"+path+(strict?"":path[path.length-1]==="/"?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,function(match,slash,format,key,capture,star,optional){slash=slash||"";format=format||"";capture=capture||"([^\\/"+format+"]+?)";optional=optional||"";keys.push({name:key,optional:!!optional});return""+(optional?"":slash)+"(?:"+format+(optional?slash:"")+capture+(star?"((?:[\\/"+format+"].+?)?)":"")+")"+optional}).replace(/\*/g,"(.*)");path+=end?"$":path[path.length-1]==="/"?"":"(?=\\/|$)";return new RegExp(path,flags)}},function(module,exports,__webpack_require__){(function(Buffer){module.exports=etag;var crc=__webpack_require__(683).crc32;var crypto=__webpack_require__(110);var Stats=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()).Stats;var crc32threshold=1e3;var NULL=new Buffer([0]);var toString=Object.prototype.toString;function etag(entity,options){if(entity==null){throw new TypeError("argument entity is required")}var isStats=isstats(entity);var weak=options&&typeof options.weak==="boolean"?options.weak:isStats;if(isStats){return stattag(entity,weak)}if(typeof entity!=="string"&&!Buffer.isBuffer(entity)){throw new TypeError("argument entity must be string, Buffer, or fs.Stats")}var hash=weak?weakhash(entity):stronghash(entity);return weak?'W/"'+hash+'"':'"'+hash+'"'}function isstats(obj){if(obj===null||typeof obj!=="object"){return false}if(obj instanceof Stats){return true}return"atime"in obj&&toString.call(obj.atime)==="[object Date]"&&"ctime"in obj&&toString.call(obj.ctime)==="[object Date]"&&"mtime"in obj&&toString.call(obj.mtime)==="[object Date]"&&"ino"in obj&&typeof obj.ino==="number"&&"size"in obj&&typeof obj.size==="number"}function stattag(stat,weak){var mtime=stat.mtime.toISOString();var size=stat.size.toString(16);if(weak){return'W/"'+size+"-"+crc(mtime)+'"'}var hash=crypto.createHash("md5").update("file","utf8").update(NULL).update(size,"utf8").update(NULL).update(mtime,"utf8").digest("base64");return'"'+hash+'"'}function stronghash(entity){if(entity.length===0){return"1B2M2Y8AsgTpgAmY7PhCfg=="}return crypto.createHash("md5").update(entity,"utf8").digest("base64")}function weakhash(entity){if(entity.length===0){return"0-0"}var len=typeof entity==="string"?Buffer.byteLength(entity,"utf8"):entity.length;if(len<=crc32threshold){return len.toString(16)+"-"+crc(entity).toString(16)}return crypto.createHash("md4").update(entity,"utf8").digest("base64")}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var paramRegExp=/; *([!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) */g;var textRegExp=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/;var tokenRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/;var qescRegExp=/\\([\u000b\u0020-\u00ff])/g;var quoteRegExp=/([\\"])/g;var typeRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+\/[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/;exports.format=format;exports.parse=parse;function format(obj){if(!obj||typeof obj!=="object"){throw new TypeError("argument obj is required")}var parameters=obj.parameters;var type=obj.type;if(!type||!typeRegExp.test(type)){throw new TypeError("invalid type")}var string=type;if(parameters&&typeof parameters==="object"){var param;var params=Object.keys(parameters).sort();for(var i=0;i<params.length;i++){param=params[i];if(!tokenRegExp.test(param)){throw new TypeError("invalid parameter name")}string+="; "+param+"="+qstring(parameters[param])}}return string}function parse(string){if(!string){throw new TypeError("argument string is required")}if(typeof string==="object"){string=getcontenttype(string);if(typeof string!=="string"){throw new TypeError("content-type header is missing from object")}}if(typeof string!=="string"){throw new TypeError("argument string is required to be a string")}var index=string.indexOf(";");var type=index!==-1?string.substr(0,index).trim():string.trim();if(!typeRegExp.test(type)){throw new TypeError("invalid media type")}var key;var match;var obj=new ContentType(type.toLowerCase());var value;paramRegExp.lastIndex=index;while(match=paramRegExp.exec(string)){if(match.index!==index){throw new TypeError("invalid parameter format")}index+=match[0].length;key=match[1].toLowerCase();value=match[2];if(value[0]==='"'){value=value.substr(1,value.length-2).replace(qescRegExp,"$1")}obj.parameters[key]=value}if(index!==-1&&index!==string.length){throw new TypeError("invalid parameter format")}return obj}function getcontenttype(obj){if(typeof obj.getHeader==="function"){return obj.getHeader("content-type")}if(typeof obj.headers==="object"){return obj.headers&&obj.headers["content-type"]}}function qstring(val){var str=String(val);if(tokenRegExp.test(str)){return str}if(str.length>0&&!textRegExp.test(str)){throw new TypeError("invalid parameter value")}return'"'+str.replace(quoteRegExp,"\\$1")+'"'}function ContentType(type){this.parameters=Object.create(null);this.type=type}},function(module,exports,__webpack_require__){(function(Buffer){lazyProperty(module.exports,"bufferConcat",function bufferConcat(){return Buffer.concat||__webpack_require__(653)});lazyProperty(module.exports,"callSiteToString",function callSiteToString(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;function prepareObjectStackTrace(obj,stack){return stack}Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=2;Error.captureStackTrace(obj);var stack=obj.stack.slice();Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack[0].toString?toString:__webpack_require__(654)});function lazyProperty(obj,prop,getter){function get(){var val=getter();Object.defineProperty(obj,prop,{configurable:true,enumerable:true,value:val});return val}Object.defineProperty(obj,prop,{configurable:true,enumerable:true,get:get})}function toString(obj){return obj.toString()}}).call(exports,__webpack_require__(53).Buffer)},,function(module,exports,__webpack_require__){(function(Buffer,process){var slice=Array.prototype.slice,net=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "net"');e.code="MODULE_NOT_FOUND";throw e}());function Server(options,origins){var me=this;this.origins=origins||["*:*"];this.port=843;this.log=console.log;Object.keys(options).forEach(function(key){me[key]&&(me[key]=options[key])});this.socket=net.createServer(function createServer(socket){socket.on("error",function socketError(){me.responder.call(me,socket)});me.responder.call(me,socket)});this.socket.on("error",function serverError(err){if(err.errno==13){me.log&&me.log("Unable to listen to port `"+me.port+"` as your Node.js instance does not have root privileges. "+(me.server?"The Flash Policy File requests will only be served inline over the supplied HTTP server. Inline serving is slower than a dedicated server instance.":"No fallback server supplied, we will be unable to answer Flash Policy File requests."));me.emit("connect_failed",err);me.socket.removeAllListeners();delete me.socket}else{me.log&&me.log("FlashPolicyFileServer received an error event:\n"+(err.message?err.message:err))}});this.socket.on("timeout",function serverTimeout(){});this.socket.on("close",function serverClosed(err){err&&me.log&&me.log("Server closing due to an error: \n"+(err.message?err.message:err));if(me.server){if(me.server["@"]&&me.server.online){me.server.removeListener("connection",me.server["@"])}delete me.server.online}});this.compile()}Server.prototype.listen=function listen(port,server,cb){var me=this,args=slice.call(arguments,0),callback;args.forEach(function args(arg){var type=typeof arg;if(type==="number")me.port=arg;if(type==="function")callback=arg;if(type==="object")me.server=arg});if(this.server){this.server["@"]=function connection(socket){socket.once("data",function requestData(data){if(data&&data[0]===60&&data.toString()==="<policy-file-request/>\x00"&&socket&&(socket.readyState==="open"||socket.readyState==="writeOnly")){try{socket.end(me.buffer)}catch(e){}}})};this.server.on("connection",this.server["@"])}this.port>=0&&this.socket.listen(this.port,function serverListening(){me.socket.online=true;if(callback){callback.call(me);callback=undefined}});return this};Server.prototype.responder=function responder(socket){if(socket&&socket.readyState=="open"&&socket.end){try{socket.end(this.buffer)}catch(e){}}};Server.prototype.compile=function compile(){var xml=['<?xml version="1.0"?>','<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">',"<cross-domain-policy>"];this.origins.forEach(function origin(origin){var parts=origin.split(":");xml.push('<allow-access-from domain="'+parts[0]+'" to-ports="'+parts[1]+'"/>')});xml.push("</cross-domain-policy>");this.buffer=new Buffer(xml.join(""),"utf8");return this};Server.prototype.add=function add(){var args=slice.call(arguments,0),i=args.length;while(i--){if(this.origins.indexOf(args[i])>=0){args[i]=null}}Array.prototype.push.apply(this.origins,args.filter(function filter(value){return!!value}));this.compile();return this};Server.prototype.remove=function remove(origin){var position=this.origins.indexOf(origin);if(position>0){this.origins.splice(position,1);this.compile()}return this};Server.prototype.close=function close(){this.socket.removeAllListeners();this.socket.close();return this};Object.keys(process.EventEmitter.prototype).forEach(function proxy(key){Server.prototype[key]=Server.prototype[key]||function(){if(this.socket){this.socket[key].apply(this.socket,arguments)}return this}});exports.createServer=function createServer(options,origins){origins=Array.isArray(origins)?origins:Array.isArray(options)?options:false;options=!Array.isArray(options)&&options?options:{};return new Server(options,origins)};exports.Server=Server;exports.version="0.0.4"}).call(exports,__webpack_require__(53).Buffer,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(Buffer){"use strict";var inherits=__webpack_require__(52).inherits,EventEmitter=__webpack_require__(120).EventEmitter,net=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "net"');e.code="MODULE_NOT_FOUND";throw e}()),tls=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "tls"');e.code="MODULE_NOT_FOUND";throw e}()),f=__webpack_require__(52).format,getSingleProperty=__webpack_require__(554).getSingleProperty,debugOptions=__webpack_require__(554).debugOptions,Response=__webpack_require__(326).Response,MongoError=__webpack_require__(319),Logger=__webpack_require__(323);var _id=0;var debugFields=["host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","socketTimeout","singleBufferSerializtion","ssl","ca","cert","rejectUnauthorized","promoteLongs"];var Connection=function(options){EventEmitter.call(this);this.options=options||{};this.id=_id++;this.logger=Logger("Connection",options);if(!options.bson)throw new Error("must pass in valid bson parser");this.bson=options.bson;this.tag=options.tag;this.messageHandler=options.messageHandler;this.maxBsonMessageSize=options.maxBsonMessageSize||1024*1024*16*4;if(this.logger.isDebug())this.logger.debug(f("creating connection %s with options [%s]",this.id,JSON.stringify(debugOptions(debugFields,options))));this.port=options.port||27017;this.host=options.host||"localhost";this.keepAlive=typeof options.keepAlive=="boolean"?options.keepAlive:true;

this.keepAliveInitialDelay=options.keepAliveInitialDelay||0;this.noDelay=typeof options.noDelay=="boolean"?options.noDelay:true;this.connectionTimeout=options.connectionTimeout||0;this.socketTimeout=options.socketTimeout||0;this.domainSocket=this.host.indexOf("/")!=-1;this.singleBufferSerializtion=typeof options.singleBufferSerializtion=="boolean"?options.singleBufferSerializtion:true;this.serializationFunction=this.singleBufferSerializtion?"toBinUnified":"toBin";this.ca=options.ca||null;this.cert=options.cert||null;this.key=options.key||null;this.passphrase=options.passphrase||null;this.ssl=typeof options.ssl=="boolean"?options.ssl:false;this.rejectUnauthorized=typeof options.rejectUnauthorized=="boolean"?options.rejectUnauthorized:true;if(!this.ssl)this.rejectUnauthorized=false;this.responseOptions={promoteLongs:typeof options.promoteLongs=="boolean"?options.promoteLongs:true};this.flushing=false;this.queue=[];this.connection=null;this.writeStream=null};inherits(Connection,EventEmitter);var errorHandler=function(self){return function(err){if(self.logger.isDebug())self.logger.debug(f("connection %s for [%s:%s] errored out with [%s]",self.id,self.host,self.port,JSON.stringify(err)));if(self.listeners("error").length>0)self.emit("error",MongoError.create(err),self)}};var timeoutHandler=function(self){return function(){if(self.logger.isDebug())self.logger.debug(f("connection %s for [%s:%s] timed out",self.id,self.host,self.port));self.emit("timeout",MongoError.create(f("connection %s to %s:%s timed out",self.id,self.host,self.port)),self)}};var closeHandler=function(self){return function(hadError){if(self.logger.isDebug())self.logger.debug(f("connection %s with for [%s:%s] closed",self.id,self.host,self.port));if(!hadError){self.emit("close",MongoError.create(f("connection %s to %s:%s closed",self.id,self.host,self.port)),self)}}};var dataHandler=function(self){return function(data){while(data.length>0){if(self.bytesRead>0&&self.sizeOfMessage>0){var remainingBytesToRead=self.sizeOfMessage-self.bytesRead;if(remainingBytesToRead>data.length){data.copy(self.buffer,self.bytesRead);self.bytesRead=self.bytesRead+data.length;data=new Buffer(0)}else{data.copy(self.buffer,self.bytesRead,0,remainingBytesToRead);data=data.slice(remainingBytesToRead);try{var emitBuffer=self.buffer;self.buffer=null;self.sizeOfMessage=0;self.bytesRead=0;self.stubBuffer=null;self.messageHandler(new Response(self.bson,emitBuffer,self.responseOptions),self)}catch(err){var errorObject={err:"socketHandler",trace:err,bin:self.buffer,parseState:{sizeOfMessage:self.sizeOfMessage,bytesRead:self.bytesRead,stubBuffer:self.stubBuffer}};self.emit("parseError",errorObject,self)}}}else{if(self.stubBuffer!=null&&self.stubBuffer.length>0){if(self.stubBuffer.length+data.length>4){var newData=new Buffer(self.stubBuffer.length+data.length);self.stubBuffer.copy(newData,0);data.copy(newData,self.stubBuffer.length);data=newData;self.buffer=null;self.sizeOfMessage=0;self.bytesRead=0;self.stubBuffer=null}else{var newStubBuffer=new Buffer(self.stubBuffer.length+data.length);self.stubBuffer.copy(newStubBuffer,0);data.copy(newStubBuffer,self.stubBuffer.length);data=new Buffer(0)}}else{if(data.length>4){var sizeOfMessage=data[0]|data[1]<<8|data[2]<<16|data[3]<<24;if(sizeOfMessage<0||sizeOfMessage>self.maxBsonMessageSize){var errorObject={err:"socketHandler",trace:"",bin:self.buffer,parseState:{sizeOfMessage:sizeOfMessage,bytesRead:self.bytesRead,stubBuffer:self.stubBuffer}};self.emit("parseError",errorObject,self);return}if(sizeOfMessage>4&&sizeOfMessage<self.maxBsonMessageSize&&sizeOfMessage>data.length){self.buffer=new Buffer(sizeOfMessage);data.copy(self.buffer,0);self.bytesRead=data.length;self.sizeOfMessage=sizeOfMessage;self.stubBuffer=null;data=new Buffer(0)}else if(sizeOfMessage>4&&sizeOfMessage<self.maxBsonMessageSize&&sizeOfMessage==data.length){try{var emitBuffer=data;self.buffer=null;self.sizeOfMessage=0;self.bytesRead=0;self.stubBuffer=null;data=new Buffer(0);self.messageHandler(new Response(self.bson,emitBuffer,self.responseOptions),self)}catch(err){var errorObject={err:"socketHandler",trace:err,bin:self.buffer,parseState:{sizeOfMessage:self.sizeOfMessage,bytesRead:self.bytesRead,stubBuffer:self.stubBuffer}};self.emit("parseError",errorObject,self)}}else if(sizeOfMessage<=4||sizeOfMessage>self.maxBsonMessageSize){var errorObject={err:"socketHandler",trace:null,bin:data,parseState:{sizeOfMessage:sizeOfMessage,bytesRead:0,buffer:null,stubBuffer:null}};self.emit("parseError",errorObject,self);self.buffer=null;self.sizeOfMessage=0;self.bytesRead=0;self.stubBuffer=null;data=new Buffer(0)}else{var emitBuffer=data.slice(0,sizeOfMessage);self.buffer=null;self.sizeOfMessage=0;self.bytesRead=0;self.stubBuffer=null;data=data.slice(sizeOfMessage);self.messageHandler(new Response(self.bson,emitBuffer,self.responseOptions),self)}}else{self.stubBuffer=new Buffer(data.length);data.copy(self.stubBuffer,0);data=new Buffer(0)}}}}}};Connection.prototype.connect=function(_options){var self=this;_options=_options||{};if(typeof _options.promoteLongs=="boolean"){self.responseOptions.promoteLongs=_options.promoteLongs}self.connection=self.domainSocket?net.createConnection(self.host):net.createConnection(self.port,self.host);self.connection.setKeepAlive(self.keepAlive,self.keepAliveInitialDelay);self.connection.setTimeout(self.connectionTimeout);self.connection.setNoDelay(self.noDelay);if(self.ssl){var sslOptions={socket:self.connection,rejectUnauthorized:self.rejectUnauthorized};if(self.ca)sslOptions.ca=self.ca;if(self.cert)sslOptions.cert=self.cert;if(self.key)sslOptions.key=self.key;if(self.passphrase)sslOptions.passphrase=self.passphrase;self.connection=tls.connect(self.port,self.host,sslOptions,function(){if(self.connection.authorizationError&&self.rejectUnauthorized){return self.emit("error",self.connection.authorizationError,self,{ssl:true})}self.connection.setTimeout(self.socketTimeout);self.emit("connect",self)})}else{self.connection.on("connect",function(){self.connection.setTimeout(self.socketTimeout);self.emit("connect",self)})}self.connection.once("error",errorHandler(self));self.connection.once("timeout",timeoutHandler(self));self.connection.once("close",closeHandler(self));self.connection.on("data",dataHandler(self))};Connection.prototype.destroy=function(){if(this.connection)this.connection.destroy()};Connection.prototype.write=function(buffer){if(this.logger.isDebug())this.logger.debug(f("writing buffer [%s] to %s:%s",buffer.toString("hex"),this.host,this.port));this.connection.write(buffer,"binary")};Connection.prototype.toString=function(){return""+this.id};Connection.prototype.toJSON=function(){return{id:this.id,host:this.host,port:this.port}};Connection.prototype.isConnected=function(){return!this.connection.destroyed&&this.connection.writable};module.exports=Connection}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){"use strict";var MongoError=__webpack_require__(319);var OP_UPDATE=2001;var OP_INSERT=2002;var OP_DELETE=2006;var Insert=function(requestId,ismaster,bson,ns,documents,options){if(ns==null)throw new MongoError("ns must be specified for query");if(!Array.isArray(documents)||documents.length==0)throw new MongoError("documents array must contain at least one document to insert");if(!!~ns.indexOf("\x00")){throw new MongoError("namespace cannot contain a null character")}this.requestId=requestId;this.bson=bson;this.ns=ns;this.documents=documents;this.ismaster=ismaster;options=options||{};this.serializeFunctions=typeof options.serializeFunctions=="boolean"?options.serializeFunctions:false;this.checkKeys=typeof options.checkKeys=="boolean"?options.checkKeys:true;this.continueOnError=typeof options.continueOnError=="boolean"?options.continueOnError:false;this.flags=this.continueOnError?1:0};Insert.prototype.toBin=function(){var length=4+Buffer.byteLength(this.ns)+1+4*4;for(var i=0;i<this.documents.length;i++){var docsize=this.bson.calculateObjectSize(this.documents[i],this.serializeFunctions,true);if(docsize>this.ismaster.maxBsonObjectSize){throw new MongoError("Document exceeds maximum allowed bson size of "+this.ismaster.maxBsonObjectSize+" bytes")}length+=docsize}if(length>this.ismaster.maxBsonObjectSize){throw new MongoError("Command exceeds maximum message size of "+this.ismaster.maxMessageSizeBytes+" bytes")}var buffer=new Buffer(length);var index=0;buffer[index+3]=length>>24&255;buffer[index+2]=length>>16&255;buffer[index+1]=length>>8&255;buffer[index]=length&255;index=index+4;buffer[index+3]=this.requestId>>24&255;buffer[index+2]=this.requestId>>16&255;buffer[index+1]=this.requestId>>8&255;buffer[index]=this.requestId&255;index=index+4;buffer[index+3]=0>>24&255;buffer[index+2]=0>>16&255;buffer[index+1]=0>>8&255;buffer[index]=0&255;index=index+4;buffer[index+3]=OP_INSERT>>24&255;buffer[index+2]=OP_INSERT>>16&255;buffer[index+1]=OP_INSERT>>8&255;buffer[index]=OP_INSERT&255;index=index+4;buffer[index+3]=this.flags>>24&255;buffer[index+2]=this.flags>>16&255;buffer[index+1]=this.flags>>8&255;buffer[index]=this.flags&255;index=index+4;index=index+buffer.write(this.ns,index,"utf8")+1;buffer[index-1]=0;for(var i=0;i<this.documents.length;i++){var newIndex=this.bson.serializeWithBufferAndIndex(this.documents[i],this.checkKeys,buffer,index,this.serializeFunctions);var docSize=newIndex-index+1;buffer[index+3]=docSize>>24&255;buffer[index+2]=docSize>>16&255;buffer[index+1]=docSize>>8&255;buffer[index]=docSize&255;index=index+docSize;buffer[index-1]=0}return buffer};var Update=function(requestId,ismaster,bson,ns,update,options){if(ns==null)throw new MongoError("ns must be specified for query");options=options||{};this.requestId=requestId;this.bson=bson;this.ns=ns;this.ismaster=ismaster;this.serializeFunctions=typeof options.serializeFunctions=="boolean"?options.serializeFunctions:false;this.checkKeys=typeof options.checkKeys=="boolean"?options.checkKeys:false;this.upsert=typeof update[0].upsert=="boolean"?update[0].upsert:false;this.multi=typeof update[0].multi=="boolean"?update[0].multi:false;this.q=update[0].q;this.u=update[0].u;this.flags=this.upsert?1:0;this.flags=this.multi?this.flags|2:this.flags};Update.prototype.toBin=function(){var length=4*4+4+Buffer.byteLength(this.ns)+1+4;var qSize=this.bson.calculateObjectSize(this.q,this.serializeFunctions,true);var uSize=this.bson.calculateObjectSize(this.u,this.serializeFunctions,true);length=length+qSize+uSize;var buffer=new Buffer(length);var index=0;buffer[index+3]=length>>24&255;buffer[index+2]=length>>16&255;buffer[index+1]=length>>8&255;buffer[index]=length&255;index=index+4;buffer[index+3]=this.requestId>>24&255;buffer[index+2]=this.requestId>>16&255;buffer[index+1]=this.requestId>>8&255;buffer[index]=this.requestId&255;index=index+4;buffer[index+3]=0>>24&255;buffer[index+2]=0>>16&255;buffer[index+1]=0>>8&255;buffer[index]=0&255;index=index+4;buffer[index+3]=OP_UPDATE>>24&255;buffer[index+2]=OP_UPDATE>>16&255;buffer[index+1]=OP_UPDATE>>8&255;buffer[index]=OP_UPDATE&255;index=index+4;buffer[index+3]=0>>24&255;buffer[index+2]=0>>16&255;buffer[index+1]=0>>8&255;buffer[index]=0&255;index=index+4;index=index+buffer.write(this.ns,index,"utf8")+1;buffer[index-1]=0;buffer[index+3]=this.flags>>24&255;buffer[index+2]=this.flags>>16&255;buffer[index+1]=this.flags>>8&255;buffer[index]=this.flags&255;index=index+4;var length=this.bson.serializeWithBufferAndIndex(this.q,this.checkKeys,buffer,index,this.serializeFunctions)-index+1;buffer[index+3]=length>>24&255;buffer[index+2]=length>>16&255;buffer[index+1]=length>>8&255;buffer[index]=length&255;index=index+length;length=this.bson.serializeWithBufferAndIndex(this.u,false,buffer,index,this.serializeFunctions)-index+1;buffer[index+3]=length>>24&255;buffer[index+2]=length>>16&255;buffer[index+1]=length>>8&255;buffer[index]=length&255;index=index+length;return buffer};var Remove=function(requestId,ismaster,bson,ns,remove,options){if(ns==null)throw new MongoError("ns must be specified for query");options=options||{};this.requestId=requestId;this.bson=bson;this.ns=ns;this.ismaster=ismaster;this.serializeFunctions=typeof options.serializeFunctions=="boolean"?options.serializeFunctions:false;this.checkKeys=typeof options.checkKeys=="boolean"?options.checkKeys:false;this.limit=typeof remove[0].limit=="number"?remove[0].limit:1;this.q=remove[0].q;this.flags=this.limit==1?1:0};Remove.prototype.toBin=function(){var length=4*4+4+Buffer.byteLength(this.ns)+1+4;var qSize=this.bson.calculateObjectSize(this.q,this.serializeFunctions,true);length=length+qSize;var buffer=new Buffer(length);var index=0;buffer[index+3]=length>>24&255;buffer[index+2]=length>>16&255;buffer[index+1]=length>>8&255;buffer[index]=length&255;index=index+4;buffer[index+3]=this.requestId>>24&255;buffer[index+2]=this.requestId>>16&255;buffer[index+1]=this.requestId>>8&255;buffer[index]=this.requestId&255;index=index+4;buffer[index+3]=0>>24&255;buffer[index+2]=0>>16&255;buffer[index+1]=0>>8&255;buffer[index]=0&255;index=index+4;buffer[index+3]=OP_DELETE>>24&255;buffer[index+2]=OP_DELETE>>16&255;buffer[index+1]=OP_DELETE>>8&255;buffer[index]=OP_DELETE&255;index=index+4;buffer[index+3]=0>>24&255;buffer[index+2]=0>>16&255;buffer[index+1]=0>>8&255;buffer[index]=0&255;index=index+4;index=index+buffer.write(this.ns,index,"utf8")+1;buffer[index-1]=0;buffer[index+3]=this.flags>>24&255;buffer[index+2]=this.flags>>16&255;buffer[index+1]=this.flags>>8&255;buffer[index]=this.flags&255;index=index+4;var length=this.bson.serializeWithBufferAndIndex(this.q,this.checkKeys,buffer,index,this.serializeFunctions)-index+1;buffer[index+3]=length>>24&255;buffer[index+2]=length>>16&255;buffer[index+1]=length>>8&255;buffer[index]=length&255;index=index+length;return buffer};module.exports={Insert:Insert,Update:Update,Remove:Remove}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){lazyProperty(module.exports,"bufferConcat",function bufferConcat(){return Buffer.concat||__webpack_require__(656)});lazyProperty(module.exports,"callSiteToString",function callSiteToString(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;function prepareObjectStackTrace(obj,stack){return stack}Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=2;Error.captureStackTrace(obj);var stack=obj.stack.slice();Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack[0].toString?toString:__webpack_require__(657)});function lazyProperty(obj,prop,getter){function get(){var val=getter();Object.defineProperty(obj,prop,{configurable:true,enumerable:true,value:val});return val}Object.defineProperty(obj,prop,{configurable:true,enumerable:true,get:get})}function toString(obj){return obj.toString()}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){var Stringify=__webpack_require__(658);var Parse=__webpack_require__(659);var internals={};module.exports={stringify:Stringify,parse:Parse}},function(module,exports,__webpack_require__){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(527);exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},function(module,exports,__webpack_require__){function Long(low,high){if(!(this instanceof Long))return new Long(low,high);this._bsontype="Long";this.low_=low|0;this.high_=high|0}Long.prototype.toInt=function(){return this.low_};Long.prototype.toNumber=function(){return this.high_*Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};Long.prototype.toJSON=function(){return this.toString()};Long.prototype.toString=function(opt_radix){var radix=opt_radix||10;if(radix<2||36<radix){throw Error("radix out of range: "+radix)}if(this.isZero()){return"0"}if(this.isNegative()){if(this.equals(Long.MIN_VALUE)){var radixLong=Long.fromNumber(radix);var div=this.div(radixLong);var rem=div.multiply(radixLong).subtract(this);return div.toString(radix)+rem.toInt().toString(radix)}else{return"-"+this.negate().toString(radix)}}var radixToPower=Long.fromNumber(Math.pow(radix,6));var rem=this;var result="";while(true){var remDiv=rem.div(radixToPower);var intval=rem.subtract(remDiv.multiply(radixToPower)).toInt();var digits=intval.toString(radix);rem=remDiv;if(rem.isZero()){return digits+result}else{while(digits.length<6){digits="0"+digits}result=""+digits+result}}};Long.prototype.getHighBits=function(){return this.high_};Long.prototype.getLowBits=function(){return this.low_};Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Long.TWO_PWR_32_DBL_+this.low_};Long.prototype.getNumBitsAbs=function(){if(this.isNegative()){if(this.equals(Long.MIN_VALUE)){return 64}else{return this.negate().getNumBitsAbs()}}else{var val=this.high_!=0?this.high_:this.low_;for(var bit=31;bit>0;bit--){if((val&1<<bit)!=0){break}}return this.high_!=0?bit+33:bit+1}};Long.prototype.isZero=function(){return this.high_==0&&this.low_==0};Long.prototype.isNegative=function(){return this.high_<0};Long.prototype.isOdd=function(){return(this.low_&1)==1};Long.prototype.equals=function(other){return this.high_==other.high_&&this.low_==other.low_};Long.prototype.notEquals=function(other){return this.high_!=other.high_||this.low_!=other.low_};Long.prototype.lessThan=function(other){return this.compare(other)<0};Long.prototype.lessThanOrEqual=function(other){return this.compare(other)<=0};Long.prototype.greaterThan=function(other){return this.compare(other)>0};Long.prototype.greaterThanOrEqual=function(other){return this.compare(other)>=0};Long.prototype.compare=function(other){if(this.equals(other)){return 0}var thisNeg=this.isNegative();var otherNeg=other.isNegative();if(thisNeg&&!otherNeg){return-1}if(!thisNeg&&otherNeg){return 1}if(this.subtract(other).isNegative()){return-1}else{return 1}};Long.prototype.negate=function(){if(this.equals(Long.MIN_VALUE)){return Long.MIN_VALUE}else{return this.not().add(Long.ONE)}};Long.prototype.add=function(other){var a48=this.high_>>>16;var a32=this.high_&65535;var a16=this.low_>>>16;var a00=this.low_&65535;var b48=other.high_>>>16;var b32=other.high_&65535;var b16=other.low_>>>16;var b00=other.low_&65535;var c48=0,c32=0,c16=0,c00=0;c00+=a00+b00;c16+=c00>>>16;c00&=65535;c16+=a16+b16;c32+=c16>>>16;c16&=65535;c32+=a32+b32;c48+=c32>>>16;c32&=65535;c48+=a48+b48;c48&=65535;return Long.fromBits(c16<<16|c00,c48<<16|c32)};Long.prototype.subtract=function(other){return this.add(other.negate())};Long.prototype.multiply=function(other){if(this.isZero()){return Long.ZERO}else if(other.isZero()){return Long.ZERO}if(this.equals(Long.MIN_VALUE)){return other.isOdd()?Long.MIN_VALUE:Long.ZERO}else if(other.equals(Long.MIN_VALUE)){return this.isOdd()?Long.MIN_VALUE:Long.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().multiply(other.negate())}else{return this.negate().multiply(other).negate()}}else if(other.isNegative()){return this.multiply(other.negate()).negate()}if(this.lessThan(Long.TWO_PWR_24_)&&other.lessThan(Long.TWO_PWR_24_)){return Long.fromNumber(this.toNumber()*other.toNumber())}var a48=this.high_>>>16;var a32=this.high_&65535;var a16=this.low_>>>16;var a00=this.low_&65535;var b48=other.high_>>>16;var b32=other.high_&65535;var b16=other.low_>>>16;var b00=other.low_&65535;var c48=0,c32=0,c16=0,c00=0;c00+=a00*b00;c16+=c00>>>16;c00&=65535;c16+=a16*b00;c32+=c16>>>16;c16&=65535;c16+=a00*b16;c32+=c16>>>16;c16&=65535;c32+=a32*b00;c48+=c32>>>16;c32&=65535;c32+=a16*b16;c48+=c32>>>16;c32&=65535;c32+=a00*b32;c48+=c32>>>16;c32&=65535;c48+=a48*b00+a32*b16+a16*b32+a00*b48;c48&=65535;return Long.fromBits(c16<<16|c00,c48<<16|c32)};Long.prototype.div=function(other){if(other.isZero()){throw Error("division by zero")}else if(this.isZero()){return Long.ZERO}if(this.equals(Long.MIN_VALUE)){if(other.equals(Long.ONE)||other.equals(Long.NEG_ONE)){return Long.MIN_VALUE}else if(other.equals(Long.MIN_VALUE)){return Long.ONE}else{var halfThis=this.shiftRight(1);var approx=halfThis.div(other).shiftLeft(1);if(approx.equals(Long.ZERO)){return other.isNegative()?Long.ONE:Long.NEG_ONE}else{var rem=this.subtract(other.multiply(approx));var result=approx.add(rem.div(other));return result}}}else if(other.equals(Long.MIN_VALUE)){return Long.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().div(other.negate())}else{return this.negate().div(other).negate()}}else if(other.isNegative()){return this.div(other.negate()).negate()}var res=Long.ZERO;var rem=this;while(rem.greaterThanOrEqual(other)){var approx=Math.max(1,Math.floor(rem.toNumber()/other.toNumber()));var log2=Math.ceil(Math.log(approx)/Math.LN2);var delta=log2<=48?1:Math.pow(2,log2-48);var approxRes=Long.fromNumber(approx);var approxRem=approxRes.multiply(other);while(approxRem.isNegative()||approxRem.greaterThan(rem)){approx-=delta;approxRes=Long.fromNumber(approx);approxRem=approxRes.multiply(other)}if(approxRes.isZero()){approxRes=Long.ONE}res=res.add(approxRes);rem=rem.subtract(approxRem)}return res};Long.prototype.modulo=function(other){return this.subtract(this.div(other).multiply(other))};Long.prototype.not=function(){return Long.fromBits(~this.low_,~this.high_)};Long.prototype.and=function(other){return Long.fromBits(this.low_&other.low_,this.high_&other.high_)};Long.prototype.or=function(other){return Long.fromBits(this.low_|other.low_,this.high_|other.high_)};Long.prototype.xor=function(other){return Long.fromBits(this.low_^other.low_,this.high_^other.high_)};Long.prototype.shiftLeft=function(numBits){numBits&=63;if(numBits==0){return this}else{var low=this.low_;if(numBits<32){var high=this.high_;return Long.fromBits(low<<numBits,high<<numBits|low>>>32-numBits)}else{return Long.fromBits(0,low<<numBits-32)}}};Long.prototype.shiftRight=function(numBits){numBits&=63;if(numBits==0){return this}else{var high=this.high_;if(numBits<32){var low=this.low_;return Long.fromBits(low>>>numBits|high<<32-numBits,high>>numBits)}else{return Long.fromBits(high>>numBits-32,high>=0?0:-1)}}};Long.prototype.shiftRightUnsigned=function(numBits){numBits&=63;if(numBits==0){return this}else{var high=this.high_;if(numBits<32){var low=this.low_;return Long.fromBits(low>>>numBits|high<<32-numBits,high>>>numBits)}else if(numBits==32){return Long.fromBits(high,0)}else{return Long.fromBits(high>>>numBits-32,0)}}};Long.fromInt=function(value){if(-128<=value&&value<128){var cachedObj=Long.INT_CACHE_[value];if(cachedObj){return cachedObj}}var obj=new Long(value|0,value<0?-1:0);if(-128<=value&&value<128){Long.INT_CACHE_[value]=obj}return obj};Long.fromNumber=function(value){if(isNaN(value)||!isFinite(value)){return Long.ZERO}else if(value<=-Long.TWO_PWR_63_DBL_){return Long.MIN_VALUE}else if(value+1>=Long.TWO_PWR_63_DBL_){return Long.MAX_VALUE}else if(value<0){return Long.fromNumber(-value).negate()}else{return new Long(value%Long.TWO_PWR_32_DBL_|0,value/Long.TWO_PWR_32_DBL_|0)}};Long.fromBits=function(lowBits,highBits){return new Long(lowBits,highBits)};Long.fromString=function(str,opt_radix){if(str.length==0){throw Error("number format error: empty string")}var radix=opt_radix||10;if(radix<2||36<radix){throw Error("radix out of range: "+radix)}if(str.charAt(0)=="-"){return Long.fromString(str.substring(1),radix).negate()}else if(str.indexOf("-")>=0){throw Error('number format error: interior "-" character: '+str)}var radixToPower=Long.fromNumber(Math.pow(radix,8));var result=Long.ZERO;for(var i=0;i<str.length;i+=8){var size=Math.min(8,str.length-i);var value=parseInt(str.substring(i,i+size),radix);if(size<8){var power=Long.fromNumber(Math.pow(radix,size));result=result.multiply(power).add(Long.fromNumber(value))}else{result=result.multiply(radixToPower);result=result.add(Long.fromNumber(value))}}return result};Long.INT_CACHE_={};Long.TWO_PWR_16_DBL_=1<<16;Long.TWO_PWR_24_DBL_=1<<24;Long.TWO_PWR_32_DBL_=Long.TWO_PWR_16_DBL_*Long.TWO_PWR_16_DBL_;Long.TWO_PWR_31_DBL_=Long.TWO_PWR_32_DBL_/2;Long.TWO_PWR_48_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_16_DBL_;Long.TWO_PWR_64_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_32_DBL_;Long.TWO_PWR_63_DBL_=Long.TWO_PWR_64_DBL_/2;Long.ZERO=Long.fromInt(0);Long.ONE=Long.fromInt(1);Long.NEG_ONE=Long.fromInt(-1);Long.MAX_VALUE=Long.fromBits(4294967295|0,2147483647|0);Long.MIN_VALUE=Long.fromBits(0,2147483648|0);Long.TWO_PWR_24_=Long.fromInt(1<<24);module.exports=Long;module.exports.Long=Long},function(module,exports,__webpack_require__){function Double(value){if(!(this instanceof Double))return new Double(value);this._bsontype="Double";this.value=value}Double.prototype.valueOf=function(){return this.value};Double.prototype.toJSON=function(){return this.value};module.exports=Double;module.exports.Double=Double},function(module,exports,__webpack_require__){function Timestamp(low,high){if(!(this instanceof Timestamp))return new Timestamp(low,high);this._bsontype="Timestamp";this.low_=low|0;this.high_=high|0}Timestamp.prototype.toInt=function(){return this.low_};Timestamp.prototype.toNumber=function(){return this.high_*Timestamp.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};Timestamp.prototype.toJSON=function(){return this.toString()};Timestamp.prototype.toString=function(opt_radix){var radix=opt_radix||10;if(radix<2||36<radix){throw Error("radix out of range: "+radix)}if(this.isZero()){return"0"}if(this.isNegative()){if(this.equals(Timestamp.MIN_VALUE)){var radixTimestamp=Timestamp.fromNumber(radix);var div=this.div(radixTimestamp);var rem=div.multiply(radixTimestamp).subtract(this);return div.toString(radix)+rem.toInt().toString(radix)}else{return"-"+this.negate().toString(radix)}}var radixToPower=Timestamp.fromNumber(Math.pow(radix,6));var rem=this;var result="";while(true){var remDiv=rem.div(radixToPower);var intval=rem.subtract(remDiv.multiply(radixToPower)).toInt();var digits=intval.toString(radix);rem=remDiv;if(rem.isZero()){return digits+result}else{while(digits.length<6){digits="0"+digits}result=""+digits+result}}};Timestamp.prototype.getHighBits=function(){return this.high_};Timestamp.prototype.getLowBits=function(){return this.low_};Timestamp.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Timestamp.TWO_PWR_32_DBL_+this.low_};Timestamp.prototype.getNumBitsAbs=function(){if(this.isNegative()){if(this.equals(Timestamp.MIN_VALUE)){return 64}else{return this.negate().getNumBitsAbs()}}else{var val=this.high_!=0?this.high_:this.low_;for(var bit=31;bit>0;bit--){if((val&1<<bit)!=0){break}}return this.high_!=0?bit+33:bit+1}};Timestamp.prototype.isZero=function(){return this.high_==0&&this.low_==0};Timestamp.prototype.isNegative=function(){return this.high_<0};Timestamp.prototype.isOdd=function(){return(this.low_&1)==1};Timestamp.prototype.equals=function(other){return this.high_==other.high_&&this.low_==other.low_};Timestamp.prototype.notEquals=function(other){return this.high_!=other.high_||this.low_!=other.low_};Timestamp.prototype.lessThan=function(other){return this.compare(other)<0};Timestamp.prototype.lessThanOrEqual=function(other){return this.compare(other)<=0};Timestamp.prototype.greaterThan=function(other){return this.compare(other)>0};Timestamp.prototype.greaterThanOrEqual=function(other){return this.compare(other)>=0};Timestamp.prototype.compare=function(other){if(this.equals(other)){return 0}var thisNeg=this.isNegative();var otherNeg=other.isNegative();if(thisNeg&&!otherNeg){return-1}if(!thisNeg&&otherNeg){return 1}if(this.subtract(other).isNegative()){return-1}else{return 1}};Timestamp.prototype.negate=function(){if(this.equals(Timestamp.MIN_VALUE)){return Timestamp.MIN_VALUE}else{return this.not().add(Timestamp.ONE)}};Timestamp.prototype.add=function(other){var a48=this.high_>>>16;var a32=this.high_&65535;var a16=this.low_>>>16;var a00=this.low_&65535;var b48=other.high_>>>16;var b32=other.high_&65535;var b16=other.low_>>>16;var b00=other.low_&65535;var c48=0,c32=0,c16=0,c00=0;c00+=a00+b00;c16+=c00>>>16;c00&=65535;c16+=a16+b16;c32+=c16>>>16;c16&=65535;c32+=a32+b32;c48+=c32>>>16;c32&=65535;c48+=a48+b48;c48&=65535;return Timestamp.fromBits(c16<<16|c00,c48<<16|c32)};Timestamp.prototype.subtract=function(other){return this.add(other.negate())};Timestamp.prototype.multiply=function(other){if(this.isZero()){return Timestamp.ZERO}else if(other.isZero()){return Timestamp.ZERO}if(this.equals(Timestamp.MIN_VALUE)){return other.isOdd()?Timestamp.MIN_VALUE:Timestamp.ZERO}else if(other.equals(Timestamp.MIN_VALUE)){return this.isOdd()?Timestamp.MIN_VALUE:Timestamp.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().multiply(other.negate())}else{return this.negate().multiply(other).negate()}}else if(other.isNegative()){return this.multiply(other.negate()).negate()}if(this.lessThan(Timestamp.TWO_PWR_24_)&&other.lessThan(Timestamp.TWO_PWR_24_)){return Timestamp.fromNumber(this.toNumber()*other.toNumber())}var a48=this.high_>>>16;var a32=this.high_&65535;var a16=this.low_>>>16;var a00=this.low_&65535;var b48=other.high_>>>16;var b32=other.high_&65535;var b16=other.low_>>>16;var b00=other.low_&65535;var c48=0,c32=0,c16=0,c00=0;c00+=a00*b00;c16+=c00>>>16;c00&=65535;c16+=a16*b00;c32+=c16>>>16;c16&=65535;c16+=a00*b16;c32+=c16>>>16;c16&=65535;c32+=a32*b00;c48+=c32>>>16;c32&=65535;c32+=a16*b16;c48+=c32>>>16;c32&=65535;c32+=a00*b32;c48+=c32>>>16;c32&=65535;c48+=a48*b00+a32*b16+a16*b32+a00*b48;c48&=65535;return Timestamp.fromBits(c16<<16|c00,c48<<16|c32)};Timestamp.prototype.div=function(other){if(other.isZero()){throw Error("division by zero")}else if(this.isZero()){return Timestamp.ZERO}if(this.equals(Timestamp.MIN_VALUE)){if(other.equals(Timestamp.ONE)||other.equals(Timestamp.NEG_ONE)){return Timestamp.MIN_VALUE}else if(other.equals(Timestamp.MIN_VALUE)){return Timestamp.ONE}else{var halfThis=this.shiftRight(1);var approx=halfThis.div(other).shiftLeft(1);if(approx.equals(Timestamp.ZERO)){return other.isNegative()?Timestamp.ONE:Timestamp.NEG_ONE}else{var rem=this.subtract(other.multiply(approx));var result=approx.add(rem.div(other));return result}}}else if(other.equals(Timestamp.MIN_VALUE)){return Timestamp.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().div(other.negate())}else{return this.negate().div(other).negate();

}}else if(other.isNegative()){return this.div(other.negate()).negate()}var res=Timestamp.ZERO;var rem=this;while(rem.greaterThanOrEqual(other)){var approx=Math.max(1,Math.floor(rem.toNumber()/other.toNumber()));var log2=Math.ceil(Math.log(approx)/Math.LN2);var delta=log2<=48?1:Math.pow(2,log2-48);var approxRes=Timestamp.fromNumber(approx);var approxRem=approxRes.multiply(other);while(approxRem.isNegative()||approxRem.greaterThan(rem)){approx-=delta;approxRes=Timestamp.fromNumber(approx);approxRem=approxRes.multiply(other)}if(approxRes.isZero()){approxRes=Timestamp.ONE}res=res.add(approxRes);rem=rem.subtract(approxRem)}return res};Timestamp.prototype.modulo=function(other){return this.subtract(this.div(other).multiply(other))};Timestamp.prototype.not=function(){return Timestamp.fromBits(~this.low_,~this.high_)};Timestamp.prototype.and=function(other){return Timestamp.fromBits(this.low_&other.low_,this.high_&other.high_)};Timestamp.prototype.or=function(other){return Timestamp.fromBits(this.low_|other.low_,this.high_|other.high_)};Timestamp.prototype.xor=function(other){return Timestamp.fromBits(this.low_^other.low_,this.high_^other.high_)};Timestamp.prototype.shiftLeft=function(numBits){numBits&=63;if(numBits==0){return this}else{var low=this.low_;if(numBits<32){var high=this.high_;return Timestamp.fromBits(low<<numBits,high<<numBits|low>>>32-numBits)}else{return Timestamp.fromBits(0,low<<numBits-32)}}};Timestamp.prototype.shiftRight=function(numBits){numBits&=63;if(numBits==0){return this}else{var high=this.high_;if(numBits<32){var low=this.low_;return Timestamp.fromBits(low>>>numBits|high<<32-numBits,high>>numBits)}else{return Timestamp.fromBits(high>>numBits-32,high>=0?0:-1)}}};Timestamp.prototype.shiftRightUnsigned=function(numBits){numBits&=63;if(numBits==0){return this}else{var high=this.high_;if(numBits<32){var low=this.low_;return Timestamp.fromBits(low>>>numBits|high<<32-numBits,high>>>numBits)}else if(numBits==32){return Timestamp.fromBits(high,0)}else{return Timestamp.fromBits(high>>>numBits-32,0)}}};Timestamp.fromInt=function(value){if(-128<=value&&value<128){var cachedObj=Timestamp.INT_CACHE_[value];if(cachedObj){return cachedObj}}var obj=new Timestamp(value|0,value<0?-1:0);if(-128<=value&&value<128){Timestamp.INT_CACHE_[value]=obj}return obj};Timestamp.fromNumber=function(value){if(isNaN(value)||!isFinite(value)){return Timestamp.ZERO}else if(value<=-Timestamp.TWO_PWR_63_DBL_){return Timestamp.MIN_VALUE}else if(value+1>=Timestamp.TWO_PWR_63_DBL_){return Timestamp.MAX_VALUE}else if(value<0){return Timestamp.fromNumber(-value).negate()}else{return new Timestamp(value%Timestamp.TWO_PWR_32_DBL_|0,value/Timestamp.TWO_PWR_32_DBL_|0)}};Timestamp.fromBits=function(lowBits,highBits){return new Timestamp(lowBits,highBits)};Timestamp.fromString=function(str,opt_radix){if(str.length==0){throw Error("number format error: empty string")}var radix=opt_radix||10;if(radix<2||36<radix){throw Error("radix out of range: "+radix)}if(str.charAt(0)=="-"){return Timestamp.fromString(str.substring(1),radix).negate()}else if(str.indexOf("-")>=0){throw Error('number format error: interior "-" character: '+str)}var radixToPower=Timestamp.fromNumber(Math.pow(radix,8));var result=Timestamp.ZERO;for(var i=0;i<str.length;i+=8){var size=Math.min(8,str.length-i);var value=parseInt(str.substring(i,i+size),radix);if(size<8){var power=Timestamp.fromNumber(Math.pow(radix,size));result=result.multiply(power).add(Timestamp.fromNumber(value))}else{result=result.multiply(radixToPower);result=result.add(Timestamp.fromNumber(value))}}return result};Timestamp.INT_CACHE_={};Timestamp.TWO_PWR_16_DBL_=1<<16;Timestamp.TWO_PWR_24_DBL_=1<<24;Timestamp.TWO_PWR_32_DBL_=Timestamp.TWO_PWR_16_DBL_*Timestamp.TWO_PWR_16_DBL_;Timestamp.TWO_PWR_31_DBL_=Timestamp.TWO_PWR_32_DBL_/2;Timestamp.TWO_PWR_48_DBL_=Timestamp.TWO_PWR_32_DBL_*Timestamp.TWO_PWR_16_DBL_;Timestamp.TWO_PWR_64_DBL_=Timestamp.TWO_PWR_32_DBL_*Timestamp.TWO_PWR_32_DBL_;Timestamp.TWO_PWR_63_DBL_=Timestamp.TWO_PWR_64_DBL_/2;Timestamp.ZERO=Timestamp.fromInt(0);Timestamp.ONE=Timestamp.fromInt(1);Timestamp.NEG_ONE=Timestamp.fromInt(-1);Timestamp.MAX_VALUE=Timestamp.fromBits(4294967295|0,2147483647|0);Timestamp.MIN_VALUE=Timestamp.fromBits(0,2147483648|0);Timestamp.TWO_PWR_24_=Timestamp.fromInt(1<<24);module.exports=Timestamp;module.exports.Timestamp=Timestamp},function(module,exports,__webpack_require__){(function(process){var BinaryParser=__webpack_require__(621).BinaryParser;var MACHINE_ID=parseInt(Math.random()*16777215,10);var checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$");var ObjectID=function ObjectID(id){if(!(this instanceof ObjectID))return new ObjectID(id);if(id instanceof ObjectID)return id;this._bsontype="ObjectID";var __id=null;var valid=ObjectID.isValid(id);if(!valid&&id!=null){throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}else if(valid&&typeof id=="string"&&id.length==24){return ObjectID.createFromHexString(id)}else if(id==null||typeof id=="number"){this.id=this.generate(id)}else if(id!=null&&id.length===12){this.id=id}if(ObjectID.cacheHexString)this.__id=this.toHexString()};var ObjectId=ObjectID;var hexTable=[];for(var i=0;i<256;i++){hexTable[i]=(i<=15?"0":"")+i.toString(16)}ObjectID.prototype.toHexString=function(){if(ObjectID.cacheHexString&&this.__id)return this.__id;var hexString="";for(var i=0;i<this.id.length;i++){hexString+=hexTable[this.id.charCodeAt(i)]}if(ObjectID.cacheHexString)this.__id=hexString;return hexString};ObjectID.prototype.get_inc=function(){return ObjectID.index=(ObjectID.index+1)%16777215};ObjectID.prototype.getInc=function(){return this.get_inc()};ObjectID.prototype.generate=function(time){if("number"!=typeof time){time=parseInt(Date.now()/1e3,10)}var time4Bytes=BinaryParser.encodeInt(time,32,true,true);var machine3Bytes=BinaryParser.encodeInt(MACHINE_ID,24,false);var pid2Bytes=BinaryParser.fromShort(typeof process==="undefined"?Math.floor(Math.random()*1e5):process.pid%65535);var index3Bytes=BinaryParser.encodeInt(this.get_inc(),24,false,true);return time4Bytes+machine3Bytes+pid2Bytes+index3Bytes};ObjectID.prototype.toString=function(){return this.toHexString()};ObjectID.prototype.inspect=ObjectID.prototype.toString;ObjectID.prototype.toJSON=function(){return this.toHexString()};ObjectID.prototype.equals=function equals(otherID){if(otherID==null)return false;var id=otherID instanceof ObjectID||otherID.toHexString?otherID.id:ObjectID.createFromHexString(otherID).id;return this.id===id};ObjectID.prototype.getTimestamp=function(){var timestamp=new Date;timestamp.setTime(Math.floor(BinaryParser.decodeInt(this.id.substring(0,4),32,true,true))*1e3);return timestamp};ObjectID.index=parseInt(Math.random()*16777215,10);ObjectID.createPk=function createPk(){return new ObjectID};ObjectID.createFromTime=function createFromTime(time){var id=BinaryParser.encodeInt(time,32,true,true)+BinaryParser.encodeInt(0,64,true,true);return new ObjectID(id)};ObjectID.createFromHexString=function createFromHexString(hexString){if(typeof hexString==="undefined"||hexString!=null&&hexString.length!=24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");var len=hexString.length;if(len>12*2){throw new Error("Id cannot be longer than 12 bytes")}var result="",string,number;for(var index=0;index<len;index+=2){string=hexString.substr(index,2);number=parseInt(string,16);result+=BinaryParser.fromByte(number)}return new ObjectID(result,hexString)};ObjectID.isValid=function isValid(id){if(id==null)return false;if(id!=null&&"number"!=typeof id&&(id.length!=12&&id.length!=24)){return false}else{if(typeof id=="string"&&id.length==24)return checkForHexRegExp.test(id);return true}};Object.defineProperty(ObjectID.prototype,"generationTime",{enumerable:true,get:function(){return Math.floor(BinaryParser.decodeInt(this.id.substring(0,4),32,true,true))},set:function(value){var value=BinaryParser.encodeInt(value,32,true,true);this.id=value+this.id.substr(4);this.toHexString()}});module.exports=ObjectID;module.exports.ObjectID=ObjectID;module.exports.ObjectId=ObjectID}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){function Symbol(value){if(!(this instanceof Symbol))return new Symbol(value);this._bsontype="Symbol";this.value=value}Symbol.prototype.valueOf=function(){return this.value};Symbol.prototype.toString=function(){return this.value};Symbol.prototype.inspect=function(){return this.value};Symbol.prototype.toJSON=function(){return this.value};module.exports=Symbol;module.exports.Symbol=Symbol},function(module,exports,__webpack_require__){var Code=function Code(code,scope){if(!(this instanceof Code))return new Code(code,scope);this._bsontype="Code";this.code=code;this.scope=scope==null?{}:scope};Code.prototype.toJSON=function(){return{scope:this.scope,code:this.code}};module.exports=Code;module.exports.Code=Code},function(module,exports,__webpack_require__){function MinKey(){if(!(this instanceof MinKey))return new MinKey;this._bsontype="MinKey"}module.exports=MinKey;module.exports.MinKey=MinKey},function(module,exports,__webpack_require__){function MaxKey(){if(!(this instanceof MaxKey))return new MaxKey;this._bsontype="MaxKey"}module.exports=MaxKey;module.exports.MaxKey=MaxKey},function(module,exports,__webpack_require__){function DBRef(namespace,oid,db){if(!(this instanceof DBRef))return new DBRef(namespace,oid,db);this._bsontype="DBRef";this.namespace=namespace;this.oid=oid;this.db=db}DBRef.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:this.db==null?"":this.db}};module.exports=DBRef;module.exports.DBRef=DBRef},function(module,exports,__webpack_require__){if(typeof window==="undefined"){var Buffer=__webpack_require__(53).Buffer}function Binary(buffer,subType){if(!(this instanceof Binary))return new Binary(buffer,subType);this._bsontype="Binary";if(buffer instanceof Number){this.sub_type=buffer;this.position=0}else{this.sub_type=subType==null?BSON_BINARY_SUBTYPE_DEFAULT:subType;this.position=0}if(buffer!=null&&!(buffer instanceof Number)){if(typeof buffer=="string"){if(typeof Buffer!="undefined"){this.buffer=new Buffer(buffer)}else if(typeof Uint8Array!="undefined"||Object.prototype.toString.call(buffer)=="[object Array]"){this.buffer=writeStringToArray(buffer)}else{throw new Error("only String, Buffer, Uint8Array or Array accepted")}}else{this.buffer=buffer}this.position=buffer.length}else{if(typeof Buffer!="undefined"){this.buffer=new Buffer(Binary.BUFFER_SIZE)}else if(typeof Uint8Array!="undefined"){this.buffer=new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE))}else{this.buffer=new Array(Binary.BUFFER_SIZE)}this.position=0}}Binary.prototype.put=function put(byte_value){if(byte_value["length"]!=null&&typeof byte_value!="number"&&byte_value.length!=1)throw new Error("only accepts single character String, Uint8Array or Array");if(typeof byte_value!="number"&&byte_value<0||byte_value>255)throw new Error("only accepts number in a valid unsigned byte range 0-255");var decoded_byte=null;if(typeof byte_value=="string"){decoded_byte=byte_value.charCodeAt(0)}else if(byte_value["length"]!=null){decoded_byte=byte_value[0]}else{decoded_byte=byte_value}if(this.buffer.length>this.position){this.buffer[this.position++]=decoded_byte}else{if(typeof Buffer!="undefined"&&Buffer.isBuffer(this.buffer)){var buffer=new Buffer(Binary.BUFFER_SIZE+this.buffer.length);this.buffer.copy(buffer,0,0,this.buffer.length);this.buffer=buffer;this.buffer[this.position++]=decoded_byte}else{var buffer=null;if(Object.prototype.toString.call(this.buffer)=="[object Uint8Array]"){buffer=new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE+this.buffer.length))}else{buffer=new Array(Binary.BUFFER_SIZE+this.buffer.length)}for(var i=0;i<this.buffer.length;i++){buffer[i]=this.buffer[i]}this.buffer=buffer;this.buffer[this.position++]=decoded_byte}}};Binary.prototype.write=function write(string,offset){offset=typeof offset=="number"?offset:this.position;if(this.buffer.length<offset+string.length){var buffer=null;if(typeof Buffer!="undefined"&&Buffer.isBuffer(this.buffer)){buffer=new Buffer(this.buffer.length+string.length);this.buffer.copy(buffer,0,0,this.buffer.length)}else if(Object.prototype.toString.call(this.buffer)=="[object Uint8Array]"){buffer=new Uint8Array(new ArrayBuffer(this.buffer.length+string.length));for(var i=0;i<this.position;i++){buffer[i]=this.buffer[i]}}this.buffer=buffer}if(typeof Buffer!="undefined"&&Buffer.isBuffer(string)&&Buffer.isBuffer(this.buffer)){string.copy(this.buffer,offset,0,string.length);this.position=offset+string.length>this.position?offset+string.length:this.position}else if(typeof Buffer!="undefined"&&typeof string=="string"&&Buffer.isBuffer(this.buffer)){this.buffer.write(string,"binary",offset);this.position=offset+string.length>this.position?offset+string.length:this.position}else if(Object.prototype.toString.call(string)=="[object Uint8Array]"||Object.prototype.toString.call(string)=="[object Array]"&&typeof string!="string"){for(var i=0;i<string.length;i++){this.buffer[offset++]=string[i]}this.position=offset>this.position?offset:this.position}else if(typeof string=="string"){for(var i=0;i<string.length;i++){this.buffer[offset++]=string.charCodeAt(i)}this.position=offset>this.position?offset:this.position}};Binary.prototype.read=function read(position,length){length=length&&length>0?length:this.position;if(this.buffer["slice"]){return this.buffer.slice(position,position+length)}else{var buffer=typeof Uint8Array!="undefined"?new Uint8Array(new ArrayBuffer(length)):new Array(length);for(var i=0;i<length;i++){buffer[i]=this.buffer[position++]}}return buffer};Binary.prototype.value=function value(asRaw){asRaw=asRaw==null?false:asRaw;if(asRaw&&typeof Buffer!="undefined"&&Buffer.isBuffer(this.buffer)&&this.buffer.length==this.position)return this.buffer;if(typeof Buffer!="undefined"&&Buffer.isBuffer(this.buffer)){return asRaw?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)}else{if(asRaw){if(this.buffer["slice"]!=null){return this.buffer.slice(0,this.position)}else{var newBuffer=Object.prototype.toString.call(this.buffer)=="[object Uint8Array]"?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position);for(var i=0;i<this.position;i++){newBuffer[i]=this.buffer[i]}return newBuffer}}else{return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}}};Binary.prototype.length=function length(){return this.position};Binary.prototype.toJSON=function(){return this.buffer!=null?this.buffer.toString("base64"):""};Binary.prototype.toString=function(format){return this.buffer!=null?this.buffer.slice(0,this.position).toString(format):""};var BSON_BINARY_SUBTYPE_DEFAULT=0;var writeStringToArray=function(data){var buffer=typeof Uint8Array!="undefined"?new Uint8Array(new ArrayBuffer(data.length)):new Array(data.length);for(var i=0;i<data.length;i++){buffer[i]=data.charCodeAt(i)}return buffer};var convertArraytoUtf8BinaryString=function(byteArray,startIndex,endIndex){var result="";for(var i=startIndex;i<endIndex;i++){result=result+String.fromCharCode(byteArray[i])}return result};Binary.BUFFER_SIZE=256;Binary.SUBTYPE_DEFAULT=0;Binary.SUBTYPE_FUNCTION=1;Binary.SUBTYPE_BYTE_ARRAY=2;Binary.SUBTYPE_UUID_OLD=3;Binary.SUBTYPE_UUID=4;Binary.SUBTYPE_MD5=5;Binary.SUBTYPE_USER_DEFINED=128;module.exports=Binary;module.exports.Binary=Binary},function(module,exports,__webpack_require__){(function(process){var chr=String.fromCharCode;var maxBits=[];for(var i=0;i<64;i++){maxBits[i]=Math.pow(2,i)}function BinaryParser(bigEndian,allowExceptions){if(!(this instanceof BinaryParser))return new BinaryParser(bigEndian,allowExceptions);this.bigEndian=bigEndian;this.allowExceptions=allowExceptions}BinaryParser.warn=function warn(msg){if(this.allowExceptions){throw new Error(msg)}return 1};BinaryParser.decodeFloat=function decodeFloat(data,precisionBits,exponentBits){var b=new this.Buffer(this.bigEndian,data);b.checkBuffer(precisionBits+exponentBits+1);var bias=maxBits[exponentBits-1]-1,signal=b.readBits(precisionBits+exponentBits,1),exponent=b.readBits(precisionBits,exponentBits),significand=0,divisor=2,curByte=b.buffer.length+(-precisionBits>>3)-1;do{for(var byteValue=b.buffer[++curByte],startBit=precisionBits%8||8,mask=1<<startBit;mask>>=1;byteValue&mask&&(significand+=1/divisor),divisor*=2);}while(precisionBits-=startBit);return exponent==(bias<<1)+1?significand?NaN:signal?-Infinity:+Infinity:(1+signal*-2)*(exponent||significand?!exponent?Math.pow(2,-bias+1)*significand:Math.pow(2,exponent-bias)*(1+significand):0)};BinaryParser.decodeInt=function decodeInt(data,bits,signed,forceBigEndian){var b=new this.Buffer(this.bigEndian||forceBigEndian,data),x=b.readBits(0,bits),max=maxBits[bits];return signed&&x>=max/2?x-max:x};BinaryParser.encodeFloat=function encodeFloat(data,precisionBits,exponentBits){var bias=maxBits[exponentBits-1]-1,minExp=-bias+1,maxExp=bias,minUnnormExp=minExp-precisionBits,n=parseFloat(data),status=isNaN(n)||n==-Infinity||n==+Infinity?n:0,exp=0,len=2*bias+1+precisionBits+3,bin=new Array(len),signal=(n=status!==0?0:n)<0,intPart=Math.floor(n=Math.abs(n)),floatPart=n-intPart,lastBit,rounded,result,i,j;for(i=len;i;bin[--i]=0);for(i=bias+2;intPart&&i;bin[--i]=intPart%2,intPart=Math.floor(intPart/2));for(i=bias+1;floatPart>0&&i;(bin[++i]=((floatPart*=2)>=1)-0)&&--floatPart);for(i=-1;++i<len&&!bin[i];);if(bin[(lastBit=precisionBits-1+(i=(exp=bias+1-i)>=minExp&&exp<=maxExp?i+1:bias+1-(exp=minExp-1)))+1]){if(!(rounded=bin[lastBit])){for(j=lastBit+2;!rounded&&j<len;rounded=bin[j++]);}for(j=lastBit+1;rounded&&--j>=0;(bin[j]=!bin[j]-0)&&(rounded=0));}for(i=i-2<0?-1:i-3;++i<len&&!bin[i];);if((exp=bias+1-i)>=minExp&&exp<=maxExp){++i}else if(exp<minExp){exp!=bias+1-len&&exp<minUnnormExp&&this.warn("encodeFloat::float underflow");i=bias+1-(exp=minExp-1)}if(intPart||status!==0){this.warn(intPart?"encodeFloat::float overflow":"encodeFloat::"+status);exp=maxExp+1;i=bias+2;if(status==-Infinity){signal=1}else if(isNaN(status)){bin[i]=1}}for(n=Math.abs(exp+bias),j=exponentBits+1,result="";--j;result=n%2+result,n=n>>=1);for(n=0,j=0,i=(result=(signal?"1":"0")+result+bin.slice(i,i+precisionBits).join("")).length,r=[];i;j=(j+1)%8){n+=(1<<j)*result.charAt(--i);if(j==7){r[r.length]=String.fromCharCode(n);n=0}}r[r.length]=n?String.fromCharCode(n):"";return(this.bigEndian?r.reverse():r).join("")};BinaryParser.encodeInt=function encodeInt(data,bits,signed,forceBigEndian){var max=maxBits[bits];if(data>=max||data<-(max/2)){this.warn("encodeInt::overflow");data=0}if(data<0){data+=max}for(var r=[];data;r[r.length]=String.fromCharCode(data%256),data=Math.floor(data/256));for(bits=-(-bits>>3)-r.length;bits--;r[r.length]="\x00");return(this.bigEndian||forceBigEndian?r.reverse():r).join("")};BinaryParser.toSmall=function(data){return this.decodeInt(data,8,true)};BinaryParser.fromSmall=function(data){return this.encodeInt(data,8,true)};BinaryParser.toByte=function(data){return this.decodeInt(data,8,false)};BinaryParser.fromByte=function(data){return this.encodeInt(data,8,false)};BinaryParser.toShort=function(data){return this.decodeInt(data,16,true)};BinaryParser.fromShort=function(data){return this.encodeInt(data,16,true)};BinaryParser.toWord=function(data){return this.decodeInt(data,16,false)};BinaryParser.fromWord=function(data){return this.encodeInt(data,16,false)};BinaryParser.toInt=function(data){return this.decodeInt(data,32,true)};BinaryParser.fromInt=function(data){return this.encodeInt(data,32,true)};BinaryParser.toLong=function(data){return this.decodeInt(data,64,true)};BinaryParser.fromLong=function(data){return this.encodeInt(data,64,true)};BinaryParser.toDWord=function(data){return this.decodeInt(data,32,false)};BinaryParser.fromDWord=function(data){return this.encodeInt(data,32,false)};BinaryParser.toQWord=function(data){return this.decodeInt(data,64,true)};BinaryParser.fromQWord=function(data){return this.encodeInt(data,64,true)};BinaryParser.toFloat=function(data){return this.decodeFloat(data,23,8)};BinaryParser.fromFloat=function(data){return this.encodeFloat(data,23,8)};BinaryParser.toDouble=function(data){return this.decodeFloat(data,52,11)};BinaryParser.fromDouble=function(data){return this.encodeFloat(data,52,11)};BinaryParser.encode_int32=function encode_int32(number,asArray){var a,b,c,d,unsigned;unsigned=number<0?number+4294967296:number;a=Math.floor(unsigned/16777215);unsigned&=16777215;b=Math.floor(unsigned/65535);unsigned&=65535;c=Math.floor(unsigned/255);unsigned&=255;d=Math.floor(unsigned);return asArray?[chr(a),chr(b),chr(c),chr(d)]:chr(a)+chr(b)+chr(c)+chr(d)};BinaryParser.encode_int64=function encode_int64(number){var a,b,c,d,e,f,g,h,unsigned;unsigned=number<0?number+0x10000000000000000:number;a=Math.floor(unsigned/72057594037927940);unsigned&=72057594037927940;b=Math.floor(unsigned/0xffffffffffff);unsigned&=0xffffffffffff;c=Math.floor(unsigned/0xffffffffff);unsigned&=0xffffffffff;d=Math.floor(unsigned/4294967295);unsigned&=4294967295;e=Math.floor(unsigned/16777215);unsigned&=16777215;f=Math.floor(unsigned/65535);unsigned&=65535;g=Math.floor(unsigned/255);unsigned&=255;h=Math.floor(unsigned);return chr(a)+chr(b)+chr(c)+chr(d)+chr(e)+chr(f)+chr(g)+chr(h)};BinaryParser.decode_utf8=function decode_utf8(binaryStr){var len=binaryStr.length,decoded="",i=0,c=0,c1=0,c2=0,c3;while(i<len){c=binaryStr.charCodeAt(i);if(c<128){decoded+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=binaryStr.charCodeAt(i+1);decoded+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=binaryStr.charCodeAt(i+1);c3=binaryStr.charCodeAt(i+2);decoded+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return decoded};BinaryParser.encode_cstring=function encode_cstring(s){return unescape(encodeURIComponent(s))+BinaryParser.fromByte(0)};BinaryParser.encode_utf8=function encode_utf8(s){var a="",c;for(var n=0,len=s.length;n<len;n++){c=s.charCodeAt(n);if(c<128){a+=String.fromCharCode(c)}else if(c>127&&c<2048){a+=String.fromCharCode(c>>6|192);a+=String.fromCharCode(c&63|128)}else{a+=String.fromCharCode(c>>12|224);a+=String.fromCharCode(c>>6&63|128);a+=String.fromCharCode(c&63|128)}}return a};BinaryParser.hprint=function hprint(s){var number;for(var i=0,len=s.length;i<len;i++){if(s.charCodeAt(i)<32){number=s.charCodeAt(i)<=15?"0"+s.charCodeAt(i).toString(16):s.charCodeAt(i).toString(16);process.stdout.write(number+" ")}else{number=s.charCodeAt(i)<=15?"0"+s.charCodeAt(i).toString(16):s.charCodeAt(i).toString(16);process.stdout.write(number+" ")}}process.stdout.write("\n\n")};BinaryParser.ilprint=function hprint(s){var number;for(var i=0,len=s.length;i<len;i++){if(s.charCodeAt(i)<32){number=s.charCodeAt(i)<=15?"0"+s.charCodeAt(i).toString(10):s.charCodeAt(i).toString(10);__webpack_require__(52).debug(number+" : ")}else{number=s.charCodeAt(i)<=15?"0"+s.charCodeAt(i).toString(10):s.charCodeAt(i).toString(10);__webpack_require__(52).debug(number+" : "+s.charAt(i))}}};BinaryParser.hlprint=function hprint(s){var number;for(var i=0,len=s.length;i<len;i++){if(s.charCodeAt(i)<32){number=s.charCodeAt(i)<=15?"0"+s.charCodeAt(i).toString(16):s.charCodeAt(i).toString(16);__webpack_require__(52).debug(number+" : ")}else{number=s.charCodeAt(i)<=15?"0"+s.charCodeAt(i).toString(16):s.charCodeAt(i).toString(16);__webpack_require__(52).debug(number+" : "+s.charAt(i))}}};function BinaryParserBuffer(bigEndian,buffer){this.bigEndian=bigEndian||0;this.buffer=[];this.setBuffer(buffer)}BinaryParserBuffer.prototype.setBuffer=function setBuffer(data){var l,i,b;if(data){i=l=data.length;b=this.buffer=new Array(l);for(;i;b[l-i]=data.charCodeAt(--i));this.bigEndian&&b.reverse()}};BinaryParserBuffer.prototype.hasNeededBits=function hasNeededBits(neededBits){return this.buffer.length>=-(-neededBits>>3)};BinaryParserBuffer.prototype.checkBuffer=function checkBuffer(neededBits){if(!this.hasNeededBits(neededBits)){throw new Error("checkBuffer::missing bytes")}};BinaryParserBuffer.prototype.readBits=function readBits(start,length){function shl(a,b){for(;b--;a=((a%=2147483647+1)&1073741824)==1073741824?a*2:(a-1073741824)*2+2147483647+1);return a}if(start<0||length<=0){return 0}this.checkBuffer(start+length);var offsetLeft,offsetRight=start%8,curByte=this.buffer.length-(start>>3)-1,lastByte=this.buffer.length+(-(start+length)>>3),diff=curByte-lastByte,sum=(this.buffer[curByte]>>offsetRight&(1<<(diff?8-offsetRight:length))-1)+(diff&&(offsetLeft=(start+length)%8)?(this.buffer[lastByte++]&(1<<offsetLeft)-1)<<(diff--<<3)-offsetRight:0);for(;diff;sum+=shl(this.buffer[lastByte++],(diff--<<3)-offsetRight));return sum};BinaryParser.Buffer=BinaryParserBuffer;exports.BinaryParser=BinaryParser}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var readIEEE754=function(buffer,offset,endian,mLen,nBytes){var e,m,bBE=endian==="big",eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=bBE?0:nBytes-1,d=bBE?1:-1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};var writeIEEE754=function(buffer,value,offset,endian,mLen,nBytes){var e,m,c,bBE=endian==="big",eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=bBE?nBytes-1:0,d=bBE?-1:1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128};exports.readIEEE754=readIEEE754;exports.writeIEEE754=writeIEEE754},function(module,exports,__webpack_require__){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(682);exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,exports,__webpack_require__){module.exports=function first(stuff,done){if(!Array.isArray(stuff))throw new TypeError("arg must be an array of [ee, events...] arrays");var cleanups=[];for(var i=0;i<stuff.length;i++){var arr=stuff[i];if(!Array.isArray(arr)||arr.length<2)throw new TypeError("each array member must be [ee, events...]");var ee=arr[0];for(var j=1;j<arr.length;j++){var event=arr[j];var fn=listener(event,callback);ee.on(event,fn);cleanups.push({ee:ee,event:event,fn:fn})}}function callback(){cleanup();done.apply(null,arguments)}function cleanup(){var x;for(var i=0;i<cleanups.length;i++){x=cleanups[i];x.ee.removeListener(x.event,x.fn)}}function thunk(fn){done=fn}thunk.cancel=cleanup;return thunk};function listener(event,done){return function onevent(arg1){var args=new Array(arguments.length);var ee=this;var err=event==="error"?arg1:null;for(var i=0;i<args.length;i++){args[i]=arguments[i]}done(err,ee,event,args)}}},function(module,exports,__webpack_require__){module.exports=function(Buffer){function Hash(blockSize,finalSize){this._block=new Buffer(blockSize);this._finalSize=finalSize;this._blockSize=blockSize;this._len=0;this._s=0}Hash.prototype.init=function(){this._s=0;this._len=0};Hash.prototype.update=function(data,enc){if("string"===typeof data){enc=enc||"utf8";data=new Buffer(data,enc)}var l=this._len+=data.length;var s=this._s=this._s||0;var f=0;var buffer=this._block;while(s<l){var t=Math.min(data.length,f+this._blockSize-s%this._blockSize);var ch=t-f;for(var i=0;i<ch;i++){buffer[s%this._blockSize+i]=data[i+f]}s+=ch;f+=ch;if(s%this._blockSize===0){this._update(buffer)}}this._s=s;return this};Hash.prototype.digest=function(enc){var l=this._len*8;this._block[this._len%this._blockSize]=128;

this._block.fill(0,this._len%this._blockSize+1);if(l%(this._blockSize*8)>=this._finalSize*8){this._update(this._block);this._block.fill(0)}this._block.writeInt32BE(l,this._blockSize-4);var hash=this._update(this._block)||this._hash();return enc?hash.toString(enc):hash};Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")};return Hash}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(52).inherits;module.exports=function(Buffer,Hash){var A=0|0;var B=4|0;var C=8|0;var D=12|0;var E=16|0;var W=new(typeof Int32Array==="undefined"?Array:Int32Array)(80);var POOL=[];function Sha1(){if(POOL.length)return POOL.pop().init();if(!(this instanceof Sha1))return new Sha1;this._w=W;Hash.call(this,16*4,14*4);this._h=null;this.init()}inherits(Sha1,Hash);Sha1.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;Hash.prototype.init.call(this);return this};Sha1.prototype._POOL=POOL;Sha1.prototype._update=function(X){var a,b,c,d,e,_a,_b,_c,_d,_e;a=_a=this._a;b=_b=this._b;c=_c=this._c;d=_d=this._d;e=_e=this._e;var w=this._w;for(var j=0;j<80;j++){var W=w[j]=j<16?X.readInt32BE(j*4):rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=add(add(rol(a,5),sha1_ft(j,b,c,d)),add(add(e,W),sha1_kt(j)));e=d;d=c;c=rol(b,30);b=a;a=t}this._a=add(a,_a);this._b=add(b,_b);this._c=add(c,_c);this._d=add(d,_d);this._e=add(e,_e)};Sha1.prototype._hash=function(){if(POOL.length<100)POOL.push(this);var H=new Buffer(20);H.writeInt32BE(this._a|0,A);H.writeInt32BE(this._b|0,B);H.writeInt32BE(this._c|0,C);H.writeInt32BE(this._d|0,D);H.writeInt32BE(this._e|0,E);return H};function sha1_ft(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d}function sha1_kt(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function add(x,y){return x+y|0}function rol(num,cnt){return num<<cnt|num>>>32-cnt}return Sha1}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(52).inherits;module.exports=function(Buffer,Hash){var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var W=new Array(64);function Sha256(){this.init();this._w=W;Hash.call(this,16*4,14*4)}inherits(Sha256,Hash);Sha256.prototype.init=function(){this._a=1779033703|0;this._b=3144134277|0;this._c=1013904242|0;this._d=2773480762|0;this._e=1359893119|0;this._f=2600822924|0;this._g=528734635|0;this._h=1541459225|0;this._len=this._s=0;return this};function S(X,n){return X>>>n|X<<32-n}function R(X,n){return X>>>n}function Ch(x,y,z){return x&y^~x&z}function Maj(x,y,z){return x&y^x&z^y&z}function Sigma0256(x){return S(x,2)^S(x,13)^S(x,22)}function Sigma1256(x){return S(x,6)^S(x,11)^S(x,25)}function Gamma0256(x){return S(x,7)^S(x,18)^R(x,3)}function Gamma1256(x){return S(x,17)^S(x,19)^R(x,10)}Sha256.prototype._update=function(M){var W=this._w;var a,b,c,d,e,f,g,h;var T1,T2;a=this._a|0;b=this._b|0;c=this._c|0;d=this._d|0;e=this._e|0;f=this._f|0;g=this._g|0;h=this._h|0;for(var j=0;j<64;j++){var w=W[j]=j<16?M.readInt32BE(j*4):Gamma1256(W[j-2])+W[j-7]+Gamma0256(W[j-15])+W[j-16];T1=h+Sigma1256(e)+Ch(e,f,g)+K[j]+w;T2=Sigma0256(a)+Maj(a,b,c);h=g;g=f;f=e;e=d+T1;d=c;c=b;b=a;a=T1+T2}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;this._f=f+this._f|0;this._g=g+this._g|0;this._h=h+this._h|0};Sha256.prototype._hash=function(){var H=new Buffer(32);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);H.writeInt32BE(this._h,28);return H};return Sha256}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(52).inherits;module.exports=function(Buffer,Hash){var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var W=new Array(160);function Sha512(){this.init();this._w=W;Hash.call(this,128,112)}inherits(Sha512,Hash);Sha512.prototype.init=function(){this._a=1779033703|0;this._b=3144134277|0;this._c=1013904242|0;this._d=2773480762|0;this._e=1359893119|0;this._f=2600822924|0;this._g=528734635|0;this._h=1541459225|0;this._al=4089235720|0;this._bl=2227873595|0;this._cl=4271175723|0;this._dl=1595750129|0;this._el=2917565137|0;this._fl=725511199|0;this._gl=4215389547|0;this._hl=327033209|0;this._len=this._s=0;return this};function S(X,Xl,n){return X>>>n|Xl<<32-n}function Ch(x,y,z){return x&y^~x&z}function Maj(x,y,z){return x&y^x&z^y&z}Sha512.prototype._update=function(M){var W=this._w;var a,b,c,d,e,f,g,h;var al,bl,cl,dl,el,fl,gl,hl;a=this._a|0;b=this._b|0;c=this._c|0;d=this._d|0;e=this._e|0;f=this._f|0;g=this._g|0;h=this._h|0;al=this._al|0;bl=this._bl|0;cl=this._cl|0;dl=this._dl|0;el=this._el|0;fl=this._fl|0;gl=this._gl|0;hl=this._hl|0;for(var i=0;i<80;i++){var j=i*2;var Wi,Wil;if(i<16){Wi=W[j]=M.readInt32BE(j*4);Wil=W[j+1]=M.readInt32BE(j*4+4)}else{var x=W[j-15*2];var xl=W[j-15*2+1];var gamma0=S(x,xl,1)^S(x,xl,8)^x>>>7;var gamma0l=S(xl,x,1)^S(xl,x,8)^S(xl,x,7);x=W[j-2*2];xl=W[j-2*2+1];var gamma1=S(x,xl,19)^S(xl,x,29)^x>>>6;var gamma1l=S(xl,x,19)^S(x,xl,29)^S(xl,x,6);var Wi7=W[j-7*2];var Wi7l=W[j-7*2+1];var Wi16=W[j-16*2];var Wi16l=W[j-16*2+1];Wil=gamma0l+Wi7l;Wi=gamma0+Wi7+(Wil>>>0<gamma0l>>>0?1:0);Wil=Wil+gamma1l;Wi=Wi+gamma1+(Wil>>>0<gamma1l>>>0?1:0);Wil=Wil+Wi16l;Wi=Wi+Wi16+(Wil>>>0<Wi16l>>>0?1:0);W[j]=Wi;W[j+1]=Wil}var maj=Maj(a,b,c);var majl=Maj(al,bl,cl);var sigma0h=S(a,al,28)^S(al,a,2)^S(al,a,7);var sigma0l=S(al,a,28)^S(a,al,2)^S(a,al,7);var sigma1h=S(e,el,14)^S(e,el,18)^S(el,e,9);var sigma1l=S(el,e,14)^S(el,e,18)^S(e,el,9);var Ki=K[j];var Kil=K[j+1];var ch=Ch(e,f,g);var chl=Ch(el,fl,gl);var t1l=hl+sigma1l;var t1=h+sigma1h+(t1l>>>0<hl>>>0?1:0);t1l=t1l+chl;t1=t1+ch+(t1l>>>0<chl>>>0?1:0);t1l=t1l+Kil;t1=t1+Ki+(t1l>>>0<Kil>>>0?1:0);t1l=t1l+Wil;t1=t1+Wi+(t1l>>>0<Wil>>>0?1:0);var t2l=sigma0l+majl;var t2=sigma0h+maj+(t2l>>>0<sigma0l>>>0?1:0);h=g;hl=gl;g=f;gl=fl;f=e;fl=el;el=dl+t1l|0;e=d+t1+(el>>>0<dl>>>0?1:0)|0;d=c;dl=cl;c=b;cl=bl;b=a;bl=al;al=t1l+t2l|0;a=t1+t2+(al>>>0<t1l>>>0?1:0)|0}this._al=this._al+al|0;this._bl=this._bl+bl|0;this._cl=this._cl+cl|0;this._dl=this._dl+dl|0;this._el=this._el+el|0;this._fl=this._fl+fl|0;this._gl=this._gl+gl|0;this._hl=this._hl+hl|0;this._a=this._a+a+(this._al>>>0<al>>>0?1:0)|0;this._b=this._b+b+(this._bl>>>0<bl>>>0?1:0)|0;this._c=this._c+c+(this._cl>>>0<cl>>>0?1:0)|0;this._d=this._d+d+(this._dl>>>0<dl>>>0?1:0)|0;this._e=this._e+e+(this._el>>>0<el>>>0?1:0)|0;this._f=this._f+f+(this._fl>>>0<fl>>>0?1:0)|0;this._g=this._g+g+(this._gl>>>0<gl>>>0?1:0)|0;this._h=this._h+h+(this._hl>>>0<hl>>>0?1:0)|0};Sha512.prototype._hash=function(){var H=new Buffer(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4)}writeInt64BE(this._a,this._al,0);writeInt64BE(this._b,this._bl,8);writeInt64BE(this._c,this._cl,16);writeInt64BE(this._d,this._dl,24);writeInt64BE(this._e,this._el,32);writeInt64BE(this._f,this._fl,40);writeInt64BE(this._g,this._gl,48);writeInt64BE(this._h,this._hl,56);return H};return Sha512}},function(module,exports,__webpack_require__){var kerberos=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "../build/Release/kerberos"');e.code="MODULE_NOT_FOUND";throw e}()),KerberosNative=kerberos.Kerberos;var Kerberos=function(){this._native_kerberos=new KerberosNative};Kerberos.prototype.authGSSClientInit=function(uri,flags,callback){return this._native_kerberos.authGSSClientInit(uri,flags,callback)};Kerberos.prototype.authGSSClientStep=function(context,challenge,callback){if(typeof challenge=="function"){callback=challenge;challenge=""}return this._native_kerberos.authGSSClientStep(context,challenge,callback)};Kerberos.prototype.authGSSClientUnwrap=function(context,challenge,callback){if(typeof challenge=="function"){callback=challenge;challenge=""}return this._native_kerberos.authGSSClientUnwrap(context,challenge,callback)};Kerberos.prototype.authGSSClientWrap=function(context,challenge,user_name,callback){if(typeof user_name=="function"){callback=user_name;user_name=""}return this._native_kerberos.authGSSClientWrap(context,challenge,user_name,callback)};Kerberos.prototype.authGSSClientClean=function(context,callback){return this._native_kerberos.authGSSClientClean(context,callback)};Kerberos.prototype.acquireAlternateCredentials=function(user_name,password,domain){return this._native_kerberos.acquireAlternateCredentials(user_name,password,domain)};Kerberos.prototype.prepareOutboundPackage=function(principal,inputdata){return this._native_kerberos.prepareOutboundPackage(principal,inputdata)};Kerberos.prototype.decryptMessage=function(challenge){return this._native_kerberos.decryptMessage(challenge)};Kerberos.prototype.encryptMessage=function(challenge){return this._native_kerberos.encryptMessage(challenge)};Kerberos.prototype.queryContextAttribute=function(attribute){if(typeof attribute!="number"&&attribute!=0)throw new Error("Attribute not supported");return this._native_kerberos.queryContextAttribute(attribute)};Kerberos.AUTH_GSS_CONTINUE=0;Kerberos.AUTH_GSS_COMPLETE=1;Kerberos.GSS_C_DELEG_FLAG=1;Kerberos.GSS_C_MUTUAL_FLAG=2;Kerberos.GSS_C_REPLAY_FLAG=4;Kerberos.GSS_C_SEQUENCE_FLAG=8;Kerberos.GSS_C_CONF_FLAG=16;Kerberos.GSS_C_INTEG_FLAG=32;Kerberos.GSS_C_ANON_FLAG=64;Kerberos.GSS_C_PROT_READY_FLAG=128;Kerberos.GSS_C_TRANS_FLAG=256;exports.Kerberos=Kerberos;if(kerberos.SecurityCredentials){exports.SSIP={SecurityCredentials:__webpack_require__(670).SecurityCredentials,SecurityContext:__webpack_require__(671).SecurityContext,SecurityBuffer:__webpack_require__(672).SecurityBuffer,SecurityBufferDescriptor:__webpack_require__(673).SecurityBufferDescriptor}}},function(module,exports,__webpack_require__){(function(process,Buffer){var format=__webpack_require__(52).format;var MongoAuthProcess=function(host,port,service_name){if(process.platform=="win32"){this._processor=new Win32MongoProcessor(host,port,service_name)}else{this._processor=new UnixMongoProcessor(host,port,service_name)}};MongoAuthProcess.prototype.init=function(username,password,callback){this._processor.init(username,password,callback)};MongoAuthProcess.prototype.transition=function(payload,callback){this._processor.transition(payload,callback)};var Win32MongoProcessor=function(host,port,service_name){this.host=host;this.port=port;this.ssip=__webpack_require__(631).SSIP;this._transition=Win32MongoProcessor.first_transition(this);service_name=service_name||"mongodb";this.target=format("%s/%s",service_name,host);this.retries=10};Win32MongoProcessor.prototype.init=function(username,password,callback){var self=this;this.username=username;this.password=password;this.ssip.SecurityCredentials.aquire_kerberos(username,password,function(err,security_credentials){if(err)return callback(err);self.security_credentials=security_credentials;callback(null)})};Win32MongoProcessor.prototype.transition=function(payload,callback){if(this._transition==null)return callback(new Error("Transition finished"));this._transition(payload,callback)};Win32MongoProcessor.first_transition=function(self){return function(payload,callback){self.ssip.SecurityContext.initialize(self.security_credentials,self.target,payload,function(err,security_context){if(err)return callback(err);if(!security_context.hasContext){if(self.retries==0)return callback(new Error("Failed to initialize security context"));self.retries=self.retries-1;return self.transition(payload,callback)}self._transition=Win32MongoProcessor.second_transition(self);self.security_context=security_context;callback(null,security_context.payload)})}};Win32MongoProcessor.second_transition=function(self){return function(payload,callback){self.security_context.initialize(self.target,payload,function(err,security_context){if(err)return callback(err);if(!security_context.hasContext){if(self.retries==0)return callback(new Error("Failed to initialize security context"));self.retries=self.retries-1;self._transition=Win32MongoProcessor.first_transition(self);return self.transition(payload,callback)}self._transition=Win32MongoProcessor.third_transition(self);callback(null,security_context.payload)})}};Win32MongoProcessor.third_transition=function(self){return function(payload,callback){var messageLength=0;var encryptedBytes=new Buffer(payload,"base64");var encryptedMessage=new Buffer(messageLength);encryptedBytes.copy(encryptedMessage,0,0,messageLength);var securityTrailerLength=encryptedBytes.length-messageLength;var securityTrailer=new Buffer(securityTrailerLength);encryptedBytes.copy(securityTrailer,0,messageLength,securityTrailerLength);var SecurityBuffer=self.ssip.SecurityBuffer;var SecurityBufferDescriptor=self.ssip.SecurityBufferDescriptor;var buffers=[new SecurityBuffer(SecurityBuffer.DATA,encryptedBytes),new SecurityBuffer(SecurityBuffer.STREAM,securityTrailer)];var descriptor=new SecurityBufferDescriptor(buffers);self.security_context.decryptMessage(descriptor,function(err,security_context){if(err)return callback(err);var length=4;if(self.username!=null){length+=self.username.length}var bytesReceivedFromServer=new Buffer(length);bytesReceivedFromServer[0]=1;bytesReceivedFromServer[1]=0;bytesReceivedFromServer[2]=0;bytesReceivedFromServer[3]=0;if(self.username!=null){var authorization_id_bytes=new Buffer(self.username,"utf8");authorization_id_bytes.copy(bytesReceivedFromServer,4,0)}self.security_context.queryContextAttributes(0,function(err,sizes){if(err)return callback(err);var buffers=[new SecurityBuffer(SecurityBuffer.TOKEN,new Buffer(sizes.securityTrailer)),new SecurityBuffer(SecurityBuffer.DATA,bytesReceivedFromServer),new SecurityBuffer(SecurityBuffer.PADDING,new Buffer(sizes.blockSize))];var descriptor=new SecurityBufferDescriptor(buffers);self.security_context.encryptMessage(descriptor,2147483649,function(err,security_context){if(err)return callback(err);callback(null,security_context.payload)})})})}};var UnixMongoProcessor=function(host,port,service_name){this.host=host;this.port=port;this.Kerberos=__webpack_require__(631).Kerberos;this.kerberos=new this.Kerberos;service_name=service_name||"mongodb";this._transition=UnixMongoProcessor.first_transition(this);this.target=format("%s@%s",service_name,host);this.retries=10};UnixMongoProcessor.prototype.init=function(username,password,callback){var self=this;this.username=username;this.password=password;this.kerberos.authGSSClientInit(self.target,this.Kerberos.GSS_C_MUTUAL_FLAG,function(err,context){self.context=context;callback(null,context)})};UnixMongoProcessor.prototype.transition=function(payload,callback){if(this._transition==null)return callback(new Error("Transition finished"));this._transition(payload,callback)};UnixMongoProcessor.first_transition=function(self){return function(payload,callback){self.kerberos.authGSSClientStep(self.context,"",function(err,result){if(err)return callback(err);self._transition=UnixMongoProcessor.second_transition(self);callback(null,self.context.response)})}};UnixMongoProcessor.second_transition=function(self){return function(payload,callback){self.kerberos.authGSSClientStep(self.context,payload,function(err,result){if(err&&self.retries==0)return callback(err);if(err){self.retries=self.retries-1;return self.transition(payload,callback)}self._transition=UnixMongoProcessor.third_transition(self);callback(null,self.context.response||"")})}};UnixMongoProcessor.third_transition=function(self){return function(payload,callback){self.kerberos.authGSSClientUnwrap(self.context,payload,function(err,result){if(err)return callback(err,false);self.kerberos.authGSSClientWrap(self.context,self.context.response,self.username,function(err,result){if(err)return callback(err,false);self._transition=UnixMongoProcessor.fourth_transition(self);callback(null,self.context.response)})})}};UnixMongoProcessor.fourth_transition=function(self){return function(payload,callback){self.kerberos.authGSSClientClean(self.context,function(err,result){if(err)return callback(err,false);self._transition=null;callback(null,true)})}};exports.MongoAuthProcess=MongoAuthProcess}).call(exports,__webpack_require__(9),__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){(function(process){module.exports=Readable;var isArray=__webpack_require__(684);var Buffer=__webpack_require__(53).Buffer;Readable.ReadableState=ReadableState;var EE=__webpack_require__(120).EventEmitter;if(!EE.listenerCount)EE.listenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=__webpack_require__(316);var util=__webpack_require__(690);util.inherits=__webpack_require__(691);var StringDecoder;var debug=__webpack_require__(660);if(debug&&debug.debuglog){debug=debug.debuglog("stream")}else{debug=function(){}}util.inherits(Readable,Stream);function ReadableState(options,stream){var Duplex=__webpack_require__(635);options=options||{};var hwm=options.highWaterMark;var defaultHwm=options.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.readableObjectMode;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(665).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){var Duplex=__webpack_require__(635);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;Stream.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(util.isString(chunk)&&!state.objectMode){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=new Buffer(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(util.isNullOrUndefined(chunk)){state.reading=false;if(!state.ended)onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{if(state.decoder&&!addToFront&&!encoding)chunk=state.decoder.write(chunk);if(!addToFront)state.reading=false;if(state.flowing&&state.length===0&&!state.sync){stream.emit("data",chunk);stream.read(0)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(665).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};var MAX_HWM=8388608;function roundUpToNextPowerOf2(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(isNaN(n)||util.isNull(n)){if(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length}if(n<=0)return 0;if(n>state.highWaterMark)state.highWaterMark=roundUpToNextPowerOf2(n);if(n>state.length){if(!state.ended){state.needReadable=true;return 0}else return state.length}return n}Readable.prototype.read=function(n){debug("read",n);var state=this._readableState;var nOrig=n;if(!util.isNumber(n)||n>0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false}if(doRead&&!state.reading)n=howMuchToRead(nOrig,state);var ret;if(n>0)ret=fromList(n,state);else ret=null;if(util.isNull(ret)){state.needReadable=true;n=0}state.length-=n;if(state.length===0&&!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended&&state.length===0)endReadable(this);if(!util.isNull(ret))this.emit("data",ret);return ret};function chunkInvalid(state,chunk){var er=null;if(!util.isBuffer(chunk)&&!util.isString(chunk)&&!util.isNullOrUndefined(chunk)&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;if(state.sync)process.nextTick(function(){emitReadable_(stream)});else emitReadable_(stream)}}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(function(){maybeReadMore_(stream,state)})}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){debug("onunpipe");if(readable===src){cleanup()}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);src.removeListener("data",ondata);if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);if(false===ret){debug("false write response, pause",src._readableState.awaitDrain);src._readableState.awaitDrain++;src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EE.listenerCount(dest,"error")===0)dest.emit("error",er)}if(!dest._events||!dest._events.error)dest.on("error",onerror);else if(isArray(dest._events.error))dest._events.error.unshift(onerror);else dest._events.error=[onerror,dest._events.error];function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EE.listenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"&&false!==this._readableState.flowing){this.resume()}if(ev==="readable"&&this.readable){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){var self=this;process.nextTick(function(){debug("readable nexttick read 0");self.read(0)})}else if(state.length){emitReadable(this,state)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=true;if(!state.reading){debug("resume read 0");this.read(0)}resume(this,state)}return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(function(){resume_(stream,state)})}}function resume_(stream,state){state.resumeScheduled=false;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){debug("pause");this._readableState.flowing=false;this.emit("pause")}return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);if(state.flowing){do{var chunk=stream.read()}while(null!==chunk&&state.flowing)}}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(!chunk||!state.objectMode&&!chunk.length)return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(util.isFunction(stream[i])&&util.isUndefined(this[i])){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){if(stringMode)ret=list.join("");else ret=Buffer.concat(list,length);list.length=0}else{if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n)}else if(n===list[0].length){ret=list.shift()}else{if(stringMode)ret="";else ret=new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=Math.min(n-c,buf.length);if(stringMode)ret+=buf.slice(0,cpy);else buf.copy(ret,c,0,cpy);if(cpy<buf.length)list[0]=buf.slice(cpy);else list.shift();c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");if(!state.endEmitted){state.ended=true;process.nextTick(function(){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}})}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){module.exports=Writable;var Buffer=__webpack_require__(53).Buffer;Writable.WritableState=WritableState;var util=__webpack_require__(690);util.inherits=__webpack_require__(691);var Stream=__webpack_require__(316);util.inherits(Writable,Stream);function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb}function WritableState(options,stream){var Duplex=__webpack_require__(635);options=options||{};

var hwm=options.highWaterMark;var defaultHwm=options.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.writableObjectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.buffer=[];this.pendingcb=0;this.prefinished=false;this.errorEmitted=false}function Writable(options){var Duplex=__webpack_require__(635);if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function writeAfterEnd(stream,state,cb){var er=new Error("write after end");stream.emit("error",er);process.nextTick(function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=true;if(!util.isBuffer(chunk)&&!util.isString(chunk)&&!util.isNullOrUndefined(chunk)&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er);process.nextTick(function(){cb(er)});valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(util.isFunction(encoding)){cb=encoding;encoding=null}if(util.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(!util.isFunction(cb))cb=function(){};if(state.ended)writeAfterEnd(this,state,cb);else if(validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){var state=this._writableState;state.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.buffer.length)clearBuffer(this,state)}};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&util.isString(chunk)){chunk=new Buffer(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(util.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked)state.buffer.push(new WriteReq(chunk,encoding,cb));else doWrite(stream,state,false,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){if(sync)process.nextTick(function(){state.pendingcb--;cb(er)});else{state.pendingcb--;cb(er)}stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.buffer.length){clearBuffer(stream,state)}if(sync){process.nextTick(function(){afterWrite(stream,state,finished,cb)})}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;if(stream._writev&&state.buffer.length>1){var cbs=[];for(var c=0;c<state.buffer.length;c++)cbs.push(state.buffer[c].callback);state.pendingcb++;doWrite(stream,state,true,state.length,state.buffer,"",function(err){for(var i=0;i<cbs.length;i++){state.pendingcb--;cbs[i](err)}});state.buffer=[]}else{for(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c];var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);if(state.writing){c++;break}}if(c<state.buffer.length)state.buffer=state.buffer.slice(c);else state.buffer.length=0}state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(util.isFunction(chunk)){cb=chunk;chunk=null;encoding=null}else if(util.isFunction(encoding)){cb=encoding;encoding=null}if(!util.isNullOrUndefined(chunk))this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(stream,state){return state.ending&&state.length===0&&!state.finished&&!state.writing}function prefinish(stream,state){if(!state.prefinished){state.prefinished=true;stream.emit("prefinish")}}function finishMaybe(stream,state){var need=needFinish(stream,state);if(need){if(state.pendingcb===0){prefinish(stream,state);state.finished=true;stream.emit("finish")}else prefinish(stream,state)}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var util=__webpack_require__(690);util.inherits=__webpack_require__(691);var Readable=__webpack_require__(633);var Writable=__webpack_require__(634);util.inherits(Duplex,Readable);forEach(objectKeys(Writable.prototype),function(method){if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]});function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;process.nextTick(this.end.bind(this))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){module.exports=Transform;var Duplex=__webpack_require__(635);var util=__webpack_require__(690);util.inherits=__webpack_require__(691);util.inherits(Transform,Duplex);function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(!util.isNullOrUndefined(data))stream.push(data);if(cb)cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;this.once("prefinish",function(){if(util.isFunction(this._flush))this._flush(function(er){done(stream,er)});else done(stream)})}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(!util.isNull(ts.writechunk)&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}},function(module,exports,__webpack_require__){module.exports=PassThrough;var Transform=__webpack_require__(636);var util=__webpack_require__(690);util.inherits=__webpack_require__(691);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){var preferredCharsets=__webpack_require__(666);var preferredEncodings=__webpack_require__(667);var preferredLanguages=__webpack_require__(668);var preferredMediaTypes=__webpack_require__(669);module.exports=Negotiator;Negotiator.Negotiator=Negotiator;function Negotiator(request){if(!(this instanceof Negotiator)){return new Negotiator(request)}this.request=request}Negotiator.prototype.charset=function charset(available){var set=this.charsets(available);return set&&set[0]};Negotiator.prototype.charsets=function charsets(available){return preferredCharsets(this.request.headers["accept-charset"],available)};Negotiator.prototype.encoding=function encoding(available){var set=this.encodings(available);return set&&set[0]};Negotiator.prototype.encodings=function encodings(available){return preferredEncodings(this.request.headers["accept-encoding"],available)};Negotiator.prototype.language=function language(available){var set=this.languages(available);return set&&set[0]};Negotiator.prototype.languages=function languages(available){return preferredLanguages(this.request.headers["accept-language"],available)};Negotiator.prototype.mediaType=function mediaType(available){var set=this.mediaTypes(available);return set&&set[0]};Negotiator.prototype.mediaTypes=function mediaTypes(available){return preferredMediaTypes(this.request.headers.accept,available)};Negotiator.prototype.preferredCharset=Negotiator.prototype.charset;Negotiator.prototype.preferredCharsets=Negotiator.prototype.charsets;Negotiator.prototype.preferredEncoding=Negotiator.prototype.encoding;Negotiator.prototype.preferredEncodings=Negotiator.prototype.encodings;Negotiator.prototype.preferredLanguage=Negotiator.prototype.language;Negotiator.prototype.preferredLanguages=Negotiator.prototype.languages;Negotiator.prototype.preferredMediaType=Negotiator.prototype.mediaType;Negotiator.prototype.preferredMediaTypes=Negotiator.prototype.mediaTypes},function(module,exports,__webpack_require__){var db=__webpack_require__(686);exports.types=Object.create(null);exports.extensions=Object.create(null);Object.keys(db).forEach(function(name){var mime=db[name];var exts=mime.extensions;if(!exts||!exts.length)return;exports.extensions[name]=exts;exts.forEach(function(ext){exports.types[ext]=name})});exports.lookup=function(string){if(!string||typeof string!=="string")return false;string=string.replace(/.*[\.\/\\]/,"").toLowerCase();if(!string)return false;return exports.types[string]||false};exports.extension=function(type){if(!type||typeof type!=="string")return false;type=type.match(/^\s*([^;\s]*)(?:;|\s|$)/);if(!type)return false;var exts=exports.extensions[type[1].toLowerCase()];if(!exts||!exts.length)return false;return exts[0]};exports.charset=function(type){var mime=db[type];if(mime&&mime.charset)return mime.charset;if(/^text\//.test(type))return"UTF-8";return false};exports.charsets={lookup:exports.charset};exports.contentType=function(type){if(!type||typeof type!=="string")return false;if(!~type.indexOf("/"))type=exports.lookup(type);if(!type)return false;if(!~type.indexOf("charset")){var charset=exports.charset(type);if(charset)type+="; charset="+charset.toLowerCase()}return type}},function(module,exports,__webpack_require__){var paramRegExp=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g;var textRegExp=/^[\u0020-\u007e\u0080-\u00ff]+$/;var tokenRegExp=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/;var qescRegExp=/\\([\u0000-\u007f])/g;var quoteRegExp=/([\\"])/g;var subtypeNameRegExp=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/;var typeNameRegExp=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/;var typeRegExp=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;exports.format=format;exports.parse=parse;function format(obj){if(!obj||typeof obj!=="object"){throw new TypeError("argument obj is required")}var parameters=obj.parameters;var subtype=obj.subtype;var suffix=obj.suffix;var type=obj.type;if(!type||!typeNameRegExp.test(type)){throw new TypeError("invalid type")}if(!subtype||!subtypeNameRegExp.test(subtype)){throw new TypeError("invalid subtype")}var string=type+"/"+subtype;if(suffix){if(!typeNameRegExp.test(suffix)){throw new TypeError("invalid suffix")}string+="+"+suffix}if(parameters&&typeof parameters==="object"){var param;var params=Object.keys(parameters).sort();for(var i=0;i<params.length;i++){param=params[i];if(!tokenRegExp.test(param)){throw new TypeError("invalid parameter name")}string+="; "+param+"="+qstring(parameters[param])}}return string}function parse(string){if(!string){throw new TypeError("argument string is required")}if(typeof string==="object"){string=getcontenttype(string)}if(typeof string!=="string"){throw new TypeError("argument string is required to be a string")}var index=string.indexOf(";");var type=index!==-1?string.substr(0,index):string;var key;var match;var obj=splitType(type);var params={};var value;paramRegExp.lastIndex=index;while(match=paramRegExp.exec(string)){if(match.index!==index){throw new TypeError("invalid parameter format")}index+=match[0].length;key=match[1].toLowerCase();value=match[2];if(value[0]==='"'){value=value.substr(1,value.length-2).replace(qescRegExp,"$1")}params[key]=value}if(index!==-1&&index!==string.length){throw new TypeError("invalid parameter format")}obj.parameters=params;return obj}function getcontenttype(obj){if(typeof obj.getHeader==="function"){return obj.getHeader("content-type")}if(typeof obj.headers==="object"){return obj.headers&&obj.headers["content-type"]}}function qstring(val){var str=String(val);if(tokenRegExp.test(str)){return str}if(str.length>0&&!textRegExp.test(str)){throw new TypeError("invalid parameter value")}return'"'+str.replace(quoteRegExp,"\\$1")+'"'}function splitType(string){var match=typeRegExp.exec(string.toLowerCase());if(!match){throw new TypeError("invalid media type")}var type=match[1];var subtype=match[2];var suffix;var index=subtype.lastIndexOf("+");if(index!==-1){suffix=subtype.substr(index+1);subtype=subtype.substr(0,index)}var obj={type:type,subtype:subtype,suffix:suffix};return obj}},function(module,exports,__webpack_require__){var db=__webpack_require__(687);exports.types=Object.create(null);exports.extensions=Object.create(null);Object.keys(db).forEach(function(name){var mime=db[name];var exts=mime.extensions;if(!exts||!exts.length)return;exports.extensions[name]=exts;exts.forEach(function(ext){exports.types[ext]=name})});exports.lookup=function(string){if(!string||typeof string!=="string")return false;string=string.replace(/.*[\.\/\\]/,"").toLowerCase();if(!string)return false;return exports.types[string]||false};exports.extension=function(type){if(!type||typeof type!=="string")return false;type=type.match(/^\s*([^;\s]*)(?:;|\s|$)/);if(!type)return false;var exts=exports.extensions[type[1].toLowerCase()];if(!exts||!exts.length)return false;return exts[0]};exports.charset=function(type){var mime=db[type];if(mime&&mime.charset)return mime.charset;if(/^text\//.test(type))return"UTF-8";return false};exports.charsets={lookup:exports.charset};exports.contentType=function(type){if(!type||typeof type!=="string")return false;if(!~type.indexOf("/"))type=exports.lookup(type);if(!type)return false;if(!~type.indexOf("charset")){var charset=exports.charset(type);if(charset)type+="; charset="+charset.toLowerCase()}return type}},function(module,exports,__webpack_require__){module.exports=forwarded;function forwarded(req){if(!req){throw new TypeError("argument req is required")}var proxyAddrs=(req.headers["x-forwarded-for"]||"").split(/ *, */).filter(Boolean).reverse();var socketAddr=req.connection.remoteAddress;var addrs=[socketAddr].concat(proxyAddrs);return addrs}},function(module,exports,__webpack_require__){module.exports=function first(stuff,done){if(!Array.isArray(stuff))throw new TypeError("arg must be an array of [ee, events...] arrays");var cleanups=[];for(var i=0;i<stuff.length;i++){var arr=stuff[i];if(!Array.isArray(arr)||arr.length<2)throw new TypeError("each array member must be [ee, events...]");var ee=arr[0];for(var j=1;j<arr.length;j++){var event=arr[j];var fn=listener(event,callback);ee.on(event,fn);cleanups.push({ee:ee,event:event,fn:fn})}}function callback(){cleanup();done.apply(null,arguments)}function cleanup(){var x;for(var i=0;i<cleanups.length;i++){x=cleanups[i];x.ee.removeListener(x.event,x.fn)}}function thunk(fn){done=fn}thunk.cancel=cleanup;return thunk};function listener(event,done){return function onevent(arg1){var args=new Array(arguments.length);var ee=this;var err=event==="error"?arg1:null;for(var i=0;i<args.length;i++){args[i]=arguments[i]}done(err,ee,event,args)}}},function(module,exports,__webpack_require__){var ReadStream=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "fs"');e.code="MODULE_NOT_FOUND";throw e}()).ReadStream;var Stream=__webpack_require__(316);module.exports=function destroy(stream){if(stream instanceof ReadStream){return destroyReadStream(stream)}if(!(stream instanceof Stream)){return stream}if(typeof stream.destroy==="function"){stream.destroy()}return stream};function destroyReadStream(stream){stream.destroy();if(typeof stream.close==="function"){stream.on("open",onopenClose)}return stream}function onopenClose(){if(typeof this.fd==="number"){this.close()}}},function(module,exports,__webpack_require__){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},function(module,exports,__webpack_require__){var concatMap=__webpack_require__(688);var balanced=__webpack_require__(689);module.exports=expandTop;var escSlash="\x00SLASH"+Math.random()+"\x00";var escOpen="\x00OPEN"+Math.random()+"\x00";var escClose="\x00CLOSE"+Math.random()+"\x00";var escComma="\x00COMMA"+Math.random()+"\x00";var escPeriod="\x00PERIOD"+Math.random()+"\x00";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function escapeBraces(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(str){if(!str)return[""];var parts=[];var m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts)}parts.push.apply(parts,p);return parts}function expandTop(str){if(!str)return[];return expand(escapeBraces(str),true).map(unescapeBraces)}function identity(e){return e}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}function expand(str,isTop){var expansions=[];var m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=/^(.*,)+(.+)?$/.test(m.body);if(!isSequence&&!isOptions){if(m.post.match(/,.*}/)){str=m.pre+"{"+m.body+escClose+m.post;return expand(str)}return[str]}var n;if(isSequence){n=m.body.split(/\.\./)}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[""];return post.map(function(p){return m.pre+n[0]+p})}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[""];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==="\\")c=""}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");if(i<0)c="-"+z+c.slice(1);else c=z+c}}}N.push(c)}}else{N=concatMap(n,function(el){return expand(el,false)})}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion)}}return expansions}},function(module,exports,__webpack_require__){module.exports={crc1:__webpack_require__(674),crc8:__webpack_require__(675),crc81wire:__webpack_require__(676),crc16:__webpack_require__(677),crc16ccitt:__webpack_require__(678),crc16modbus:__webpack_require__(679),crc24:__webpack_require__(680),crc32:__webpack_require__(681)}},function(module,exports,__webpack_require__){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(53).Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}var StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charReceived=0;this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}},function(module,exports,__webpack_require__){(function(module){(function(){var expandIPv6,ipaddr,ipv4Part,ipv4Regexes,ipv6Part,ipv6Regexes,matchCIDR,root;ipaddr={};root=this;if(typeof module!=="undefined"&&module!==null&&module.exports){module.exports=ipaddr}else{root["ipaddr"]=ipaddr}matchCIDR=function(first,second,partSize,cidrBits){var part,shift;if(first.length!==second.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths")}part=0;while(cidrBits>0){shift=partSize-cidrBits;if(shift<0){shift=0}if(first[part]>>shift!==second[part]>>shift){return false}cidrBits-=partSize;part+=1}return true};ipaddr.subnetMatch=function(address,rangeList,defaultName){var rangeName,rangeSubnets,subnet,_i,_len;if(defaultName==null){defaultName="unicast"}for(rangeName in rangeList){rangeSubnets=rangeList[rangeName];if(toString.call(rangeSubnets[0])!=="[object Array]"){rangeSubnets=[rangeSubnets]}for(_i=0,_len=rangeSubnets.length;_i<_len;_i++){subnet=rangeSubnets[_i];if(address.match.apply(address,subnet)){return rangeName}}}return defaultName};ipaddr.IPv4=function(){function IPv4(octets){var octet,_i,_len;if(octets.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4")}for(_i=0,_len=octets.length;_i<_len;_i++){octet=octets[_i];if(!(0<=octet&&octet<=255)){throw new Error("ipaddr: ipv4 octet is a byte")}}this.octets=octets}IPv4.prototype.kind=function(){return"ipv4"};IPv4.prototype.toString=function(){return this.octets.join(".")};IPv4.prototype.toByteArray=function(){return this.octets.slice(0)};IPv4.prototype.match=function(other,cidrRange){if(other.kind()!=="ipv4"){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one")}return matchCIDR(this.octets,other.octets,8,cidrRange)};IPv4.prototype.SpecialRanges={unspecified:[[new IPv4([0,0,0,0]),8]],broadcast:[[new IPv4([255,255,255,255]),32]],multicast:[[new IPv4([224,0,0,0]),4]],linkLocal:[[new IPv4([169,254,0,0]),16]],loopback:[[new IPv4([127,0,0,0]),8]],"private":[[new IPv4([10,0,0,0]),8],[new IPv4([172,16,0,0]),12],[new IPv4([192,168,0,0]),16]],reserved:[[new IPv4([192,0,0,0]),24],[new IPv4([192,0,2,0]),24],[new IPv4([192,88,99,0]),24],[new IPv4([198,51,100,0]),24],[new IPv4([203,0,113,0]),24],[new IPv4([240,0,0,0]),4]]};IPv4.prototype.range=function(){return ipaddr.subnetMatch(this,this.SpecialRanges)};IPv4.prototype.toIPv4MappedAddress=function(){return ipaddr.IPv6.parse("::ffff:"+this.toString())};return IPv4}();ipv4Part="(0?\\d+|0x[a-f0-9]+)";ipv4Regexes={fourOctet:new RegExp("^"+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"$","i"),longValue:new RegExp("^"+ipv4Part+"$","i")};ipaddr.IPv4.parser=function(string){var match,parseIntAuto,part,shift,value;parseIntAuto=function(string){if(string[0]==="0"&&string[1]!=="x"){return parseInt(string,8)}else{return parseInt(string)}};if(match=string.match(ipv4Regexes.fourOctet)){return function(){var _i,_len,_ref,_results;_ref=match.slice(1,6);_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){part=_ref[_i];_results.push(parseIntAuto(part))}return _results}()}else if(match=string.match(ipv4Regexes.longValue)){value=parseIntAuto(match[1]);if(value>4294967295||value<0){throw new Error("ipaddr: address outside defined range")}return function(){var _i,_results;_results=[];for(shift=_i=0;_i<=24;shift=_i+=8){_results.push(value>>shift&255)}return _results}().reverse()}else{return null}};ipaddr.IPv6=function(){function IPv6(parts){var part,_i,_len;if(parts.length!==8){throw new Error("ipaddr: ipv6 part count should be 8")}for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(!(0<=part&&part<=65535)){throw new Error("ipaddr: ipv6 part should fit to two octets")}}this.parts=parts}IPv6.prototype.kind=function(){return"ipv6"};IPv6.prototype.toString=function(){var compactStringParts,part,pushPart,state,stringParts,_i,_len;stringParts=function(){var _i,_len,_ref,_results;_ref=this.parts;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){part=_ref[_i];_results.push(part.toString(16))}return _results}.call(this);compactStringParts=[];pushPart=function(part){return compactStringParts.push(part)};state=0;for(_i=0,_len=stringParts.length;_i<_len;_i++){part=stringParts[_i];switch(state){case 0:if(part==="0"){pushPart("")}else{pushPart(part)}state=1;break;case 1:if(part==="0"){state=2}else{pushPart(part)}break;case 2:if(part!=="0"){pushPart("");pushPart(part);state=3}break;case 3:pushPart(part)}}if(state===2){pushPart("");pushPart("")}return compactStringParts.join(":")};IPv6.prototype.toByteArray=function(){var bytes,part,_i,_len,_ref;bytes=[];_ref=this.parts;for(_i=0,_len=_ref.length;_i<_len;_i++){part=_ref[_i];bytes.push(part>>8);bytes.push(part&255)}return bytes};IPv6.prototype.toNormalizedString=function(){var part;return function(){var _i,_len,_ref,_results;_ref=this.parts;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){part=_ref[_i];_results.push(part.toString(16))}return _results}.call(this).join(":")};IPv6.prototype.match=function(other,cidrRange){if(other.kind()!=="ipv6"){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");

}return matchCIDR(this.parts,other.parts,16,cidrRange)};IPv6.prototype.SpecialRanges={unspecified:[new IPv6([0,0,0,0,0,0,0,0]),128],linkLocal:[new IPv6([65152,0,0,0,0,0,0,0]),10],multicast:[new IPv6([65280,0,0,0,0,0,0,0]),8],loopback:[new IPv6([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new IPv6([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new IPv6([0,0,0,0,0,65535,0,0]),96],rfc6145:[new IPv6([0,0,0,0,65535,0,0,0]),96],rfc6052:[new IPv6([100,65435,0,0,0,0,0,0]),96],"6to4":[new IPv6([8194,0,0,0,0,0,0,0]),16],teredo:[new IPv6([8193,0,0,0,0,0,0,0]),32],reserved:[[new IPv6([8193,3512,0,0,0,0,0,0]),32]]};IPv6.prototype.range=function(){return ipaddr.subnetMatch(this,this.SpecialRanges)};IPv6.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"};IPv6.prototype.toIPv4Address=function(){var high,low,_ref;if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4")}_ref=this.parts.slice(-2),high=_ref[0],low=_ref[1];return new ipaddr.IPv4([high>>8,high&255,low>>8,low&255])};return IPv6}();ipv6Part="(?:[0-9a-f]+::?)+";ipv6Regexes={"native":new RegExp("^(::)?("+ipv6Part+")?([0-9a-f]+)?(::)?$","i"),transitional:new RegExp("^((?:"+ipv6Part+")|(?:::)(?:"+ipv6Part+")?)"+(""+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"$"),"i")};expandIPv6=function(string,parts){var colonCount,lastColon,part,replacement,replacementCount;if(string.indexOf("::")!==string.lastIndexOf("::")){return null}colonCount=0;lastColon=-1;while((lastColon=string.indexOf(":",lastColon+1))>=0){colonCount++}if(string[0]===":"){colonCount--}if(string[string.length-1]===":"){colonCount--}if(colonCount>parts){return null}replacementCount=parts-colonCount;replacement=":";while(replacementCount--){replacement+="0:"}string=string.replace("::",replacement);if(string[0]===":"){string=string.slice(1)}if(string[string.length-1]===":"){string=string.slice(0,-1)}return function(){var _i,_len,_ref,_results;_ref=string.split(":");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){part=_ref[_i];_results.push(parseInt(part,16))}return _results}()};ipaddr.IPv6.parser=function(string){var match,parts;if(string.match(ipv6Regexes["native"])){return expandIPv6(string,8)}else if(match=string.match(ipv6Regexes["transitional"])){parts=expandIPv6(match[1].slice(0,-1),6);if(parts){parts.push(parseInt(match[2])<<8|parseInt(match[3]));parts.push(parseInt(match[4])<<8|parseInt(match[5]));return parts}}return null};ipaddr.IPv4.isIPv4=ipaddr.IPv6.isIPv6=function(string){return this.parser(string)!==null};ipaddr.IPv4.isValid=ipaddr.IPv6.isValid=function(string){var e;try{new this(this.parser(string));return true}catch(_error){e=_error;return false}};ipaddr.IPv4.parse=ipaddr.IPv6.parse=function(string){var parts;parts=this.parser(string);if(parts===null){throw new Error("ipaddr: string is not formatted like ip address")}return new this(parts)};ipaddr.isValid=function(string){return ipaddr.IPv6.isValid(string)||ipaddr.IPv4.isValid(string)};ipaddr.parse=function(string){if(ipaddr.IPv6.isValid(string)){return ipaddr.IPv6.parse(string)}else if(ipaddr.IPv4.isValid(string)){return ipaddr.IPv4.parse(string)}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")}};ipaddr.process=function(string){var addr;addr=this.parse(string);if(addr.kind()==="ipv6"&&addr.isIPv4MappedAddress()){return addr.toIPv4Address()}else{return addr}}}).call(this)}).call(exports,__webpack_require__(55)(module))},function(module,exports,__webpack_require__){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=="function")throw new TypeError("need wrapper function");Object.keys(fn).forEach(function(k){wrapper[k]=fn[k]});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==="function"&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k]})}return ret}}},function(module,exports,__webpack_require__){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=="function")throw new TypeError("need wrapper function");Object.keys(fn).forEach(function(k){wrapper[k]=fn[k]});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==="function"&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k]})}return ret}}},function(module,exports,__webpack_require__){(function(Buffer){module.exports=bufferConcat;function bufferConcat(bufs){var length=0;for(var i=0,len=bufs.length;i<len;i++){length+=bufs[i].length}var buf=new Buffer(length);var pos=0;for(var i=0,len=bufs.length;i<len;i++){bufs[i].copy(buf,pos);pos+=bufs[i].length}return buf}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){module.exports=callSiteToString;function callSiteFileLocation(callSite){var fileName;var fileLocation="";if(callSite.isNative()){fileLocation="native"}else if(callSite.isEval()){fileName=callSite.getScriptNameOrSourceURL();if(!fileName){fileLocation=callSite.getEvalOrigin()}}else{fileName=callSite.getFileName()}if(fileName){fileLocation+=fileName;var lineNumber=callSite.getLineNumber();if(lineNumber!=null){fileLocation+=":"+lineNumber;var columnNumber=callSite.getColumnNumber();if(columnNumber){fileLocation+=":"+columnNumber}}}return fileLocation||"unknown source"}function callSiteToString(callSite){var addSuffix=true;var fileLocation=callSiteFileLocation(callSite);var functionName=callSite.getFunctionName();var isConstructor=callSite.isConstructor();var isMethodCall=!(callSite.isToplevel()||isConstructor);var line="";if(isMethodCall){var methodName=callSite.getMethodName();var typeName=getConstructorName(callSite);if(functionName){if(typeName&&functionName.indexOf(typeName)!==0){line+=typeName+"."}line+=functionName;if(methodName&&functionName.lastIndexOf("."+methodName)!==functionName.length-methodName.length-1){line+=" [as "+methodName+"]"}}else{line+=typeName+"."+(methodName||"<anonymous>")}}else if(isConstructor){line+="new "+(functionName||"<anonymous>")}else if(functionName){line+=functionName}else{addSuffix=false;line+=fileLocation}if(addSuffix){line+=" ("+fileLocation+")"}return line}function getConstructorName(obj){var receiver=obj.receiver;return receiver.constructor&&receiver.constructor.name||null}},function(module,exports,__webpack_require__){var concatMap=__webpack_require__(692);var balanced=__webpack_require__(693);module.exports=expandTop;var escSlash="\x00SLASH"+Math.random()+"\x00";var escOpen="\x00OPEN"+Math.random()+"\x00";var escClose="\x00CLOSE"+Math.random()+"\x00";var escComma="\x00COMMA"+Math.random()+"\x00";var escPeriod="\x00PERIOD"+Math.random()+"\x00";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function escapeBraces(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(str){if(!str)return[""];var parts=[];var m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts)}parts.push.apply(parts,p);return parts}function expandTop(str){if(!str)return[];return expand(escapeBraces(str),true).map(unescapeBraces)}function identity(e){return e}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}function expand(str,isTop){var expansions=[];var m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=/^(.*,)+(.+)?$/.test(m.body);if(!isSequence&&!isOptions){if(m.post.match(/,.*}/)){str=m.pre+"{"+m.body+escClose+m.post;return expand(str)}return[str]}var n;if(isSequence){n=m.body.split(/\.\./)}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[""];return post.map(function(p){return m.pre+n[0]+p})}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[""];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==="\\")c=""}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");if(i<0)c="-"+z+c.slice(1);else c=z+c}}}N.push(c)}}else{N=concatMap(n,function(el){return expand(el,false)})}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion)}}return expansions}},function(module,exports,__webpack_require__){(function(Buffer){module.exports=bufferConcat;function bufferConcat(bufs){var length=0;for(var i=0,len=bufs.length;i<len;i++){length+=bufs[i].length}var buf=new Buffer(length);var pos=0;for(var i=0,len=bufs.length;i<len;i++){bufs[i].copy(buf,pos);pos+=bufs[i].length}return buf}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){module.exports=callSiteToString;function callSiteFileLocation(callSite){var fileName;var fileLocation="";if(callSite.isNative()){fileLocation="native"}else if(callSite.isEval()){fileName=callSite.getScriptNameOrSourceURL();if(!fileName){fileLocation=callSite.getEvalOrigin()}}else{fileName=callSite.getFileName()}if(fileName){fileLocation+=fileName;var lineNumber=callSite.getLineNumber();if(lineNumber!=null){fileLocation+=":"+lineNumber;var columnNumber=callSite.getColumnNumber();if(columnNumber){fileLocation+=":"+columnNumber}}}return fileLocation||"unknown source"}function callSiteToString(callSite){var addSuffix=true;var fileLocation=callSiteFileLocation(callSite);var functionName=callSite.getFunctionName();var isConstructor=callSite.isConstructor();var isMethodCall=!(callSite.isToplevel()||isConstructor);var line="";if(isMethodCall){var methodName=callSite.getMethodName();var typeName=getConstructorName(callSite);if(functionName){if(typeName&&functionName.indexOf(typeName)!==0){line+=typeName+"."}line+=functionName;if(methodName&&functionName.lastIndexOf("."+methodName)!==functionName.length-methodName.length-1){line+=" [as "+methodName+"]"}}else{line+=typeName+"."+(methodName||"<anonymous>")}}else if(isConstructor){line+="new "+(functionName||"<anonymous>")}else if(functionName){line+=functionName}else{addSuffix=false;line+=fileLocation}if(addSuffix){line+=" ("+fileLocation+")"}return line}function getConstructorName(obj){var receiver=obj.receiver;return receiver.constructor&&receiver.constructor.name||null}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(685);var internals={delimiter:"&",arrayPrefixGenerators:{brackets:function(prefix,key){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix,key){return prefix}}};internals.stringify=function(obj,prefix,generateArrayPrefix){if(Utils.isBuffer(obj)){obj=obj.toString()}else if(obj instanceof Date){obj=obj.toISOString()}else if(obj===null){obj=""}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"){return[encodeURIComponent(prefix)+"="+encodeURIComponent(obj)]}var values=[];if(typeof obj==="undefined"){return values}var objKeys=Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];if(Array.isArray(obj)){values=values.concat(internals.stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix))}else{values=values.concat(internals.stringify(obj[key],prefix+"["+key+"]",generateArrayPrefix))}}return values};module.exports=function(obj,options){options=options||{};var delimiter=typeof options.delimiter==="undefined"?internals.delimiter:options.delimiter;var keys=[];if(typeof obj!=="object"||obj===null){return""}var arrayFormat;if(options.arrayFormat in internals.arrayPrefixGenerators){arrayFormat=options.arrayFormat}else if("indices"in options){arrayFormat=options.indices?"indices":"repeat"}else{arrayFormat="indices"}var generateArrayPrefix=internals.arrayPrefixGenerators[arrayFormat];var objKeys=Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];keys=keys.concat(internals.stringify(obj[key],key,generateArrayPrefix))}return keys.join(delimiter)}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(685);var internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};internals.parseValues=function(str,options){var obj={};var parts=str.split(options.delimiter,options.parameterLimit===Infinity?undefined:options.parameterLimit);for(var i=0,il=parts.length;i<il;++i){var part=parts[i];var pos=part.indexOf("]=")===-1?part.indexOf("="):part.indexOf("]=")+1;if(pos===-1){obj[Utils.decode(part)]=""}else{var key=Utils.decode(part.slice(0,pos));var val=Utils.decode(part.slice(pos+1));if(Object.prototype.hasOwnProperty(key)){continue}if(!obj.hasOwnProperty(key)){obj[key]=val}else{obj[key]=[].concat(obj[key]).concat(val)}}}return obj};internals.parseObject=function(chain,val,options){if(!chain.length){return val}var root=chain.shift();var obj={};if(root==="[]"){obj=[];obj=obj.concat(internals.parseObject(chain,val,options))}else{var cleanRoot=root[0]==="["&&root[root.length-1]==="]"?root.slice(1,root.length-1):root;var index=parseInt(cleanRoot,10);var indexString=""+index;if(!isNaN(index)&&root!==cleanRoot&&indexString===cleanRoot&&index>=0&&index<=options.arrayLimit){obj=[];obj[index]=internals.parseObject(chain,val,options)}else{obj[cleanRoot]=internals.parseObject(chain,val,options)}}return obj};internals.parseKeys=function(key,val,options){if(!key){return}var parent=/^([^\[\]]*)/;var child=/(\[[^\[\]]*\])/g;var segment=parent.exec(key);if(Object.prototype.hasOwnProperty(segment[1])){return}var keys=[];if(segment[1]){keys.push(segment[1])}var i=0;while((segment=child.exec(key))!==null&&i<options.depth){++i;if(!Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,""))){keys.push(segment[1])}}if(segment){keys.push("["+key.slice(segment.index)+"]")}return internals.parseObject(keys,val,options)};module.exports=function(str,options){if(str===""||str===null||typeof str==="undefined"){return{}}options=options||{};options.delimiter=typeof options.delimiter==="string"||Utils.isRegExp(options.delimiter)?options.delimiter:internals.delimiter;options.depth=typeof options.depth==="number"?options.depth:internals.depth;options.arrayLimit=typeof options.arrayLimit==="number"?options.arrayLimit:internals.arrayLimit;options.parameterLimit=typeof options.parameterLimit==="number"?options.parameterLimit:internals.parameterLimit;var tempObj=typeof str==="string"?internals.parseValues(str,options):str;var obj={};var keys=Object.keys(tempObj);for(var i=0,il=keys.length;i<il;++i){var key=keys[i];var newObj=internals.parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj)}return Utils.compact(obj)}},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){(function(Buffer){function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;function isBuffer(arg){return Buffer.isBuffer(arg)}exports.isBuffer=isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=="function")throw new TypeError("need wrapper function");Object.keys(fn).forEach(function(k){wrapper[k]=fn[k]});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==="function"&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k]})}return ret}}},function(module,exports,__webpack_require__){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=="function")throw new TypeError("need wrapper function");Object.keys(fn).forEach(function(k){wrapper[k]=fn[k]});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==="function"&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k]})}return ret}}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(53).Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}var StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charReceived=0;this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}},function(module,exports,__webpack_require__){module.exports=preferredCharsets;preferredCharsets.preferredCharsets=preferredCharsets;function parseAcceptCharset(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var charset=parseCharset(accepts[i].trim(),i);if(charset){accepts[j++]=charset}}accepts.length=j;return accepts}function parseCharset(s,i){var match=s.match(/^\s*(\S+?)\s*(?:;(.*))?$/);if(!match)return null;var charset=match[1];var q=1;if(match[2]){var params=match[2].split(";");for(var i=0;i<params.length;i++){var p=params[i].trim().split("=");if(p[0]==="q"){q=parseFloat(p[1]);break}}}return{charset:charset,q:q,i:i}}function getCharsetPriority(charset,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(charset,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(charset,spec,index){var s=0;if(spec.charset.toLowerCase()===charset.toLowerCase()){s|=1}else if(spec.charset!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredCharsets(accept,provided){var accepts=parseAcceptCharset(accept===undefined?"*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(function getCharset(spec){return spec.charset})}var priorities=provided.map(function getPriority(type,index){return getCharsetPriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getCharset(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function isQuality(spec){return spec.q>0}},function(module,exports,__webpack_require__){module.exports=preferredEncodings;preferredEncodings.preferredEncodings=preferredEncodings;function parseAcceptEncoding(accept){var accepts=accept.split(",");var hasIdentity=false;var minQuality=1;for(var i=0,j=0;i<accepts.length;i++){var encoding=parseEncoding(accepts[i].trim(),i);if(encoding){accepts[j++]=encoding;hasIdentity=hasIdentity||specify("identity",encoding);minQuality=Math.min(minQuality,encoding.q||1)}}if(!hasIdentity){accepts[j++]={encoding:"identity",q:minQuality,i:i}}accepts.length=j;return accepts}function parseEncoding(s,i){var match=s.match(/^\s*(\S+?)\s*(?:;(.*))?$/);if(!match)return null;var encoding=match[1];var q=1;if(match[2]){var params=match[2].split(";");for(var i=0;i<params.length;i++){var p=params[i].trim().split("=");if(p[0]==="q"){q=parseFloat(p[1]);break}}}return{encoding:encoding,q:q,i:i}}function getEncodingPriority(encoding,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(encoding,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(encoding,spec,index){var s=0;if(spec.encoding.toLowerCase()===encoding.toLowerCase()){s|=1}else if(spec.encoding!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredEncodings(accept,provided){var accepts=parseAcceptEncoding(accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(function getEncoding(spec){return spec.encoding})}var priorities=provided.map(function getPriority(type,index){return getEncodingPriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getEncoding(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function isQuality(spec){return spec.q>0}},function(module,exports,__webpack_require__){module.exports=preferredLanguages;preferredLanguages.preferredLanguages=preferredLanguages;function parseAcceptLanguage(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var langauge=parseLanguage(accepts[i].trim(),i);if(langauge){accepts[j++]=langauge}}accepts.length=j;return accepts}function parseLanguage(s,i){var match=s.match(/^\s*(\S+?)(?:-(\S+?))?\s*(?:;(.*))?$/);if(!match)return null;var prefix=match[1],suffix=match[2],full=prefix;if(suffix)full+="-"+suffix;var q=1;if(match[3]){var params=match[3].split(";");for(var i=0;i<params.length;i++){var p=params[i].split("=");if(p[0]==="q")q=parseFloat(p[1])}}return{prefix:prefix,suffix:suffix,q:q,i:i,full:full}}function getLanguagePriority(language,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(language,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(language,spec,index){var p=parseLanguage(language);if(!p)return null;var s=0;if(spec.full.toLowerCase()===p.full.toLowerCase()){s|=4}else if(spec.prefix.toLowerCase()===p.full.toLowerCase()){s|=2}else if(spec.full.toLowerCase()===p.prefix.toLowerCase()){s|=1}else if(spec.full!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredLanguages(accept,provided){var accepts=parseAcceptLanguage(accept===undefined?"*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(function getLanguage(spec){return spec.full})}var priorities=provided.map(function getPriority(type,index){return getLanguagePriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getLanguage(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function isQuality(spec){return spec.q>0}},function(module,exports,__webpack_require__){module.exports=preferredMediaTypes;preferredMediaTypes.preferredMediaTypes=preferredMediaTypes;function parseAccept(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var mediaType=parseMediaType(accepts[i].trim(),i);if(mediaType){accepts[j++]=mediaType}}accepts.length=j;return accepts}function parseMediaType(s,i){var match=s.match(/\s*(\S+?)\/([^;\s]+)\s*(?:;(.*))?/);if(!match)return null;var type=match[1],subtype=match[2],full=""+type+"/"+subtype,params={},q=1;if(match[3]){params=match[3].split(";").map(function(s){return s.trim().split("=")}).reduce(function(set,p){set[p[0]]=p[1];return set},params);if(params.q!=null){q=parseFloat(params.q);delete params.q}}return{type:type,subtype:subtype,params:params,q:q,i:i,full:full}}function getMediaTypePriority(type,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(type,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(type,spec,index){var p=parseMediaType(type);var s=0;if(!p){return null}if(spec.type.toLowerCase()==p.type.toLowerCase()){s|=4}else if(spec.type!="*"){return null}if(spec.subtype.toLowerCase()==p.subtype.toLowerCase()){s|=2}else if(spec.subtype!="*"){return null}var keys=Object.keys(spec.params);if(keys.length>0){if(keys.every(function(k){return spec.params[k]=="*"||(spec.params[k]||"").toLowerCase()==(p.params[k]||"").toLowerCase()})){s|=1}else{return null}}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredMediaTypes(accept,provided){var accepts=parseAccept(accept===undefined?"*/*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(function getType(spec){return spec.full})}var priorities=provided.map(function getPriority(type,index){return getMediaTypePriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getType(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function isQuality(spec){return spec.q>0}},function(module,exports,__webpack_require__){var SecurityCredentialsNative=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "../../../build/Release/kerberos"');e.code="MODULE_NOT_FOUND";throw e}()).SecurityCredentials;SecurityCredentialsNative.aquire_kerberos=function(username,password,domain,callback){if(typeof password=="function"){callback=password;password=null}else if(typeof domain=="function"){callback=domain;domain=null}if(typeof callback=="function"){return SecurityCredentialsNative.aquire("Kerberos",username,password,domain,callback)}else{return SecurityCredentialsNative.aquireSync("Kerberos",username,password,domain)}};exports.SecurityCredentials=SecurityCredentialsNative},function(module,exports,__webpack_require__){var SecurityContextNative=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "../../../build/Release/kerberos"');e.code="MODULE_NOT_FOUND";throw e}()).SecurityContext;exports.SecurityContext=SecurityContextNative},function(module,exports,__webpack_require__){var SecurityBufferNative=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "../../../build/Release/kerberos"');e.code="MODULE_NOT_FOUND";throw e}()).SecurityBuffer;SecurityBufferNative.VERSION=0;SecurityBufferNative.EMPTY=0;SecurityBufferNative.DATA=1;SecurityBufferNative.TOKEN=2;SecurityBufferNative.PADDING=9;SecurityBufferNative.STREAM=10;exports.SecurityBuffer=SecurityBufferNative},function(module,exports,__webpack_require__){var SecurityBufferDescriptorNative=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "../../../build/Release/kerberos"');e.code="MODULE_NOT_FOUND";throw e}()).SecurityBufferDescriptor;exports.SecurityBufferDescriptor=SecurityBufferDescriptorNative},function(module,exports,__webpack_require__){var Buffer,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);module.exports=create("crc1",function(buf,previous){var accum,byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;accum=0;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];accum+=byte}crc+=accum%256;return crc%256})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];

if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-8",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=TABLE[(crc^byte)&255]&255}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("dallas-1-wire",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=TABLE[(crc^byte)&255]&255}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-16",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc^byte)&255]^crc>>8)&65535}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("ccitt",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous!=null?~~previous:65535;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc>>8^byte)&255]^crc<<8)&65535}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-16-modbus",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous!=null?~~previous:65535;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc^byte)&255]^crc>>8)&65535}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,8801531,9098509,825846,9692897,1419802,1651692,10452759,10584377,2608578,2839604,11344079,3303384,11807523,12104405,4128302,12930697,4391538,5217156,13227903,5679208,13690003,14450021,5910942,6606768,14844747,15604413,6837830,16197969,7431594,8256604,16494759,840169,9084178,8783076,18463,10434312,1670131,1434117,9678590,11358416,2825259,2590173,10602790,4109873,12122826,11821884,3289031,13213536,5231515,4409965,12912278,5929345,14431610,13675660,5693559,6823513,15618722,14863188,6588335,16513208,8238147,7417269,16212302,1680338,10481449,9664223,1391140,9061683,788936,36926,8838341,12067563,4091408,3340262,11844381,2868234,11372785,10555655,2579964,14478683,5939616,5650518,13661357,5180346,13190977,12967607,4428364,8219746,16457881,16234863,7468436,15633027,6866552,6578062,14816117,1405499,9649856,10463030,1698765,8819930,55329,803287,9047340,11858690,3325945,4072975,12086004,2561507,10574104,11387118,2853909,13647026,5664841,5958079,14460228,4446803,12949160,13176670,5194661,7454091,16249200,16476294,8201341,14834538,6559633,6852199,15647388,3360676,11864927,12161705,4185682,10527045,2551230,2782280,11286707,9619101,1346150,1577872,10379115,73852,8875143,9172337,899466,16124205,7357910,8182816,16421083,6680524,14918455,15678145,6911546,5736468,13747439,14507289,5968354,12873461,4334094,5159928,13170435,4167245,12180150,11879232,3346363,11301036,2767959,2532769,10545498,10360692,1596303,1360505,9604738,913813,9157998,8856728,92259,16439492,8164415,7343561,16138546,6897189,15692510,14936872,6662099,5986813,14488838,13733104,5750795,13156124,5174247,4352529,12855018,2810998,11315341,10498427,2522496,12124823,4148844,3397530,11901793,9135439,862644,110658,8912057,1606574,10407765,9590435,1317464,15706879,6940164,6651890,14889737,8145950,16384229,16161043,7394792,5123014,13133629,12910283,4370992,14535975,5997020,5707818,13718737,2504095,10516836,11329682,2796649,11916158,3383173,4130419,12143240,8893606,129117,876971,9121104,1331783,9576124,10389322,1625009,14908182,6633453,6925851,15721184,7380471,16175372,16402682,8127489,4389423,12891860,13119266,5137369,13704398,5722165,6015427,14517560];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-24",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous!=null?~~previous:11994318;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc>>16^byte)&255]^crc<<8)&16777215}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(694);TABLE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-32",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous===0?0:~~previous^-1;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=TABLE[(crc^byte)&255]^crc>>>8}return crc^-1})},function(module,exports,__webpack_require__){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},function(module,exports,__webpack_require__){module.exports={crc1:__webpack_require__(695),crc8:__webpack_require__(696),crc81wire:__webpack_require__(697),crc16:__webpack_require__(698),crc16ccitt:__webpack_require__(699),crc16modbus:__webpack_require__(700),crc24:__webpack_require__(701),crc32:__webpack_require__(702)}},function(module,exports,__webpack_require__){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},function(module,exports,__webpack_require__){var internals={};exports.arrayToObject=function(source){var obj={};for(var i=0,il=source.length;i<il;++i){if(typeof source[i]!=="undefined"){obj[i]=source[i]}}return obj};exports.merge=function(target,source){if(!source){return target}if(typeof source!=="object"){if(Array.isArray(target)){target.push(source)}else{target[source]=true}return target}if(typeof target!=="object"){target=[target].concat(source);return target}if(Array.isArray(target)&&!Array.isArray(source)){target=exports.arrayToObject(target)}var keys=Object.keys(source);for(var k=0,kl=keys.length;k<kl;++k){var key=keys[k];var value=source[key];if(!target[key]){target[key]=value}else{target[key]=exports.merge(target[key],value)}}return target};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.compact=function(obj,refs){if(typeof obj!=="object"||obj===null){return obj}refs=refs||[];var lookup=refs.indexOf(obj);if(lookup!==-1){return refs[lookup]}refs.push(obj);if(Array.isArray(obj)){var compacted=[];for(var i=0,il=obj.length;i<il;++i){if(typeof obj[i]!=="undefined"){compacted.push(obj[i])}}return compacted}var keys=Object.keys(obj);for(i=0,il=keys.length;i<il;++i){var key=keys[i];obj[key]=exports.compact(obj[key],refs)}return obj};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.isBuffer=function(obj){if(obj===null||typeof obj==="undefined"){return false}return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "./db.json"');e.code="MODULE_NOT_FOUND";throw e}())},function(module,exports,__webpack_require__){module.exports=__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "./db.json"');e.code="MODULE_NOT_FOUND";throw e}())},function(module,exports,__webpack_require__){module.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x)}return res};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){module.exports=balanced;function balanced(a,b,str){var bal=0;var m={};var ended=false;for(var i=0;i<str.length;i++){if(a==str.substr(i,a.length)){if(!("start"in m))m.start=i;bal++}else if(b==str.substr(i,b.length)&&"start"in m){ended=true;bal--;if(!bal){m.end=i;m.pre=str.substr(0,m.start);m.body=m.end-m.start>1?str.substring(m.start+a.length,m.end):"";m.post=str.slice(m.end+b.length);return m}}}if(bal&&ended){var start=m.start+a.length;m=balanced(a,b,str.substr(start));if(m){m.start+=start;m.end+=start;m.pre=str.slice(0,start)+m.pre}return m}}},function(module,exports,__webpack_require__){(function(Buffer){function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;function isBuffer(arg){return Buffer.isBuffer(arg)}exports.isBuffer=isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(exports,__webpack_require__(53).Buffer)},function(module,exports,__webpack_require__){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){module.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x)}return res};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){module.exports=balanced;function balanced(a,b,str){var bal=0;var m={};var ended=false;for(var i=0;i<str.length;i++){if(a==str.substr(i,a.length)){if(!("start"in m))m.start=i;bal++}else if(b==str.substr(i,b.length)&&"start"in m){ended=true;bal--;if(!bal){m.end=i;m.pre=str.substr(0,m.start);m.body=m.end-m.start>1?str.substring(m.start+a.length,m.end):"";m.post=str.slice(m.end+b.length);return m}}}if(bal&&ended){var start=m.start+a.length;m=balanced(a,b,str.substr(start));if(m){m.start+=start;m.end+=start;m.pre=str.slice(0,start)+m.pre}return m}}},function(module,exports,__webpack_require__){module.exports=function(model,calc){var fn;fn=function(buf,previous){return calc(buf,previous)>>>0};fn.signed=calc;fn.unsigned=fn;fn.model=model;return fn}},function(module,exports,__webpack_require__){var Buffer,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);module.exports=create("crc1",function(buf,previous){var accum,byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;accum=0;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];accum+=byte}crc+=accum%256;return crc%256})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-8",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=TABLE[(crc^byte)&255]&255}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("dallas-1-wire",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=TABLE[(crc^byte)&255]&255}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-16",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=~~previous;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc^byte)&255]^crc>>8)&65535}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("ccitt",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous!=null?~~previous:65535;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc>>8^byte)&255]^crc<<8)&65535}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-16-modbus",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous!=null?~~previous:65535;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc^byte)&255]^crc>>8)&65535}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,8801531,9098509,825846,9692897,1419802,1651692,10452759,10584377,2608578,2839604,11344079,3303384,11807523,12104405,4128302,12930697,4391538,5217156,13227903,5679208,13690003,14450021,5910942,6606768,14844747,15604413,6837830,16197969,7431594,8256604,16494759,840169,9084178,8783076,18463,10434312,1670131,1434117,9678590,11358416,2825259,2590173,10602790,4109873,12122826,11821884,3289031,13213536,5231515,4409965,12912278,5929345,14431610,13675660,5693559,6823513,15618722,14863188,6588335,16513208,8238147,7417269,16212302,1680338,10481449,9664223,1391140,9061683,788936,36926,8838341,12067563,4091408,3340262,11844381,2868234,11372785,10555655,2579964,14478683,5939616,5650518,13661357,5180346,13190977,12967607,4428364,8219746,16457881,16234863,7468436,15633027,6866552,6578062,14816117,1405499,9649856,10463030,1698765,8819930,55329,803287,9047340,11858690,3325945,4072975,12086004,2561507,10574104,11387118,2853909,13647026,5664841,5958079,14460228,4446803,12949160,13176670,5194661,7454091,16249200,16476294,8201341,14834538,6559633,6852199,15647388,3360676,11864927,12161705,4185682,10527045,2551230,2782280,11286707,9619101,1346150,1577872,10379115,73852,8875143,9172337,899466,16124205,7357910,8182816,16421083,6680524,14918455,15678145,6911546,5736468,13747439,14507289,5968354,12873461,4334094,5159928,13170435,4167245,12180150,11879232,3346363,11301036,2767959,2532769,10545498,10360692,1596303,1360505,9604738,913813,9157998,8856728,92259,16439492,8164415,7343561,16138546,6897189,15692510,14936872,6662099,5986813,14488838,13733104,5750795,13156124,5174247,4352529,12855018,2810998,11315341,10498427,2522496,12124823,4148844,3397530,11901793,9135439,862644,110658,8912057,1606574,10407765,9590435,1317464,15706879,6940164,6651890,14889737,8145950,16384229,16161043,7394792,5123014,13133629,12910283,4370992,14535975,5997020,5707818,13718737,2504095,10516836,11329682,2796649,11916158,3383173,4130419,12143240,8893606,129117,876971,9121104,1331783,9576124,10389322,1625009,14908182,6633453,6925851,15721184,7380471,16175372,16402682,8127489,4389423,12891860,13119266,5137369,13704398,5722165,6015427,14517560];

if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-24",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous!=null?~~previous:11994318;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=(TABLE[(crc>>16^byte)&255]^crc<<8)&16777215}return crc})},function(module,exports,__webpack_require__){var Buffer,TABLE,create;Buffer=__webpack_require__(53).Buffer;create=__webpack_require__(705);TABLE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined"){TABLE=new Int32Array(TABLE)}module.exports=create("crc-32",function(buf,previous){var byte,crc,_i,_len;if(!Buffer.isBuffer(buf)){buf=Buffer(buf)}crc=previous===0?0:~~previous^-1;for(_i=0,_len=buf.length;_i<_len;_i++){byte=buf[_i];crc=TABLE[(crc^byte)&255]^crc>>>8}return crc^-1})},,,function(module,exports,__webpack_require__){module.exports=function(model,calc){var fn;fn=function(buf,previous){return calc(buf,previous)>>>0};fn.signed=calc;fn.unsigned=fn;fn.model=model;return fn}}])});
//# sourceMappingURL=mmeddle.map